services:
  backend:
    image: ghcr.io/samwelmagaiwa/eabms-backend:latest
    container_name: eabms_backend

    environment:
      APP_NAME: "EABMS, Access and Booking management system"
      APP_ENV: production
      APP_DEBUG: "false"
      APP_KEY: base64:iDBpDRUav/eeZD3lKtTIo4OZ2lIeitDKnhJ8CYLMkDw=
      APP_URL: http://eabms.mloganzila.or.tz
      
      DB_CONNECTION: mysql
      DB_HOST: 192.168.30.246
      DB_PORT: 3306
      DB_DATABASE: eabms_prod
      DB_USERNAME: samwel_eabms
      DB_PASSWORD: Samwel123@
      
      SESSION_DRIVER: database
      
      # SMS Service Configuration - Kilakona
      SMS_ENABLED: "true"
      SMS_API_URL: https://messaging.kilakona.co.tz/api/v1/vendor/message/send
      SMS_API_KEY: chimwege
      SMS_API_SECRET: f5IZEc5o8PeXi9l5ilOo
      SMS_SENDER_ID: MLG
      SMS_SENDER_NAME: MLG
      SMS_VERIFY_SSL: "false"
      
      # Additional Production Overrides
      CORS_ALLOWED_ORIGINS: http://eabms.mloganzila.or.tz
      SANCTUM_STATEFUL_DOMAINS: eabms.mloganzila.or.tz
      
    volumes:
      - ./storage:/var/www/storage
      - ./bootstrap/cache:/var/www/bootstrap/cache
      - app_data:/var/www

  nginx:
    # ... rest of services ...
