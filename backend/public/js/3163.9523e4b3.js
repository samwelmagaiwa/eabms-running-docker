"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[3163],{8955:function(e,t,a){a.r(t),a.d(t,{default:function(){return be}});var o=a(5796);const r={class:"flex flex-col h-screen"},s={class:"flex flex-1 overflow-hidden"},l={class:"flex-1 p-2 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0"},d={class:"max-w-12xl mx-auto relative z-10"},u={class:"booking-glass-card rounded-t-3xl p-4 mb-0 border-b border-blue-300/30 animate-fade-in"},c={class:"flex justify-between items-center"},b={class:"text-center flex-1"},m={class:"text-lg font-semibold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay"},f={key:0,class:"booking-glass-card rounded-b-3xl overflow-hidden animate-slide-up"},g={key:1,class:"booking-glass-card rounded-b-3xl overflow-hidden animate-slide-up"},v={key:0,class:"bg-gradient-to-r from-red-600/25 to-red-700/25 border border-red-400/40 p-3 m-4 mb-0 rounded-xl"},p={class:"flex items-start space-x-3"},k={class:"text-red-200 text-sm"},x={class:"booking-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border border-blue-400/40 p-4 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},h={class:"space-y-3"},w={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},y={class:"group"},L={class:"relative"},_={key:0,class:"text-red-400 text-xs mt-1 flex items-center"},D={class:"group"},E={class:"relative"},q=["min"],C={key:0,class:"text-red-400 text-xs mt-1 flex items-center"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},T={class:"group"},I={class:"relative"},S=["value"],j={key:0,class:"group"},B={class:"relative"},F=["required"],A={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},M={class:"group"},X={class:"relative"},W=["value"],K={class:"group"},U={class:"relative"},$=["min"],O={key:0,class:"text-red-400 text-xs mt-1 flex items-center"},Q={class:"group"},V={class:"relative"},J={class:"flex justify-between text-xs text-blue-200/50 mt-0.5"},N={class:"bg-gradient-to-r from-blue-600/10 to-blue-700/10 border-t border-blue-400/20 pt-3 mt-3 rounded-b-xl"},z={class:"flex flex-col sm:flex-row justify-between items-center gap-2"},Y=["disabled"],G={class:"mt-2 text-center"},H={class:"text-blue-200/50 text-xs"},P={key:2,class:"booking-glass-card rounded-b-3xl overflow-hidden animate-slide-up"},Z={class:"p-6 text-center"},ee={class:"flex flex-col items-center space-y-3"};function te(e,t,a,te,ae,oe){const re=(0,o.g2)("AppHeader"),se=(0,o.g2)("ModernSidebar");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(re),(0,o.Lk)("div",s,[(0,o.bF)(se),(0,o.Lk)("main",l,[(0,o.Lk)("div",i,[(0,o.Lk)("div",n,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(20,e=>(0,o.Lk)("div",{key:e,class:"absolute text-white opacity-5 animate-float",style:(0,o.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:15*Math.random()+8+"px"})},[(0,o.Lk)("i",{class:(0,o.C4)(["fas",["fa-laptop","fa-tv","fa-desktop","fa-keyboard","fa-mouse","fa-headphones"][Math.floor(6*Math.random())]])},null,2)],4)),64))])]),(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",c,[t[12]||(t[12]=(0,o.Lk)("div",{class:"w-16 h-16 mr-4 transform hover:scale-110 transition-transform duration-300"},[(0,o.Lk)("div",{class:"w-full h-full bg-gradient-to-br from-blue-500/20 to-blue-400/20 rounded-xl backdrop-blur-sm border border-blue-300/40 flex items-center justify-center shadow-lg hover:shadow-blue-500/25"},[(0,o.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-10 max-h-10 object-contain"})])],-1)),(0,o.Lk)("div",b,[t[11]||(t[11]=(0,o.Fv)('<h1 class="text-2xl font-bold text-white mb-2 tracking-wide drop-shadow-lg animate-fade-in" data-v-073ea1bf> EDIT BOOKING REQUEST </h1><div class="relative inline-block mb-2" data-v-073ea1bf><div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-full text-sm font-bold shadow-xl transform hover:scale-105 transition-all duration-300 border border-blue-400/60" data-v-073ea1bf><span class="relative z-10 flex items-center gap-2" data-v-073ea1bf><i class="fas fa-edit text-xs" data-v-073ea1bf></i> MODIFY REJECTED REQUEST </span></div></div>',2)),(0,o.Lk)("h2",m," Request ID: #"+(0,o.v_)(te.requestId),1)]),t[13]||(t[13]=(0,o.Lk)("div",{class:"w-16 h-16 ml-4 transform hover:scale-110 transition-transform duration-300"},[(0,o.Lk)("div",{class:"w-full h-full bg-gradient-to-br from-blue-400/20 to-blue-500/20 rounded-xl backdrop-blur-sm border border-blue-300/40 flex items-center justify-center shadow-lg hover:shadow-blue-500/25"},[(0,o.Lk)("img",{src:"/assets/images/logo2.png",alt:"Muhimbili Logo",class:"max-w-10 max-h-10 object-contain"})])],-1))])]),te.loading?((0,o.uX)(),(0,o.CE)("div",f,[...t[14]||(t[14]=[(0,o.Fv)('<div class="p-6 text-center" data-v-073ea1bf><div class="flex flex-col items-center space-y-3" data-v-073ea1bf><div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg animate-bounce-gentle" data-v-073ea1bf><i class="fas fa-spinner fa-spin text-white text-lg" data-v-073ea1bf></i></div><h3 class="text-lg font-bold text-white" data-v-073ea1bf>Loading Request...</h3><p class="text-blue-200 text-sm" data-v-073ea1bf>Please wait while we load your request data</p></div></div>',1)])])):te.originalRequest?((0,o.uX)(),(0,o.CE)("div",g,[te.originalRequest.ict_notes?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",p,[t[16]||(t[16]=(0,o.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0"},[(0,o.Lk)("i",{class:"fas fa-exclamation-triangle text-white text-sm"})],-1)),(0,o.Lk)("div",null,[t[15]||(t[15]=(0,o.Lk)("h4",{class:"text-red-100 font-semibold text-sm mb-1"},"Rejection Reason:",-1)),(0,o.Lk)("p",k,(0,o.v_)(te.originalRequest.ict_notes),1)])])])):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[9]||(t[9]=(0,o.D$)((...e)=>te.updateBooking&&te.updateBooking(...e),["prevent"])),class:"p-4 space-y-4"},[(0,o.Lk)("div",x,[t[30]||(t[30]=(0,o.Fv)('<div class="flex items-center space-x-3 mb-3" data-v-073ea1bf><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50" data-v-073ea1bf><i class="fas fa-calendar-alt text-white text-sm" data-v-073ea1bf></i></div><h3 class="text-lg font-bold text-white flex items-center" data-v-073ea1bf><i class="fas fa-info-circle mr-2 text-blue-300" data-v-073ea1bf></i> Booking Information </h3></div>',1)),(0,o.Lk)("div",h,[(0,o.Lk)("div",w,[(0,o.Lk)("div",y,[t[18]||(t[18]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-user mr-2 text-blue-300 text-xs"}),(0,o.eW)(" Name of Borrower "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",L,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>te.formData.borrower_name=e),type:"text",class:"booking-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",placeholder:"Enter borrower name",required:""},null,512),[[o.Jo,te.formData.borrower_name]])]),te.errors.borrower_name?((0,o.uX)(),(0,o.CE)("div",_,[t[17]||(t[17]=(0,o.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,o.eW)(" "+(0,o.v_)(te.errors.borrower_name),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",D,[t[20]||(t[20]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-calendar mr-2 text-blue-300 text-xs"}),(0,o.eW)(" Booking Date "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",E,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>te.formData.booking_date=e),type:"date",min:te.minDate,class:"booking-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",required:""},null,8,q),[[o.Jo,te.formData.booking_date]])]),te.errors.booking_date?((0,o.uX)(),(0,o.CE)("div",C,[t[19]||(t[19]=(0,o.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,o.eW)(" "+(0,o.v_)(te.errors.booking_date),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",R,[(0,o.Lk)("div",T,[t[22]||(t[22]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-laptop mr-2 text-blue-300 text-xs"}),(0,o.eW)(" Device Type "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",I,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>te.formData.device_type=e),onChange:t[3]||(t[3]=(...e)=>te.onDeviceTypeChange&&te.onDeviceTypeChange(...e)),class:"booking-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",required:""},[t[21]||(t[21]=(0,o.Lk)("option",{value:"",disabled:""},"Select a device type",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(te.deviceTypes,e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value,class:"bg-blue-800 text-white"},(0,o.v_)(e.label),9,S))),128))],544),[[o.u1,te.formData.device_type]])])]),"others"===te.formData.device_type?((0,o.uX)(),(0,o.CE)("div",j,[t[23]||(t[23]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-edit mr-2 text-blue-300 text-xs"}),(0,o.eW)(" Custom Device Name "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",B,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>te.formData.custom_device=e),type:"text",class:"booking-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",placeholder:"Specify device name",required:"others"===te.formData.device_type},null,8,F),[[o.Jo,te.formData.custom_device]])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",A,[(0,o.Lk)("div",M,[t[25]||(t[25]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-building mr-2 text-blue-300 text-xs"}),(0,o.eW)(" Department "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",X,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>te.formData.department=e),class:"booking-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",required:""},[t[24]||(t[24]=(0,o.Lk)("option",{value:"",disabled:""},"Select department",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(te.departments,e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.name,class:"bg-blue-800 text-white"},(0,o.v_)(e.label),9,W))),128))],512),[[o.u1,te.formData.department]])])]),(0,o.Lk)("div",K,[t[27]||(t[27]=(0,o.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-calendar-check mr-2 text-blue-300"}),(0,o.eW)(" Return Date & Time "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",U,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>te.returnDateTimeModel=e),type:"datetime-local",min:te.minReturnDateTime,class:"booking-input w-full px-3 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",required:""},null,8,$),[[o.Jo,te.returnDateTimeModel]])]),te.errors.return_date||te.errors.return_time?((0,o.uX)(),(0,o.CE)("div",O,[t[26]||(t[26]=(0,o.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,o.eW)(" "+(0,o.v_)(te.errors.return_date||te.errors.return_time),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Q,[t[29]||(t[29]=(0,o.Lk)("label",{class:"block text-sm font-semibold text-blue-100 mb-1 flex items-center"},[(0,o.Lk)("i",{class:"fas fa-comment-alt mr-2 text-orange-300 text-xs"}),(0,o.eW)(" Reason for Booking "),(0,o.Lk)("span",{class:"text-red-400 ml-1"},"*")],-1)),(0,o.Lk)("div",V,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>te.formData.reason=e),class:"booking-input w-full px-3 py-2 bg-white/15 border border-orange-300/30 rounded-lg focus:border-orange-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-orange-500/20 group-hover:border-orange-400/50 resize-none",rows:"2",placeholder:"Brief reason for your booking request",maxlength:"1000",required:""},null,512),[[o.Jo,te.formData.reason]])]),(0,o.Lk)("div",J,[t[28]||(t[28]=(0,o.Lk)("span",null,"Brief explanation",-1)),(0,o.Lk)("span",null,(0,o.v_)(te.formData.reason?te.formData.reason.length:0)+"/1000",1)])])])]),(0,o.Lk)("div",N,[(0,o.Lk)("div",z,[(0,o.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>te.goBack&&te.goBack(...e)),class:"w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg font-medium hover:from-gray-700 hover:to-gray-800 transition-all duration-300 flex items-center justify-center space-x-2 border border-gray-500/50 hover:border-gray-400/50 shadow-md"},[...t[31]||(t[31]=[(0,o.Lk)("i",{class:"fas fa-arrow-left text-sm"},null,-1),(0,o.Lk)("span",null,"Cancel",-1)])]),(0,o.Lk)("button",{type:"submit",disabled:te.submitting,class:"w-full sm:w-auto px-5 py-2 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-300 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-orange-500/20 border border-orange-400/50"},[(0,o.Lk)("i",{class:(0,o.C4)(["fas fa-save text-sm",{"fa-spin":te.submitting}])},null,2),(0,o.Lk)("span",null,(0,o.v_)(te.submitting?"Updating...":"Update & Resubmit"),1)],8,Y)]),(0,o.Lk)("div",G,[(0,o.Lk)("p",H," ID: "+(0,o.v_)(te.requestId)+" | Status: "+(0,o.v_)(te.originalRequest?.ict_approve||"Loading..."),1)])])],32)])):te.loading?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("div",Z,[(0,o.Lk)("div",ee,[t[33]||(t[33]=(0,o.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg"},[(0,o.Lk)("i",{class:"fas fa-exclamation-triangle text-white text-lg"})],-1)),t[34]||(t[34]=(0,o.Lk)("h3",{class:"text-lg font-bold text-white"},"Request Not Found",-1)),t[35]||(t[35]=(0,o.Lk)("p",{class:"text-blue-200 text-sm"}," The requested booking could not be found or you don't have permission to edit it. ",-1)),(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>te.goBack&&te.goBack(...e)),class:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-md hover:shadow-blue-500/20 border border-blue-400/50"},[...t[32]||(t[32]=[(0,o.Lk)("i",{class:"fas fa-arrow-left mr-2 text-sm"},null,-1),(0,o.Lk)("span",null,"Go Back",-1)])])])])]))])])])])}a(4114),a(8111),a(2489),a(1701);var ae=a(1387),oe=a(1127),re=a(8966),se=a(6933),le=a(274),ie=a(6464),ne=a(59),de={name:"EditBookingRequest",components:{ModernSidebar:re.A,AppHeader:se.A},setup(){const e=(0,ae.rd)(),t=(0,ae.lq)(),{requireRole:a,ROLES:r}=(0,oe.h)(),s=(0,ne.i)(),l=(0,o.KR)(!0),i=(0,o.KR)(!1),n=(0,o.KR)(t.query.id||""),d=(0,o.KR)(null),u=(0,o.KR)({}),c=(0,o.KR)([]),b=(0,o.KR)([]),m=(0,o.KR)({borrower_name:"",department:"",booking_date:"",return_date:"",return_time:"",device_type:"",custom_device:"",reason:""}),f=(0,o.EW)(()=>{const e=new Date;return e.toISOString().split("T")[0]}),g=(0,o.EW)(()=>{const e=m.value.booking_date||f.value;return`${e}T00:00`}),v=(0,o.EW)({get(){if(!m.value.return_date)return"";const e=(m.value.return_time||"00:00").slice(0,5);return`${m.value.return_date}T${e}`},set(e){if(!e)return m.value.return_date="",void(m.value.return_time="");const t=String(e).split("T");m.value.return_date=t[0]||"",m.value.return_time=(t[1]||"").slice(0,5)}});(0,o.sV)(()=>{a([r.STAFF,r.ICT_OFFICER,r.SECRETARY_ICT]),p(),k(),x()});const p=async()=>{try{const e=await ie.z.getUserBookings();if(e.success){e.data;const t=e.data.data||e.data.bookings||e.data;if(Array.isArray(t)){t.map(e=>({id:e.id,status:e.status,ict_approve:e.ict_approve,device:e.device_type,canEdit:"rejected"===e.ict_approve}));const e=t.filter(e=>"rejected"===e.ict_approve);e.map(e=>({id:e.id,status:e.status,ict_approve:e.ict_approve,device:e.device_type})),0===e.length||e.length}}}catch(e){}},k=async()=>{if(n.value)try{localStorage.getItem("user_data")&&JSON.parse(localStorage.getItem("user_data"));n.value,localStorage.getItem("auth_token");const e=await le.A.get(`/booking-service/bookings/${n.value}`);if(!e.data.success)throw new Error(e.data.message||"Failed to load booking request");if(d.value=e.data.data,e.data.data.id,e.data.data.status,e.data.data.ict_approve,e.data.data.ict_approve,"rejected"!==e.data.data.ict_approve)return alert(`Only rejected booking requests can be edited.\n\nCurrent status:\n- Status: ${e.data.data.status}\n- ICT Approval: ${e.data.data.ict_approve}\n\nThis booking cannot be edited because it has not been rejected by ICT.`),void y();m.value={borrower_name:e.data.data.borrower_name||"",department:e.data.data.department||"",booking_date:e.data.data.booking_date||"",return_date:e.data.data.return_date||"",return_time:e.data.data.return_time||"",device_type:e.data.data.device_type||"",custom_device:e.data.data.custom_device||"",reason:e.data.data.reason||""}}catch(e){if(console.error("Error loading booking request:",e),e.response,e.response,e.response,e.response,e.response,403===e.response?.status){const t=`Access Denied: ${e.response?.data?.message||"You do not have permission to view this booking request."}`,a=`\n\nPossible solutions:\n1. Check if booking ID ${n.value} belongs to your account\n2. Ensure the booking status is 'rejected' (only rejected bookings can be edited)\n3. Try using a different booking ID from your accessible bookings (check console)`;alert(t+a)}else alert(`Error loading request: ${e.response?.data?.message||e.message}`)}finally{l.value=!1}else l.value=!1},x=async()=>{try{const e=await le.A.get("/booking-service/device-types");e.data.success&&(c.value=e.data.data);const t=await le.A.get("/booking-service/departments");t.data.success&&(b.value=t.data.data)}catch(e){console.error("Error loading form options:",e)}},h=()=>{"others"!==m.value.device_type&&(m.value.custom_device="")},w=async()=>{if(!i.value){u.value={},i.value=!0;try{const t={...m.value};"others"!==t.device_type&&(t.custom_device="");const a=await le.A.put(`/booking-service/bookings/${n.value}/edit-rejected`,t);if(!a.data.success)throw a.data.errors&&(u.value=a.data.errors),new Error(a.data.message||"Failed to update booking request");s.showDeviceConditionSaved(m.value.device_type||"Device",n.value),e.push({path:"/request-status",query:{success:"true",type:"booking_service",id:n.value}})}catch(t){console.error("Error updating booking request:",t),t.response?.data?.errors&&(u.value=t.response.data.errors),alert(`Error updating request: ${t.response?.data?.message||t.message}`)}finally{i.value=!1}}},y=()=>{e.go(-1)};return{loading:l,submitting:i,requestId:n,originalRequest:d,formData:m,errors:u,deviceTypes:c,departments:b,minDate:f,minReturnDateTime:g,returnDateTimeModel:v,onDeviceTypeChange:h,updateBooking:w,goBack:y}}},ue=a(1241);const ce=(0,ue.A)(de,[["render",te],["__scopeId","data-v-073ea1bf"]]);var be=ce}}]);
//# sourceMappingURL=3163.9523e4b3.js.map