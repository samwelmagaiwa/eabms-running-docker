"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8722],{60:function(e,s,t){var a=t(4373);const l="http://127.0.0.1:8000/api",r=a.A.create({baseURL:l,timeout:parseInt("30000")||1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});r.interceptors.request.use(e=>{const s=localStorage.getItem("auth_token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("session_data"),window.location.href="/login"),Promise.reject(e)));const o={async getAllRoles(){try{const e=await r.get("/roles");return{success:!0,data:e.data.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to fetch roles",errors:e.response?.data?.errors||{}}}},async getUsersWithRoles(e={}){try{const s=await r.get("/user-roles",{params:e});return{success:!0,data:s.data.data}}catch(s){return{success:!1,message:s.response?.data?.message||"Failed to fetch users",errors:s.response?.data?.errors||{}}}},async assignRolesToUser(e,s){try{const t=await r.post(`/user-roles/${e}/assign`,{role_ids:s});return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to assign roles",errors:t.response?.data?.errors||{}}}},async removeRoleFromUser(e,s){try{const t=await r.delete(`/user-roles/${e}/roles/${s}`);return{success:!0,message:t.data.message}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to remove role",errors:t.response?.data?.errors||{}}}},async getUserRoleHistory(e){try{const s=await r.get(`/user-roles/${e}/history`);return{success:!0,data:s.data.data}}catch(s){return{success:!1,message:s.response?.data?.message||"Failed to fetch role history",errors:s.response?.data?.errors||{}}}},async getRoleStatistics(){try{const e=await r.get("/user-roles/statistics");return{success:!0,data:e.data.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to fetch statistics",errors:e.response?.data?.errors||{}}}},async getAvailablePermissions(){try{const e=await r.get("/roles/permissions");return{success:!0,data:e.data.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to fetch permissions",errors:e.response?.data?.errors||{}}}}};s.A=o},4528:function(e,s,t){t.r(s),t.d(s,{default:function(){return pl}});var a=t(5796);const l={class:"flex flex-col h-screen"},r={class:"flex flex-1 overflow-hidden"},o={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"max-w-13xl mx-auto relative z-10"},u={class:"medical-glass-card rounded-3xl overflow-hidden"},b={class:"p-6 space-y-8"},m={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},p={class:"medical-card bg-gradient-to-r from-green-600/25 to-emerald-600/25 border-2 border-green-400/40 p-6 rounded-2xl backdrop-blur-sm"},f={class:"flex items-center space-x-3 mb-4"},x={class:"text-2xl font-bold text-white"},v={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},g={class:"flex items-center space-x-3 mb-4"},k={class:"text-2xl font-bold text-white"},h={class:"medical-card bg-gradient-to-r from-purple-600/25 to-indigo-600/25 border-2 border-purple-400/40 p-6 rounded-2xl backdrop-blur-sm"},y={class:"flex items-center space-x-3 mb-4"},w={class:"text-2xl font-bold text-white"},L={class:"medical-card bg-gradient-to-r from-orange-600/25 to-red-600/25 border-2 border-orange-400/40 p-6 rounded-2xl backdrop-blur-sm"},_={class:"flex items-center space-x-3 mb-4"},U={class:"text-2xl font-bold text-white"},C={class:"medical-card bg-gradient-to-r from-teal-600/25 to-blue-600/25 border-2 border-teal-400/40 p-6 rounded-2xl backdrop-blur-sm"},E={class:"flex items-center justify-between mb-6"},R={class:"flex items-center space-x-4"},F={class:"text-xl font-bold text-white flex items-center"},D={class:"flex space-x-3"},A=["disabled"],X={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},M={class:"relative"},P={class:"relative"},j={value:"",class:"bg-blue-900 text-white"},K=["value","title"],T={class:"relative"},S={value:"",class:"bg-blue-900 text-white"},Q=["value"],I={class:"relative"},$={key:0,class:"text-center py-8"},N={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},V={class:"flex items-start justify-between mb-4"},W={class:"flex items-center space-x-3 flex-1"},H={class:"w-12 h-12 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"},q={class:"text-white font-bold text-base"},z={class:"flex-1"},O={class:"font-bold text-white text-lg"},B={class:"text-teal-100 text-base"},J={key:0,class:"text-teal-200 text-base"},Y={key:1,class:"text-teal-200 text-base"},G={class:"mt-2 flex flex-wrap items-center gap-2"},Z={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-red-500/25 text-red-100 border border-red-400/50"},ee={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-500/20 text-emerald-100 border border-emerald-400/40"},se={class:"relative","data-dropdown-menu":""},te=["onClick"],ae=["onClick"],le=["onClick"],re=["onClick"],oe=["onClick"],ie={class:"w-8 h-8 bg-indigo-500/30 rounded-lg flex items-center justify-center group-hover/item:bg-indigo-500/50 transition-colors duration-200"},ne={class:"flex-1"},de={class:"flex items-center justify-between"},ce={class:"font-medium text-base"},ue={key:0,class:"ml-2 px-2 py-0.5 rounded-full text-[11px] font-semibold bg-red-500/30 text-red-100 border border-red-400/50"},be={key:1,class:"ml-2 px-2 py-0.5 rounded-full text-[11px] font-semibold bg-emerald-500/25 text-emerald-100 border border-emerald-400/50"},me={class:"text-base text-gray-300 group-hover/item:text-gray-200 mt-0.5"},pe={class:"mb-4"},fe={key:0,class:"flex flex-wrap gap-1"},xe={key:1,class:"px-2 py-1 bg-gray-500/30 text-gray-100 rounded text-base border border-gray-400/50"},ve={key:0,class:"mb-4"},ge={key:0,class:"mt-2"},ke={class:"flex flex-wrap gap-1"},he={class:"flex space-x-2"},ye=["onClick"],we=["onClick"],Le={key:2,class:"text-center py-8"},_e={class:"text-teal-100"},Ue={class:"text-base opacity-75"},Ce={class:"flex items-center"},Ee={class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-3"},Re={class:"font-medium flex-1"},Fe={class:"bg-blue-800 p-6 rounded-t-2xl border-b border-blue-500/30"},De={class:"flex items-center justify-between"},Ae={class:"p-6"},Xe={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={key:0,class:"text-red-400 text-base mt-1"},je={key:0,class:"text-red-300 text-base mt-2 font-semibold bg-red-900/30 px-3 py-2 rounded-lg border border-red-400/30"},Ke={key:0,class:"text-red-400 text-base mt-1"},Te={key:0,class:"text-red-300 text-base mt-2 font-semibold bg-red-900/30 px-3 py-2 rounded-lg border border-red-400/30"},Se={class:"relative"},Qe=["type"],Ie={key:0,class:"text-red-400 text-base mt-1"},$e={class:"relative"},Ne=["type"],Ve={key:0,class:"text-red-400 text-base mt-1"},We={key:1,class:"text-red-400 text-base mt-1"},He={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},qe={class:"mb-6"},ze={class:"flex items-center space-x-4 cursor-pointer"},Oe={key:0,class:"text-red-400 text-base mt-1"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Je={class:"relative"},Ye=["value"],Ge={key:0,class:"text-red-400 text-base mt-1"},Ze={class:"relative"},es=["value"],ss={key:0,class:"text-red-400 text-base mt-1"},ts={class:"flex justify-end space-x-4 pt-4 border-t border-blue-300/30"},as=["disabled"],ls={class:"bg-blue-800 p-6 rounded-t-2xl border-b border-blue-500/30"},rs={class:"flex items-center justify-between"},os={class:"p-6"},is={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},ns={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ds={key:0,class:"text-red-400 text-base mt-1"},cs={key:0,class:"text-red-300 text-base mt-2 font-semibold bg-red-900/30 px-3 py-2 rounded-lg border border-red-400/30"},us={key:0,class:"text-red-400 text-base mt-1"},bs={key:0,class:"text-red-300 text-base mt-2 font-semibold bg-red-900/30 px-3 py-2 rounded-lg border border-red-400/30"},ms={class:"relative"},ps=["type"],fs={key:0,class:"text-red-400 text-base mt-1"},xs={class:"relative"},vs=["type"],gs={key:0,class:"text-red-400 text-base mt-1"},ks={key:1,class:"text-red-400 text-base mt-1"},hs={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},ys={class:"mb-6"},ws={class:"flex items-center space-x-4 cursor-pointer"},Ls={key:0,class:"text-red-400 text-base mt-1"},_s={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Us={class:"relative"},Cs=["value"],Es={key:0,class:"text-red-400 text-base mt-1"},Rs={class:"relative"},Fs=["value"],Ds={key:0,class:"text-red-400 text-base mt-1"},As={class:"flex justify-end space-x-4 pt-4 border-t border-blue-300/30"},Xs=["disabled"],Ms={class:"bg-blue-800 p-8 rounded-t-2xl border-b border-blue-500/30"},Ps={class:"flex items-center justify-between"},js={class:"p-8"},Ks={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ss={key:0,class:"text-red-400 text-base mt-1"},Qs={key:0,class:"text-red-400 text-base mt-1"},Is={class:"mt-6"},$s={key:0,class:"text-red-400 text-base mt-1"},Ns={class:"bg-white/10 rounded-xl p-8 backdrop-blur-sm border border-blue-300/30"},Vs={class:"text-2xl font-semibold text-white mb-6 flex items-center justify-between"},Ws={class:"flex items-center space-x-3"},Hs={key:0,class:"text-center py-8"},qs={key:1,class:"space-y-6"},zs={class:"flex items-center space-x-3 mb-4"},Os={class:"text-base font-semibold text-blue-200 capitalize"},Bs={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"},Js=["id","value"],Ys=["for"],Gs={key:2,class:"text-center py-8 text-blue-300"},Zs={key:3,class:"text-red-400 text-base mt-2"},et={class:"flex justify-end space-x-6 pt-6 border-t border-blue-300/30"},st=["disabled"],tt={class:"bg-blue-800 p-6 rounded-t-2xl border-b border-blue-500/30"},at={class:"flex items-center justify-between"},lt={class:"flex items-center space-x-4"},rt={class:"text-blue-100"},ot={class:"bg-white/10 rounded-xl p-4 mb-6 backdrop-blur-sm border border-blue-300/30"},it={class:"flex items-center space-x-4"},nt={class:"w-16 h-16 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},dt={class:"text-white font-bold text-lg"},ct={class:"text-xl font-bold text-white"},ut={class:"text-blue-100"},bt={key:0,class:"text-blue-200 text-base"},mt={class:"mb-6"},pt={key:0,class:"flex flex-wrap gap-2"},ft={key:1,class:"px-3 py-1 bg-gray-500/30 text-gray-100 rounded text-base border border-gray-400/50"},xt={class:"mb-6"},vt={key:0,class:"text-center py-8"},gt={key:1,class:"text-center py-8"},kt={class:"text-blue-100"},ht={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3"},yt=["id","value"],wt=["for"],Lt={class:"font-medium"},_t={key:0,class:"text-base text-blue-200/70 mt-1"},Ut={key:3,class:"text-red-400 text-base mt-2"},Ct={class:"flex justify-end space-x-4 pt-4 border-t border-blue-300/30"},Et=["disabled"],Rt={class:"bg-blue-800 p-6 rounded-t-2xl border-b border-blue-500/30"},Ft={class:"flex items-center justify-between"},Dt={class:"flex items-center space-x-4"},At={class:"text-red-100"},Xt={class:"p-6"},Mt={class:"bg-white/10 rounded-xl p-4 mb-6 backdrop-blur-sm border border-blue-300/30"},Pt={class:"flex items-center space-x-4"},jt={class:"w-16 h-16 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},Kt={class:"text-white font-bold text-lg"},Tt={class:"text-xl font-bold text-white"},St={class:"text-blue-100"},Qt={key:0,class:"text-blue-200 text-base"},It={key:0,class:"text-center py-8"},$t={key:1,class:"space-y-4"},Nt={class:"space-y-3"},Vt={class:"flex items-start justify-between"},Wt={class:"flex items-start space-x-4"},Ht={class:"flex-1"},qt={class:"flex items-center space-x-3 mb-2"},zt={class:"text-blue-100 text-base mb-1"},Ot={class:"font-medium"},Bt={class:"flex items-center space-x-4 text-base text-blue-200/70"},Jt={key:0},Yt={key:1},Gt={key:0,class:"mt-2 text-base text-blue-200/50"},Zt={key:0,class:"mb-1"},ea={key:1},sa={class:"text-base text-blue-200/70 text-right"},ta={key:0},aa={key:1},la={key:2,class:"text-center py-8 text-blue-300"},ra={class:"flex justify-end pt-6 border-t border-blue-300/30"},oa={class:"bg-red-800/70 p-6 rounded-t-2xl border-b border-red-400/30"},ia={class:"flex items-center justify-between"},na={class:"p-6"},da={class:"mb-6"},ca={class:"flex items-center space-x-4 mb-4"},ua={class:"w-12 h-12 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},ba={class:"text-white font-bold text-base"},ma={class:"font-bold text-white"},pa={class:"text-red-200 text-base"},fa={class:"flex justify-end space-x-3"},xa=["disabled"],va={class:"bg-orange-800/70 p-6 rounded-t-2xl border-b border-orange-400/30"},ga={class:"flex items-center justify-between"},ka={class:"p-6"},ha={class:"mb-6"},ya={class:"flex items-center space-x-4 mb-4"},wa={class:"w-12 h-12 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},La={class:"text-white font-bold text-base"},_a={class:"font-bold text-white"},Ua={class:"text-orange-200 text-base"},Ca={key:0,class:"mb-4"},Ea={class:"flex flex-wrap gap-2"},Ra={class:"flex justify-end space-x-3"},Fa=["disabled"],Da={class:"bg-blue-800/70 p-6 rounded-t-2xl border-b border-blue-400/30"},Aa={class:"flex items-center justify-between"},Xa={class:"flex items-center space-x-4"},Ma={class:"text-blue-100 text-base"},Pa={class:"p-6"},ja={class:"mb-6"},Ka={class:"flex items-center space-x-4 mb-4"},Ta={class:"w-12 h-12 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},Sa={class:"text-white font-bold text-base"},Qa={class:"font-bold text-white"},Ia={class:"text-blue-200 text-base"},$a={class:"flex justify-end space-x-3"},Na=["disabled"],Va={class:"bg-blue-800/70 p-6 rounded-t-2xl border-b border-blue-400/30"},Wa={class:"flex items-center justify-between"},Ha={class:"flex items-center space-x-4"},qa={class:"text-blue-100 text-base"},za={class:"p-6"},Oa={class:"mb-6"},Ba={class:"flex items-center space-x-4 mb-4"},Ja={class:"w-12 h-12 bg-gradient-to-br from-teal-500 to-blue-600 rounded-full flex items-center justify-center"},Ya={class:"text-white font-bold text-base"},Ga={class:"font-bold text-white"},Za={class:"text-blue-200 text-base"},el={class:"flex justify-end space-x-3"},sl=["disabled"];function tl(e,s,t,tl,al,ll){const rl=(0,a.g2)("AppHeader"),ol=(0,a.g2)("ModernSidebar"),il=(0,a.g2)("UnifiedLoadingBanner");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(rl),(0,a.Lk)("div",r,[(0,a.bF)(ol),(0,a.Lk)("main",o,[(0,a.bF)(il,{show:tl.loading,loadingTitle:"Loading Users & Roles",loadingSubtitle:"Fetching user accounts and role assignments...",departmentTitle:"USER ROLE ASSIGNMENT",forceSpin:!0},null,8,["show"]),(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(48,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",b,[(0,a.Lk)("div",m,[(0,a.Lk)("div",p,[(0,a.Lk)("div",f,[s[89]||(s[89]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-users text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",x,(0,a.v_)(tl.userStatistics.total_users||0),1),s[88]||(s[88]=(0,a.Lk)("div",{class:"text-base text-green-100"},"Total Users",-1))])])]),(0,a.Lk)("div",v,[(0,a.Lk)("div",g,[s[91]||(s[91]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-user-check text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",k,(0,a.v_)(tl.userStatistics.users_with_roles||0),1),s[90]||(s[90]=(0,a.Lk)("div",{class:"text-base text-blue-100"},"Users with Roles",-1))])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",y,[s[93]||(s[93]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-building text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",w,(0,a.v_)(tl.userStatistics.department_distribution?.length||0),1),s[92]||(s[92]=(0,a.Lk)("div",{class:"text-base text-purple-100"},"Departments",-1))])])]),(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[s[95]||(s[95]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",U,(0,a.v_)(tl.userStatistics.hod_users||0),1),s[94]||(s[94]=(0,a.Lk)("div",{class:"text-base text-orange-100"},"HOD Users",-1))])])])]),(0,a.Lk)("div",C,[(0,a.Lk)("div",E,[(0,a.Lk)("div",R,[s[97]||(s[97]=(0,a.Lk)("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-users-cog text-white text-xl"})],-1)),(0,a.Lk)("h3",F,[s[96]||(s[96]=(0,a.Lk)("i",{class:"fas fa-list mr-2 text-blue-300"},null,-1)),(0,a.eW)(" Users and Their Roles ("+(0,a.v_)(tl.users.length||0)+" total users) ",1)])]),(0,a.Lk)("div",D,[(0,a.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>tl.openCreateUserModal&&tl.openCreateUserModal(...e)),class:"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2"},[...s[98]||(s[98]=[(0,a.Lk)("i",{class:"fas fa-user-plus"},null,-1),(0,a.Lk)("span",null,"Create User",-1)])]),(0,a.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>tl.openCreateRoleModal&&tl.openCreateRoleModal(...e)),class:"bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-purple-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2"},[...s[99]||(s[99]=[(0,a.Lk)("i",{class:"fas fa-shield-alt"},null,-1),(0,a.Lk)("span",null,"Create Role",-1)])]),(0,a.Lk)("button",{onClick:s[2]||(s[2]=(...e)=>tl.refreshData&&tl.refreshData(...e)),disabled:tl.loading,class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.loading?"fas fa-spinner fa-spin":"fas fa-refresh")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.loading?"Loading...":"Refresh"),1)],8,A)])]),(0,a.Lk)("div",X,[(0,a.Lk)("div",null,[s[101]||(s[101]=(0,a.Lk)("label",{class:"block text-lg font-bold text-teal-100 mb-2"},"Search Users",-1)),(0,a.Lk)("div",M,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>tl.searchQuery=e),type:"text",class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-teal-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white placeholder-teal-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20",placeholder:"Search by name or email...",onInput:s[4]||(s[4]=(...e)=>tl.debouncedSearch&&tl.debouncedSearch(...e))},null,544),[[a.Jo,tl.searchQuery]]),s[100]||(s[100]=(0,a.Lk)("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[(0,a.Lk)("i",{class:"fas fa-search text-teal-300"})],-1))])]),(0,a.Lk)("div",null,[s[103]||(s[103]=(0,a.Lk)("label",{class:"block text-lg font-bold text-teal-100 mb-2"},"Filter by Role",-1)),(0,a.Lk)("div",P,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[5]||(s[5]=e=>tl.filterRole=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-teal-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20 appearance-none cursor-pointer",onChange:s[6]||(s[6]=(...e)=>tl.applyFilters&&tl.applyFilters(...e))},[(0,a.Lk)("option",j," All Roles ("+(0,a.v_)(tl.availableRoles.length)+" available) ",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableRoles,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.name,class:"bg-blue-900 text-white",title:`Value: ${e.name}, Display: ${e.display_name||e.name}`},(0,a.v_)(e.display_name||e.name),9,K))),128))],544),[[a.u1,tl.filterRole]]),s[102]||(s[102]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))])]),(0,a.Lk)("div",null,[s[105]||(s[105]=(0,a.Lk)("label",{class:"block text-lg font-bold text-teal-100 mb-2"},"Filter by Department",-1)),(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[7]||(s[7]=e=>tl.filterDepartment=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-teal-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20 appearance-none cursor-pointer",onChange:s[8]||(s[8]=(...e)=>tl.applyFilters&&tl.applyFilters(...e))},[(0,a.Lk)("option",S," All Departments ("+(0,a.v_)(tl.availableDepartments.length)+" available) ",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableDepartments,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-blue-900 text-white"},(0,a.v_)(e.display_name||e.name),9,Q))),128))],544),[[a.u1,tl.filterDepartment]]),s[104]||(s[104]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))])]),(0,a.Lk)("div",null,[s[108]||(s[108]=(0,a.Lk)("label",{class:"block text-lg font-bold text-teal-100 mb-2"},"Sort By",-1)),(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[9]||(s[9]=e=>tl.sortBy=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-teal-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20 appearance-none cursor-pointer",onChange:s[10]||(s[10]=(...e)=>tl.applyFilters&&tl.applyFilters(...e))},[...s[106]||(s[106]=[(0,a.Lk)("option",{value:"name",class:"bg-blue-900 text-white"},"Name",-1),(0,a.Lk)("option",{value:"email",class:"bg-blue-900 text-white"},"Email",-1),(0,a.Lk)("option",{value:"created_at",class:"bg-blue-900 text-white"}," Created Date ",-1)])],544),[[a.u1,tl.sortBy]]),s[107]||(s[107]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))])])]),tl.loading?((0,a.uX)(),(0,a.CE)("div",$,[...s[109]||(s[109]=[(0,a.Lk)("div",{class:"inline-flex items-center space-x-2 text-teal-100"},[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-xl"}),(0,a.Lk)("span",null,"Loading users...")],-1)])])):Array.isArray(tl.filteredUsers)&&tl.filteredUsers.length>0?((0,a.uX)(),(0,a.CE)("div",N,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.filteredUsers,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id||e.email||Math.random(),class:(0,a.C4)(["relative z-0 bg-white/15 p-6 rounded-xl backdrop-blur-sm border border-teal-300/30 hover:bg-white/20 transition-all duration-300 hover:shadow-lg hover:shadow-teal-500/20 group",{"z-40":tl.openMenuId===e.id}])},[(0,a.Lk)("div",V,[(0,a.Lk)("div",W,[(0,a.Lk)("div",H,[(0,a.Lk)("span",q,(0,a.v_)(tl.getInitials(e.name)),1)]),(0,a.Lk)("div",z,[(0,a.Lk)("h4",O,(0,a.v_)(e.name||"Unknown User"),1),(0,a.Lk)("p",B,(0,a.v_)(e.email||"No email"),1),e.pf_number?((0,a.uX)(),(0,a.CE)("p",J," PF: "+(0,a.v_)(e.pf_number),1)):(0,a.Q3)("",!0),e.department&&e.department.display_name?((0,a.uX)(),(0,a.CE)("p",Y,[s[110]||(s[110]=(0,a.Lk)("i",{class:"fas fa-building mr-1"},null,-1)),(0,a.eW)((0,a.v_)(e.department.display_name),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",G,[!1===e.is_active?((0,a.uX)(),(0,a.CE)("span",Z,[...s[111]||(s[111]=[(0,a.Lk)("i",{class:"fas fa-lock mr-1 text-[11px]"},null,-1),(0,a.eW)(" Locked account ",-1)])])):((0,a.uX)(),(0,a.CE)("span",ee,[...s[112]||(s[112]=[(0,a.Lk)("i",{class:"fas fa-circle mr-1 text-[9px] text-emerald-300"},null,-1),(0,a.eW)(" Active account ",-1)])]))])])]),(0,a.Lk)("div",se,[(0,a.Lk)("button",{onClick:(0,a.D$)(s=>tl.toggleUserMenu(e.id,s),["stop"]),class:(0,a.C4)(["w-8 h-8 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110 group/menu",{"bg-white/20":tl.openMenuId===e.id}])},[...s[113]||(s[113]=[(0,a.Lk)("i",{class:"fas fa-ellipsis-v text-white text-base group-hover/menu:scale-110 transition-transform duration-200"},null,-1)])],10,te),tl.openMenuId===e.id?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["absolute right-0 w-48 bg-blue-900/95 backdrop-blur-lg border border-blue-400/30 rounded-xl shadow-2xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",tl.menuOpensUp?"bottom-10":"top-10"])},[(0,a.Lk)("button",{onClick:(0,a.D$)(s=>tl.openEditUserModal(e),["stop"]),class:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-blue-500/20 transition-colors duration-200 text-white group/item"},[...s[114]||(s[114]=[(0,a.Fv)('<div class="w-8 h-8 bg-blue-500/30 rounded-lg flex items-center justify-center group-hover/item:bg-blue-500/50 transition-colors duration-200" data-v-f678a49e><i class="fas fa-user-edit text-blue-300 text-base group-hover/item:text-blue-200" data-v-f678a49e></i></div><div class="flex-1" data-v-f678a49e><div class="font-medium text-base" data-v-f678a49e>Edit User</div><div class="text-base text-gray-300 group-hover/item:text-gray-200" data-v-f678a49e> Edit user details </div></div>',2)])],8,ae),(0,a.Lk)("button",{onClick:(0,a.D$)(s=>tl.confirmDeleteUser(e),["stop"]),class:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-red-500/20 transition-colors duration-200 text-white group/item border-t border-blue-400/20"},[...s[115]||(s[115]=[(0,a.Fv)('<div class="w-8 h-8 bg-red-500/30 rounded-lg flex items-center justify-center group-hover/item:bg-red-500/50 transition-colors duration-200" data-v-f678a49e><i class="fas fa-user-times text-red-300 text-base group-hover/item:text-red-200" data-v-f678a49e></i></div><div class="flex-1" data-v-f678a49e><div class="font-medium text-base" data-v-f678a49e>Delete User</div><div class="text-base text-gray-300 group-hover/item:text-gray-200" data-v-f678a49e> Remove user permanently </div></div>',2)])],8,le),(0,a.Lk)("button",{onClick:(0,a.D$)(s=>tl.confirmDeleteUserRole(e),["stop"]),class:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-orange-500/20 transition-colors duration-200 text-white group/item border-t border-blue-400/20"},[...s[116]||(s[116]=[(0,a.Fv)('<div class="w-8 h-8 bg-orange-500/30 rounded-lg flex items-center justify-center group-hover/item:bg-orange-500/50 transition-colors duration-200" data-v-f678a49e><i class="fas fa-shield-alt text-orange-300 text-base group-hover/item:text-orange-200" data-v-f678a49e></i></div><div class="flex-1" data-v-f678a49e><div class="font-medium text-base" data-v-f678a49e>Delete Roles</div><div class="text-base text-gray-300 group-hover/item:text-gray-200" data-v-f678a49e> Remove all user roles </div></div>',2)])],8,re),(0,a.Lk)("button",{onClick:(0,a.D$)(s=>!1===e.is_active?tl.confirmUnlockUser(e):tl.confirmLockUser(e),["stop"]),class:"w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-indigo-500/20 transition-colors duration-200 text-white group/item border-t border-blue-400/20"},[(0,a.Lk)("div",ie,[(0,a.Lk)("i",{class:(0,a.C4)(["text-base",!1===e.is_active?"fas fa-lock-open text-indigo-200":"fas fa-lock text-indigo-300 group-hover/item:text-indigo-200"])},null,2)]),(0,a.Lk)("div",ne,[(0,a.Lk)("div",de,[(0,a.Lk)("div",ce,(0,a.v_)(!1===e.is_active?"Unlock User":"Lock User"),1),!1===e.is_active?((0,a.uX)(),(0,a.CE)("span",ue," Locked ")):((0,a.uX)(),(0,a.CE)("span",be," Active "))]),(0,a.Lk)("div",me,(0,a.v_)(!1===e.is_active?"Restore system access":"Temporarily block system access"),1)])],8,oe)],2)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",pe,[s[117]||(s[117]=(0,a.Lk)("div",{class:"text-base text-teal-100 mb-2"},"Current Roles:",-1)),e.roles&&e.roles.length>0?((0,a.uX)(),(0,a.CE)("div",fe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.roles,e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id,class:(0,a.C4)(["px-2 py-1 rounded text-base border",tl.getRoleColorClasses(e.name)])},(0,a.v_)(e.display_name),3))),128))])):((0,a.uX)(),(0,a.CE)("div",xe," No roles assigned "))]),e.is_hod?((0,a.uX)(),(0,a.CE)("div",ve,[s[119]||(s[119]=(0,a.Lk)("div",{class:"flex items-center space-x-2"},[(0,a.Lk)("div",{class:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-base"})]),(0,a.Lk)("span",{class:"text-yellow-100 text-base font-medium"},"HOD Status")],-1)),e.departments_as_hod&&e.departments_as_hod.length>0?((0,a.uX)(),(0,a.CE)("div",ge,[s[118]||(s[118]=(0,a.Lk)("div",{class:"text-base text-yellow-200 mb-1"},"Departments:",-1)),(0,a.Lk)("div",ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.departments_as_hod,e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id,class:"px-2 py-1 bg-yellow-500/30 text-yellow-100 rounded text-base border border-yellow-400/50"},(0,a.v_)(e.name),1))),128))])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",he,[(0,a.Lk)("button",{onClick:s=>tl.openAssignRolesDialog(e),class:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2 px-3 rounded-lg text-base font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-1"},[...s[120]||(s[120]=[(0,a.Lk)("i",{class:"fas fa-user-edit"},null,-1),(0,a.Lk)("span",null,"Assign Roles",-1)])],8,ye),(0,a.Lk)("button",{onClick:s=>tl.viewRoleHistory(e),class:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-2 px-3 rounded-lg text-base font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-1"},[...s[121]||(s[121]=[(0,a.Lk)("i",{class:"fas fa-history"},null,-1),(0,a.Lk)("span",null,"History",-1)])],8,we)])],2))),128))])):((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("div",_e,[s[122]||(s[122]=(0,a.Lk)("i",{class:"fas fa-users text-4xl mb-4 opacity-50"},null,-1)),s[123]||(s[123]=(0,a.Lk)("p",{class:"text-lg"},"No users found",-1)),(0,a.Lk)("p",Ue,(0,a.v_)(tl.searchQuery?"Try adjusting your search criteria":"No users available"),1)])]))])])])])])]),tl.showSnackbar?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["fixed top-4 right-4 px-6 py-4 rounded-xl shadow-2xl z-50 max-w-md border border-white/20 transform transition-all duration-300","success"===tl.snackbarColor?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"error"===tl.snackbarColor?"bg-gradient-to-r from-red-500 to-rose-500 text-white":"bg-gradient-to-r from-blue-500 to-cyan-500 text-white"])},[(0,a.Lk)("div",Ce,[(0,a.Lk)("div",Ee,[(0,a.Lk)("i",{class:(0,a.C4)(["text-base","success"===tl.snackbarColor?"fas fa-check":"error"===tl.snackbarColor?"fas fa-times":"fas fa-info"])},null,2)]),(0,a.Lk)("p",Re,(0,a.v_)(tl.snackbarMessage),1),(0,a.Lk)("button",{onClick:s[11]||(s[11]=e=>tl.showSnackbar=!1),class:"ml-3 text-white/80 hover:text-white transition-colors duration-200"},[...s[124]||(s[124]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])],2)):(0,a.Q3)("",!0),tl.showCreateUserModal?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[28]||(s[28]=(...e)=>tl.closeCreateUserModal&&tl.closeCreateUserModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:s[27]||(s[27]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Fe,[(0,a.Lk)("div",De,[s[126]||(s[126]=(0,a.Fv)('<div class="flex items-center space-x-4" data-v-f678a49e><div class="w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center" data-v-f678a49e><i class="fas fa-user-plus text-white text-xl" data-v-f678a49e></i></div><div data-v-f678a49e><h2 class="text-4xl font-bold text-white" data-v-f678a49e>Create New User</h2><p class="text-blue-100 text-lg" data-v-f678a49e>Add a new user with roles and permissions</p></div></div>',1)),(0,a.Lk)("button",{onClick:s[12]||(s[12]=(...e)=>tl.closeCreateUserModal&&tl.closeCreateUserModal(...e)),class:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[125]||(s[125]=[(0,a.Lk)("i",{class:"fas fa-times text-white"},null,-1)])])])]),(0,a.Lk)("div",Ae,[(0,a.Lk)("form",{onSubmit:s[26]||(s[26]=(0,a.D$)((...e)=>tl.createUser&&tl.createUser(...e),["prevent"])),class:"space-y-6"},[(0,a.Lk)("div",Xe,[s[135]||(s[135]=(0,a.Lk)("h3",{class:"text-3xl font-semibold text-white mb-6 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-user mr-3 text-blue-300 text-2xl"}),(0,a.eW)(" Personal Information ")],-1)),(0,a.Lk)("div",Me,[(0,a.Lk)("div",null,[s[127]||(s[127]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-3"},"Name *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[13]||(s[13]=e=>tl.newUser.name=e),type:"text",class:"medical-input w-full px-5 py-4 text-xl bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"Enter full name",required:""},null,512),[[a.Jo,tl.newUser.name]]),tl.userFormErrors.name?((0,a.uX)(),(0,a.CE)("p",Pe,(0,a.v_)(tl.userFormErrors.name),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[129]||(s[129]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Email Address *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>tl.newUser.email=e),type:"email",class:(0,a.C4)(["medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 rounded-xl focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",tl.userFormErrors.email?"border-red-400/70 focus:border-red-400":"border-blue-300/30 focus:border-blue-400"]),placeholder:"user@example.com",required:""},null,2),[[a.Jo,tl.newUser.email]]),tl.userFormErrors.email?((0,a.uX)(),(0,a.CE)("p",je,[s[128]||(s[128]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,a.eW)((0,a.v_)(Array.isArray(tl.userFormErrors.email)?tl.userFormErrors.email[0]:tl.userFormErrors.email),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[130]||(s[130]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Phone Number *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[15]||(s[15]=e=>tl.newUser.phone=e),type:"tel",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"Enter phone number",onBlur:s[16]||(s[16]=e=>tl.newUser.phone=tl.normalizePhoneNumber(tl.newUser.phone)),required:""},null,544),[[a.Jo,tl.newUser.phone]]),tl.userFormErrors.phone?((0,a.uX)(),(0,a.CE)("p",Ke,(0,a.v_)(tl.userFormErrors.phone),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[132]||(s[132]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"PF Number *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[17]||(s[17]=e=>tl.newUser.pf_number=e),type:"text",class:(0,a.C4)(["medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 rounded-xl focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",tl.userFormErrors.pf_number?"border-red-400/70 focus:border-red-400":"border-blue-300/30 focus:border-blue-400"]),placeholder:"Enter PF number",required:""},null,2),[[a.Jo,tl.newUser.pf_number]]),tl.userFormErrors.pf_number?((0,a.uX)(),(0,a.CE)("p",Te,[s[131]||(s[131]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,a.eW)((0,a.v_)(Array.isArray(tl.userFormErrors.pf_number)?tl.userFormErrors.pf_number[0]:tl.userFormErrors.pf_number),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[133]||(s[133]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Password *",-1)),(0,a.Lk)("div",Se,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[18]||(s[18]=e=>tl.newUser.password=e),type:tl.showPassword?"text":"password",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm pr-12",placeholder:"Enter password",required:""},null,8,Qe),[[a.hp,tl.newUser.password]]),(0,a.Lk)("button",{type:"button",onClick:s[19]||(s[19]=e=>tl.showPassword=!tl.showPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300 hover:text-blue-200"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),tl.userFormErrors.password?((0,a.uX)(),(0,a.CE)("p",Ie,(0,a.v_)(tl.userFormErrors.password),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[134]||(s[134]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Confirm Password *",-1)),(0,a.Lk)("div",$e,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[20]||(s[20]=e=>tl.newUser.password_confirmation=e),type:tl.showConfirmPassword?"text":"password",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm pr-12",placeholder:"Confirm password",required:""},null,8,Ne),[[a.hp,tl.newUser.password_confirmation]]),(0,a.Lk)("button",{type:"button",onClick:s[21]||(s[21]=e=>tl.showConfirmPassword=!tl.showConfirmPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300 hover:text-blue-200"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),tl.userFormErrors.password_confirmation?((0,a.uX)(),(0,a.CE)("p",Ve,(0,a.v_)(tl.userFormErrors.password_confirmation),1)):(0,a.Q3)("",!0),!tl.userFormErrors.password_confirmation&&tl.newUser.password_confirmation&&tl.newUser.password!==tl.newUser.password_confirmation?((0,a.uX)(),(0,a.CE)("p",We," Passwords do not match ")):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",He,[s[144]||(s[144]=(0,a.Lk)("h3",{class:"text-2xl font-bold text-white mb-6 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-building mr-3 text-blue-300 text-xl"}),(0,a.eW)(" Department & Role Assignment ")],-1)),(0,a.Lk)("div",qe,[(0,a.Lk)("label",ze,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[22]||(s[22]=e=>tl.newUser.is_active=e),type:"checkbox",class:"w-5 h-5 text-blue-600 bg-white/20 border-blue-300/50 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[a.lH,tl.newUser.is_active]]),s[136]||(s[136]=(0,a.Lk)("span",{class:"text-xl font-bold text-blue-100"},"User is active",-1))]),s[137]||(s[137]=(0,a.Lk)("p",{class:"text-base text-blue-200/70 mt-2"},"Inactive users cannot log in",-1)),tl.userFormErrors.is_active?((0,a.uX)(),(0,a.CE)("p",Oe,(0,a.v_)(tl.userFormErrors.is_active),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Be,[(0,a.Lk)("div",null,[s[140]||(s[140]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Department",-1)),(0,a.Lk)("div",Je,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[23]||(s[23]=e=>tl.newUser.department_id=e),class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm appearance-none cursor-pointer"},[s[138]||(s[138]=(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"}," Select Department (Optional) ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableDepartments,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-blue-900 text-white"},(0,a.v_)(e.display_name||e.name),9,Ye))),128))],512),[[a.u1,tl.newUser.department_id]]),s[139]||(s[139]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))]),tl.userFormErrors.department_id?((0,a.uX)(),(0,a.CE)("p",Ge,(0,a.v_)(tl.userFormErrors.department_id),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[143]||(s[143]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Primary Role",-1)),(0,a.Lk)("div",Ze,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[24]||(s[24]=e=>tl.newUser.primary_role=e),class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm appearance-none cursor-pointer"},[s[141]||(s[141]=(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"}," Select Primary Role (Optional) ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableRoles,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-blue-900 text-white"},(0,a.v_)(e.display_name||e.name),9,es))),128))],512),[[a.u1,tl.newUser.primary_role]]),s[142]||(s[142]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))]),tl.userFormErrors.primary_role?((0,a.uX)(),(0,a.CE)("p",ss,(0,a.v_)(tl.userFormErrors.primary_role),1)):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",ts,[(0,a.Lk)("button",{type:"button",onClick:s[25]||(s[25]=(...e)=>tl.closeCreateUserModal&&tl.closeCreateUserModal(...e)),class:"px-6 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all duration-300 flex items-center space-x-2"},[...s[145]||(s[145]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{type:"submit",disabled:tl.creatingUser,class:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold hover:from-emerald-600 hover:to-emerald-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.creatingUser?"fas fa-spinner fa-spin":"fas fa-user-plus")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.creatingUser?"Creating...":"Create User"),1)],8,as)])],32)])])])):(0,a.Q3)("",!0),tl.showEditUserModal&&tl.editingUser?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[45]||(s[45]=(...e)=>tl.closeEditUserModal&&tl.closeEditUserModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:s[44]||(s[44]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",ls,[(0,a.Lk)("div",rs,[s[147]||(s[147]=(0,a.Fv)('<div class="flex items-center space-x-4" data-v-f678a49e><div class="w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center" data-v-f678a49e><i class="fas fa-user-edit text-white text-xl" data-v-f678a49e></i></div><div data-v-f678a49e><h2 class="text-4xl font-bold text-white" data-v-f678a49e>Edit User</h2><p class="text-blue-100 text-lg" data-v-f678a49e>Update user details and permissions</p></div></div>',1)),(0,a.Lk)("button",{onClick:s[29]||(s[29]=(...e)=>tl.closeEditUserModal&&tl.closeEditUserModal(...e)),class:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[146]||(s[146]=[(0,a.Lk)("i",{class:"fas fa-times text-white"},null,-1)])])])]),(0,a.Lk)("div",os,[(0,a.Lk)("form",{onSubmit:s[43]||(s[43]=(0,a.D$)((...e)=>tl.updateUser&&tl.updateUser(...e),["prevent"])),class:"space-y-6"},[(0,a.Lk)("div",is,[s[156]||(s[156]=(0,a.Lk)("h3",{class:"text-3xl font-semibold text-white mb-6 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-user mr-3 text-blue-300 text-2xl"}),(0,a.eW)(" Personal Information ")],-1)),(0,a.Lk)("div",ns,[(0,a.Lk)("div",null,[s[148]||(s[148]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-3"},"Name *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[30]||(s[30]=e=>tl.editUserData.name=e),type:"text",class:"medical-input w-full px-5 py-4 text-xl bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"Enter full name",required:""},null,512),[[a.Jo,tl.editUserData.name]]),tl.editUserFormErrors.name?((0,a.uX)(),(0,a.CE)("p",ds,(0,a.v_)(tl.editUserFormErrors.name),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[150]||(s[150]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Email Address *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[31]||(s[31]=e=>tl.editUserData.email=e),type:"email",class:(0,a.C4)(["medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 rounded-xl focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",tl.editUserFormErrors.email?"border-red-400/70 focus:border-red-400":"border-blue-300/30 focus:border-blue-400"]),placeholder:"user@example.com",required:""},null,2),[[a.Jo,tl.editUserData.email]]),tl.editUserFormErrors.email?((0,a.uX)(),(0,a.CE)("p",cs,[s[149]||(s[149]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,a.eW)((0,a.v_)(Array.isArray(tl.editUserFormErrors.email)?tl.editUserFormErrors.email[0]:tl.editUserFormErrors.email),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[151]||(s[151]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Phone Number *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[32]||(s[32]=e=>tl.editUserData.phone=e),type:"tel",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"Enter phone number",onBlur:s[33]||(s[33]=e=>tl.editUserData.phone=tl.normalizePhoneNumber(tl.editUserData.phone)),required:""},null,544),[[a.Jo,tl.editUserData.phone]]),tl.editUserFormErrors.phone?((0,a.uX)(),(0,a.CE)("p",us,(0,a.v_)(tl.editUserFormErrors.phone),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[153]||(s[153]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"PF Number",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[34]||(s[34]=e=>tl.editUserData.pf_number=e),type:"text",class:(0,a.C4)(["medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 rounded-xl focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",tl.editUserFormErrors.pf_number?"border-red-400/70 focus:border-red-400":"border-blue-300/30 focus:border-blue-400"]),placeholder:"Enter PF number (optional)"},null,2),[[a.Jo,tl.editUserData.pf_number]]),tl.editUserFormErrors.pf_number?((0,a.uX)(),(0,a.CE)("p",bs,[s[152]||(s[152]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,a.eW)((0,a.v_)(Array.isArray(tl.editUserFormErrors.pf_number)?tl.editUserFormErrors.pf_number[0]:tl.editUserFormErrors.pf_number),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[154]||(s[154]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"New Password",-1)),(0,a.Lk)("div",ms,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[35]||(s[35]=e=>tl.editUserData.password=e),type:tl.showEditPassword?"text":"password",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm pr-12",placeholder:"Enter new password (leave blank to keep current)"},null,8,ps),[[a.hp,tl.editUserData.password]]),(0,a.Lk)("button",{type:"button",onClick:s[36]||(s[36]=e=>tl.showEditPassword=!tl.showEditPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300 hover:text-blue-200"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.showEditPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),tl.editUserFormErrors.password?((0,a.uX)(),(0,a.CE)("p",fs,(0,a.v_)(tl.editUserFormErrors.password),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[155]||(s[155]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Confirm New Password",-1)),(0,a.Lk)("div",xs,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[37]||(s[37]=e=>tl.editUserData.password_confirmation=e),type:tl.showEditConfirmPassword?"text":"password",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm pr-12",placeholder:"Confirm new password"},null,8,vs),[[a.hp,tl.editUserData.password_confirmation]]),(0,a.Lk)("button",{type:"button",onClick:s[38]||(s[38]=e=>tl.showEditConfirmPassword=!tl.showEditConfirmPassword),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300 hover:text-blue-200"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.showEditConfirmPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),tl.editUserFormErrors.password_confirmation?((0,a.uX)(),(0,a.CE)("p",gs,(0,a.v_)(tl.editUserFormErrors.password_confirmation),1)):(0,a.Q3)("",!0),!tl.editUserFormErrors.password_confirmation&&tl.editUserData.password_confirmation&&tl.editUserData.password!==tl.editUserData.password_confirmation?((0,a.uX)(),(0,a.CE)("p",ks," Passwords do not match ")):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",hs,[s[165]||(s[165]=(0,a.Lk)("h3",{class:"text-2xl font-bold text-white mb-6 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-building mr-3 text-blue-300 text-xl"}),(0,a.eW)(" Department & Role Assignment ")],-1)),(0,a.Lk)("div",ys,[(0,a.Lk)("label",ws,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[39]||(s[39]=e=>tl.editUserData.is_active=e),type:"checkbox",class:"w-5 h-5 text-blue-600 bg-white/20 border-blue-300/50 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[a.lH,tl.editUserData.is_active]]),s[157]||(s[157]=(0,a.Lk)("span",{class:"text-xl font-bold text-blue-100"},"User is active",-1))]),s[158]||(s[158]=(0,a.Lk)("p",{class:"text-base text-blue-200/70 mt-2"},"Inactive users cannot log in",-1)),tl.editUserFormErrors.is_active?((0,a.uX)(),(0,a.CE)("p",Ls,(0,a.v_)(tl.editUserFormErrors.is_active),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",_s,[(0,a.Lk)("div",null,[s[161]||(s[161]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Department",-1)),(0,a.Lk)("div",Us,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[40]||(s[40]=e=>tl.editUserData.department_id=e),class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm appearance-none cursor-pointer"},[s[159]||(s[159]=(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"}," Select Department (Optional) ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableDepartments,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-blue-900 text-white"},(0,a.v_)(e.display_name||e.name),9,Cs))),128))],512),[[a.u1,tl.editUserData.department_id]]),s[160]||(s[160]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))]),tl.editUserFormErrors.department_id?((0,a.uX)(),(0,a.CE)("p",Es,(0,a.v_)(tl.editUserFormErrors.department_id),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[164]||(s[164]=(0,a.Lk)("label",{class:"block text-lg font-bold text-blue-100 mb-3"},"Primary Role",-1)),(0,a.Lk)("div",Rs,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[41]||(s[41]=e=>tl.editUserData.primary_role=e),class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm appearance-none cursor-pointer"},[s[162]||(s[162]=(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"}," Select Primary Role (Optional) ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableRoles,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-blue-900 text-white"},(0,a.v_)(e.display_name||e.name),9,Fs))),128))],512),[[a.u1,tl.editUserData.primary_role]]),s[163]||(s[163]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))]),tl.editUserFormErrors.primary_role?((0,a.uX)(),(0,a.CE)("p",Ds,(0,a.v_)(tl.editUserFormErrors.primary_role),1)):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",As,[(0,a.Lk)("button",{type:"button",onClick:s[42]||(s[42]=(...e)=>tl.closeEditUserModal&&tl.closeEditUserModal(...e)),class:"px-6 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all duration-300 flex items-center space-x-2"},[...s[166]||(s[166]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{type:"submit",disabled:tl.updatingUser,class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.updatingUser?"fas fa-spinner fa-spin":"fas fa-save")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.updatingUser?"Updating...":"Update User"),1)],8,Xs)])],32)])])])):(0,a.Q3)("",!0),tl.showCreateRoleModal?((0,a.uX)(),(0,a.CE)("div",{key:3,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[56]||(s[56]=(...e)=>tl.closeCreateRoleModal&&tl.closeCreateRoleModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900 rounded-2xl shadow-2xl w-full max-w-7xl max-h-[90vh] overflow-y-auto",onClick:s[55]||(s[55]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Ms,[(0,a.Lk)("div",Ps,[s[168]||(s[168]=(0,a.Fv)('<div class="flex items-center space-x-6" data-v-f678a49e><div class="w-16 h-16 bg-blue-500/30 rounded-xl flex items-center justify-center" data-v-f678a49e><i class="fas fa-shield-alt text-white text-2xl" data-v-f678a49e></i></div><div data-v-f678a49e><h2 class="text-4xl font-bold text-white" data-v-f678a49e>Create New Role</h2><p class="text-blue-100 text-lg" data-v-f678a49e>Define a new role with specific permissions</p></div></div>',1)),(0,a.Lk)("button",{onClick:s[46]||(s[46]=(...e)=>tl.closeCreateRoleModal&&tl.closeCreateRoleModal(...e)),class:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[167]||(s[167]=[(0,a.Lk)("i",{class:"fas fa-times text-white text-lg"},null,-1)])])])]),(0,a.Lk)("div",js,[(0,a.Lk)("form",{onSubmit:s[54]||(s[54]=(0,a.D$)((...e)=>tl.createRole&&tl.createRole(...e),["prevent"])),class:"space-y-8"},[(0,a.Lk)("div",Ks,[s[174]||(s[174]=(0,a.Lk)("h3",{class:"text-2xl font-semibold text-white mb-6 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-info-circle mr-3 text-blue-300 text-xl"}),(0,a.eW)(" Role Information ")],-1)),(0,a.Lk)("div",Ts,[(0,a.Lk)("div",null,[s[169]||(s[169]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-3"},"Role Name *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[47]||(s[47]=e=>tl.newRole.name=e),type:"text",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"e.g. senior_manager",required:""},null,512),[[a.Jo,tl.newRole.name]]),s[170]||(s[170]=(0,a.Lk)("p",{class:"text-blue-200/70 text-base mt-2"}," Use lowercase with underscores (used internally) ",-1)),tl.roleFormErrors.name?((0,a.uX)(),(0,a.CE)("p",Ss,(0,a.v_)(tl.roleFormErrors.name),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[s[171]||(s[171]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-3"},"Display Name *",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":s[48]||(s[48]=e=>tl.newRole.display_name=e),type:"text",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm",placeholder:"e.g. Senior Manager",required:""},null,512),[[a.Jo,tl.newRole.display_name]]),s[172]||(s[172]=(0,a.Lk)("p",{class:"text-blue-200/70 text-base mt-2"}," Human-readable name (shown to users) ",-1)),tl.roleFormErrors.display_name?((0,a.uX)(),(0,a.CE)("p",Qs,(0,a.v_)(tl.roleFormErrors.display_name),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Is,[s[173]||(s[173]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-3"},"Description",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":s[49]||(s[49]=e=>tl.newRole.description=e),rows:"4",class:"medical-input w-full px-5 py-4 text-lg bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm resize-none",placeholder:"Describe the role and its responsibilities (optional)"},null,512),[[a.Jo,tl.newRole.description]]),tl.roleFormErrors.description?((0,a.uX)(),(0,a.CE)("p",$s,(0,a.v_)(tl.roleFormErrors.description),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Ns,[(0,a.Lk)("h3",Vs,[s[175]||(s[175]=(0,a.Lk)("div",{class:"flex items-center"},[(0,a.Lk)("i",{class:"fas fa-key mr-3 text-blue-300 text-xl"}),(0,a.eW)(" Permissions ")],-1)),(0,a.Lk)("div",Ws,[(0,a.Lk)("button",{type:"button",onClick:s[50]||(s[50]=(...e)=>tl.selectAllPermissions&&tl.selectAllPermissions(...e)),class:"text-base px-4 py-2 bg-blue-500/30 text-blue-100 rounded-lg hover:bg-blue-500/40 transition-colors font-medium"}," Select All "),(0,a.Lk)("button",{type:"button",onClick:s[51]||(s[51]=(...e)=>tl.clearAllPermissions&&tl.clearAllPermissions(...e)),class:"text-base px-4 py-2 bg-red-500/30 text-red-100 rounded-lg hover:bg-red-500/40 transition-colors font-medium"}," Clear All ")])]),tl.loadingPermissions?((0,a.uX)(),(0,a.CE)("div",Hs,[...s[176]||(s[176]=[(0,a.Lk)("div",{class:"inline-flex items-center space-x-2 text-blue-100"},[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-xl"}),(0,a.Lk)("span",null,"Loading permissions...")],-1)])])):tl.availablePermissions.length>0?((0,a.uX)(),(0,a.CE)("div",qs,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.groupedPermissions,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"space-y-3"},[(0,a.Lk)("div",zs,[(0,a.Lk)("h4",Os,(0,a.v_)(t)+" Permissions ",1),s[177]||(s[177]=(0,a.Lk)("div",{class:"flex-1 h-px bg-blue-300/30"},null,-1))]),(0,a.Lk)("div",Bs,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-colors"},[(0,a.bo)((0,a.Lk)("input",{id:"permission-"+e.id,"onUpdate:modelValue":s[52]||(s[52]=e=>tl.newRole.permissions=e),value:e.id,type:"checkbox",class:"w-5 h-5 text-blue-600 bg-white/20 border-blue-300/50 rounded focus:ring-blue-500 focus:ring-2"},null,8,Js),[[a.lH,tl.newRole.permissions]]),(0,a.Lk)("label",{for:"permission-"+e.id,class:"text-base text-blue-100 cursor-pointer hover:text-white transition-colors flex-1"},(0,a.v_)(e.display_name||e.name),9,Ys)]))),128))])]))),128))])):((0,a.uX)(),(0,a.CE)("div",Gs,[...s[178]||(s[178]=[(0,a.Lk)("i",{class:"fas fa-key text-2xl mb-2 opacity-50"},null,-1),(0,a.Lk)("p",null,"No permissions available",-1)])])),tl.roleFormErrors.permissions?((0,a.uX)(),(0,a.CE)("p",Zs,(0,a.v_)(tl.roleFormErrors.permissions),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",et,[(0,a.Lk)("button",{type:"button",onClick:s[53]||(s[53]=(...e)=>tl.closeCreateRoleModal&&tl.closeCreateRoleModal(...e)),class:"px-8 py-4 text-lg bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all duration-300 flex items-center space-x-2"},[...s[179]||(s[179]=[(0,a.Lk)("i",{class:"fas fa-times text-lg"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{type:"submit",disabled:tl.creatingRole,class:"px-8 py-4 text-lg bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.creatingRole?"fas fa-spinner fa-spin text-lg":"fas fa-shield-alt text-lg")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.creatingRole?"Creating...":"Create Role"),1)],8,st)])],32)])])])):(0,a.Q3)("",!0),tl.showAssignRolesModal&&tl.selectedUser?((0,a.uX)(),(0,a.CE)("div",{key:4,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[63]||(s[63]=(...e)=>tl.closeAssignRolesModal&&tl.closeAssignRolesModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",onClick:s[62]||(s[62]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",tt,[(0,a.Lk)("div",at,[(0,a.Lk)("div",lt,[s[181]||(s[181]=(0,a.Lk)("div",{class:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-user-edit text-white text-xl"})],-1)),(0,a.Lk)("div",null,[s[180]||(s[180]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-white"},"Assign Roles",-1)),(0,a.Lk)("p",rt,"Manage roles for "+(0,a.v_)(tl.selectedUser.name),1)])]),(0,a.Lk)("button",{onClick:s[57]||(s[57]=(...e)=>tl.closeAssignRolesModal&&tl.closeAssignRolesModal(...e)),class:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[182]||(s[182]=[(0,a.Lk)("i",{class:"fas fa-times text-white"},null,-1)])])])]),(0,a.Lk)("form",{onSubmit:s[61]||(s[61]=(0,a.D$)((...e)=>tl.assignRolesToUser&&tl.assignRolesToUser(...e),["prevent"])),class:"p-6"},[(0,a.Lk)("div",ot,[(0,a.Lk)("div",it,[(0,a.Lk)("div",nt,[(0,a.Lk)("span",dt,(0,a.v_)(tl.getInitials(tl.selectedUser.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",ct,(0,a.v_)(tl.selectedUser.name),1),(0,a.Lk)("p",ut,(0,a.v_)(tl.selectedUser.email),1),tl.selectedUser.department&&tl.selectedUser.department.display_name?((0,a.uX)(),(0,a.CE)("p",bt,[s[183]||(s[183]=(0,a.Lk)("i",{class:"fas fa-building mr-1"},null,-1)),(0,a.eW)((0,a.v_)(tl.selectedUser.department.display_name),1)])):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",mt,[s[184]||(s[184]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-white mb-3 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-shield-alt mr-2 text-blue-300"}),(0,a.eW)(" Current Roles ")],-1)),tl.selectedUser.roles&&tl.selectedUser.roles.length>0?((0,a.uX)(),(0,a.CE)("div",pt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.selectedUser.roles,e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id,class:(0,a.C4)(["px-3 py-1 rounded-lg text-base border",tl.getRoleColorClasses(e.name)])},(0,a.v_)(e.display_name||e.name),3))),128))])):((0,a.uX)(),(0,a.CE)("div",ft," No roles currently assigned "))]),(0,a.Lk)("div",xt,[s[190]||(s[190]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-white mb-3 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-tasks mr-2 text-blue-300"}),(0,a.eW)(" Assign Roles ")],-1)),tl.loadingRoles?((0,a.uX)(),(0,a.CE)("div",vt,[...s[185]||(s[185]=[(0,a.Lk)("div",{class:"inline-flex items-center space-x-2 text-blue-100"},[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-xl"}),(0,a.Lk)("span",null,"Loading available roles...")],-1)])])):tl.availableRoles&&0!==tl.availableRoles.length?((0,a.uX)(),(0,a.CE)("div",ht,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.availableRoles,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"flex items-center space-x-3 p-3 rounded-lg hover:bg-white/10 transition-colors border border-blue-300/20"},[(0,a.bo)((0,a.Lk)("input",{id:"assign-role-"+e.id,"onUpdate:modelValue":s[59]||(s[59]=e=>tl.userRoleAssignment.selectedRoles=e),value:e.id,type:"checkbox",class:"w-4 h-4 text-blue-600 bg-white/20 border-blue-300/50 rounded focus:ring-blue-500 focus:ring-2"},null,8,yt),[[a.lH,tl.userRoleAssignment.selectedRoles]]),(0,a.Lk)("label",{for:"assign-role-"+e.id,class:"text-base text-blue-100 cursor-pointer hover:text-white transition-colors flex-1"},[(0,a.Lk)("div",Lt,(0,a.v_)(e.display_name||e.name),1),e.description?((0,a.uX)(),(0,a.CE)("div",_t,(0,a.v_)(e.description),1)):(0,a.Q3)("",!0)],8,wt)]))),128))])):((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("div",kt,[s[187]||(s[187]=(0,a.Lk)("i",{class:"fas fa-exclamation-triangle text-4xl mb-4 opacity-50"},null,-1)),s[188]||(s[188]=(0,a.Lk)("p",{class:"text-lg mb-2"},"No roles available",-1)),s[189]||(s[189]=(0,a.Lk)("p",{class:"text-base opacity-75"},"Unable to load roles for assignment",-1)),(0,a.Lk)("button",{onClick:s[58]||(s[58]=(...e)=>tl.fetchRoles&&tl.fetchRoles(...e)),class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},[...s[186]||(s[186]=[(0,a.Lk)("i",{class:"fas fa-refresh mr-2"},null,-1),(0,a.eW)("Retry ",-1)])])])])),tl.roleAssignmentErrors.role_ids?((0,a.uX)(),(0,a.CE)("p",Ut,(0,a.v_)(tl.roleAssignmentErrors.role_ids[0]),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ct,[(0,a.Lk)("button",{type:"button",onClick:s[60]||(s[60]=(...e)=>tl.closeAssignRolesModal&&tl.closeAssignRolesModal(...e)),class:"px-6 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all duration-300 flex items-center space-x-2"},[...s[191]||(s[191]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{type:"submit",disabled:tl.assigningRoles,class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.assigningRoles?"fas fa-spinner fa-spin":"fas fa-user-edit")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.assigningRoles?"Updating...":"Update Roles"),1)],8,Et)])],32)])])):(0,a.Q3)("",!0),tl.showRoleHistoryModal&&tl.selectedUser?((0,a.uX)(),(0,a.CE)("div",{key:5,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[67]||(s[67]=(...e)=>tl.closeRoleHistoryModal&&tl.closeRoleHistoryModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",onClick:s[66]||(s[66]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Rt,[(0,a.Lk)("div",Ft,[(0,a.Lk)("div",Dt,[s[193]||(s[193]=(0,a.Lk)("div",{class:"w-12 h-12 bg-red-500/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-history text-white text-xl"})],-1)),(0,a.Lk)("div",null,[s[192]||(s[192]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-white"},"Role History",-1)),(0,a.Lk)("p",At,"Role changes for "+(0,a.v_)(tl.selectedUser.name),1)])]),(0,a.Lk)("button",{onClick:s[64]||(s[64]=(...e)=>tl.closeRoleHistoryModal&&tl.closeRoleHistoryModal(...e)),class:"w-10 h-10 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[194]||(s[194]=[(0,a.Lk)("i",{class:"fas fa-times text-white"},null,-1)])])])]),(0,a.Lk)("div",Xt,[(0,a.Lk)("div",Mt,[(0,a.Lk)("div",Pt,[(0,a.Lk)("div",jt,[(0,a.Lk)("span",Kt,(0,a.v_)(tl.getInitials(tl.selectedUser.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",Tt,(0,a.v_)(tl.selectedUser.name),1),(0,a.Lk)("p",St,(0,a.v_)(tl.selectedUser.email),1),tl.selectedUser.department&&tl.selectedUser.department.display_name?((0,a.uX)(),(0,a.CE)("p",Qt,[s[195]||(s[195]=(0,a.Lk)("i",{class:"fas fa-building mr-1"},null,-1)),(0,a.eW)((0,a.v_)(tl.selectedUser.department.display_name),1)])):(0,a.Q3)("",!0)])])]),tl.loadingRoleHistory?((0,a.uX)(),(0,a.CE)("div",It,[...s[196]||(s[196]=[(0,a.Lk)("div",{class:"inline-flex items-center space-x-2 text-blue-100"},[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-xl"}),(0,a.Lk)("span",null,"Loading role history...")],-1)])])):tl.roleHistory.length>0?((0,a.uX)(),(0,a.CE)("div",$t,[s[201]||(s[201]=(0,a.Lk)("h3",{class:"text-lg font-semibold text-white mb-4 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-clock mr-2 text-blue-300"}),(0,a.eW)(" Role Change Timeline ")],-1)),(0,a.Lk)("div",Nt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.roleHistory,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.id||t,class:"bg-white/10 rounded-xl p-4 backdrop-blur-sm border border-blue-300/20 hover:bg-white/15 transition-colors"},[(0,a.Lk)("div",Vt,[(0,a.Lk)("div",Wt,[(0,a.Lk)("div",{class:(0,a.C4)(["w-10 h-10 rounded-full flex items-center justify-center shadow-lg","assigned"===e.action?"bg-green-500/30 text-green-100":"bg-red-500/30 text-red-100"])},[(0,a.Lk)("i",{class:(0,a.C4)("assigned"===e.action?"fas fa-plus":"fas fa-minus")},null,2)],2),(0,a.Lk)("div",Ht,[(0,a.Lk)("div",qt,[(0,a.Lk)("span",{class:(0,a.C4)(["px-2 py-1 rounded text-base font-semibold","assigned"===e.action?"bg-green-500/30 text-green-100":"bg-red-500/30 text-red-100"])},(0,a.v_)("assigned"===e.action?"Role Added":"Role Removed"),3),e.role?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,a.C4)(["px-2 py-1 rounded text-base border",tl.getRoleColorClasses(e.role.name)])},(0,a.v_)(e.role.display_name||e.role.name),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("p",zt,[(0,a.Lk)("span",Ot,(0,a.v_)(e.role?.display_name||e.role?.name||"Unknown Role"),1),(0,a.eW)(" "+(0,a.v_)("assigned"===e.action?"was assigned to":"was removed from")+" this user ",1)]),(0,a.Lk)("div",Bt,[e.changed_by?((0,a.uX)(),(0,a.CE)("span",Jt,[s[197]||(s[197]=(0,a.Lk)("i",{class:"fas fa-user mr-1"},null,-1)),(0,a.eW)(" Changed by: "+(0,a.v_)(e.changed_by.name||"Unknown"),1)])):(0,a.Q3)("",!0),e.changed_at?((0,a.uX)(),(0,a.CE)("span",Yt,[s[198]||(s[198]=(0,a.Lk)("i",{class:"fas fa-calendar mr-1"},null,-1)),(0,a.eW)(" "+(0,a.v_)(new Date(e.changed_at).toLocaleDateString())+" at "+(0,a.v_)(new Date(e.changed_at).toLocaleTimeString()),1)])):(0,a.Q3)("",!0)]),e.metadata&&(e.metadata.context||e.metadata.changed_by_email)?((0,a.uX)(),(0,a.CE)("div",Gt,[e.metadata.context?((0,a.uX)(),(0,a.CE)("div",Zt,[s[199]||(s[199]=(0,a.Lk)("i",{class:"fas fa-info-circle mr-1"},null,-1)),(0,a.eW)(" Context: "+(0,a.v_)(e.metadata.context),1)])):(0,a.Q3)("",!0),e.metadata.changed_by_email?((0,a.uX)(),(0,a.CE)("div",ea,[s[200]||(s[200]=(0,a.Lk)("i",{class:"fas fa-envelope mr-1"},null,-1)),(0,a.eW)(" By: "+(0,a.v_)(e.metadata.changed_by_email),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",sa,[e.changed_at?((0,a.uX)(),(0,a.CE)("div",ta,(0,a.v_)(new Date(e.changed_at).toLocaleDateString()),1)):(0,a.Q3)("",!0),e.changed_at?((0,a.uX)(),(0,a.CE)("div",aa,(0,a.v_)(new Date(e.changed_at).toLocaleTimeString()),1)):(0,a.Q3)("",!0)])])]))),128))])])):((0,a.uX)(),(0,a.CE)("div",la,[...s[202]||(s[202]=[(0,a.Lk)("i",{class:"fas fa-history text-4xl mb-4 opacity-50"},null,-1),(0,a.Lk)("h3",{class:"text-lg font-medium mb-2"},"No Role History",-1),(0,a.Lk)("p",{class:"text-blue-200/70"},"No role changes have been recorded for this user yet.",-1)])])),(0,a.Lk)("div",ra,[(0,a.Lk)("button",{onClick:s[65]||(s[65]=(...e)=>tl.closeRoleHistoryModal&&tl.closeRoleHistoryModal(...e)),class:"px-6 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all duration-300 flex items-center space-x-2"},[...s[203]||(s[203]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1),(0,a.Lk)("span",null,"Close",-1)])])])])])])):(0,a.Q3)("",!0),tl.showDeleteUserModal&&tl.userToDelete?((0,a.uX)(),(0,a.CE)("div",{key:6,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[72]||(s[72]=(...e)=>tl.closeDeleteUserModal&&tl.closeDeleteUserModal(...e))},[(0,a.Lk)("div",{class:"bg-red-900/95 rounded-2xl shadow-2xl w-full max-w-md border border-red-400/30",onClick:s[71]||(s[71]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",oa,[(0,a.Lk)("div",ia,[s[205]||(s[205]=(0,a.Fv)('<div class="flex items-center space-x-4" data-v-f678a49e><div class="w-12 h-12 bg-red-500/30 rounded-xl flex items-center justify-center" data-v-f678a49e><i class="fas fa-exclamation-triangle text-red-200 text-xl" data-v-f678a49e></i></div><div data-v-f678a49e><h2 class="text-xl font-bold text-white" data-v-f678a49e>Confirm Delete User</h2><p class="text-red-100 text-base" data-v-f678a49e>This action cannot be undone</p></div></div>',1)),(0,a.Lk)("button",{onClick:s[68]||(s[68]=(...e)=>tl.closeDeleteUserModal&&tl.closeDeleteUserModal(...e)),class:"w-8 h-8 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[204]||(s[204]=[(0,a.Lk)("i",{class:"fas fa-times text-white text-base"},null,-1)])])])]),(0,a.Lk)("div",na,[(0,a.Lk)("div",da,[(0,a.Lk)("div",ca,[(0,a.Lk)("div",ua,[(0,a.Lk)("span",ba,(0,a.v_)(tl.getInitials(tl.userToDelete.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",ma,(0,a.v_)(tl.userToDelete.name),1),(0,a.Lk)("p",pa,(0,a.v_)(tl.userToDelete.email),1)])]),s[206]||(s[206]=(0,a.Fv)('<div class="bg-red-500/20 border border-red-400/30 rounded-lg p-4 mb-4" data-v-f678a49e><div class="flex items-start space-x-3" data-v-f678a49e><i class="fas fa-exclamation-triangle text-red-300 text-lg mt-0.5" data-v-f678a49e></i><div data-v-f678a49e><h4 class="font-semibold text-red-100 mb-2" data-v-f678a49e>Warning: Permanent Deletion</h4><p class="text-red-200 text-base leading-relaxed" data-v-f678a49e> You are about to permanently delete this user account. This will: </p><ul class="text-red-200 text-base mt-2 space-y-1 list-disc list-inside pl-4" data-v-f678a49e><li data-v-f678a49e>Remove the user from the system completely</li><li data-v-f678a49e>Delete all associated role assignments</li><li data-v-f678a49e>Remove access to all applications</li><li data-v-f678a49e>Cannot be recovered once deleted</li></ul></div></div></div>',1))]),(0,a.Lk)("div",fa,[(0,a.Lk)("button",{onClick:s[69]||(s[69]=(...e)=>tl.closeDeleteUserModal&&tl.closeDeleteUserModal(...e)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2"},[...s[207]||(s[207]=[(0,a.Lk)("i",{class:"fas fa-times text-base"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{onClick:s[70]||(s[70]=(...e)=>tl.deleteUser&&tl.deleteUser(...e)),disabled:tl.deletingUser,class:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.deletingUser?"fas fa-spinner fa-spin text-base":"fas fa-trash text-base")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.deletingUser?"Deleting...":"Delete User"),1)],8,xa)])])])])):(0,a.Q3)("",!0),tl.showDeleteRoleModal&&tl.userToRemoveRoles?((0,a.uX)(),(0,a.CE)("div",{key:7,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[77]||(s[77]=(...e)=>tl.closeDeleteRoleModal&&tl.closeDeleteRoleModal(...e))},[(0,a.Lk)("div",{class:"bg-orange-900/95 rounded-2xl shadow-2xl w-full max-w-md border border-orange-400/30",onClick:s[76]||(s[76]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",va,[(0,a.Lk)("div",ga,[s[209]||(s[209]=(0,a.Fv)('<div class="flex items-center space-x-4" data-v-f678a49e><div class="w-12 h-12 bg-orange-500/30 rounded-xl flex items-center justify-center" data-v-f678a49e><i class="fas fa-shield-alt text-orange-200 text-xl" data-v-f678a49e></i></div><div data-v-f678a49e><h2 class="text-xl font-bold text-white" data-v-f678a49e>Remove All Roles</h2><p class="text-orange-100 text-base" data-v-f678a49e>Remove all role assignments</p></div></div>',1)),(0,a.Lk)("button",{onClick:s[73]||(s[73]=(...e)=>tl.closeDeleteRoleModal&&tl.closeDeleteRoleModal(...e)),class:"w-8 h-8 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[208]||(s[208]=[(0,a.Lk)("i",{class:"fas fa-times text-white text-base"},null,-1)])])])]),(0,a.Lk)("div",ka,[(0,a.Lk)("div",ha,[(0,a.Lk)("div",ya,[(0,a.Lk)("div",wa,[(0,a.Lk)("span",La,(0,a.v_)(tl.getInitials(tl.userToRemoveRoles.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",_a,(0,a.v_)(tl.userToRemoveRoles.name),1),(0,a.Lk)("p",Ua,(0,a.v_)(tl.userToRemoveRoles.email),1)])]),tl.userToRemoveRoles.roles&&tl.userToRemoveRoles.roles.length>0?((0,a.uX)(),(0,a.CE)("div",Ca,[s[210]||(s[210]=(0,a.Lk)("h4",{class:"text-base font-semibold text-orange-100 mb-2"}," Current Roles to be Removed: ",-1)),(0,a.Lk)("div",Ea,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(tl.userToRemoveRoles.roles,e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id,class:(0,a.C4)(["px-3 py-1 rounded-lg text-base font-medium border",tl.getRoleColorClasses(e.name)])},(0,a.v_)(e.display_name),3))),128))])])):(0,a.Q3)("",!0),s[212]||(s[212]=(0,a.Fv)('<div class="bg-orange-500/20 border border-orange-400/30 rounded-lg p-4 mb-4" data-v-f678a49e><div class="flex items-start space-x-3" data-v-f678a49e><i class="fas fa-info-circle text-orange-300 text-lg mt-0.5" data-v-f678a49e></i><div data-v-f678a49e><h4 class="font-semibold text-orange-100 mb-2" data-v-f678a49e>Role Removal</h4><p class="text-orange-200 text-base leading-relaxed" data-v-f678a49e> This will remove all role assignments from this user. The user will: </p><ul class="text-orange-200 text-base mt-2 space-y-1 list-disc list-inside pl-4" data-v-f678a49e><li data-v-f678a49e>Lose access to role-specific features</li><li data-v-f678a49e>Need new roles assigned to regain access</li><li data-v-f678a49e>Still exist as a user in the system</li><li data-v-f678a49e>Can be assigned new roles later</li></ul></div></div></div>',1)),(0,a.Lk)("div",Ra,[(0,a.Lk)("button",{onClick:s[74]||(s[74]=(...e)=>tl.closeDeleteRoleModal&&tl.closeDeleteRoleModal(...e)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2"},[...s[211]||(s[211]=[(0,a.Lk)("i",{class:"fas fa-times text-base"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{onClick:s[75]||(s[75]=(...e)=>tl.deleteUserRoles&&tl.deleteUserRoles(...e)),disabled:tl.deletingRoles,class:"px-4 py-2 bg-orange-600 text-white rounded-lg font-medium hover:bg-orange-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.deletingRoles?"fas fa-spinner fa-spin text-base":"fas fa-shield-alt text-base")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.deletingRoles?"Removing...":"Remove All Roles"),1)],8,Fa)])])])])])):(0,a.Q3)("",!0),tl.showLockUserModal&&tl.userToLock?((0,a.uX)(),(0,a.CE)("div",{key:8,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[82]||(s[82]=(...e)=>tl.closeLockUserModal&&tl.closeLockUserModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900/95 rounded-2xl shadow-2xl w-full max-w-md border border-blue-400/30",onClick:s[81]||(s[81]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Da,[(0,a.Lk)("div",Aa,[(0,a.Lk)("div",Xa,[s[214]||(s[214]=(0,a.Lk)("div",{class:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-lock text-blue-200 text-xl"})],-1)),(0,a.Lk)("div",null,[s[213]||(s[213]=(0,a.Lk)("h2",{class:"text-xl font-bold text-white"},"Lock User Account",-1)),(0,a.Lk)("p",Ma," Are you sure you want to lock "+(0,a.v_)(tl.userToLock.name)+" from using this system? ",1)])]),(0,a.Lk)("button",{onClick:s[78]||(s[78]=(...e)=>tl.closeLockUserModal&&tl.closeLockUserModal(...e)),class:"w-8 h-8 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[215]||(s[215]=[(0,a.Lk)("i",{class:"fas fa-times text-white text-base"},null,-1)])])])]),(0,a.Lk)("div",Pa,[(0,a.Lk)("div",ja,[(0,a.Lk)("div",Ka,[(0,a.Lk)("div",Ta,[(0,a.Lk)("span",Sa,(0,a.v_)(tl.getInitials(tl.userToLock.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",Qa,(0,a.v_)(tl.userToLock.name),1),(0,a.Lk)("p",Ia,(0,a.v_)(tl.userToLock.email),1)])]),s[216]||(s[216]=(0,a.Fv)('<div class="bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mb-4" data-v-f678a49e><div class="flex items-start space-x-3" data-v-f678a49e><i class="fas fa-circle-exclamation text-blue-200 text-lg mt-0.5" data-v-f678a49e></i><div data-v-f678a49e><h4 class="font-semibold text-blue-100 mb-2" data-v-f678a49e>What locking this user means</h4><ul class="text-blue-100 text-base mt-1 space-y-1 list-disc list-inside pl-4" data-v-f678a49e><li data-v-f678a49e>The user will no longer be able to sign in to this system</li><li data-v-f678a49e>All current sessions will be terminated immediately</li><li data-v-f678a49e>You can unlock this account later by marking the user as active again</li></ul></div></div></div>',1))]),(0,a.Lk)("div",$a,[(0,a.Lk)("button",{onClick:s[79]||(s[79]=(...e)=>tl.closeLockUserModal&&tl.closeLockUserModal(...e)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2"},[...s[217]||(s[217]=[(0,a.Lk)("i",{class:"fas fa-times text-base"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{onClick:s[80]||(s[80]=(...e)=>tl.lockUser&&tl.lockUser(...e)),disabled:tl.lockingUser,class:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.lockingUser?"fas fa-spinner fa-spin text-base":"fas fa-lock text-base")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.lockingUser?"Locking...":"Yes, Lock User"),1)],8,Na)])])])])):(0,a.Q3)("",!0),tl.showUnlockUserModal&&tl.userToUnlock?((0,a.uX)(),(0,a.CE)("div",{key:9,class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s[87]||(s[87]=(...e)=>tl.closeUnlockUserModal&&tl.closeUnlockUserModal(...e))},[(0,a.Lk)("div",{class:"bg-blue-900/95 rounded-2xl shadow-2xl w-full max-w-md border border-blue-400/30",onClick:s[86]||(s[86]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Va,[(0,a.Lk)("div",Wa,[(0,a.Lk)("div",Ha,[s[219]||(s[219]=(0,a.Lk)("div",{class:"w-12 h-12 bg-blue-500/30 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-lock-open text-blue-200 text-xl"})],-1)),(0,a.Lk)("div",null,[s[218]||(s[218]=(0,a.Lk)("h2",{class:"text-xl font-bold text-white"},"Unlock User Account",-1)),(0,a.Lk)("p",qa," Are you sure you want to restore access for "+(0,a.v_)(tl.userToUnlock.name)+"? ",1)])]),(0,a.Lk)("button",{onClick:s[83]||(s[83]=(...e)=>tl.closeUnlockUserModal&&tl.closeUnlockUserModal(...e)),class:"w-8 h-8 bg-white/10 hover:bg-white/20 rounded-lg transition-colors duration-200 flex items-center justify-center"},[...s[220]||(s[220]=[(0,a.Lk)("i",{class:"fas fa-times text-white text-base"},null,-1)])])])]),(0,a.Lk)("div",za,[(0,a.Lk)("div",Oa,[(0,a.Lk)("div",Ba,[(0,a.Lk)("div",Ja,[(0,a.Lk)("span",Ya,(0,a.v_)(tl.getInitials(tl.userToUnlock.name)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",Ga,(0,a.v_)(tl.userToUnlock.name),1),(0,a.Lk)("p",Za,(0,a.v_)(tl.userToUnlock.email),1)])]),s[221]||(s[221]=(0,a.Fv)('<div class="bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mb-4" data-v-f678a49e><div class="flex items-start space-x-3" data-v-f678a49e><i class="fas fa-circle-info text-blue-200 text-lg mt-0.5" data-v-f678a49e></i><div data-v-f678a49e><h4 class="font-semibold text-blue-100 mb-2" data-v-f678a49e>What unlocking this user means</h4><ul class="text-blue-100 text-base mt-1 space-y-1 list-disc list-inside pl-4" data-v-f678a49e><li data-v-f678a49e>The user will be able to sign in to this system again</li><li data-v-f678a49e>They will still need to log in with valid credentials</li><li data-v-f678a49e>No sessions are automatically created on unlock</li></ul></div></div></div>',1))]),(0,a.Lk)("div",el,[(0,a.Lk)("button",{onClick:s[84]||(s[84]=(...e)=>tl.closeUnlockUserModal&&tl.closeUnlockUserModal(...e)),class:"px-4 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2"},[...s[222]||(s[222]=[(0,a.Lk)("i",{class:"fas fa-times text-base"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])]),(0,a.Lk)("button",{onClick:s[85]||(s[85]=(...e)=>tl.unlockUser&&tl.unlockUser(...e)),disabled:tl.unlockingUser,class:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[(0,a.Lk)("i",{class:(0,a.C4)(tl.unlockingUser?"fas fa-spinner fa-spin text-base":"fas fa-lock-open text-base")},null,2),(0,a.Lk)("span",null,(0,a.v_)(tl.unlockingUser?"Unlocking...":"Yes, Unlock User"),1)],8,sl)])])])])):(0,a.Q3)("",!0)])}t(4114),t(8111),t(2489),t(116),t(7588),t(1701),t(3579);var al=t(896),ll=t.n(al),rl=t(6933),ol=t(8966),il=t(1445),nl=(t(60),t(274));const dl={async getAllUsers(e={}){try{const s=await nl.A.get("/admin/users",{params:e});return s.data}catch(s){throw console.error("Error fetching users:",s),s}},async getCreateFormData(){try{const e=await nl.A.get("/admin/users/create-form-data");return e.data}catch(e){throw console.error("Error fetching create form data:",e),e}},async getDepartments(){try{const e=await nl.A.get("/admin/users/departments");return e.data}catch(e){throw console.error("Error fetching departments:",e),e}},async getRoles(){try{const e=await nl.A.get("/admin/users/roles");return e.data}catch(e){throw console.error("Error fetching roles:",e),e}},async createUser(e){try{const s=await nl.A.post("/admin/users",e);return s.data}catch(s){throw console.error("Error creating user:",s),s}},async updateUser(e,s){try{const t=await nl.A.put(`/admin/users/${e}`,s);return t.data}catch(t){throw console.error("Error updating user:",t),t}},async deleteUser(e){try{const s=await nl.A.delete(`/admin/users/${e}`);return s.data}catch(s){throw console.error("Error deleting user:",s),s}},async toggleUserStatus(e){try{const s=await nl.A.patch(`/admin/users/${e}/toggle-status`);return s.data}catch(s){throw console.error("Error toggling user status:",s),s}},async getUserStatistics(){try{const e=await nl.A.get("/admin/users/statistics");return e.data}catch(e){throw console.error("Error fetching user statistics:",e),e}},async getUser(e){try{const s=await nl.A.get(`/admin/users/${e}`);return s.data}catch(s){throw console.error("Error fetching user details:",s),s}},async validateUserData(e){try{const s=await nl.A.post("/admin/users/validate",e);return s.data}catch(s){throw console.error("Error validating user data:",s),s}},async getPermissions(){try{const e=await nl.A.get("/admin/permissions");return e.data}catch(e){throw console.error("Error fetching permissions:",e),e}},async createRole(e){try{const s=await nl.A.post("/admin/roles",e);return s.data}catch(s){throw console.error("Error creating role:",s),s}},async updateRole(e,s){try{const t=await nl.A.put(`/admin/roles/${e}`,s);return t.data}catch(t){throw console.error("Error updating role:",t),t}},async deleteRole(e){try{const s=await nl.A.delete(`/admin/roles/${e}`);return s.data}catch(s){throw console.error("Error deleting role:",s),s}},async assignUserRoles(e,s){try{const t=await nl.A.post(`/user-roles/${e}/assign`,{role_ids:s});return t.data}catch(t){throw console.error("Error assigning roles:",t),t}},async getUserRoleHistory(e,s={}){try{const t=await nl.A.get(`/user-roles/${e}/history`,{params:s});return t.data}catch(t){throw console.error("Error fetching user role history:",t),t}},async removeUserRole(e,s){try{const t=await nl.A.delete(`/user-roles/${e}/roles/${s}`);return t.data}catch(t){throw console.error("Error removing role:",t),t}}};var cl=dl,ul={name:"UserRoleAssignment",components:{AppHeader:rl.A,ModernSidebar:ol.A,UnifiedLoadingBanner:il.A},setup(){const e=(0,a.KR)(!1),s=(0,a.KR)([]),t=(0,a.KR)([]),l=(0,a.KR)([]),r=(0,a.KR)({total_users:0,users_with_roles:0,department_distribution:[],hod_users:0}),o=(0,a.KR)(""),i=(0,a.KR)(""),n=(0,a.KR)(""),d=(0,a.KR)("name"),c=(0,a.KR)(!1),u=(0,a.KR)(!1),b=(0,a.KR)(!1),m=(0,a.KR)(!1),p=(0,a.KR)(!1),f=(0,a.KR)(!1),x=(0,a.KR)(!1),v=(0,a.KR)(!1),g=(0,a.KR)(!1),k=(0,a.KR)(!1),h=(0,a.KR)(!1),y=(0,a.KR)(!1),w=(0,a.KR)({name:"",email:"",phone:"",pf_number:"",password:"",password_confirmation:"",department_id:"",primary_role:"",is_active:!0}),L=(0,a.KR)({name:"",display_name:"",description:"",permissions:[]}),_=(0,a.KR)({}),U=(0,a.KR)({}),C=(0,a.KR)([]),E=(0,a.KR)(null),R=(0,a.KR)({selectedRoles:[]}),F=(0,a.KR)([]),D=(0,a.KR)({}),A=(0,a.KR)(!1),X=(0,a.KR)(""),M=(0,a.KR)("success"),P=(0,a.KR)(null),j=(0,a.KR)(!1),K=(0,a.KR)(!1),T=(0,a.KR)(!1),S=(0,a.KR)(!1),Q=(0,a.KR)(!1),I=(0,a.KR)(null),$=(0,a.KR)(null),N=(0,a.KR)(null),V=(0,a.KR)(null),W=(0,a.KR)(!1),H=(0,a.KR)(!1),q=(0,a.KR)(!1),z=(0,a.KR)(!1),O=(0,a.KR)(!1),B=(0,a.KR)(null),J=(0,a.KR)(!1),Y=(0,a.KR)(!1),G=(0,a.KR)(!1),Z=(0,a.KR)({name:"",email:"",phone:"",pf_number:"",password:"",password_confirmation:"",department_id:"",primary_role:"",is_active:!0}),ee=(0,a.KR)({}),se=(0,a.EW)(()=>!1),te=(0,a.EW)(()=>{if(!Array.isArray(s.value))return console.warn("users.value is not an array:",s.value),[];let e=[...s.value];if(o.value){const s=o.value.toLowerCase();e=e.filter(e=>e.name&&e.name.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.pf_number&&e.pf_number.toLowerCase().includes(s))}return i.value&&(e=e.filter(e=>{const s=e.roles&&Array.isArray(e.roles)&&e.roles.some(e=>{const s=e.name===i.value;return s});return s})),n.value&&(e=e.filter(e=>e.department_id==n.value)),e.sort((e,s)=>{const t=(e[d.value]||"").toString(),a=(s[d.value]||"").toString();return t.localeCompare(a)}),e}),ae=(0,a.EW)(()=>{const e={};return C.value.forEach(s=>{let t=s.category;if(!t&&s.name){const e=s.name.split(".");t=e.length>1?e[0]:"general"}t||(t="general"),e[t]||(e[t]=[]),e[t].push(s)}),e}),le=async()=>{e.value=!0;try{Array.isArray(s.value)||(s.value=[]);const e=await Promise.allSettled([re(),oe(),Xe(),Me()]);e.forEach((e,s)=>{const t=["users","statistics","roles","departments"];"rejected"===e.status&&console.error(`Data fetch ${t[s]} failed:`,e.reason)})}catch(a){console.error("Error initializing data:",a),s.value=s.value||[],t.value=t.value||[],l.value=l.value||[]}finally{e.value=!1}},re=async()=>{try{0;const e=await cl.getAllUsers();0,e&&e.success&&e.data?Array.isArray(e.data.users)?s.value=e.data.users:Array.isArray(e.data)?s.value=e.data:(console.warn("Unexpected success response structure:",e.data),s.value=[]):e&&e.data?Array.isArray(e.data)?s.value=e.data:e.data.users&&Array.isArray(e.data.users)?s.value=e.data.users:e.data.data&&Array.isArray(e.data.data)?s.value=e.data.data:(console.warn("Unexpected response structure:",e),s.value=[]):(console.warn("No data in response:",e),s.value=[])}catch(e){console.error("Error fetching users:",e),s.value=[],"NETWORK_ERROR"===e.code||e.message?.includes("Network Error")?Ae("Network error: Unable to fetch users. Please check your connection."):401===e.response?.status?Ae("Authentication error: Please log in again."):e.response?.status>=500&&Ae("Server error: Unable to fetch users. Please try again later.")}},oe=async()=>{try{const e=await cl.getUserStatistics();r.value=e.data||{total_users:0,users_with_roles:0,department_distribution:[],hod_users:0}}catch(e){console.error("Error fetching user statistics:",e),r.value={total_users:0,users_with_roles:0,department_distribution:[],hod_users:0}}},ie=async()=>{await le()},ne=()=>{0},de=ll()(()=>{},500),ce=()=>{},ue=async()=>{c.value=!0,_.value={};try{const[e,s]=await Promise.all([cl.getDepartments(),cl.getRoles()]);l.value=e.data||[],t.value=s.data||[]}catch(e){console.error("Error loading form data:",e),Ae("Failed to load form data")}},be=()=>{c.value=!1,ge()},me=async e=>{P.value=null,O.value=!0,B.value=e,ee.value={},Z.value={name:e.name||"",email:e.email||"",phone:Ce(e.phone||""),pf_number:e.pf_number||"",password:"",password_confirmation:"",department_id:e.department&&e.department.id?e.department.id:e.department_id||"",primary_role:e.roles&&e.roles.length>0?e.roles[0].id:"",is_active:void 0===e.is_active||e.is_active};try{const[e,s]=await Promise.all([cl.getDepartments(),cl.getRoles()]);l.value=e.data||[],t.value=s.data||[]}catch(s){console.error("Error loading form data:",s),Ae("Failed to load form data")}},pe=()=>{O.value=!1,fe()},fe=()=>{Z.value={name:"",email:"",phone:"",pf_number:"",password:"",password_confirmation:"",department_id:"",primary_role:"",is_active:!0},ee.value={},B.value=null,Y.value=!1,G.value=!1},xe=async()=>{u.value=!0,U.value={},await he()},ve=()=>{u.value=!1,ke()},ge=()=>{w.value={name:"",email:"",phone:"",pf_number:"",password:"",password_confirmation:"",department_id:"",primary_role:"",is_active:!0},_.value={},h.value=!1,y.value=!1},ke=()=>{L.value={name:"",display_name:"",description:"",permissions:[]},U.value={}},he=async()=>{g.value=!0;try{const e=await cl.getPermissions();C.value=e.data||[]}catch(e){console.error("Error fetching permissions:",e),C.value=[{id:1,name:"users.view",display_name:"View Users",category:"users"},{id:2,name:"users.create",display_name:"Create Users",category:"users"},{id:3,name:"users.edit",display_name:"Edit Users",category:"users"},{id:4,name:"users.delete",display_name:"Delete Users",category:"users"},{id:5,name:"users.assign_roles",display_name:"Assign User Roles",category:"users"},{id:6,name:"roles.view",display_name:"View Roles",category:"roles"},{id:7,name:"roles.create",display_name:"Create Roles",category:"roles"},{id:8,name:"roles.edit",display_name:"Edit Roles",category:"roles"},{id:9,name:"roles.delete",display_name:"Delete Roles",category:"roles"},{id:10,name:"departments.view",display_name:"View Departments",category:"departments"},{id:11,name:"departments.create",display_name:"Create Departments",category:"departments"},{id:12,name:"departments.edit",display_name:"Edit Departments",category:"departments"},{id:13,name:"departments.delete",display_name:"Delete Departments",category:"departments"},{id:14,name:"departments.assign_hod",display_name:"Assign Department HOD",category:"departments"},{id:15,name:"requests.view_all",display_name:"View All Requests",category:"requests"},{id:16,name:"requests.approve",display_name:"Approve Requests",category:"requests"},{id:17,name:"requests.reject",display_name:"Reject Requests",category:"requests"},{id:18,name:"requests.cancel",display_name:"Cancel Requests",category:"requests"},{id:19,name:"devices.view",display_name:"View Device Inventory",category:"devices"},{id:20,name:"devices.create",display_name:"Add Devices",category:"devices"},{id:21,name:"devices.edit",display_name:"Edit Devices",category:"devices"},{id:22,name:"devices.delete",display_name:"Delete Devices",category:"devices"},{id:23,name:"devices.approve_booking",display_name:"Approve Device Bookings",category:"devices"},{id:24,name:"admin.full_access",display_name:"Full Admin Access",category:"admin"},{id:25,name:"admin.view_logs",display_name:"View System Logs",category:"admin"},{id:26,name:"admin.manage_settings",display_name:"Manage System Settings",category:"admin"},{id:27,name:"onboarding.view",display_name:"View Onboarding Status",category:"onboarding"},{id:28,name:"onboarding.reset",display_name:"Reset User Onboarding",category:"onboarding"},{id:29,name:"ict.view_tasks",display_name:"View ICT Tasks",category:"ict"},{id:30,name:"ict.assign_tasks",display_name:"Assign ICT Tasks",category:"ict"},{id:31,name:"ict.complete_tasks",display_name:"Complete ICT Tasks",category:"ict"},{id:32,name:"ict.grant_access",display_name:"Grant System Access",category:"ict"}]}finally{g.value=!1}},ye=()=>{L.value.permissions=C.value.map(e=>e.id)},we=()=>{L.value.permissions=[]},Le=async()=>{if(p.value=!0,_.value={},Ee())try{const e={name:w.value.name.trim(),email:w.value.email.trim().toLowerCase(),phone:Ce(w.value.phone.trim()),pf_number:w.value.pf_number.trim(),password:w.value.password,password_confirmation:w.value.password_confirmation,department_id:w.value.department_id||null,is_active:w.value.is_active,role_ids:[]};if(w.value.primary_role&&e.role_ids.push(parseInt(w.value.primary_role)),0===e.role_ids.length){const s=t.value.find(e=>"staff"===e.name);if(!s)throw new Error("No default role available. Please select a role or create a staff role first.");e.role_ids.push(s.id)}const s=await cl.createUser(e);if(!s.success)throw new Error(s.message||"Failed to create user");De("User created successfully!"),be(),await ie()}catch(e){if(console.error("Error creating user:",e),422===e.response?.status&&e.response.data?.errors){_.value=e.response.data.errors;const s=e.response.data.errors;let t="";if(s.email&&s.email.includes("This email address is already registered."))t=` User with email "${w.value.email}" already exists. Please use a different email address.`;else if(s.pf_number&&s.pf_number.includes("This PF number is already registered."))t=` User with PF Number "${w.value.pf_number}" already exists. Please use a different PF number.`;else if(s.email||s.pf_number)t=" A user with this email or PF number already exists. Please check your details and try again.";else{const e=Object.values(s)[0];t=Array.isArray(e)?e[0]:e}t&&Ae(t)}else Ae(e.message||"Failed to create user")}finally{p.value=!1}else p.value=!1},_e=async()=>{f.value=!0,U.value={};try{const e={name:L.value.name.trim(),display_name:L.value.display_name.trim(),description:L.value.description.trim()||null,permissions:L.value.permissions},s=await cl.createRole(e);if(!s.success)throw new Error(s.message||"Failed to create role");De("Role created successfully!"),ve(),await ie()}catch(e){console.error("Error creating role:",e),422===e.response?.status&&e.response.data?.errors?U.value=e.response.data.errors:Ae(e.message||"Failed to create role")}finally{f.value=!1}},Ue=async()=>{if(J.value=!0,ee.value={},Z.value.password&&Z.value.password!==Z.value.password_confirmation)return ee.value={password_confirmation:["Passwords do not match."]},void(J.value=!1);try{const e={name:Z.value.name.trim(),email:Z.value.email.trim().toLowerCase(),phone:Ce(Z.value.phone.trim()),pf_number:Z.value.pf_number.trim()||null,department_id:Z.value.department_id||null,is_active:Z.value.is_active};Z.value.password&&(e.password=Z.value.password,e.password_confirmation=Z.value.password_confirmation),Z.value.primary_role&&(e.role_ids=[parseInt(Z.value.primary_role)]);const t=await cl.updateUser(B.value.id,e);if(!t.success)throw new Error(t.message||"Failed to update user");{const e=s.value.findIndex(e=>e.id===B.value.id);if(-1!==e){const t={...s.value[e]};if(t.name=Z.value.name,t.email=Z.value.email,t.phone=Ce(Z.value.phone),t.pf_number=Z.value.pf_number,t.is_active=Z.value.is_active,t.department_id=Z.value.department_id||null,Z.value.department_id){const e=l.value.find(e=>String(e.id)===String(Z.value.department_id));e&&(t.department={id:e.id,name:e.name,display_name:e.display_name||e.name})}else t.department=null;s.value.splice(e,1,t)}De("User updated successfully!"),pe(),await ie()}}catch(e){if(console.error("Error updating user:",e),422===e.response?.status&&e.response.data?.errors){ee.value=e.response.data.errors;const s=e.response.data.errors;let t="";if(s.email&&s.email.includes("This email address is already registered."))t=` Email "${Z.value.email}" is already in use by another user. Please use a different email address.`;else if(s.pf_number&&s.pf_number.includes("This PF number is already registered."))t=` PF Number "${Z.value.pf_number}" is already in use by another user. Please use a different PF number.`;else if(s.email||s.pf_number)t=" The email or PF number you entered is already in use by another user. Please check your details and try again.";else{const e=Object.values(s)[0];t=Array.isArray(e)?e[0]:e}t&&Ae(t)}else Ae(e.message||"Failed to update user")}finally{J.value=!1}},Ce=e=>{if(!e)return"";let s=String(e).trim();return s=s.replace(/\s|-/g,""),s.startsWith("+255")?s:s.startsWith("255")?"+"+s:s.startsWith("0")?"+255"+s.slice(1):s},Ee=()=>{const e={};if(w.value.name&&w.value.name.trim()||(e.name="Name is required."),w.value.email&&w.value.email.trim()){const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.value.email.trim());s||(e.email="Enter a valid email address.")}else e.email="Email is required.";if(w.value.phone=Ce(w.value.phone),w.value.phone&&w.value.phone.trim()){const s=/^\+255\d{9}$/.test(w.value.phone);s||(e.phone="Phone must be in the format +255XXXXXXXXX.")}else e.phone="Phone number is required.";return w.value.pf_number&&w.value.pf_number.trim()||(e.pf_number="PF number is required."),w.value.password||(e.password="Password is required."),w.value.password_confirmation?w.value.password!==w.value.password_confirmation&&(e.password_confirmation="Passwords do not match."):e.password_confirmation="Please confirm the password.",_.value=e,0===Object.keys(e).length},Re=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2),Fe=e=>{const s={admin:"bg-red-500/30 text-red-100 border-red-400/50",head_of_department:"bg-blue-500/30 text-blue-100 border-blue-400/50",ict_director:"bg-teal-500/30 text-teal-100 border-teal-400/50",ict_officer:"bg-green-500/30 text-green-100 border-green-400/50",divisional_director:"bg-orange-500/30 text-orange-100 border-orange-400/50",staff:"bg-gray-500/30 text-gray-100 border-gray-400/50"};return s[e]||"bg-blue-500/30 text-blue-100 border-blue-400/50"},De=e=>{X.value=e,M.value="success",A.value=!0,setTimeout(()=>{A.value=!1},5e3)},Ae=e=>{X.value=e,M.value="error",A.value=!0,setTimeout(()=>{A.value=!1},8e3)},Xe=async()=>{k.value=!0;try{0;const e=await cl.getRoles();0,e&&e.success&&e.data?t.value=Array.isArray(e.data)?e.data:[]:t.value=[]}catch(e){console.error("Error fetching roles:",e),console.error("Error details:",{message:e.message,response:e.response?.data,status:e.response?.status}),t.value=[],Ae("Failed to load available roles: "+(e.response?.data?.message||e.message))}finally{k.value=!1}},Me=async()=>{try{0;const e=await cl.getDepartments();0,e&&e.success&&e.data||e&&e.data?l.value=Array.isArray(e.data)?e.data:[]:l.value=[]}catch(e){console.error("Error fetching departments:",e),l.value=[],Ae("Failed to load departments")}},Pe=async e=>{try{0,E.value=e,R.value.selectedRoles=e.roles?e.roles.map(e=>e.id):[],D.value={},b.value=!0,await Xe(),0===l.value.length&&await Me()}catch(s){console.error("Error opening assign roles dialog:",s),Ae("Failed to open role assignment dialog")}},je=async e=>{try{E.value=e,v.value=!0,m.value=!0,F.value=[];const s=await cl.getUserRoleHistory(e.id);if(!s.success)throw new Error(s.message||"Failed to fetch role history");F.value=s.data.data||[]}catch(s){console.error("Error fetching role history:",s),Ae("Failed to load role history"),F.value=[]}finally{v.value=!1}},Ke=()=>{b.value=!1,E.value=null,R.value.selectedRoles=[],D.value={}},Te=()=>{m.value=!1,E.value=null,F.value=[]},Se=async()=>{if(!E.value)return;x.value=!0,D.value={};const e=i.value;try{const s=await cl.assignUserRoles(E.value.id,R.value.selectedRoles);if(!s.success)throw new Error(s.message||"Failed to assign roles");{se.value,De("Roles updated successfully!"),Ke(),se.value;const s=R.value.selectedRoles,a=e&&s.length>0&&t.value.some(t=>t.id&&s.includes(t.id)&&t.name===e);e&&!a&&(i.value="",se.value),await ie(),se.value}}catch(s){console.error("Error assigning roles:",s),422===s.response?.status&&s.response.data?.errors?D.value=s.response.data.errors:Ae(s.message||"Failed to assign roles")}finally{x.value=!1}},Qe=(e,s)=>{if(P.value===e)P.value=null,j.value=!1;else if(P.value=e,s&&s.currentTarget){const e=s.currentTarget.getBoundingClientRect(),t=window.innerHeight-e.bottom,a=260;j.value=t<a}else j.value=!1},Ie=e=>{if(!e)return void(P.value=null);const s=e.target.closest("[data-dropdown-menu]");s||(P.value=null,j.value=!1)},$e=e=>{I.value=e,K.value=!0,Ie()},Ne=e=>{$.value=e,T.value=!0,Ie()},Ve=e=>{e&&(N.value=e,S.value=!0,Ie())},We=e=>{e&&(V.value=e,Q.value=!0,Ie())},He=()=>{K.value=!1,I.value=null},qe=()=>{T.value=!1,$.value=null},ze=()=>{S.value=!1,N.value=null},Oe=()=>{Q.value=!1,V.value=null},Be=async()=>{if(I.value){W.value=!0;try{const e=await cl.deleteUser(I.value.id);if(!e.success)throw new Error(e.message||"Failed to delete user");De(`User "${I.value.name}" has been deleted successfully`),He(),await ie()}catch(e){console.error("Error deleting user:",e),Ae(e.message||"Failed to delete user")}finally{W.value=!1}}},Je=async()=>{if($.value){H.value=!0;try{const e=await cl.assignUserRoles($.value.id,[]);if(!e.success)throw new Error(e.message||"Failed to remove user roles");De(`All roles have been removed from "${$.value.name}"`),qe(),await ie()}catch(e){console.error("Error removing user roles:",e),Ae(e.message||"Failed to remove user roles")}finally{H.value=!1}}},Ye=async()=>{if(N.value){q.value=!0;try{const e=await cl.updateUser(N.value.id,{is_active:!1});if(!e.success)throw new Error(e.message||"Failed to lock user");De(`User "${N.value.name}" has been locked and can no longer sign in to this system.`),ze(),await ie()}catch(e){console.error("Error locking user:",e),Ae(e.message||"Failed to lock user")}finally{q.value=!1}}},Ge=async()=>{if(V.value){z.value=!0;try{const e=await cl.updateUser(V.value.id,{is_active:!0});if(!e.success)throw new Error(e.message||"Failed to unlock user");De(`User "${V.value.name}" has been unlocked and can sign in again.`),Oe(),await ie()}catch(e){console.error("Error unlocking user:",e),Ae(e.message||"Failed to unlock user")}finally{z.value=!1}}};return(0,a.sV)(()=>{le(),document.addEventListener("click",Ie)}),{loading:e,users:s,availableRoles:t,availableDepartments:l,userStatistics:r,searchQuery:o,filterRole:i,filterDepartment:n,sortBy:d,showSnackbar:A,snackbarMessage:X,snackbarColor:M,showCreateUserModal:c,showCreateRoleModal:u,showAssignRolesModal:b,showRoleHistoryModal:m,showDeleteUserModal:K,showDeleteRoleModal:T,showLockUserModal:S,showUnlockUserModal:Q,creatingUser:p,creatingRole:f,assigningRoles:x,loadingRoleHistory:v,loadingPermissions:g,loadingRoles:k,showPassword:h,showConfirmPassword:y,deletingUser:W,deletingRoles:H,lockingUser:q,unlockingUser:z,showEditUserModal:O,editingUser:B,updatingUser:J,showEditPassword:Y,showEditConfirmPassword:G,newUser:w,newRole:L,userFormErrors:_,roleFormErrors:U,availablePermissions:C,selectedUser:E,userRoleAssignment:R,roleHistory:F,roleAssignmentErrors:D,userToDelete:I,userToRemoveRoles:$,userToLock:N,userToUnlock:V,openMenuId:P,menuOpensUp:j,editUserData:Z,editUserFormErrors:ee,filteredUsers:te,groupedPermissions:ae,isDevelopment:se,refreshData:ie,debugFilterData:ne,debouncedSearch:de,applyFilters:ce,getInitials:Re,getRoleColorClasses:Fe,normalizePhoneNumber:Ce,fetchRoles:Xe,fetchDepartments:Me,openAssignRolesDialog:Pe,viewRoleHistory:je,openCreateUserModal:ue,closeCreateUserModal:be,openCreateRoleModal:xe,closeCreateRoleModal:ve,openEditUserModal:me,closeEditUserModal:pe,closeAssignRolesModal:Ke,closeRoleHistoryModal:Te,createUser:Le,updateUser:Ue,createRole:_e,assignRolesToUser:Se,selectAllPermissions:ye,clearAllPermissions:we,showSuccessMessage:De,showErrorMessage:Ae,toggleUserMenu:Qe,closeAllMenus:Ie,confirmDeleteUser:$e,confirmDeleteUserRole:Ne,confirmLockUser:Ve,confirmUnlockUser:We,closeDeleteUserModal:He,closeDeleteRoleModal:qe,closeLockUserModal:ze,closeUnlockUserModal:Oe,deleteUser:Be,deleteUserRoles:Je,lockUser:Ye,unlockUser:Ge}}},bl=t(1241);const ml=(0,bl.A)(ul,[["render",tl],["__scopeId","data-v-f678a49e"]]);var pl=ml}}]);
//# sourceMappingURL=8722.fa322917.js.map