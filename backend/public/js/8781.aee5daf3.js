"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8781],{7746:function(e,t,a){a.r(t),a.d(t,{default:function(){return me}});var s=a(5796);const r={class:"flex flex-col h-screen"},o={class:"flex flex-1 overflow-hidden"},l={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"absolute inset-0"},u={class:"max-w-full mx-auto relative z-10"},f={class:"medical-glass-card rounded-b-3xl overflow-hidden"},b={class:"p-6 space-y-6"},m={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-500 group"},h={class:"flex items-start space-x-4"},x={class:"flex-1"},v={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},p={class:"relative"},g={class:"relative"},w={class:"medical-card bg-gradient-to-r from-teal-600/25 to-blue-600/25 border-2 border-teal-400/40 p-6 rounded-2xl backdrop-blur-sm hover:shadow-2xl hover:shadow-teal-500/20 transition-all duration-500 group"},k={class:"flex items-center space-x-4 mb-6"},y={class:"text-xl font-bold text-white flex items-center"},L={key:0,class:"text-center py-8"},C={key:1,class:"text-center py-8"},_={class:"bg-red-500/20 border border-red-400/40 rounded-xl p-6 backdrop-blur-sm"},R={class:"text-red-100"},E={class:"text-sm opacity-75"},T={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},U={class:"flex items-start justify-between mb-3"},I={class:"flex-1"},A={class:"font-bold text-white text-sm"},S={class:"text-teal-100 text-xs"},M={class:"text-teal-200 text-xs capitalize"},P={class:"flex flex-col space-y-1"},j={class:"flex items-center space-x-1"},D={class:"flex items-center space-x-1"},F={class:"flex space-x-2"},N=["onClick","disabled"],K=["onClick","disabled"],X=["onClick","disabled"],O={key:3,class:"text-center py-8"},z={key:4,class:"mt-6 flex justify-center"},Q={class:"flex items-center space-x-2"},H=["disabled"],$={class:"px-4 py-2 text-white font-medium"},W=["disabled"],B={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},G={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-100 animate-slideUp overflow-hidden modal-shadow"},V={class:"p-6 text-center body-shadow"},Y={class:"mb-6"},q={class:"text-lg font-semibold text-gray-800 mb-3 drop-shadow-sm"},J={class:"text-gray-600 text-base leading-relaxed"},Z={class:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-100 shadow-md reset-indicator-shadow"},ee={class:"flex items-center justify-center space-x-4"},te={key:0,class:"flex items-center space-x-2"},ae={key:1,class:"text-gray-400"},se={key:2,class:"flex items-center space-x-2"},re={class:"flex space-x-3"};function oe(e,t,a,oe,le,ie){const ne=(0,s.g2)("Header"),de=(0,s.g2)("ModernSidebar"),ce=(0,s.g2)("AppFooter");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(ne),(0,s.Lk)("div",o,[(0,s.bF)(de),(0,s.Lk)("main",l,[(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[(0,s.Lk)("div",d,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(48,e=>(0,s.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,s.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,s.Lk)("div",c,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(15,e=>(0,s.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,s.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,s.Lk)("i",{class:(0,s.C4)(["fas",["fa-heartbeat","fa-user-md","fa-hospital","fa-stethoscope","fa-plus"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),(0,s.Lk)("div",u,[t[30]||(t[30]=(0,s.Fv)('<div class="medical-glass-card rounded-t-3xl p-6 mb-0 border-b border-blue-300/30" data-v-bf375c84><div class="flex justify-between items-center" data-v-bf375c84><div class="w-28 h-28 mr-6 transform hover:scale-110 transition-transform duration-300" data-v-bf375c84><div class="w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25" data-v-bf375c84><img src="/assets/images/ngao2.png" alt="National Shield" class="max-w-18 max-h-18 object-contain" data-v-bf375c84></div></div><div class="text-center flex-1" data-v-bf375c84><h1 class="text-4xl font-bold text-white mb-2 tracking-wide drop-shadow-lg animate-fade-in" data-v-bf375c84> MUHIMBILI NATIONAL HOSPITAL </h1><div class="relative inline-block mb-2" data-v-bf375c84><div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-4 rounded-full text-xl font-bold shadow-2xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-400/60" data-v-bf375c84><span class="relative z-10 flex items-center gap-2" data-v-bf375c84><i class="fas fa-cog" data-v-bf375c84></i> ADMIN SETTINGS </span><div class="absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300" data-v-bf375c84></div></div></div><h2 class="text-2xl font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay" data-v-bf375c84> ONBOARDING RESET MANAGEMENT </h2></div><div class="w-28 h-28 ml-6 transform hover:scale-110 transition-transform duration-300" data-v-bf375c84><div class="w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25" data-v-bf375c84><img src="/assets/images/logo2.png" alt="Muhimbili Logo" class="max-w-18 max-h-18 object-contain" data-v-bf375c84></div></div></div></div>',1)),(0,s.Lk)("div",f,[(0,s.Lk)("div",b,[(0,s.Lk)("div",m,[(0,s.Lk)("div",h,[t[15]||(t[15]=(0,s.Lk)("div",{class:"flex-shrink-0"},[(0,s.Lk)("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50"},[(0,s.Lk)("i",{class:"fas fa-search text-white text-xl"})])],-1)),(0,s.Lk)("div",x,[t[14]||(t[14]=(0,s.Lk)("h3",{class:"text-xl font-bold text-white mb-4 flex items-center"},[(0,s.Lk)("i",{class:"fas fa-user-search mr-2 text-blue-300"}),(0,s.eW)(" Search User ")],-1)),(0,s.Lk)("div",v,[(0,s.Lk)("div",null,[t[10]||(t[10]=(0,s.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2"}," Search by Name or Email ",-1)),(0,s.Lk)("div",p,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>oe.searchQuery=e),type:"text",class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20",placeholder:"Enter user name or email",onInput:t[1]||(t[1]=(...e)=>oe.searchUsers&&oe.searchUsers(...e))},null,544),[[s.Jo,oe.searchQuery]]),t[9]||(t[9]=(0,s.Lk)("div",{class:"absolute inset-0 rounded-xl bg-gradient-to-r from-cyan-500/10 to-blue-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])]),(0,s.Lk)("div",null,[t[13]||(t[13]=(0,s.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2"}," Filter by Role ",-1)),(0,s.Lk)("div",g,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>oe.selectedRole=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-cyan-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-cyan-500/20 appearance-none cursor-pointer",onChange:t[3]||(t[3]=(...e)=>oe.searchUsers&&oe.searchUsers(...e))},[...t[11]||(t[11]=[(0,s.Fv)('<option value="" class="bg-gray-800 text-white" data-v-bf375c84>All Roles</option><option value="staff" class="bg-gray-800 text-white" data-v-bf375c84>Staff</option><option value="head_of_department" class="bg-gray-800 text-white" data-v-bf375c84> Head of Department </option><option value="ict_officer" class="bg-gray-800 text-white" data-v-bf375c84> ICT Officer </option><option value="ict_director" class="bg-gray-800 text-white" data-v-bf375c84> ICT Director </option><option value="divisional_director" class="bg-gray-800 text-white" data-v-bf375c84> Divisional Director </option>',6)])],544),[[s.u1,oe.selectedRole]]),t[12]||(t[12]=(0,s.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,s.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))])])])])])]),(0,s.Lk)("div",w,[(0,s.Lk)("div",k,[t[17]||(t[17]=(0,s.Lk)("div",{class:"w-14 h-14 bg-gradient-to-br from-teal-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-teal-300/50"},[(0,s.Lk)("i",{class:"fas fa-users text-white text-xl"})],-1)),(0,s.Lk)("h3",y,[t[16]||(t[16]=(0,s.Lk)("i",{class:"fas fa-list mr-2 text-teal-300"},null,-1)),(0,s.eW)(" Users ("+(0,s.v_)(oe.filteredUsers.length)+") ",1)])]),oe.loading?((0,s.uX)(),(0,s.CE)("div",L,[...t[18]||(t[18]=[(0,s.Lk)("div",{class:"inline-flex items-center space-x-2 text-blue-100"},[(0,s.Lk)("i",{class:"fas fa-spinner fa-spin text-xl"}),(0,s.Lk)("span",null,"Loading users...")],-1)])])):oe.error?((0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("div",_,[(0,s.Lk)("div",R,[t[20]||(t[20]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle text-4xl mb-4 opacity-75"},null,-1)),t[21]||(t[21]=(0,s.Lk)("p",{class:"text-lg font-semibold mb-2"},"Error Loading Users",-1)),(0,s.Lk)("p",E,(0,s.v_)(oe.error),1),(0,s.Lk)("button",{onClick:t[4]||(t[4]=e=>oe.loadUsers(1)),class:"mt-4 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-all duration-300"},[...t[19]||(t[19]=[(0,s.Lk)("i",{class:"fas fa-retry mr-2"},null,-1),(0,s.eW)(" Retry ",-1)])])])])])):oe.filteredUsers.length>0?((0,s.uX)(),(0,s.CE)("div",T,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(oe.filteredUsers,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"bg-white/15 p-4 rounded-xl backdrop-blur-sm border border-teal-300/30 hover:bg-white/20 transition-all duration-300 hover:shadow-lg hover:shadow-teal-500/20"},[(0,s.Lk)("div",U,[(0,s.Lk)("div",I,[(0,s.Lk)("h4",A,(0,s.v_)(e.name),1),(0,s.Lk)("p",S,(0,s.v_)(e.email),1),(0,s.Lk)("p",M,(0,s.v_)(e.role?e.role.replace("_"," "):"No Role"),1)]),(0,s.Lk)("div",P,[(0,s.Lk)("div",j,[t[22]||(t[22]=(0,s.Lk)("span",{class:"text-xs text-teal-100"},"Terms:",-1)),(0,s.Lk)("i",{class:(0,s.C4)([e.onboarding_status?.terms_accepted?"fas fa-check-circle text-green-400":"fas fa-times-circle text-red-400","text-xs"])},null,2)]),(0,s.Lk)("div",D,[t[23]||(t[23]=(0,s.Lk)("span",{class:"text-xs text-teal-100"},"ICT:",-1)),(0,s.Lk)("i",{class:(0,s.C4)([e.onboarding_status?.ict_policy_accepted?"fas fa-check-circle text-green-400":"fas fa-times-circle text-red-400","text-xs"])},null,2)])])]),(0,s.Lk)("div",F,[(0,s.Lk)("button",{onClick:t=>oe.resetUserOnboarding(e,"terms"),disabled:!e.onboarding_status?.terms_accepted,class:(0,s.C4)(["flex-1 bg-red-500 text-white py-2 px-3 rounded-lg text-xs font-semibold hover:bg-red-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg",e.onboarding_status?.terms_accepted?"":"opacity-50 cursor-not-allowed"])},[...t[24]||(t[24]=[(0,s.Lk)("i",{class:"fas fa-undo mr-1"},null,-1),(0,s.eW)(" Reset Terms ",-1)])],10,N),(0,s.Lk)("button",{onClick:t=>oe.resetUserOnboarding(e,"ict"),disabled:!e.onboarding_status?.ict_policy_accepted,class:(0,s.C4)(["flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2 px-3 rounded-lg text-xs font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg",e.onboarding_status?.ict_policy_accepted?"":"opacity-50 cursor-not-allowed"])},[...t[25]||(t[25]=[(0,s.Lk)("i",{class:"fas fa-undo mr-1"},null,-1),(0,s.eW)(" Reset ICT ",-1)])],10,K)]),(0,s.Lk)("button",{onClick:t=>oe.resetUserOnboarding(e,"both"),disabled:!e.onboarding_status?.terms_accepted&&!e.onboarding_status?.ict_policy_accepted,class:(0,s.C4)(["w-full mt-2 bg-blue-500 text-white py-2 px-3 rounded-lg text-xs font-semibold hover:bg-blue-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg",e.onboarding_status?.terms_accepted||e.onboarding_status?.ict_policy_accepted?"":"opacity-50 cursor-not-allowed"])},[...t[26]||(t[26]=[(0,s.Lk)("i",{class:"fas fa-refresh mr-1"},null,-1),(0,s.eW)(" Reset Both ",-1)])],10,X)]))),128))])):((0,s.uX)(),(0,s.CE)("div",O,[...t[27]||(t[27]=[(0,s.Lk)("div",{class:"text-teal-100"},[(0,s.Lk)("i",{class:"fas fa-users text-4xl mb-4 opacity-50"}),(0,s.Lk)("p",{class:"text-lg"},"No users found"),(0,s.Lk)("p",{class:"text-sm opacity-75"},"Try adjusting your search criteria")],-1)])])),oe.totalPages>1?((0,s.uX)(),(0,s.CE)("div",z,[(0,s.Lk)("div",Q,[(0,s.Lk)("button",{onClick:t[5]||(t[5]=e=>oe.loadUsers(oe.currentPage-1)),disabled:oe.currentPage<=1,class:"px-3 py-2 bg-white/15 text-white rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[...t[28]||(t[28]=[(0,s.Lk)("i",{class:"fas fa-chevron-left"},null,-1)])],8,H),(0,s.Lk)("span",$," Page "+(0,s.v_)(oe.currentPage)+" of "+(0,s.v_)(oe.totalPages),1),(0,s.Lk)("button",{onClick:t[6]||(t[6]=e=>oe.loadUsers(oe.currentPage+1)),disabled:oe.currentPage>=oe.totalPages,class:"px-3 py-2 bg-white/15 text-white rounded-lg hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[...t[29]||(t[29]=[(0,s.Lk)("i",{class:"fas fa-chevron-right"},null,-1)])],8,W)])])):(0,s.Q3)("",!0)]),(0,s.bF)(ce)])])])])]),oe.showConfirmModal?((0,s.uX)(),(0,s.CE)("div",B,[(0,s.Lk)("div",G,[t[37]||(t[37]=(0,s.Fv)('<div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-center header-shadow" data-v-bf375c84><div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm border border-white/30 icon-shadow" data-v-bf375c84><i class="fas fa-exclamation-triangle text-white text-2xl drop-shadow-lg" data-v-bf375c84></i></div><h3 class="text-xl font-bold text-white mb-2 drop-shadow-md" data-v-bf375c84>Confirm Reset</h3><div class="w-12 h-1 bg-white/50 mx-auto rounded-full shadow-sm" data-v-bf375c84></div></div>',1)),(0,s.Lk)("div",V,[(0,s.Lk)("div",Y,[t[31]||(t[31]=(0,s.Lk)("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg user-icon-shadow"},[(0,s.Lk)("i",{class:"fas fa-user text-blue-600 text-lg drop-shadow-sm"})],-1)),(0,s.Lk)("h4",q,(0,s.v_)(oe.confirmData.userName),1),(0,s.Lk)("p",J,(0,s.v_)(oe.confirmData.message),1)]),(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,["terms"===oe.confirmData.type||"both"===oe.confirmData.type?((0,s.uX)(),(0,s.CE)("div",te,[...t[32]||(t[32]=[(0,s.Lk)("div",{class:"w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center shadow-lg policy-icon-shadow"},[(0,s.Lk)("i",{class:"fas fa-file-contract text-white text-sm drop-shadow-sm"})],-1),(0,s.Lk)("span",{class:"text-sm font-medium text-gray-700 drop-shadow-sm"},"Terms of Service",-1)])])):(0,s.Q3)("",!0),"both"===oe.confirmData.type?((0,s.uX)(),(0,s.CE)("div",ae,[...t[33]||(t[33]=[(0,s.Lk)("i",{class:"fas fa-plus text-xs drop-shadow-sm"},null,-1)])])):(0,s.Q3)("",!0),"ict"===oe.confirmData.type||"both"===oe.confirmData.type?((0,s.uX)(),(0,s.CE)("div",se,[...t[34]||(t[34]=[(0,s.Lk)("div",{class:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center shadow-lg policy-icon-shadow"},[(0,s.Lk)("i",{class:"fas fa-shield-alt text-white text-sm drop-shadow-sm"})],-1),(0,s.Lk)("span",{class:"text-sm font-medium text-gray-700 drop-shadow-sm"},"ICT Policy",-1)])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",re,[(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>oe.cancelReset&&oe.cancelReset(...e)),class:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg cancel-button-shadow"},[...t[35]||(t[35]=[(0,s.Lk)("span",{class:"drop-shadow-sm"},"Cancel",-1)])]),(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>oe.confirmReset&&oe.confirmReset(...e)),class:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-4 rounded-xl font-medium hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl reset-button-shadow"},[...t[36]||(t[36]=[(0,s.Lk)("i",{class:"fas fa-undo mr-2 drop-shadow-sm"},null,-1),(0,s.Lk)("span",{class:"drop-shadow-sm"},"Reset",-1)])])])])])])):(0,s.Q3)("",!0)])}a(8111),a(1701),a(4603),a(7566),a(8721);var le=a(5498),ie=a(8966),ne=a(9101),de=a(1127),ce=a(274),ue={name:"OnboardingReset",components:{Header:le.A,ModernSidebar:ie.A,AppFooter:ne.A},setup(){const{ROLES:e,requireRole:t,isAuthenticated:a,userRole:r}=(0,de.h)(),o=(0,s.KR)(""),l=(0,s.KR)(""),i=(0,s.KR)([]),n=(0,s.KR)([]),d=(0,s.KR)(!1),c=(0,s.KR)(!1),u=(0,s.KR)({}),f=(0,s.KR)(null),b=(0,s.KR)(null),m=(0,s.KR)(1),h=(0,s.KR)(1),x=(0,s.KR)(0),v=async(e=1)=>{d.value=!0,b.value=null;try{if(a.value,r.value,!a.value)throw new Error("User not authenticated");if("admin"!==r.value)throw new Error("Admin access required");const t={page:e,per_page:20};o.value.trim()&&(t.search=o.value.trim()),l.value&&(t.role=l.value);const s=await ce.authAPI.getUsers(t);if(s.success){const e=(s.data.users||[]).map(e=>({...e,role:e.role||e.primary_role||"staff"}));i.value=e,n.value=e,m.value=s.data.pagination?.current_page||1,h.value=s.data.pagination?.last_page||1,x.value=s.data.pagination?.total||0,i.value.length,x.value}else console.error("❌ Failed to load users:",s.error),b.value=s.error||"Error loading users",y(s.error||"Error loading users","error"),i.value=[],n.value=[]}catch(b){console.error("❌ Error loading users:",b),b.value=b.message||"Error loading users",y(b.message||"Error loading users","error"),i.value=[],n.value=[]}finally{d.value=!1}},p=()=>{v(1)};(0,s.wB)([o,l],()=>{clearTimeout(p.debounceTimer),p.debounceTimer=setTimeout(()=>{p()},500)});const g=(e,t)=>{const a={terms:"terms",ict:"ict",both:"all"},s=a[t]||"all",r="both"===t?"Reset both Terms of Service and ICT Policy for this user?":"terms"===t?"Reset Terms of Service for this user?":"Reset ICT Policy for this user?";u.value={userName:e.name,message:r,type:t},f.value={user:e,type:s},c.value=!0},w=async()=>{try{const{user:e,type:t}=f.value;c.value=!1;const a=await ce.authAPI.resetUserOnboarding(e.id,t);if(a.success){await v(m.value);const a="all"===t?`Successfully reset both Terms of Service and ICT Policy for ${e.name}`:"terms"===t?`Successfully reset Terms of Service for ${e.name}`:"ict"===t?`Successfully reset ICT Policy for ${e.name}`:`Successfully reset declaration for ${e.name}`;y(a,"success")}else console.error("Failed to reset onboarding:",a.error),y(a.error||"Error resetting onboarding status","error")}catch(b){console.error("Error resetting onboarding:",b),y("Error resetting onboarding status","error")}finally{f.value=null}},k=()=>{c.value=!1,f.value=null},y=(e,t="info")=>{const a={success:"from-green-500 to-emerald-500",error:"from-red-500 to-rose-500",info:"from-blue-500 to-cyan-500"},s=document.createElement("div");s.className=`fixed top-4 right-4 bg-gradient-to-r ${a[t]} text-white px-6 py-4 rounded-xl shadow-2xl z-50 max-w-md border border-white/20`,s.innerHTML=`\n        <div class="flex items-center">\n          <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-3">\n            <i class="fas ${"success"===t?"fa-check":"error"===t?"fa-times":"fa-info"} text-sm"></i>\n          </div>\n          <p class="font-medium">${e}</p>\n        </div>\n      `,document.body.appendChild(s),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},4e3)};return(0,s.sV)(async()=>{try{t([e.ADMIN]);const a=new URLSearchParams(window.location.search),s=a.get("search");s&&(o.value=s),await v()}catch(b){console.error("❌ Error in onMounted:",b),b.value=b.message||"Failed to initialize component",y(b.message||"Failed to initialize component","error")}}),p.debounceTimer=null,{searchQuery:o,selectedRole:l,users:i,filteredUsers:n,loading:d,error:b,showConfirmModal:c,confirmData:u,currentPage:m,totalPages:h,totalUsers:x,searchUsers:p,resetUserOnboarding:g,confirmReset:w,cancelReset:k,loadUsers:v}}},fe=a(1241);const be=(0,fe.A)(ue,[["render",oe],["__scopeId","data-v-bf375c84"]]);var me=be},9101:function(e,t,a){a.d(t,{A:function(){return f}});var s=a(5796);const r={class:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative",style:{position:"relative","z-index":"1","margin-top":"auto"}},o={class:"flex flex-col md:flex-row justify-between items-center"},l={class:"text-base text-blue-100 flex items-center space-x-2"},i={class:"font-medium"};function n(e,t,a,n,d,c){return(0,s.uX)(),(0,s.CE)("footer",r,[(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[t[0]||(t[0]=(0,s.Lk)("div",{class:"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40"},[(0,s.Lk)("i",{class:"fas fa-hospital text-blue-300 text-sm"})],-1)),(0,s.Lk)("p",i," © "+(0,s.v_)(c.currentYear)+" Muhimbili National Hospital. All rights reserved. ",1)])])])}var d={name:"AppFooter",computed:{currentYear(){return(new Date).getFullYear()}}},c=a(1241);const u=(0,c.A)(d,[["render",n],["__scopeId","data-v-2f68623d"]]);var f=u}}]);
//# sourceMappingURL=8781.aee5daf3.js.map