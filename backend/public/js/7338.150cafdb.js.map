{"version":3,"file":"js/7338.150cafdb.js","mappings":"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","sources":["webpack://frontend/./src/services/signatureService.js","webpack://frontend/./src/components/views/booking/BookingService.vue","webpack://frontend/./src/services/ictApprovalService.js","webpack://frontend/./src/components/views/booking/BookingService.vue?9033"],"sourcesContent":["import axios from 'axios'\n\nconst API_BASE_URL = process.env.VUE_APP_API_URL || 'http://localhost:8000/api'\n\nclass SignatureService {\n  constructor() {\n    this.api = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 10000,\n      headers: { 'Content-Type': 'application/json', Accept: 'application/json' }\n    })\n\n    this.api.interceptors.request.use(\n      (config) => {\n        const token = localStorage.getItem('auth_token')\n        if (token) config.headers.Authorization = `Bearer ${token}`\n        return config\n      },\n      (error) => Promise.reject(error)\n    )\n  }\n\n  async sign(documentId) {\n    const res = await this.api.post('/documents/sign', { document_id: documentId })\n    return { success: true, data: res.data }\n  }\n\n  async list(documentId) {\n    const res = await this.api.get(`/documents/${documentId}/signatures`)\n    return { success: true, data: res.data.data }\n  }\n\n  async verify(signatureId) {\n    const res = await this.api.get(`/signatures/${signatureId}/verify`)\n    return { success: res.data.success, data: res.data }\n  }\n}\n\nexport default new SignatureService()\n","<template>\n  <div class=\"flex flex-col h-screen\">\n    <AppHeader />\n    <div class=\"flex flex-1 overflow-hidden\">\n      <ModernSidebar />\n      <main\n        class=\"flex-1 p-3 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative\"\n      >\n        <!-- Global Loading Banner -->\n        <UnifiedLoadingBanner\n          :show=\"globalLoading\"\n          :loadingTitle=\"loadingBannerTitle\"\n          :loadingSubtitle=\"loadingBannerSubtitle\"\n          departmentTitle=\"ICT EQUIPMENT BOOKING SYSTEM\"\n          :forceSpin=\"true\"\n        />\n        <!-- Background Pattern -->\n        <div class=\"absolute inset-0 overflow-hidden\">\n          <!-- Floating geometric shapes -->\n          <div class=\"absolute inset-0\">\n            <div\n              v-for=\"i in 10\"\n              :key=\"i\"\n              class=\"absolute text-white opacity-5 animate-float\"\n              :style=\"{\n                left: Math.random() * 100 + '%',\n                top: Math.random() * 100 + '%',\n                animationDelay: Math.random() * 3 + 's',\n                animationDuration: Math.random() * 3 + 2 + 's',\n                fontSize: Math.random() * 15 + 8 + 'px'\n              }\"\n            >\n              <i\n                :class=\"[\n                  'fas',\n                  ['fa-laptop', 'fa-tv', 'fa-desktop', 'fa-keyboard', 'fa-mouse', 'fa-headphones'][\n                    Math.floor(Math.random() * 6)\n                  ]\n                ]\"\n              ></i>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"max-w-12xl mx-auto relative z-10\">\n          <!-- Header Section -->\n          <div\n            class=\"booking-glass-card rounded-t-3xl p-4 mb-0 border-b border-blue-300/30 animate-fade-in\"\n          >\n            <div class=\"flex justify-between items-center\">\n              <!-- Left Logo -->\n              <div\n                class=\"w-16 h-16 mr-4 transform hover:scale-110 transition-transform duration-300\"\n              >\n                <div\n                  class=\"w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25\"\n                >\n                  <img\n                    src=\"/assets/images/ngao2.png\"\n                    alt=\"National Shield\"\n                    class=\"max-w-12 max-h-12 object-contain\"\n                  />\n                </div>\n              </div>\n\n              <!-- Center Content -->\n              <div class=\"text-center flex-1\">\n                <h1\n                  class=\"text-3xl font-bold text-white mb-2 tracking-wide drop-shadow-lg animate-fade-in\"\n                >\n                  MUHIMBILI NATIONAL HOSPITAL\n                </h1>\n                <div class=\"relative inline-block mb-2\">\n                  <div\n                    class=\"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-2 rounded-full text-lg font-bold shadow-2xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-400/60\"\n                  >\n                    <span class=\"relative z-10 flex items-center gap-2\">\n                      <i class=\"fas fa-calendar-check\"></i>\n                      DEVICE BOOKING SERVICE\n                    </span>\n                    <div\n                      class=\"absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300\"\n                    ></div>\n                  </div>\n                </div>\n                <h2\n                  class=\"text-xl font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay\"\n                >\n                  ICT EQUIPMENT RESERVATION SYSTEM\n                </h2>\n              </div>\n\n              <!-- Right Logo -->\n              <div\n                class=\"w-16 h-16 ml-4 transform hover:scale-110 transition-transform duration-300\"\n              >\n                <div\n                  class=\"w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25\"\n                >\n                  <img\n                    src=\"/assets/images/logo2.png\"\n                    alt=\"Muhimbili Logo\"\n                    class=\"max-w-12 max-h-12 object-contain\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Loading Screen (kept for layout spacing while banner overlays) -->\n          <div v-if=\"isCheckingPendingRequests\" class=\"min-h-64\"></div>\n\n          <!-- Main Form -->\n          <div\n            v-else-if=\"!hasPendingRequest\"\n            class=\"booking-glass-card rounded-b-3xl overflow-hidden animate-slide-up\"\n          >\n            <form @submit.prevent=\"submitBooking\" class=\"p-3 space-y-3\">\n              <!-- Booking Information Section -->\n              <div\n                class=\"booking-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-3 rounded-2xl backdrop-blur-sm hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-500 group\"\n              >\n                <div class=\"flex items-center space-x-3 mb-2\">\n                  <div\n                    class=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50\"\n                  >\n                    <i class=\"fas fa-calendar-alt text-white text-lg\"></i>\n                  </div>\n                  <h3 class=\"text-2xl font-bold text-white flex items-center\">\n                    <i class=\"fas fa-info-circle mr-2 text-blue-300\"></i>\n                    Booking Information\n                  </h3>\n                </div>\n\n                <div class=\"space-y-1.5\">\n                  <!-- Row 1: Name of Borrower & Booking Date -->\n                  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-1.5\">\n                    <!-- Name of Borrower -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-user mr-2 text-blue-300\"></i>\n                        Name of Borrower\n                        <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <input\n                          v-model=\"formData.borrowerName\"\n                          type=\"text\"\n                          readonly\n                          class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50 cursor-not-allowed opacity-90\"\n                          placeholder=\"Auto-populated from your account\"\n                          title=\"This field is automatically filled with your account name\"\n                          required\n                        />\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                        <div\n                          class=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50\"\n                        >\n                          <i class=\"fas fa-lock\" title=\"Auto-populated from your account\"></i>\n                        </div>\n                      </div>\n                      <div\n                        v-if=\"errors.borrowerName\"\n                        class=\"text-red-400 text-base mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.borrowerName }}\n                      </div>\n                    </div>\n\n                    <!-- Booking Date -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-calendar mr-2 text-blue-300\"></i>\n                        Booking Date <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <input\n                          v-model=\"formData.bookingDate\"\n                          @input=\"validateBookingDate\"\n                          @change=\"validateBookingDate\"\n                          type=\"date\"\n                          class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50\"\n                          required\n                        />\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                      </div>\n                      <div\n                        v-if=\"errors.bookingDate\"\n                        class=\"text-red-400 text-sm mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.bookingDate }}\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Row 2: Device Type & Department -->\n                  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-1.5\">\n                    <!-- Type of Device (checkbox list only) -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-laptop mr-2 text-blue-300\"></i>\n                        Type of Device Borrowed\n                        <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n\n                      <!-- Checkbox list for available devices -->\n                      <div\n                        class=\"mt-1 max-h-40 overflow-y-auto bg-blue-900/60 border border-blue-400/60 rounded-xl p-2 space-y-1\"\n                      >\n                        <label\n                          v-for=\"device in availableDevices\"\n                          :key=\"`chk-` + device.id\"\n                          class=\"flex items-center space-x-2 text-sm text-blue-100\"\n                        >\n                          <input\n                            type=\"checkbox\"\n                            :value=\"String(device.id)\"\n                            v-model=\"formData.deviceInventoryIds\"\n                            @change=\"handleDeviceTypeChange\"\n                            :disabled=\"isLoadingDevices\"\n                            class=\"h-4 w-4 text-blue-500 rounded border-blue-300 bg-blue-900/60 focus:ring-blue-400\"\n                          />\n                          <span class=\"flex-1\">\n                            {{ device.device_name }}\n                            <span v-if=\"device.available_quantity > 0\" class=\"text-green-300\">\n                              - {{ device.available_quantity }} available\n                            </span>\n                            <span v-else class=\"text-orange-300\">\n                              - Out of Stock (Can still request)\n                            </span>\n                          </span>\n                        </label>\n                      </div>\n\n                      <div\n                        v-if=\"errors.deviceType\"\n                        class=\"text-red-400 text-sm mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.deviceType }}\n                      </div>\n                    </div>\n\n                    <!-- Department -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-building mr-2 text-blue-300\"></i>\n                        Department <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <select\n                          v-model=\"formData.department\"\n                          readonly\n                          disabled\n                          class=\"w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50 cursor-not-allowed opacity-90 appearance-none\"\n                          required\n                        >\n                          <option value=\"\" class=\"bg-blue-800 text-blue-300\">\n                            {{ formData.department ? '' : 'Auto-populated from your account' }}\n                          </option>\n                          <option\n                            v-for=\"dept in departments\"\n                            :key=\"dept.id\"\n                            :value=\"dept.id\"\n                            class=\"bg-blue-800 text-white\"\n                            :selected=\"formData.department == dept.id\"\n                          >\n                            {{ dept.name }}\n                          </option>\n                        </select>\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                        <div\n                          class=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50\"\n                        >\n                          <i class=\"fas fa-lock\" title=\"Auto-populated from your account\"></i>\n                        </div>\n                      </div>\n                      <div\n                        v-if=\"errors.department\"\n                        class=\"text-red-400 text-sm mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.department }}\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Device Availability Warning Banner -->\n                  <div\n                    v-if=\"showAvailabilityWarning && deviceAvailabilityInfo\"\n                    class=\"mt-4 p-4 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-2 border-yellow-400/40 rounded-xl backdrop-blur-sm animate-slide-down\"\n                  >\n                    <div class=\"flex items-start space-x-3\">\n                      <div\n                        class=\"w-8 h-8 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center shadow-lg flex-shrink-0\"\n                      >\n                        <i class=\"fas fa-exclamation-triangle text-white text-sm\"></i>\n                      </div>\n                      <div class=\"flex-1\">\n                        <h4 class=\"text-base font-bold text-yellow-100 mb-1 flex items-center\">\n                          <i class=\"fas fa-info-circle mr-2\"></i>\n                          Device Availability Notice\n                        </h4>\n                        <p class=\"text-base text-yellow-200 leading-relaxed\">\n                          {{ deviceAvailabilityInfo.message }}\n                        </p>\n                        <p class=\"text-sm text-yellow-300/80 mt-2 italic\">\n                          <i class=\"fas fa-lightbulb mr-1\"></i>\n                          You can still submit your request, and it will be processed when the\n                          device becomes available.\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Custom Device Input (if Others selected) -->\n                  <div v-if=\"showCustomDeviceField\" class=\"group animate-slide-down\">\n                    <label class=\"block text-lg font-bold text-blue-100 mb-1 flex items-center\">\n                      <i class=\"fas fa-edit mr-2 text-blue-300\"></i>\n                      Specify Device <span class=\"text-red-400 ml-1\">*</span>\n                    </label>\n                    <div class=\"relative\">\n                      <input\n                        v-model=\"formData.customDevice\"\n                        @input=\"validateCustomDevice\"\n                        type=\"text\"\n                        class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50\"\n                        placeholder=\"Please specify the device you want to borrow\"\n                        :required=\"formData.deviceInventoryId === 'others'\"\n                      />\n                      <div\n                        class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                      ></div>\n                    </div>\n                    <div\n                      v-if=\"errors.customDevice\"\n                      class=\"text-red-400 text-sm mt-1 flex items-center\"\n                    >\n                      <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                      {{ errors.customDevice }}\n                    </div>\n                  </div>\n\n                  <!-- Row 3: Phone Number & Return Date/Time -->\n                  <div class=\"grid grid-cols-1 md:grid-cols-2 gap-1.5\">\n                    <!-- Phone Number -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-phone mr-2 text-blue-300\"></i>\n                        Phone Number <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <input\n                          v-model=\"formData.phoneNumber\"\n                          type=\"tel\"\n                          readonly\n                          class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50 cursor-not-allowed opacity-90\"\n                          placeholder=\"Auto-populated from your account\"\n                          title=\"This field is automatically filled with your account phone number\"\n                          required\n                        />\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                        <div\n                          class=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50\"\n                        >\n                          <i class=\"fas fa-lock\" title=\"Auto-populated from your account\"></i>\n                        </div>\n                      </div>\n                      <div\n                        v-if=\"errors.phoneNumber\"\n                        class=\"text-red-400 text-base mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.phoneNumber }}\n                      </div>\n                    </div>\n\n                    <!-- Return Date & Time (combined) -->\n                    <div class=\"group\">\n                      <label class=\"block text-lg font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-calendar-plus mr-2 text-blue-300\"></i>\n                        Date of returning\n                        <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <input\n                          v-model=\"returnDateTimeModel\"\n                          @input=\"validateReturnDateTime\"\n                          @change=\"validateReturnDateTime\"\n                          type=\"datetime-local\"\n                          :min=\"minReturnDateTime\"\n                          class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50\"\n                          required\n                        />\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                      </div>\n                      <div\n                        v-if=\"errors.collectionDate || errors.returnTime\"\n                        class=\"text-red-400 text-base mt-1 flex items-center\"\n                      >\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.collectionDate || errors.returnTime }}\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Combined Row: Digital Signature & Reason for Borrowing -->\n                  <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-1.5\">\n                    <!-- Digital Signature Section (Left) -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-signature mr-2 text-blue-300\"></i>\n                        Signature <span class=\"text-red-400 ml-1\">*</span>\n                        <span class=\"ml-2 text-base text-blue-300/70 font-normal\">Digital</span>\n                      </label>\n\n                      <div class=\"flex flex-col gap-2 items-start w-full\">\n                        <!-- Digital Signature Status -->\n                        <div\n                          class=\"w-full p-3 border-2 border-blue-300/30 rounded-lg bg-blue-100/10 backdrop-blur-sm\"\n                        >\n                          <div class=\"flex items-center justify-between\">\n                            <div class=\"flex items-center gap-2\">\n                              <i\n                                :class=\"\n                                  hasUserSigned\n                                    ? 'fas fa-check-circle text-green-400'\n                                    : 'fas fa-exclamation-circle text-yellow-300'\n                                \"\n                              ></i>\n                              <span class=\"text-blue-100\">\n                                {{\n                                  hasUserSigned\n                                    ? 'You have signed this document'\n                                    : 'You have not signed yet'\n                                }}\n                              </span>\n                            </div>\n                            <button\n                              type=\"button\"\n                              @click=\"signDocument\"\n                              :disabled=\"hasUserSigned || isSubmitting\"\n                              class=\"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-green-500 to-green-600 text-white text-sm font-medium rounded-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/30\"\n                            >\n                              <i\n                                :class=\"\n                                  hasUserSigned ? 'fas fa-check mr-1' : 'fas fa-pen-fancy mr-1'\n                                \"\n                              ></i>\n                              {{ hasUserSigned ? 'Signed' : 'Sign Document' }}\n                            </button>\n                          </div>\n                          <div v-if=\"signatures.length\" class=\"mt-2 text-blue-200 text-sm\">\n                            <span class=\"opacity-75\">Signatures:</span>\n                            <ul class=\"list-disc ml-5 mt-1\">\n                              <li v-for=\"s in signatures\" :key=\"s.id\">\n                                {{ s.user_name }}  {{ s.signed_at }}\n                              </li>\n                            </ul>\n                          </div>\n                        </div>\n\n                        <div\n                          v-if=\"errors.digital_signature\"\n                          class=\"text-red-500 text-base mt-1 flex items-center\"\n                        >\n                          <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                          {{ errors.digital_signature }}\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Reason for Borrowing Section (Right) -->\n                    <div class=\"group\">\n                      <label class=\"block text-xl font-bold text-blue-100 mb-1 flex items-center\">\n                        <i class=\"fas fa-comment-alt mr-2 text-blue-300\"></i>\n                        Reason for Borrowing\n                        <span class=\"text-red-400 ml-1\">*</span>\n                      </label>\n                      <div class=\"relative\">\n                        <textarea\n                          v-model=\"formData.reason\"\n                          @input=\"handleReasonInput\"\n                          class=\"booking-input w-full px-3 py-2 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50 resize-none\"\n                          rows=\"2\"\n                          placeholder=\"Explain reason for borrowing... (min 10 chars)\"\n                          maxlength=\"1000\"\n                          required\n                        ></textarea>\n                        <div\n                          class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                        ></div>\n                      </div>\n                      <div v-if=\"errors.reason\" class=\"text-red-400 text-sm mt-1 flex items-center\">\n                        <i class=\"fas fa-exclamation-circle mr-1\"></i>\n                        {{ errors.reason }}\n                      </div>\n                      <div class=\"flex justify-between items-center mt-0.5\">\n                        <p class=\"text-base text-blue-200/60 italic\">Min 10 chars</p>\n                        <p\n                          class=\"text-base\"\n                          :class=\"\n                            formData.reason.length >= 10 ? 'text-green-400' : 'text-yellow-400'\n                          \"\n                        >\n                          {{ formData.reason.length }}/1000\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Submit Section -->\n              <div class=\"border-t border-blue-300/20 pt-3\">\n                <div class=\"flex justify-between items-center\">\n                  <button\n                    type=\"button\"\n                    @click=\"goBack\"\n                    class=\"px-4 py-2 bg-gray-600/80 text-white rounded-xl hover:bg-gray-700/80 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl transform hover:scale-105 backdrop-blur-sm border border-gray-500/50\"\n                  >\n                    <i class=\"fas fa-arrow-left mr-2\"></i>\n                    Back to Dashboard\n                  </button>\n\n                  <button\n                    type=\"submit\"\n                    :disabled=\"isSubmitting\"\n                    class=\"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none border border-blue-400/50\"\n                  >\n                    <i v-if=\"!isSubmitting\" class=\"fas fa-paper-plane mr-2\"></i>\n                    <i v-else class=\"fas fa-spinner fa-spin mr-2\"></i>\n                    {{ isSubmitting ? 'Submitting Booking...' : 'Submit Booking Request' }}\n                  </button>\n                </div>\n              </div>\n            </form>\n\n            <!-- Footer -->\n            <AppFooter />\n          </div>\n        </div>\n      </main>\n    </div>\n\n    <!-- Enhanced Success Modal -->\n    <div\n      v-if=\"showSuccessModal\"\n      class=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in\"\n    >\n      <div\n        class=\"bg-gradient-to-br from-white via-blue-50/50 to-blue-100/30 rounded-3xl shadow-2xl max-w-lg w-full transform transition-all duration-500 scale-100 animate-modal-bounce border-2 border-blue-200/50 backdrop-blur-lg\"\n      >\n        <!-- Success Header with Animation -->\n        <div class=\"relative overflow-hidden rounded-t-3xl\">\n          <!-- Animated Background Pattern -->\n          <div\n            class=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-blue-600/5 to-blue-500/10 animate-pulse\"\n          ></div>\n          <div\n            class=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-transparent rounded-full blur-2xl animate-float\"\n          ></div>\n          <div\n            class=\"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-blue-300/15 to-transparent rounded-full blur-xl animate-float\"\n            style=\"animation-delay: 1s\"\n          ></div>\n\n          <div class=\"relative z-10 p-8 text-center\">\n            <!-- Animated Success Icon -->\n            <div class=\"relative mx-auto mb-6\">\n              <div\n                class=\"w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center mx-auto shadow-2xl animate-bounce-gentle border-4 border-white/50\"\n              >\n                <i class=\"fas fa-check text-white text-3xl animate-check-mark\"></i>\n              </div>\n              <!-- Success Ring Animation -->\n              <div\n                class=\"absolute inset-0 w-20 h-20 border-4 border-blue-400/30 rounded-full animate-ping\"\n              ></div>\n              <div\n                class=\"absolute inset-0 w-20 h-20 border-2 border-blue-300/50 rounded-full animate-pulse\"\n              ></div>\n            </div>\n\n            <!-- Success Title -->\n            <h3\n              class=\"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-3 animate-slide-up\"\n            >\n               Booking Submitted Successfully!\n            </h3>\n\n            <!-- Success Message -->\n            <p\n              class=\"text-lg text-gray-600 mb-6 leading-relaxed animate-slide-up\"\n              style=\"animation-delay: 0.2s\"\n            >\n              Your device booking request has been submitted and is now under review by our ICT\n              team.\n            </p>\n          </div>\n        </div>\n\n        <!-- Booking Details Card -->\n        <div class=\"px-8 pb-6\">\n          <div\n            class=\"bg-gradient-to-r from-blue-50 to-blue-100/50 rounded-2xl p-6 mb-6 border border-blue-200/50 shadow-inner animate-slide-up\"\n            style=\"animation-delay: 0.4s\"\n          >\n            <!-- Details Header -->\n            <div class=\"flex items-center justify-center mb-4\">\n              <div\n                class=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-lg\"\n              >\n                <i class=\"fas fa-clipboard-list text-white text-sm\"></i>\n              </div>\n              <h4 class=\"text-xl font-bold text-blue-800\"> Booking Details</h4>\n            </div>\n\n            <!-- Details Grid -->\n            <div class=\"space-y-4\">\n              <!-- Device Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-blue-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-laptop text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-blue-600 uppercase tracking-wide\">Device</p>\n                  <p class=\"text-base font-bold text-gray-800\">{{ getDeviceDisplayName() }}</p>\n                </div>\n              </div>\n\n              <!-- Borrower Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-blue-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-user text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-blue-600 uppercase tracking-wide\">Borrower</p>\n                  <p class=\"text-base font-bold text-gray-800\">{{ formData.borrowerName }}</p>\n                </div>\n              </div>\n\n              <!-- Return Date Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-blue-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-calendar-check text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-blue-600 uppercase tracking-wide\">\n                    Return Date\n                  </p>\n                  <p class=\"text-base font-bold text-gray-800\">\n                    {{ formatDisplayDate(formData.collectionDate) }}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <!-- Status Badge -->\n            <div class=\"mt-4 text-center\">\n              <span\n                class=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-base font-bold rounded-full shadow-lg animate-pulse\"\n              >\n                <i class=\"fas fa-clock mr-2\"></i>\n                PENDING REVIEW\n              </span>\n            </div>\n          </div>\n\n          <!-- Action Button -->\n          <button\n            @click=\"closeSuccessModal\"\n            class=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-4 px-6 rounded-2xl font-bold text-xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300/50 animate-slide-up border-2 border-blue-500/30\"\n            style=\"animation-delay: 0.6s\"\n          >\n            <i class=\"fas fa-home mr-3 text-lg\"></i>\n            Return to Dashboard\n          </button>\n        </div>\n\n        <!-- Decorative Elements -->\n        <div class=\"absolute top-4 right-4 text-blue-300/30 animate-spin-slow\">\n          <i class=\"fas fa-cog text-2xl\"></i>\n        </div>\n        <div\n          class=\"absolute bottom-4 left-4 text-green-300/30 animate-bounce\"\n          style=\"animation-delay: 2s\"\n        >\n          <i class=\"fas fa-check-circle text-xl\"></i>\n        </div>\n      </div>\n    </div>\n\n    <!-- Pending Request Modal -->\n    <div\n      v-if=\"showPendingRequestModal\"\n      class=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in\"\n    >\n      <div\n        class=\"bg-gradient-to-br from-white via-orange-50/50 to-orange-100/30 rounded-3xl shadow-2xl max-w-lg w-full transform transition-all duration-500 scale-100 animate-modal-bounce border-2 border-orange-200/50 backdrop-blur-lg\"\n      >\n        <!-- Pending Header with Animation -->\n        <div class=\"relative overflow-hidden rounded-t-3xl\">\n          <!-- Animated Background Pattern -->\n          <div\n            class=\"absolute inset-0 bg-gradient-to-r from-orange-500/10 via-yellow-600/5 to-orange-500/10 animate-pulse\"\n          ></div>\n          <div\n            class=\"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-transparent rounded-full blur-2xl animate-float\"\n          ></div>\n          <div\n            class=\"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-yellow-300/15 to-transparent rounded-full blur-xl animate-float\"\n            style=\"animation-delay: 1s\"\n          ></div>\n\n          <div class=\"relative z-10 p-8 text-center\">\n            <!-- Animated Warning Icon -->\n            <div class=\"relative mx-auto mb-6\">\n              <div\n                class=\"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto shadow-2xl animate-bounce-gentle border-4 border-white/50\"\n              >\n                <i class=\"fas fa-exclamation-triangle text-white text-3xl animate-check-mark\"></i>\n              </div>\n              <!-- Warning Ring Animation -->\n              <div\n                class=\"absolute inset-0 w-20 h-20 border-4 border-orange-400/30 rounded-full animate-ping\"\n              ></div>\n              <div\n                class=\"absolute inset-0 w-20 h-20 border-2 border-orange-300/50 rounded-full animate-pulse\"\n              ></div>\n            </div>\n\n            <!-- Warning Title -->\n            <h3\n              class=\"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent mb-3 animate-slide-up\"\n            >\n               Pending Request Found\n            </h3>\n\n            <!-- Warning Message -->\n            <p\n              class=\"text-lg text-gray-600 mb-6 leading-relaxed animate-slide-up\"\n              style=\"animation-delay: 0.2s\"\n            >\n              You already have a pending booking request. Please wait for it to be processed before\n              submitting a new request.\n            </p>\n          </div>\n        </div>\n\n        <!-- Pending Request Details Card -->\n        <div class=\"px-8 pb-6\" v-if=\"pendingRequestInfo\">\n          <div\n            class=\"bg-gradient-to-r from-orange-50 to-orange-100/50 rounded-2xl p-6 mb-6 border border-orange-200/50 shadow-inner animate-slide-up\"\n            style=\"animation-delay: 0.4s\"\n          >\n            <!-- Details Header -->\n            <div class=\"flex items-center justify-center mb-4\">\n              <div\n                class=\"w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mr-3 shadow-lg\"\n              >\n                <i class=\"fas fa-clipboard-list text-white text-sm\"></i>\n              </div>\n              <h4 class=\"text-xl font-bold text-orange-800\"> Your Pending Request</h4>\n            </div>\n\n            <!-- Details Grid -->\n            <div class=\"space-y-4\">\n              <!-- Device Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-orange-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-laptop text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-orange-600 uppercase tracking-wide\">Device</p>\n                  <p class=\"text-base font-bold text-gray-800\">\n                    {{ pendingRequestInfo.device_name }}\n                  </p>\n                </div>\n              </div>\n\n              <!-- Booking Date Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-orange-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-calendar text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-orange-600 uppercase tracking-wide\">\n                    Booking Date\n                  </p>\n                  <p class=\"text-base font-bold text-gray-800\">\n                    {{ formatDisplayDate(pendingRequestInfo.booking_date) }}\n                  </p>\n                </div>\n              </div>\n\n              <!-- Status Info -->\n              <div\n                class=\"flex items-center p-3 bg-white/60 rounded-xl border border-orange-200/30 hover:bg-white/80 transition-all duration-300 group\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mr-4 shadow-md group-hover:scale-110 transition-transform duration-300\"\n                >\n                  <i class=\"fas fa-clock text-white text-sm\"></i>\n                </div>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium text-orange-600 uppercase tracking-wide\">Status</p>\n                  <p class=\"text-base font-bold text-gray-800 capitalize\">\n                    {{ pendingRequestInfo.status }} / {{ pendingRequestInfo.ict_approve }}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <!-- Status Badge -->\n            <div class=\"mt-4 text-center\">\n              <span\n                class=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-orange-400 to-yellow-500 text-white text-base font-bold rounded-full shadow-lg animate-pulse\"\n              >\n                <i class=\"fas fa-hourglass-half mr-2\"></i>\n                AWAITING APPROVAL\n              </span>\n            </div>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"flex gap-3\">\n            <button\n              @click=\"viewPendingRequest\"\n              class=\"flex-1 bg-gradient-to-r from-orange-600 to-orange-700 hover:from-orange-700 hover:to-orange-800 text-white py-4 px-6 rounded-2xl font-bold text-xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-orange-300/50 animate-slide-up border-2 border-orange-500/30\"\n              style=\"animation-delay: 0.6s\"\n            >\n              <i class=\"fas fa-eye mr-3 text-lg\"></i>\n              View Request\n            </button>\n\n            <button\n              @click=\"closePendingRequestModal\"\n              class=\"flex-1 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white py-4 px-6 rounded-2xl font-bold text-xl shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-gray-300/50 animate-slide-up border-2 border-gray-500/30\"\n              style=\"animation-delay: 0.8s\"\n            >\n              <i class=\"fas fa-arrow-left mr-3 text-lg\"></i>\n              Dashboard\n            </button>\n          </div>\n        </div>\n\n        <!-- Decorative Elements -->\n        <div class=\"absolute top-4 right-4 text-orange-300/30 animate-spin-slow\">\n          <i class=\"fas fa-cog text-2xl\"></i>\n        </div>\n        <div\n          class=\"absolute bottom-4 left-4 text-yellow-300/30 animate-bounce\"\n          style=\"animation-delay: 2s\"\n        >\n          <i class=\"fas fa-exclamation-circle text-xl\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import ModernSidebar from '@/components/ModernSidebar.vue'\n  import AppFooter from '@/components/footer.vue'\n  import AppHeader from '@/components/AppHeader.vue'\n  import UnifiedLoadingBanner from '@/components/common/UnifiedLoadingBanner.vue'\n  import bookingService from '@/services/bookingService'\n  import deviceInventoryService from '@/services/deviceInventoryService'\n  import ictApprovalService from '@/services/ictApprovalService'\n  import signatureService from '@/services/signatureService'\n  import { useAuthStore } from '@/stores/auth'\n  import apiClient from '@/utils/apiClient'\n\n  export default {\n    name: 'BookingService',\n    components: {\n      ModernSidebar,\n      AppFooter,\n      AppHeader,\n      UnifiedLoadingBanner\n    },\n    setup() {\n      // Get auth store for user information\n      const authStore = useAuthStore()\n\n      return {\n        authStore\n      }\n    },\n    data() {\n      return {\n        formData: {\n          bookingDate: '',\n          borrowerName: '',\n          deviceInventoryId: '', // Primary device (for backward compatibility)\n          deviceInventoryIds: [], // NEW: allow selecting multiple devices\n          deviceType: '', // Keep for backward compatibility\n          customDevice: '',\n          reason: '',\n          department: '',\n          collectionDate: '', // Fixed: matches form template field name\n          returnTime: '',\n          phoneNumber: '',\n          conditionBefore: '',\n          conditionBeforeIssues: '',\n          conditionReturned: '',\n          conditionReturnedIssues: '',\n          status: ''\n        },\n        selectedDeviceInfo: null, // Store primary device info for display\n        selectedDevicesCount: 0, // NEW: number of selected inventory devices\n        showCustomDeviceField: false, // NEW: whether to show custom device input\n        errors: {},\n        isSubmitting: false,\n        showSuccessModal: false,\n        departments: [],\n        availableDevices: [],\n        isLoadingDevices: false,\n        deviceAvailabilityInfo: null, // Store availability info for out-of-stock devices\n        showAvailabilityWarning: false,\n        hasPendingRequest: false, // Track if user has pending request\n        pendingRequestInfo: null, // Store pending request details\n        showPendingRequestModal: false, // Show modal for pending request\n        isCheckingPendingRequests: true, // Show loading while checking for pending requests\n        // Digital signature state\n        signatures: [],\n        hasUserSigned: false\n      }\n    },\n    async mounted() {\n      try {\n        // Set up automatic fallback timeout (10 seconds)\n        const fallbackTimeout = setTimeout(async () => {\n          if (this.isCheckingPendingRequests) {\n            console.warn(' Pending requests check taking too long, showing form')\n            this.isCheckingPendingRequests = false\n            this.hasPendingRequest = false\n            await this.initializeForm()\n          }\n        }, 10000)\n\n        // Check if user has pending requests first\n        await this.checkPendingRequests()\n\n        // Clear the fallback timeout since check completed\n        clearTimeout(fallbackTimeout)\n\n        // Only proceed if no pending request found\n        if (!this.hasPendingRequest) {\n          await this.initializeForm()\n        }\n      } catch (error) {\n        console.error('Error during component initialization:', error)\n        // If pending check fails, still initialize the form\n        this.isCheckingPendingRequests = false\n        this.hasPendingRequest = false\n        await this.initializeForm()\n      }\n    },\n    computed: {\n      globalLoading() {\n        return this.isCheckingPendingRequests || this.isSubmitting || this.isLoadingDevices\n      },\n      loadingBannerTitle() {\n        if (this.isCheckingPendingRequests) return 'Checking Your Requests'\n        if (this.isLoadingDevices) return 'Loading Devices'\n        if (this.isSubmitting) return 'Submitting Booking Request'\n        return 'Loading'\n      },\n      loadingBannerSubtitle() {\n        if (this.isCheckingPendingRequests) return 'Verifying pending booking requests...'\n        if (this.isLoadingDevices) return 'Fetching available devices...'\n        if (this.isSubmitting) return 'Please wait while we submit your booking...'\n        return 'Please wait...'\n      },\n      // Used by the combined datetime-local input\n      returnDateTimeModel: {\n        get() {\n          if (!this.formData.collectionDate) return ''\n          const t = (this.formData.returnTime || '17:00').slice(0, 5)\n          return `${this.formData.collectionDate}T${t}`\n        },\n        set(value) {\n          if (!value) {\n            this.formData.collectionDate = ''\n            this.formData.returnTime = ''\n            return\n          }\n          const parts = String(value).split('T')\n          this.formData.collectionDate = parts[0] || ''\n          this.formData.returnTime = (parts[1] || '').slice(0, 5)\n        }\n      },\n      minReturnDateTime() {\n        const today = new Date().toISOString().split('T')[0]\n        const base = this.formData.bookingDate || today\n        return `${base}T00:00`\n      }\n    },\n\n    methods: {\n      /**\n       * Initialize form data and load required dependencies\n       */\n      async initializeForm() {\n        try {\n          // Load departments and available devices when component is mounted\n          await this.loadDepartments()\n          await this.loadAvailableDevices()\n\n          // Auto-populate borrower name, phone number, and department from authenticated user\n          this.populateBorrowerName()\n          this.populatePhoneNumber()\n          this.populateDepartment()\n\n          // Debug: Check if time input is working\n          console.log('BookingService mounted, returnTime field:', this.formData.returnTime)\n\n          // Set a default time if none is set (optional)\n          if (!this.formData.returnTime) {\n            // Set default return time to 5 PM\n            this.formData.returnTime = '17:00'\n          }\n\n          // If return date isn't set, default to booking date (or today)\n          if (!this.formData.collectionDate) {\n            const today = new Date().toISOString().split('T')[0]\n            this.formData.collectionDate = this.formData.bookingDate || today\n          }\n\n          // Initialize real-time validation\n          this.initializeValidation()\n\n          // Load digital signatures for this booking document context\n          await this.loadSignatures()\n        } catch (error) {\n          console.error('Error initializing form:', error)\n        }\n      },\n\n      /**\n       * Check if user has any pending booking requests\n       */\n      async checkPendingRequests() {\n        try {\n          this.isCheckingPendingRequests = true\n\n          // Add timeout and retry logic\n          const controller = new AbortController()\n          const timeoutId = setTimeout(() => controller.abort(), 8000) // 8 second timeout\n\n          const response = await apiClient.get('/booking-service/check-pending-requests', {\n            signal: controller.signal\n          })\n\n          clearTimeout(timeoutId)\n\n          if (response.data.success) {\n            // Backend may flag has_pending_request due to auxiliary flags (e.g., SMS pending)\n            // Treat only truly pending workflow states as blocking\n            const pr = response.data.pending_request || {}\n            const isWorkflowComplete = !!(\n              pr.device_received_at ||\n              /returned|completed|closed/i.test(pr.return_status || '') ||\n              /returned|completed|closed/i.test(pr.status || '')\n            )\n\n            // Consider it pending only if backend says so AND not completed\n            this.hasPendingRequest = response.data.has_pending_request && !isWorkflowComplete\n\n            if (this.hasPendingRequest && response.data.pending_request) {\n              // Double-check server state to avoid stale flags\n              try {\n                const pendingId =\n                  response.data.pending_request.id || response.data.pending_request.request_id\n                if (pendingId) {\n                  const verify = await apiClient.get(`/booking-service/bookings/${pendingId}`)\n                  const rd = verify.data?.data || verify.data || {}\n                  const done = !!(\n                    rd.device_received_at ||\n                    /returned|completed|closed/i.test(rd.return_status || '') ||\n                    /returned|completed|closed/i.test(rd.status || '') ||\n                    (typeof rd.current_step === 'number' && rd.current_step >= 3)\n                  )\n                  if (done) {\n                    console.log(\n                      ' Clearing stale pending flag (booking is already returned):',\n                      pendingId\n                    )\n                    this.hasPendingRequest = false\n                    this.showPendingRequestModal = false\n                  }\n                }\n              } catch (e) {\n                if (e?.response?.status === 404) {\n                  console.log(' Pending booking not found (404)  clearing stale flag')\n                  this.hasPendingRequest = false\n                  this.showPendingRequestModal = false\n                } else {\n                  console.warn(\n                    'Pending verification failed (continuing with server flag):',\n                    e?.message\n                  )\n                }\n              }\n\n              if (this.hasPendingRequest) {\n                this.pendingRequestInfo = response.data.pending_request\n                this.showPendingRequestModal = true\n                console.log(' User has pending request:', response.data.pending_request)\n              }\n            } else {\n              // Ignore cases where only SMS status is pending\n              console.log(' No blocking pending requests found (workflow complete or none)')\n              this.hasPendingRequest = false\n            }\n          } else {\n            console.error('Failed to check pending requests:', response.data.message)\n            // Allow form to continue even if check fails\n            this.hasPendingRequest = false\n          }\n        } catch (error) {\n          console.error('Error checking pending requests:', error)\n\n          // Handle different types of errors\n          if (error.name === 'AbortError' || error.code === 'ECONNABORTED') {\n            console.warn(' Pending requests check timed out - allowing form submission')\n            // Don't show error to user, just proceed\n          } else if (error.response?.status === 401) {\n            console.warn(' Authentication error during pending requests check')\n            // Let auth interceptor handle this\n            return\n          } else {\n            console.warn(\n              ' Network error during pending requests check - allowing form submission'\n            )\n          }\n\n          // Always allow form to continue if check fails\n          this.hasPendingRequest = false\n        } finally {\n          this.isCheckingPendingRequests = false\n        }\n      },\n\n      /**\n       * Handle user decision to view their pending request\n       */\n      viewPendingRequest() {\n        if (this.pendingRequestInfo && this.pendingRequestInfo.request_url) {\n          this.$router.push(this.pendingRequestInfo.request_url)\n        } else {\n          // Fallback to request status page\n          this.$router.push('/request-status')\n        }\n      },\n\n      /**\n       * Close pending request modal and go back to dashboard\n       */\n      closePendingRequestModal() {\n        this.showPendingRequestModal = false\n        this.$router.push('/user-dashboard')\n      },\n\n      normalizePhoneNumber(input) {\n        if (!input) return ''\n        let v = String(input).trim().replace(/\\s|-/g, '')\n        if (v.startsWith('+255')) return v\n        if (v.startsWith('255')) return '+' + v\n        if (v.startsWith('0')) return '+255' + v.slice(1)\n        return v\n      },\n\n      async checkDeviceAvailability(deviceInventoryId) {\n        try {\n          // Use apiClient instead of fetch to ensure correct base URL\n          const response = await apiClient.get(\n            `/booking-service/devices/${deviceInventoryId}/availability`\n          )\n\n          if (response.data.success) {\n            this.deviceAvailabilityInfo = response.data.data\n            this.showAvailabilityWarning =\n              !response.data.data.available && response.data.data.can_request\n\n            console.log('Device availability checked:', response.data.data)\n          } else {\n            console.error('Failed to check device availability:', response.data.message)\n          }\n        } catch (error) {\n          console.error('Error checking device availability:', error)\n          // Don't show availability warning if there's an error\n          this.deviceAvailabilityInfo = null\n          this.showAvailabilityWarning = false\n        }\n      },\n\n      populateBorrowerName() {\n        // Auto-populate borrower name from authenticated user\n        try {\n          if (this.authStore.isAuthenticated && this.authStore.user) {\n            const userName = this.authStore.user.name || this.authStore.userName\n            if (userName && !this.formData.borrowerName) {\n              this.formData.borrowerName = userName\n              console.log(' Auto-populated borrower name:', userName)\n            } else if (!userName) {\n              console.warn(' User name not available in auth store')\n              // Try to get from localStorage as fallback\n              const storedUserData = localStorage.getItem('user_data')\n              if (storedUserData) {\n                const userData = JSON.parse(storedUserData)\n                if (userData.name) {\n                  this.formData.borrowerName = userData.name\n                  console.log(' Auto-populated borrower name from localStorage:', userData.name)\n                }\n              }\n            }\n          } else {\n            console.warn(' User not authenticated or user data not available')\n            // If not authenticated, redirect to login\n            this.$router.push('/login')\n          }\n        } catch (error) {\n          console.error(' Error populating borrower name:', error)\n        }\n      },\n\n      populatePhoneNumber() {\n        // Auto-populate phone number from authenticated user\n        try {\n          if (this.authStore.isAuthenticated && this.authStore.user) {\n            const userPhone = this.authStore.user.phone || this.authStore.user.phone_number\n            if (userPhone && !this.formData.phoneNumber) {\n              this.formData.phoneNumber = this.normalizePhoneNumber(userPhone)\n            } else if (!userPhone) {\n              // Try to get from localStorage as fallback\n              const storedUserData = localStorage.getItem('user_data')\n              if (storedUserData) {\n                const userData = JSON.parse(storedUserData)\n                const phoneFromStorage = userData.phone || userData.phone_number\n                if (phoneFromStorage) {\n                  this.formData.phoneNumber = this.normalizePhoneNumber(phoneFromStorage)\n                }\n              }\n            }\n          }\n        } catch (error) {\n          console.error(' Error populating phone number:', error)\n        }\n      },\n\n      /**\n       * Auto-populate department dropdown based on user's department_id from authStore\n       * This method maps the user's department_id to the department list and sets the form field\n       */\n      populateDepartment() {\n        // Auto-populate department from authenticated user\n        try {\n          if (this.authStore.isAuthenticated && this.authStore.user) {\n            // Check for department_id in user data\n            const userDepartmentId = this.authStore.user.department_id\n            const userDepartment = this.authStore.user.department\n\n            console.log(' Department population data:', {\n              userDepartmentId,\n              userDepartment,\n              currentFormDepartment: this.formData.department,\n              availableDepartments: this.departments.length\n            })\n\n            if (userDepartmentId && !this.formData.department) {\n              // Verify the department ID exists in our departments list\n              const matchingDept = this.departments.find((dept) => dept.id == userDepartmentId)\n              if (matchingDept) {\n                this.formData.department = parseInt(userDepartmentId)\n                console.log(\n                  ' Auto-populated department ID:',\n                  userDepartmentId,\n                  '-',\n                  matchingDept.name\n                )\n              } else {\n                console.warn(\n                  ' User department ID not found in available departments:',\n                  userDepartmentId\n                )\n              }\n            } else if (userDepartment && userDepartment.id && !this.formData.department) {\n              // If department is an object with id\n              const matchingDept = this.departments.find((dept) => dept.id == userDepartment.id)\n              if (matchingDept) {\n                this.formData.department = parseInt(userDepartment.id)\n                console.log(\n                  ' Auto-populated department from object:',\n                  userDepartment.id,\n                  '-',\n                  userDepartment.name || matchingDept.name\n                )\n              } else {\n                console.warn(\n                  ' User department object ID not found in available departments:',\n                  userDepartment.id\n                )\n              }\n            } else if (!userDepartmentId && !userDepartment) {\n              // Try to get from localStorage as fallback\n              const storedUserData = localStorage.getItem('user_data')\n              if (storedUserData) {\n                try {\n                  const userData = JSON.parse(storedUserData)\n                  const deptFromStorage = userData.department_id || userData.department?.id\n                  if (deptFromStorage) {\n                    const matchingDept = this.departments.find((dept) => dept.id == deptFromStorage)\n                    if (matchingDept) {\n                      this.formData.department = parseInt(deptFromStorage)\n                      console.log(\n                        ' Auto-populated department from localStorage:',\n                        deptFromStorage,\n                        '-',\n                        matchingDept.name\n                      )\n                    } else {\n                      console.warn(\n                        ' Stored department ID not found in available departments:',\n                        deptFromStorage\n                      )\n                    }\n                  }\n                } catch (parseError) {\n                  console.error(' Error parsing stored user data:', parseError)\n                }\n              }\n            }\n\n            // If department is populated, clear any validation errors and run validation\n            if (this.formData.department) {\n              this.errors.department = ''\n              this.validateDepartment()\n            } else {\n              console.warn(\n                ' Could not auto-populate department - user may need to select manually'\n              )\n            }\n          } else {\n            console.warn(\n              ' User not authenticated or user data not available for department population'\n            )\n          }\n        } catch (error) {\n          console.error(' Error populating department:', error)\n        }\n      },\n\n      initializeValidation() {\n        // Run initial validation to show red messages for empty required fields\n        this.validateBookingDate()\n        this.validateDeviceType()\n        this.validateDepartment()\n        this.validateReturnDateTime()\n        this.validateReason()\n        // Phone number validation removed since it's auto-populated\n      },\n\n      mapDeviceToType(device) {\n        // Map device from inventory to valid ENUM values\n        const validDeviceTypes = [\n          'projector',\n          'tv_remote',\n          'hdmi_cable',\n          'monitor',\n          'cpu',\n          'keyboard',\n          'pc',\n          'others'\n        ]\n\n        // First, try to use device_code if it's a valid ENUM value\n        if (device.device_code && validDeviceTypes.includes(device.device_code.toLowerCase())) {\n          console.log('Using device_code for mapping:', device.device_code)\n          return device.device_code.toLowerCase()\n        }\n\n        // Special mapping for device_code that doesn't match enum exactly\n        if (device.device_code) {\n          const deviceCodeLower = device.device_code.toLowerCase()\n          if (deviceCodeLower === 'hdmi') {\n            console.log('Mapping HDMI device_code to hdmi_cable')\n            return 'hdmi_cable'\n          }\n        }\n\n        // Fallback to device_name mapping\n        return this.mapDeviceNameToType(device.device_name)\n      },\n\n      mapDeviceNameToType(deviceName) {\n        // Map device names from inventory to valid ENUM values\n        const deviceNameLower = deviceName.toLowerCase()\n\n        // Direct matches\n        if (deviceNameLower.includes('projector')) return 'projector'\n        if (deviceNameLower.includes('monitor')) return 'monitor'\n        if (deviceNameLower.includes('cpu')) return 'cpu'\n        if (deviceNameLower.includes('keyboard')) return 'keyboard'\n        if (deviceNameLower.includes('pc') || deviceNameLower.includes('computer')) return 'pc'\n        if (deviceNameLower.includes('tv') && deviceNameLower.includes('remote')) return 'tv_remote'\n        if (deviceNameLower.includes('hdmi')) return 'hdmi_cable'\n\n        // Partial matches for common device types\n        if (deviceNameLower.includes('laptop') || deviceNameLower.includes('notebook')) return 'pc'\n        if (deviceNameLower.includes('screen') || deviceNameLower.includes('display'))\n          return 'monitor'\n        if (deviceNameLower.includes('remote') && !deviceNameLower.includes('hdmi'))\n          return 'tv_remote'\n        if (deviceNameLower.includes('cable') && !deviceNameLower.includes('hdmi'))\n          return 'hdmi_cable'\n\n        // Additional matches\n        if (deviceNameLower.includes('tv') || deviceNameLower.includes('television'))\n          return 'tv_remote'\n        if (deviceNameLower.includes('desktop')) return 'pc'\n        if (deviceNameLower.includes('project')) return 'projector' // for 'projection' etc\n\n        // For inventory devices that don't match any pattern, use 'others'\n        // The backend validation will handle this case properly when device_inventory_id is provided\n        console.warn(\n          'Device name not recognized, defaulting to \"others\" (device_inventory_id will be used by backend):',\n          {\n            deviceName: deviceName,\n            deviceNameLower: deviceNameLower,\n            suggestedFix: 'Consider updating the device mapping logic or device_code in inventory'\n          }\n        )\n        return 'others'\n      },\n\n      async loadDepartments() {\n        try {\n          const response = await bookingService.getDepartments()\n          if (response.success && response.data && response.data.data) {\n            this.departments = response.data.data\n          } else {\n            console.error('Failed to load departments:', response)\n            // Fallback to static list if API fails\n            this.departments = [\n              { id: 1, name: 'Administration' },\n              { id: 2, name: 'ICT Department' },\n              { id: 3, name: 'Finance' },\n              { id: 4, name: 'Human Resources' },\n              { id: 5, name: 'Nursing' },\n              { id: 6, name: 'Laboratory' },\n              { id: 7, name: 'Radiology' }\n            ]\n          }\n        } catch (error) {\n          console.error('Error loading departments:', error)\n          // Fallback to static list if API fails\n          this.departments = [\n            { id: 1, name: 'Administration' },\n            { id: 2, name: 'ICT Department' },\n            { id: 3, name: 'Finance' },\n            { id: 4, name: 'Human Resources' },\n            { id: 5, name: 'Nursing' },\n            { id: 6, name: 'Laboratory' },\n            { id: 7, name: 'Radiology' }\n          ]\n        }\n      },\n      async loadAvailableDevices() {\n        this.isLoadingDevices = true\n        try {\n          console.time('Loading available devices')\n          const response = await deviceInventoryService.getAvailableDevices()\n          console.timeEnd('Loading available devices')\n\n          if (response.success && response.data && response.data.data) {\n            this.availableDevices = response.data.data\n            console.log(' Loaded', this.availableDevices.length, 'available devices')\n          } else {\n            console.error('Failed to load available devices:', response)\n            this.availableDevices = []\n          }\n        } catch (error) {\n          console.error('Error loading available devices:', error)\n          this.availableDevices = []\n        } finally {\n          this.isLoadingDevices = false\n        }\n      },\n      handleDeviceTypeChange() {\n        // Normalize selection\n        const rawSelection = this.formData.deviceInventoryIds || []\n        const selection = Array.isArray(rawSelection)\n          ? rawSelection\n          : [rawSelection].filter(Boolean)\n\n        const inventoryIds = selection.filter((v) => v !== 'others')\n        const hasOthers = selection.includes('others')\n\n        this.selectedDevicesCount = inventoryIds.length\n        this.showCustomDeviceField = hasOthers\n\n        // Determine primary inventory device (for backward compatibility)\n        const primaryId = inventoryIds.length > 0 ? inventoryIds[0] : hasOthers ? 'others' : ''\n        this.formData.deviceInventoryId = primaryId\n\n        if (primaryId && primaryId !== 'others') {\n          this.formData.customDevice = ''\n\n          const selectedDevice = this.availableDevices.find(\n            (d) => String(d.id) === String(primaryId)\n          )\n          if (selectedDevice) {\n            this.selectedDeviceInfo = {\n              id: selectedDevice.id,\n              name: selectedDevice.device_name,\n              code: selectedDevice.device_code\n            }\n\n            // Use device_code first, then fallback to device_name mapping\n            this.formData.deviceType = this.mapDeviceToType(selectedDevice)\n          } else {\n            this.formData.deviceType = ''\n            this.selectedDeviceInfo = null\n          }\n        } else if (hasOthers) {\n          this.formData.deviceType = 'others'\n          this.selectedDeviceInfo = null\n        } else {\n          this.formData.deviceType = ''\n          this.selectedDeviceInfo = null\n        }\n\n        // Validate + availability for primary device\n        this.validateDeviceType()\n\n        if (primaryId && primaryId !== 'others') {\n          this.checkDeviceAvailability(primaryId)\n        } else {\n          this.deviceAvailabilityInfo = null\n          this.showAvailabilityWarning = false\n        }\n      },\n\n      validateDeviceType() {\n        const selection = this.formData.deviceInventoryIds || []\n        const inventoryIds = Array.isArray(selection)\n          ? selection.filter((v) => v !== 'others')\n          : this.formData.deviceInventoryId\n            ? [this.formData.deviceInventoryId]\n            : []\n        const hasOthers = Array.isArray(selection) && selection.includes('others')\n        const primaryId =\n          this.formData.deviceInventoryId ||\n          (inventoryIds.length > 0 ? inventoryIds[0] : hasOthers ? 'others' : '')\n\n        if (!primaryId && !hasOthers) {\n          this.errors.deviceType = 'Device type is required'\n        } else if (primaryId && primaryId !== 'others' && !this.formData.deviceType) {\n          this.errors.deviceType = 'Device type validation error'\n        } else {\n          // Validate that device_type is a valid ENUM value\n          const validDeviceTypes = [\n            'projector',\n            'tv_remote',\n            'hdmi_cable',\n            'monitor',\n            'cpu',\n            'keyboard',\n            'pc',\n            'others'\n          ]\n          if (this.formData.deviceType && !validDeviceTypes.includes(this.formData.deviceType)) {\n            this.errors.deviceType = 'Invalid device type selected'\n          } else {\n            // Allow selection of any device (including out-of-stock)\n            if (this.formData.deviceInventoryId && this.formData.deviceInventoryId !== 'others') {\n              const selectedDevice = this.availableDevices.find(\n                (d) => d.id == this.formData.deviceInventoryId\n              )\n              if (!selectedDevice) {\n                this.errors.deviceType = 'Selected device not found in inventory'\n              } else {\n                // Clear any previous errors - device can be selected even if out of stock\n                this.errors.deviceType = ''\n              }\n            } else {\n              this.errors.deviceType = ''\n            }\n          }\n        }\n      },\n\n      handleReturnTimeChange(event) {\n        console.log('Return time changed:', event.target.value)\n        this.formData.returnTime = event.target.value\n        // Clear any existing error\n        if (this.errors.returnTime) {\n          this.errors.returnTime = ''\n        }\n      },\n\n      handleReturnTimeClick(event) {\n        console.log('Return time input clicked')\n        // Ensure the input is focused and clickable\n        event.target.focus()\n      },\n\n      handleReasonInput() {\n        // Clear reason error when user starts typing and meets minimum length\n        if (this.errors.reason && this.formData.reason.trim().length >= 10) {\n          this.errors.reason = ''\n        }\n        // Also run real-time validation\n        this.validateReason()\n      },\n\n      // Real-time validation methods\n      validateBookingDate() {\n        if (!this.formData.bookingDate) {\n          this.errors.bookingDate = 'Booking date is required'\n        } else {\n          const today = new Date().toISOString().split('T')[0]\n          if (this.formData.bookingDate < today) {\n            this.errors.bookingDate = 'Booking date cannot be in the past'\n          } else {\n            this.errors.bookingDate = ''\n          }\n        }\n      },\n\n      validateDepartment() {\n        if (!this.formData.department) {\n          this.errors.department = 'Department is required'\n        } else {\n          this.errors.department = ''\n        }\n      },\n\n      validateCustomDevice() {\n        if (this.formData.deviceInventoryId === 'others') {\n          if (!this.formData.customDevice.trim()) {\n            this.errors.customDevice = 'Please specify the device'\n          } else {\n            this.errors.customDevice = ''\n          }\n        }\n      },\n\n      validatePhoneNumber() {\n        // Phone number is auto-populated from user account, just check if it exists\n        if (!this.formData.phoneNumber || !this.formData.phoneNumber.trim()) {\n          this.errors.phoneNumber =\n            'Phone number not available in your account. Please contact admin to update your profile.'\n        } else {\n          this.errors.phoneNumber = ''\n        }\n      },\n\n      validateReturnDateTime() {\n        if (!this.returnDateTimeModel) {\n          this.errors.collectionDate = 'Return date and time is required'\n          this.errors.returnTime = ''\n          return\n        }\n\n        // Basic ordering rule: allow same-day return, but not a return date before booking date\n        if (this.formData.bookingDate && this.formData.collectionDate < this.formData.bookingDate) {\n          this.errors.collectionDate = 'Return date cannot be before booking date'\n        } else {\n          this.errors.collectionDate = ''\n        }\n\n        if (!this.formData.returnTime) {\n          this.errors.returnTime = 'Return time is required'\n        } else {\n          this.errors.returnTime = ''\n        }\n      },\n\n      validateReason() {\n        if (!this.formData.reason.trim()) {\n          this.errors.reason = 'Reason for borrowing is required'\n        } else if (this.formData.reason.trim().length < 10) {\n          this.errors.reason = 'Reason must be at least 10 characters'\n        } else {\n          this.errors.reason = ''\n        }\n      },\n\n      handleConditionBeforeChange() {\n        if (this.formData.conditionBefore !== 'something_not_good') {\n          this.formData.conditionBeforeIssues = ''\n        }\n      },\n\n      handleConditionReturnedChange() {\n        if (this.formData.conditionReturned !== 'compromised') {\n          this.formData.conditionReturnedIssues = ''\n        }\n      },\n\n      // Digital Signatures\n      computeDocumentId() {\n        // Synthetic pre-sign token id for booking_service: 910,000,000 + userId\n        const uid = this.authStore?.user?.id || 0\n        return 910000000 + Number(uid)\n      },\n      async loadSignatures() {\n        try {\n          const docId = this.computeDocumentId()\n          const res = await signatureService.list(docId)\n          this.signatures = Array.isArray(res.data) ? res.data : res\n          const uid = this.authStore?.user?.id\n          this.hasUserSigned = !!(this.signatures || []).find((s) => s.user_id === uid)\n        } catch (e) {\n          this.signatures = []\n          this.hasUserSigned = false\n        }\n      },\n      async signDocument() {\n        try {\n          const docId = 'booking_service' // resolveDocumentId will map per current user\n          await signatureService.sign(docId)\n          await this.loadSignatures()\n        } catch (e) {\n          alert('Failed to sign document. Please try again.')\n        }\n      },\n\n      validateForm() {\n        this.errors = {}\n\n        // Validate required fields\n        if (!this.formData.bookingDate) {\n          this.errors.bookingDate = 'Booking date is required'\n        }\n\n        if (!this.formData.borrowerName.trim()) {\n          this.errors.borrowerName = 'Borrower name is required'\n        }\n\n        const selection = this.formData.deviceInventoryIds || []\n        const inventoryIds = Array.isArray(selection)\n          ? selection.filter((v) => v !== 'others')\n          : this.formData.deviceInventoryId\n            ? [this.formData.deviceInventoryId]\n            : []\n        const hasOthers = Array.isArray(selection) && selection.includes('others')\n\n        if (inventoryIds.length === 0 && !hasOthers) {\n          this.errors.deviceType = 'Device type is required'\n        }\n\n        // Ensure device_type is set when a primary inventory device is selected\n        if (\n          this.formData.deviceInventoryId &&\n          this.formData.deviceInventoryId !== 'others' &&\n          !this.formData.deviceType\n        ) {\n          this.errors.deviceType = 'Device type validation error'\n        }\n\n        // Validate that device_type is a valid ENUM value\n        const validDeviceTypes = [\n          'projector',\n          'tv_remote',\n          'hdmi_cable',\n          'monitor',\n          'cpu',\n          'keyboard',\n          'pc',\n          'others'\n        ]\n        if (this.formData.deviceType && !validDeviceTypes.includes(this.formData.deviceType)) {\n          this.errors.deviceType = 'Invalid device type selected'\n        }\n\n        if (this.formData.deviceInventoryId === 'others' && !this.formData.customDevice.trim()) {\n          this.errors.customDevice = 'Please specify the device'\n        }\n\n        // Allow selection of any device (including out-of-stock)\n        if (this.formData.deviceInventoryId && this.formData.deviceInventoryId !== 'others') {\n          const selectedDevice = this.availableDevices.find(\n            (d) => d.id == this.formData.deviceInventoryId\n          )\n          if (!selectedDevice) {\n            this.errors.deviceType = 'Selected device not found in inventory'\n          }\n          // Note: We don't check can_borrow here anymore - allow out-of-stock devices\n        }\n\n        if (!this.formData.reason.trim()) {\n          this.errors.reason = 'Reason for borrowing is required'\n        } else if (this.formData.reason.trim().length < 10) {\n          this.errors.reason = 'Reason must be at least 10 characters'\n        }\n\n        if (!this.formData.department) {\n          this.errors.department = 'Department is required'\n        }\n\n        if (!this.returnDateTimeModel) {\n          this.errors.collectionDate = 'Return date and time is required'\n        }\n\n        if (!this.formData.returnTime) {\n          this.errors.returnTime = 'Return time is required'\n        }\n\n        // Validate phone number (auto-populated from user account)\n        this.validatePhoneNumber()\n\n        // Require digital signature (frontend hint; backend enforces too)\n        if (!this.hasUserSigned) {\n          this.errors.digital_signature = 'Please sign the document before submitting.'\n        }\n\n        // Filter out empty error messages for more accurate validation\n        const actualErrors = Object.keys(this.errors).filter(\n          (key) => this.errors[key] && this.errors[key].trim()\n        )\n        return actualErrors.length === 0\n      },\n\n      async submitBooking() {\n        // Set submitting state to true to show loading\n        this.isSubmitting = true\n\n        try {\n          // Validate form first\n          if (!this.validateForm()) {\n            // Log validation errors safely\n            const errorFields = Object.keys(this.errors)\n            console.log('Form validation failed - Error count:', errorFields.length)\n            console.log('Error fields:', errorFields)\n\n            // Reset submitting state immediately\n            this.isSubmitting = false\n\n            // Scroll to the first error field for better UX\n            this.scrollToFirstError()\n\n            // Show a brief alert to notify about validation issues\n            const errorCount = errorFields.length\n            alert(\n              `Please fill in all required fields. ${errorCount} ${errorCount === 1 ? 'field' : 'fields'} need(s) attention.`\n            )\n            return\n          }\n\n          // Double-check for pending requests before submitting\n          try {\n            await this.checkPendingRequests()\n            if (this.hasPendingRequest) {\n              alert(\n                'You have a pending booking request. Please wait for it to be processed before submitting a new request.'\n              )\n              this.isSubmitting = false // Reset submitting state when pending request found\n              return\n            }\n          } catch (error) {\n            console.warn(\n              ' Could not verify pending requests, proceeding with submission:',\n              error.message\n            )\n            // Continue with submission if pending check fails\n          }\n\n          // Prepare JSON payload for API submission\n          const payload = {\n            booking_date: this.formData.bookingDate,\n            borrower_name: this.formData.borrowerName,\n            device_type: this.formData.deviceType,\n            department: this.formData.department,\n            phone_number: this.normalizePhoneNumber(this.formData.phoneNumber),\n            return_date: this.formData.collectionDate, // Note: collectionDate is actually return_date\n            return_time: this.formData.returnTime,\n            reason: this.formData.reason\n          }\n\n          // Normalize device selections\n          const selection = this.formData.deviceInventoryIds || []\n          const inventoryIds = Array.isArray(selection)\n            ? selection.filter((v) => v !== 'others')\n            : this.formData.deviceInventoryId && this.formData.deviceInventoryId !== 'others'\n              ? [this.formData.deviceInventoryId]\n              : []\n          const hasOthers = Array.isArray(selection) && selection.includes('others')\n\n          // Primary inventory device for backward compatibility\n          if (this.formData.deviceInventoryId && this.formData.deviceInventoryId !== 'others') {\n            payload.device_inventory_id = this.formData.deviceInventoryId\n          } else if (inventoryIds.length > 0) {\n            payload.device_inventory_id = inventoryIds[0]\n          }\n\n          // Full list of selected inventory devices (new field)\n          if (inventoryIds.length > 0) {\n            payload.device_inventory_ids = inventoryIds\n          }\n\n          if (hasOthers && this.formData.customDevice) {\n            payload.custom_device = this.formData.customDevice\n          }\n\n          console.log('Submitting booking request:', {\n            borrowerName: this.formData.borrowerName,\n            deviceType: this.formData.deviceType,\n            deviceInventoryId: this.formData.deviceInventoryId,\n            department: this.formData.department,\n            hasUserSigned: this.hasUserSigned\n          })\n\n          // Submit to API\n          const response = await bookingService.submitBooking(payload)\n\n          if (response.success) {\n            console.log('Booking submitted successfully:', response.data)\n\n            // Auto-capture user details for ICT approval system\n            await this.linkUserDetailsToICTApproval(response.data)\n            console.log('Device info before showing modal:', {\n              deviceInventoryId: this.formData.deviceInventoryId,\n              selectedDeviceInfo: this.selectedDeviceInfo,\n              deviceType: this.formData.deviceType\n            })\n\n            // Store availability info if device was out of stock\n            if (response.data.availability_info) {\n              this.deviceAvailabilityInfo = response.data.availability_info\n            }\n\n            // Redirect immediately to request status page to prevent multiple submissions\n            this.resetForm()\n            this.$router.push({\n              path: '/request-status',\n              query: {\n                success: 'true',\n                type: 'Device Booking Request',\n                id: 'BOOK-' + Date.now()\n              }\n            })\n          } else {\n            console.error('API Error:', response)\n\n            // Handle validation errors\n            if (response.errors && Object.keys(response.errors).length > 0) {\n              // Map backend errors to frontend form errors\n              this.errors = {}\n              Object.keys(response.errors).forEach((field) => {\n                const errorMessages = response.errors[field]\n                if (Array.isArray(errorMessages) && errorMessages.length > 0) {\n                  this.errors[field] = errorMessages[0]\n                }\n              })\n\n              // Also show alert for immediate feedback\n              const errorMessages = Object.values(response.errors).flat()\n              alert(errorMessages[0] || 'Validation failed')\n            } else {\n              alert(response.message || 'Failed to submit booking')\n            }\n          }\n        } catch (error) {\n          console.error('Error in submitBooking:', error)\n          alert('An unexpected error occurred. Please try again.')\n        } finally {\n          this.isSubmitting = false\n        }\n      },\n\n      resetForm() {\n        this.formData = {\n          bookingDate: '',\n          borrowerName: '',\n          deviceInventoryId: '',\n          deviceInventoryIds: [],\n          deviceType: '',\n          customDevice: '',\n          reason: '',\n          department: '',\n          collectionDate: '', // Fixed: matches form template field name\n          returnTime: '',\n          phoneNumber: '',\n          conditionBefore: '',\n          conditionBeforeIssues: '',\n          conditionReturned: '',\n          conditionReturnedIssues: '',\n          status: ''\n        }\n        this.selectedDeviceInfo = null\n        this.signatures = []\n        this.hasUserSigned = false\n      },\n\n      getDeviceDisplayName() {\n        console.log('getDeviceDisplayName called with:', {\n          selectedDeviceInfo: this.selectedDeviceInfo,\n          deviceInventoryId: this.formData.deviceInventoryId,\n          deviceType: this.formData.deviceType,\n          customDevice: this.formData.customDevice,\n          availableDevicesCount: this.availableDevices.length\n        })\n\n        // First priority: Use stored device info if available\n        if (this.selectedDeviceInfo && this.selectedDeviceInfo.name) {\n          console.log('Using stored device info:', this.selectedDeviceInfo.name)\n          return this.selectedDeviceInfo.name\n        }\n\n        // Second priority: If device_inventory_id is provided and not 'others', get from inventory\n        if (this.formData.deviceInventoryId && this.formData.deviceInventoryId !== 'others') {\n          const selectedDevice = this.availableDevices.find(\n            (d) => d.id == this.formData.deviceInventoryId\n          )\n          if (selectedDevice) {\n            console.log('Found device in inventory:', selectedDevice.device_name)\n            return selectedDevice.device_name\n          } else {\n            console.warn(\n              'Device not found in available devices list:',\n              this.formData.deviceInventoryId\n            )\n            // Try to get device name from a stored reference if available\n            return `Device ID: ${this.formData.deviceInventoryId}`\n          }\n        }\n\n        // Third priority: If 'others' is selected, use custom device name\n        if (this.formData.deviceInventoryId === 'others') {\n          return this.formData.customDevice || 'Other Device'\n        }\n\n        // Fourth priority: Fallback to device type mapping for backward compatibility\n        const deviceNames = {\n          projector: 'Projector',\n          tv_remote: 'TV Remote',\n          hdmi_cable: 'HDMI Cable',\n          monitor: 'Monitor',\n          cpu: 'CPU',\n          keyboard: 'Keyboard',\n          pc: 'PC'\n        }\n\n        if (this.formData.deviceType && deviceNames[this.formData.deviceType]) {\n          return deviceNames[this.formData.deviceType]\n        }\n\n        // Last resort\n        console.warn('Could not determine device name:', {\n          deviceInventoryId: this.formData.deviceInventoryId,\n          deviceType: this.formData.deviceType,\n          customDevice: this.formData.customDevice\n        })\n        return 'Unknown Device'\n      },\n\n      formatDisplayDate(dateString) {\n        if (!dateString) return 'Not specified'\n\n        try {\n          const date = new Date(dateString)\n          return date.toLocaleDateString('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n          })\n        } catch (error) {\n          return dateString\n        }\n      },\n\n      closeSuccessModal() {\n        this.showSuccessModal = false\n        // Reset form after modal is closed\n        this.resetForm()\n        // Always redirect to Request Status page to prevent multiple submissions\n        this.$router.push({\n          path: '/request-status',\n          query: {\n            success: 'true',\n            type: 'Device Booking Request',\n            id: 'BOOK-' + Date.now()\n          }\n        })\n      },\n\n      goBack() {\n        this.$router.push('/user-dashboard')\n      },\n\n      /**\n       * Auto-capture user details and link to ICT approval system\n       * This is called automatically after successful booking submission\n       */\n      async linkUserDetailsToICTApproval(bookingData) {\n        try {\n          // Get user ID from auth store\n          const userId = this.authStore.user?.id || this.authStore.userId\n          if (!userId) {\n            console.warn(' User ID not available for auto-capture')\n            return\n          }\n\n          const bookingId = bookingData.id || bookingData.booking_id\n          if (!bookingId) {\n            console.warn(' Booking ID not available for auto-capture')\n            return\n          }\n\n          console.log(' Auto-capturing user details for ICT approval...', {\n            bookingId,\n            userId,\n            borrowerName: this.formData.borrowerName,\n            department: this.formData.department\n          })\n\n          // Link user details to booking for ICT approval system\n          const response = await ictApprovalService.linkUserDetailsToBooking(bookingId, userId)\n\n          if (response.success) {\n            console.log(' User details successfully linked to ICT approval system')\n          } else {\n            console.warn(' Failed to link user details to ICT approval system:', response.message)\n            // Don't show error to user as this is a background process\n          }\n        } catch (error) {\n          console.error(' Error linking user details to ICT approval system:', error)\n          // Don't show error to user as this is a background process\n        }\n      },\n\n      /**\n       * Scroll to the first field that has a validation error\n       */\n      scrollToFirstError() {\n        const firstErrorField = Object.keys(this.errors)[0]\n        if (firstErrorField) {\n          // Create a map of error fields to form field names\n          const fieldMap = {\n            bookingDate: 'bookingDate',\n            borrowerName: 'borrowerName',\n            deviceType: 'deviceInventoryId',\n            customDevice: 'customDevice',\n            reason: 'reason',\n            department: 'department',\n            collectionDate: 'collectionDate',\n            returnTime: 'returnTime',\n            phoneNumber: 'phoneNumber',\n            signature: 'signatureInput'\n          }\n\n          const fieldName = fieldMap[firstErrorField] || firstErrorField\n          const element = document.querySelector(\n            `[name=\"${fieldName}\"], #${fieldName}, [v-model*=\"${fieldName}\"]`\n          )\n\n          if (element) {\n            element.scrollIntoView({ behavior: 'smooth', block: 'center' })\n            // Add a slight delay before focusing to ensure scroll completes\n            setTimeout(() => {\n              element.focus()\n            }, 500)\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /* Booking Glass morphism effects */\n  .booking-glass-card {\n    background: rgba(59, 130, 246, 0.15);\n    backdrop-filter: blur(25px);\n    -webkit-backdrop-filter: blur(25px);\n    border: 2px solid rgba(96, 165, 250, 0.3);\n    box-shadow:\n      0 8px 32px rgba(29, 78, 216, 0.4),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n\n  .booking-card {\n    position: relative;\n    overflow: hidden;\n    background: rgba(59, 130, 246, 0.1);\n    backdrop-filter: blur(15px);\n    -webkit-backdrop-filter: blur(15px);\n  }\n\n  .booking-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(96, 165, 250, 0.2), transparent);\n    transition: left 0.5s;\n  }\n\n  .booking-card:hover::before {\n    left: 100%;\n  }\n\n  .booking-input {\n    position: relative;\n    z-index: 1;\n    color: white;\n  }\n\n  .booking-input::placeholder {\n    color: rgba(191, 219, 254, 0.6);\n  }\n\n  .booking-input:focus {\n    border-color: rgba(59, 130, 246, 0.8);\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n  }\n\n  /* Select dropdown styling */\n  select.booking-input {\n    background-image: none;\n  }\n\n  select option {\n    padding: 8px;\n  }\n\n  /* Time input styling - Fixed for clickability */\n  input[type='time'].booking-input {\n    position: relative;\n    z-index: 10;\n    cursor: pointer;\n    color-scheme: dark;\n  }\n\n  /* Make the time picker indicator clickable */\n  input[type='time']::-webkit-calendar-picker-indicator {\n    cursor: pointer;\n    filter: invert(1);\n    opacity: 0.7;\n  }\n\n  input[type='time']::-webkit-calendar-picker-indicator:hover {\n    opacity: 1;\n  }\n\n  /* Firefox time input styling */\n  input[type='time']::-moz-focus-inner {\n    border: 0;\n  }\n\n  /* Ensure proper display in all browsers */\n  input[type='time'] {\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    background: transparent;\n  }\n\n  /* Animations */\n  @keyframes float {\n    0%,\n    100% {\n      transform: translateY(0px);\n    }\n    50% {\n      transform: translateY(-15px);\n    }\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes fade-in-delay {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes slide-up {\n    from {\n      opacity: 0;\n      transform: translateY(30px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes slide-down {\n    from {\n      opacity: 0;\n      transform: translateY(-10px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes modal-in {\n    from {\n      opacity: 0;\n      transform: scale(0.9) translateY(-20px);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes modal-bounce {\n    0% {\n      opacity: 0;\n      transform: scale(0.3) translateY(-50px);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.05) translateY(0);\n    }\n    70% {\n      transform: scale(0.95);\n    }\n    100% {\n      opacity: 1;\n      transform: scale(1) translateY(0);\n    }\n  }\n\n  @keyframes bounce-gentle {\n    0%,\n    20%,\n    50%,\n    80%,\n    100% {\n      transform: translateY(0);\n    }\n    40% {\n      transform: translateY(-10px);\n    }\n    60% {\n      transform: translateY(-5px);\n    }\n  }\n\n  @keyframes check-mark {\n    0% {\n      transform: scale(0);\n    }\n    50% {\n      transform: scale(1.2);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n\n  @keyframes spin-slow {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .animate-float {\n    animation: float 6s ease-in-out infinite;\n  }\n\n  .animate-fade-in {\n    animation: fade-in 1s ease-out;\n  }\n\n  .animate-fade-in-delay {\n    animation: fade-in-delay 1s ease-out 0.3s both;\n  }\n\n  .animate-slide-up {\n    animation: slide-up 0.6s ease-out;\n  }\n\n  .animate-slide-down {\n    animation: slide-down 0.3s ease-out;\n  }\n\n  .animate-modal-in {\n    animation: modal-in 0.3s ease-out;\n  }\n\n  .animate-modal-bounce {\n    animation: modal-bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  }\n\n  .animate-bounce-gentle {\n    animation: bounce-gentle 2s ease-in-out infinite;\n  }\n\n  .animate-check-mark {\n    animation: check-mark 0.6s ease-out 0.3s both;\n  }\n\n  .animate-spin-slow {\n    animation: spin-slow 8s linear infinite;\n  }\n\n  /* Focus styles for accessibility */\n  input:focus,\n  select:focus,\n  textarea:focus {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n  }\n\n  button:focus {\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);\n  }\n\n  /* Loading spinner animation */\n  @keyframes spin {\n    from {\n      transform: rotate(0deg);\n    }\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .fa-spin {\n    animation: spin 1s linear infinite;\n  }\n\n  /* Smooth transitions */\n  * {\n    transition-property:\n      color, background-color, border-color, text-decoration-color, fill, stroke, opacity,\n      box-shadow, transform, filter, backdrop-filter;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    transition-duration: 200ms;\n  }\n\n  /* Responsive adjustments */\n  @media (max-width: 768px) {\n    .grid-cols-1.md\\\\:grid-cols-2 {\n      grid-template-columns: repeat(1, minmax(0, 1fr));\n    }\n\n    .p-8 {\n      padding: 1.5rem;\n    }\n\n    .text-3xl {\n      font-size: 1.5rem;\n    }\n\n    .text-xl {\n      font-size: 1rem;\n    }\n  }\n</style>\n","import apiClient from '../utils/apiClient'\n\n/**\n * ICT Approval Service for Device Borrowing Requests\n * Handles ICT officer approval/rejection of device booking requests\n * Auto-captures user details from users/staff table\n */\nexport const ictApprovalService = {\n  /**\n   * Get all device borrowing requests with auto-captured user details\n   * @param {Object} params - Query parameters (status, device_type, department, etc.)\n   * @returns {Promise<Object>} - API response with paginated requests\n   */\n  async getDeviceBorrowingRequests(params = {}) {\n    try {\n      // Use the dedicated ICT approval endpoint\n      const response = await apiClient.get('/ict-approval/device-requests', {\n        params: {\n          ...params,\n          per_page: params.per_page || 50\n        }\n      })\n\n      // Transform data to ensure all user details are properly populated\n      const requests = response.data.data || response.data\n      const transformedRequests = Array.isArray(requests)\n        ? requests.map((request) => ({\n            // Core request data\n            id: request.id,\n            request_id: request.request_id || `REQ-${request.id.toString().padStart(6, '0')}`,\n\n            // Auto-captured user details from users/staff table\n            borrower_id: request.user_id || request.borrower_id,\n            borrower_name:\n              request.user?.name || request.borrower_name || request.staff?.name || 'Unknown User',\n            borrower_email: request.user?.email || request.borrower_email || request.staff?.email,\n            borrower_phone: request.user?.phone || request.borrower_phone || request.staff?.phone,\n            pf_number: request.user?.pf_number || request.staff?.pf_number,\n\n            // Department details\n            department_id:\n              request.user?.department_id || request.department_id || request.staff?.department_id,\n            department:\n              request.user?.department?.name ||\n              request.department ||\n              request.staff?.department?.name ||\n              'Unknown Department',\n\n            // Device details\n            device_type: request.device_type,\n            custom_device: request.custom_device,\n            device_name:\n              request.device_name ||\n              this.getDeviceDisplayName(request.device_type, request.custom_device),\n            device_inventory_id: request.device_inventory_id,\n            device_available:\n              typeof request.device_available !== 'undefined' ? request.device_available : null,\n\n            // Booking details\n            booking_date: request.booking_date,\n            collection_date: request.collection_date,\n            return_date: request.return_date,\n            purpose: request.purpose,\n\n            // Signature details\n            signature: request.signature,\n            signature_path: request.signature_path,\n            has_signature: !!(request.signature || request.signature_path),\n\n            // Status and approval\n            status: request.status || 'pending',\n            ict_status: request.ict_status || 'pending',\n            ict_approval_date: request.ict_approval_date,\n            ict_notes: request.ict_notes,\n\n            // Timestamps\n            created_at: request.created_at,\n            updated_at: request.updated_at,\n\n            // Raw data for advanced operations\n            _raw: request\n          }))\n        : []\n\n      return {\n        success: true,\n        data: {\n          data: transformedRequests,\n          current_page: response.data.current_page || 1,\n          last_page: response.data.last_page || 1,\n          per_page: response.data.per_page || 15,\n          total: response.data.total || transformedRequests.length\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch device borrowing requests:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to fetch device borrowing requests',\n        error: error.message,\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Get detailed information for a specific device borrowing request\n   * @param {number} requestId - Request ID\n   * @returns {Promise<Object>} - API response with request details\n   */\n  async getDeviceBorrowingRequestDetails(requestId) {\n    try {\n      console.log(' ICT Approval Service - Request Details for ID:', requestId)\n\n      const response = await apiClient.get(`/booking-service/bookings/${requestId}`)\n\n      const request = response.data.data || response.data\n\n      // Transform data with auto-captured user details\n      const transformedRequest = {\n        // Core request data\n        id: request.id,\n        request_id: request.request_id || `REQ-${request.id.toString().padStart(6, '0')}`,\n\n        // User details from booking service\n        borrower_id: request.user_id,\n        borrower_name: request.borrower_name || 'Unknown User',\n        borrower_email: request.user?.email,\n        borrower_phone: request.phone_number,\n        pf_number: request.user?.pf_number,\n\n        // Department details\n        department_id: request.user?.department_id,\n        department: request.departmentInfo?.name || request.department || 'Unknown Department',\n\n        // Device details\n        device_type: request.device_type,\n        custom_device: request.custom_device,\n        device_name: this.getDeviceDisplayName(request.device_type, request.custom_device),\n\n        // Booking details\n        booking_date: request.booking_date,\n        return_date: request.return_date,\n        return_time: request.return_time,\n        reason: request.reason,\n\n        // Signature details\n        signature_path: request.signature_path,\n        signature_url: request.signature_url,\n        has_signature: !!request.signature_path,\n\n        // Status and approval\n        status: request.status || 'pending',\n        ict_status: request.ict_approve || 'pending',\n        ict_approval_date: request.ict_approved_at,\n        ict_notes: request.ict_notes,\n        ict_approved_by: request.ict_approved_by_name || request.ictApprovedBy?.name,\n\n        // Timestamps\n        created_at: request.created_at,\n        updated_at: request.updated_at,\n\n        // Raw data\n        _raw: request\n      }\n\n      return {\n        success: true,\n        data: transformedRequest\n      }\n    } catch (error) {\n      console.error('Failed to fetch request details:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to fetch request details',\n        error: error.message,\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Approve a device borrowing request\n   * @param {number} requestId - Request ID\n   * @param {string} notes - ICT officer notes (optional)\n   * @returns {Promise<Object>} - API response\n   */\n  async approveDeviceBorrowingRequest(requestId, notes = '') {\n    try {\n      const response = await apiClient.post(`/booking-service/bookings/${requestId}/ict-approve`, {\n        ict_notes: notes\n      })\n\n      return {\n        success: true,\n        data: response.data,\n        message: 'Device borrowing request approved successfully'\n      }\n    } catch (error) {\n      console.error('Failed to approve request:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to approve request',\n        errors: error.response?.data?.errors || {},\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Reject a device borrowing request\n   * @param {number} requestId - Request ID\n   * @param {string} notes - ICT officer rejection reason (required)\n   * @returns {Promise<Object>} - API response\n   */\n  async rejectDeviceBorrowingRequest(requestId, notes) {\n    try {\n      if (!notes || notes.trim() === '') {\n        throw new Error('Rejection reason is required')\n      }\n\n      const response = await apiClient.post(`/booking-service/bookings/${requestId}/ict-reject`, {\n        ict_notes: notes\n      })\n\n      return {\n        success: true,\n        data: response.data,\n        message: 'Device borrowing request rejected successfully'\n      }\n    } catch (error) {\n      console.error('Failed to reject request:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || error.message || 'Failed to reject request',\n        errors: error.response?.data?.errors || {},\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Get statistics for device borrowing requests\n   * @returns {Promise<Object>} - API response with statistics\n   */\n  async getDeviceBorrowingStatistics() {\n    try {\n      const response = await apiClient.get('/ict-approval/device-requests/statistics')\n\n      const stats = response.data.data || response.data\n\n      return {\n        success: true,\n        data: {\n          pending: stats.pending || 0,\n          approved: stats.approved || 0,\n          rejected: stats.rejected || 0,\n          returned: stats.returned || 0,\n          compromised: stats.compromised || 0,\n          total: stats.total || 0\n        }\n      }\n    } catch (error) {\n      console.error('Failed to fetch statistics:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to fetch statistics',\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Auto-capture and link user details to a booking request\n   * This function is called when a booking request is submitted\n   * @param {number} bookingId - Booking ID\n   * @param {number} userId - User ID from authentication\n   * @returns {Promise<Object>} - API response\n   */\n  async linkUserDetailsToBooking(bookingId, userId) {\n    try {\n      const response = await apiClient.post(\n        `/ict-approval/device-requests/${bookingId}/link-user`,\n        {\n          user_id: userId,\n          auto_capture: true\n        }\n      )\n\n      return {\n        success: true,\n        data: response.data,\n        message: 'User details linked to booking request successfully'\n      }\n    } catch (error) {\n      console.error('Failed to link user details:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to link user details',\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Get device display name\n   * @param {string} deviceType - Device type code\n   * @param {string} customDevice - Custom device name\n   * @returns {string} - Formatted device display name\n   */\n  getDeviceDisplayName(deviceType, customDevice) {\n    if (deviceType === 'others' || deviceType === 'custom') {\n      return customDevice || 'Other Device'\n    }\n\n    const deviceNames = {\n      projector: 'Projector',\n      tv_remote: 'TV Remote',\n      hdmi_cable: 'HDMI Cable',\n      monitor: 'Monitor',\n      cpu: 'CPU',\n      keyboard: 'Keyboard',\n      mouse: 'Mouse',\n      pc: 'PC',\n      laptop: 'Laptop',\n      tablet: 'Tablet',\n      headphones: 'Headphones',\n      speaker: 'Speaker',\n      webcam: 'Webcam',\n      printer: 'Printer'\n    }\n\n    return (\n      deviceNames[deviceType] ||\n      (deviceType || 'Unknown Device').replace(/_/g, ' ').replace(/\\b\\w/g, (l) => l.toUpperCase())\n    )\n  },\n\n  /**\n   * Format date string for display\n   * @param {string} dateString - ISO date string\n   * @returns {string} - Formatted date\n   */\n  formatDate(dateString) {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    })\n  },\n\n  /**\n   * Format time string for display\n   * @param {string} dateString - ISO date string\n   * @returns {string} - Formatted time\n   */\n  formatTime(dateString) {\n    if (!dateString) return ''\n    const date = new Date(dateString)\n    return date.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  },\n\n  /**\n   * Get status badge class for styling\n   * @param {string} status - Request status\n   * @returns {string} - CSS classes for status badge\n   */\n  getStatusBadgeClass(status) {\n    const classes = {\n      pending: 'bg-yellow-100 text-yellow-800 border border-yellow-200',\n      approved: 'bg-green-100 text-green-800 border border-green-200',\n      rejected: 'bg-red-100 text-red-800 border border-red-200',\n      returned: 'bg-blue-100 text-blue-800 border border-blue-200',\n      compromised: 'bg-purple-100 text-purple-800 border border-purple-200'\n    }\n    return classes[status] || 'bg-gray-100 text-gray-800 border border-gray-200'\n  },\n\n  /**\n   * Get status icon\n   * @param {string} status - Request status\n   * @returns {string} - Font Awesome icon class\n   */\n  getStatusIcon(status) {\n    const icons = {\n      pending: 'fas fa-clock',\n      approved: 'fas fa-check-circle',\n      rejected: 'fas fa-times-circle',\n      returned: 'fas fa-undo',\n      compromised: 'fas fa-exclamation-triangle'\n    }\n    return icons[status] || 'fas fa-question-circle'\n  },\n\n  /**\n   * Get status text for display\n   * @param {string} status - Request status\n   * @returns {string} - Human readable status text\n   */\n  getStatusText(status) {\n    const texts = {\n      pending: 'Pending',\n      approved: 'Approved',\n      rejected: 'Rejected',\n      returned: 'Returned',\n      compromised: 'Compromised'\n    }\n    return texts[status] || 'Unknown'\n  }\n}\n\nexport default ictApprovalService\n","import { render } from \"./BookingService.vue?vue&type=template&id=4b217841&scoped=true\"\nimport script from \"./BookingService.vue?vue&type=script&lang=js\"\nexport * from \"./BookingService.vue?vue&type=script&lang=js\"\n\nimport \"./BookingService.vue?vue&type=style&index=0&id=4b217841&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b217841\"]])\n\nexport default __exports__"],"names":["API_BASE_URL","process","SignatureService","constructor","this","api","axios","create","baseURL","timeout","headers","Accept","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","sign","documentId","res","post","document_id","success","data","list","get","verify","signatureId","class","value","style","_createElementBlock","_hoisted_1","_createVNode","_component_AppHeader","_createElementVNode","_hoisted_2","_component_ModernSidebar","_hoisted_3","_component_UnifiedLoadingBanner","show","$options","globalLoading","loadingTitle","loadingBannerTitle","loadingSubtitle","loadingBannerSubtitle","departmentTitle","forceSpin","_hoisted_4","_hoisted_5","_Fragment","_renderList","i","key","_normalizeStyle","Math","random","_normalizeClass","floor","_hoisted_6","$data","isCheckingPendingRequests","_hoisted_7","hasPendingRequest","_hoisted_8","onSubmit","_cache","_withModifiers","args","submitBooking","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","formData","borrowerName","$event","type","readonly","placeholder","title","required","errors","_hoisted_14","_toDisplayString","_hoisted_15","_hoisted_16","bookingDate","onInput","validateBookingDate","onChange","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","availableDevices","device","id","String","deviceInventoryIds","handleDeviceTypeChange","disabled","isLoadingDevices","_hoisted_22","device_name","available_quantity","_hoisted_23","_hoisted_24","deviceType","_hoisted_25","_hoisted_26","_hoisted_27","department","_hoisted_28","departments","dept","selected","name","_hoisted_29","_hoisted_30","showAvailabilityWarning","deviceAvailabilityInfo","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","message","showCustomDeviceField","_hoisted_35","_hoisted_36","customDevice","validateCustomDevice","deviceInventoryId","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","phoneNumber","_hoisted_42","_hoisted_43","_hoisted_44","returnDateTimeModel","validateReturnDateTime","min","minReturnDateTime","collectionDate","returnTime","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","hasUserSigned","_hoisted_53","onClick","signDocument","isSubmitting","signatures","length","_hoisted_55","_hoisted_56","s","user_name","signed_at","digital_signature","_hoisted_57","_hoisted_58","_hoisted_59","reason","handleReasonInput","rows","maxlength","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","goBack","_hoisted_66","_hoisted_65","_component_AppFooter","showSuccessModal","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","getDeviceDisplayName","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","formatDisplayDate","closeSuccessModal","showPendingRequestModal","_hoisted_81","_hoisted_82","pendingRequestInfo","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","booking_date","_hoisted_92","_hoisted_93","_hoisted_94","status","ict_approve","_hoisted_95","viewPendingRequest","closePendingRequestModal","ictApprovalService","getDeviceBorrowingRequests","params","response","apiClient","per_page","requests","transformedRequests","Array","isArray","map","request_id","toString","padStart","borrower_id","user_id","borrower_name","user","staff","borrower_email","email","borrower_phone","phone","pf_number","department_id","device_type","custom_device","device_inventory_id","device_available","collection_date","return_date","purpose","signature","signature_path","has_signature","ict_status","ict_approval_date","ict_notes","created_at","updated_at","_raw","current_page","last_page","total","console","getDeviceBorrowingRequestDetails","requestId","transformedRequest","phone_number","departmentInfo","return_time","signature_url","ict_approved_at","ict_approved_by","ict_approved_by_name","ictApprovedBy","approveDeviceBorrowingRequest","notes","rejectDeviceBorrowingRequest","trim","Error","getDeviceBorrowingStatistics","stats","pending","approved","rejected","returned","compromised","linkUserDetailsToBooking","bookingId","userId","auto_capture","deviceNames","projector","tv_remote","hdmi_cable","monitor","cpu","keyboard","mouse","pc","laptop","tablet","headphones","speaker","webcam","printer","replace","l","toUpperCase","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","formatTime","toLocaleTimeString","hour","minute","getStatusBadgeClass","classes","getStatusIcon","icons","getStatusText","texts","components","ModernSidebar","AppFooter","AppHeader","UnifiedLoadingBanner","setup","authStore","useAuthStore","conditionBefore","conditionBeforeIssues","conditionReturned","conditionReturnedIssues","selectedDeviceInfo","selectedDevicesCount","mounted","fallbackTimeout","setTimeout","async","warn","initializeForm","checkPendingRequests","clearTimeout","computed","t","slice","set","parts","split","today","toISOString","base","methods","loadDepartments","loadAvailableDevices","populateBorrowerName","populatePhoneNumber","populateDepartment","initializeValidation","loadSignatures","controller","AbortController","timeoutId","abort","signal","pr","pending_request","isWorkflowComplete","device_received_at","test","return_status","has_pending_request","pendingId","rd","done","current_step","e","code","request_url","$router","push","normalizePhoneNumber","input","v","startsWith","checkDeviceAvailability","available","can_request","isAuthenticated","userName","storedUserData","userData","JSON","parse","userPhone","phoneFromStorage","userDepartmentId","userDepartment","matchingDept","find","parseInt","deptFromStorage","parseError","validateDepartment","validateDeviceType","validateReason","mapDeviceToType","validDeviceTypes","device_code","includes","toLowerCase","deviceCodeLower","mapDeviceNameToType","deviceName","deviceNameLower","suggestedFix","bookingService","getDepartments","time","deviceInventoryService","getAvailableDevices","timeEnd","rawSelection","selection","filter","Boolean","inventoryIds","hasOthers","primaryId","selectedDevice","d","handleReturnTimeChange","event","target","handleReturnTimeClick","focus","validatePhoneNumber","handleConditionBeforeChange","handleConditionReturnedChange","computeDocumentId","uid","Number","docId","signatureService","alert","validateForm","actualErrors","Object","keys","errorFields","scrollToFirstError","errorCount","payload","device_inventory_ids","linkUserDetailsToICTApproval","availability_info","resetForm","path","query","now","forEach","field","errorMessages","values","flat","weekday","bookingData","booking_id","firstErrorField","fieldMap","fieldName","element","document","querySelector","scrollIntoView","behavior","block","__exports__","render"],"sourceRoot":""}