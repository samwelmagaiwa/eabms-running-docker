{"version":3,"file":"js/9189.68b55a41.js","mappings":"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","sources":["webpack://frontend/./src/services/dictAccessService.js"],"sourcesContent":["import apiClient from '../utils/apiClient'\n\n/**\n * ICT Director Access Service\n * Handles all API calls for ICT Director access request management\n */\nconst dictAccessService = {\n  /**\n   * Get all combined access requests for ICT Director approval\n   * @param {Object} params - Query parameters\n   * @returns {Promise<Object>}\n   */\n  async getDictRequests(params = {}) {\n    try {\n      const response = await apiClient.get('/ict-director/combined-access-requests', { params })\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error fetching ICT Director requests:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to fetch requests'\n      }\n    }\n  },\n\n  /**\n   * Get a specific combined access request by ID\n   * @param {number} requestId - The request ID\n   * @returns {Promise<Object>}\n   */\n  async getDictRequest(requestId) {\n    try {\n      const response = await apiClient.get(`/ict-director/combined-access-requests/${requestId}`)\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error fetching ICT Director request:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to fetch request'\n      }\n    }\n  },\n\n  /**\n   * Update ICT Director approval for a combined access request\n   * @param {number} requestId - The request ID\n   * @param {Object} approvalData - The approval data\n   * @returns {Promise<Object>}\n   */\n  async updateDictApproval(requestId, approvalData) {\n    try {\n      const response = await apiClient.post(\n        `/ict-director/combined-access-requests/${requestId}/approve`,\n        approvalData\n      )\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error updating ICT Director approval:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to update approval'\n      }\n    }\n  },\n\n  /**\n   * Cancel a combined access request\n   * @param {number} requestId - The request ID\n   * @param {string} reason - Cancellation reason\n   * @returns {Promise<Object>}\n   */\n  async cancelRequest(requestId, reason) {\n    try {\n      const response = await apiClient.post(\n        `/ict-director/combined-access-requests/${requestId}/cancel`,\n        {\n          reason\n        }\n      )\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error cancelling request:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to cancel request'\n      }\n    }\n  },\n\n  /**\n   * Get statistics for ICT Director dashboard\n   * @returns {Promise<Object>}\n   */\n  async getDictStatistics() {\n    try {\n      const response = await apiClient.get('/ict-director/combined-access-requests/statistics')\n      return {\n        success: true,\n        data: response.data.data || response.data\n      }\n    } catch (error) {\n      console.error('Error fetching ICT Director statistics:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to fetch statistics'\n      }\n    }\n  },\n\n  /**\n   * Approve a combined access request as ICT Director\n   * @param {number} requestId - The request ID\n   * @param {Object} data - Approval data including comments\n   * @returns {Promise<Object>}\n   */\n  async approveRequest(requestId, data = {}) {\n    return await this.updateDictApproval(requestId, {\n      dict_status: 'approved',\n      dict_comments: data.comments || '',\n      dict_name: data.name || ''\n    })\n  },\n\n  /**\n   * Reject a combined access request as ICT Director\n   * @param {number} requestId - The request ID\n   * @param {Object} data - Rejection data including comments\n   * @returns {Promise<Object>}\n   */\n  async rejectRequest(requestId, data = {}) {\n    return await this.updateDictApproval(requestId, {\n      dict_status: 'rejected',\n      dict_comments: data.comments || '',\n      dict_name: data.name || ''\n    })\n  },\n\n  /**\n   * Get dict recommendations for divisional directors\n   * Shows requests that have ict_director_comments populated (rejections, approvals, recommendations)\n   * @param {Object} params - Query parameters\n   * @returns {Promise<Object>}\n   */\n  async getDictRecommendations(params = {}) {\n    try {\n      // Primary endpoint for dict recommendations\n      const response = await apiClient.get('/divisional/dict-recommendations', { params })\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error fetching dict recommendations:', error)\n\n      // Fallback: try to get requests with ict_director_comments from combined requests\n      try {\n        console.log('Trying fallback: combined-access-requests with ict_director_comments filter')\n        const fallbackResponse = await apiClient.get('/divisional/combined-access-requests', {\n          params: {\n            ...params,\n            has_ict_director_comments: true // Filter for requests with comments\n          }\n        })\n\n        console.log('Fallback response structure:', {\n          hasData: !!fallbackResponse.data,\n          dataType: typeof fallbackResponse.data,\n          hasDataData: !!fallbackResponse.data?.data,\n          dataDataType: typeof fallbackResponse.data?.data,\n          isDataArray: Array.isArray(fallbackResponse.data?.data)\n        })\n\n        // Filter results to only include requests with actual ict_director_comments\n        // Ensure we have a valid array to work with\n        const responseData = fallbackResponse.data?.data || []\n        const dataArray = Array.isArray(responseData) ? responseData : []\n\n        const filteredData = {\n          ...fallbackResponse.data,\n          data: dataArray.filter(\n            (request) =>\n              request.ict_director_comments && request.ict_director_comments.trim() !== ''\n          )\n        }\n\n        return {\n          success: true,\n          data: filteredData\n        }\n      } catch (fallbackError) {\n        console.error('Fallback also failed:', fallbackError)\n        return {\n          success: false,\n          error:\n            error.response?.data?.message || error.message || 'Failed to fetch dict recommendations'\n        }\n      }\n    }\n  },\n\n  /**\n   * Submit divisional director response to ICT Director\n   * @param {number} requestId - The request ID\n   * @param {Object} responseData - Response data\n   * @returns {Promise<Object>}\n   */\n  async submitDivisionalResponse(requestId, responseData) {\n    try {\n      const response = await apiClient.post(\n        `/divisional/respond-to-dict/${requestId}`,\n        responseData\n      )\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      console.error('Error submitting divisional response:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to submit response'\n      }\n    }\n  },\n\n  /**\n   * Get detailed timeline for a specific access request (ICT Director view)\n   * @param {number} requestId - The request ID\n   * @returns {Promise<Object>}\n   */\n  async getRequestTimeline(requestId) {\n    try {\n      console.log('üîÑ DictAccessService: Fetching request timeline:', requestId)\n      const response = await apiClient.get(\n        `/ict-director/combined-access-requests/${requestId}/timeline`\n      )\n\n      if (response.data && response.data.success) {\n        console.log('‚úÖ DictAccessService: Request timeline loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to load request timeline')\n      }\n    } catch (error) {\n      console.error('‚ùå DictAccessService: Error fetching request timeline:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to load request timeline'\n      }\n    }\n  }\n}\n\nexport default dictAccessService\n"],"names":["dictAccessService","getDictRequests","params","response","apiClient","get","success","data","error","console","message","getDictRequest","requestId","updateDictApproval","approvalData","post","cancelRequest","reason","getDictStatistics","approveRequest","this","dict_status","dict_comments","comments","dict_name","name","rejectRequest","getDictRecommendations","fallbackResponse","has_ict_director_comments","Array","isArray","responseData","dataArray","filteredData","filter","request","ict_director_comments","trim","fallbackError","submitDivisionalResponse","getRequestTimeline","Error"],"sourceRoot":""}