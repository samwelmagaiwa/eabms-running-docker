"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[637],{3906:function(e,t,a){a.r(t),a.d(t,{default:function(){return me}});var r=a(5796);const s={class:"flex flex-col h-screen"},o={class:"flex flex-1 overflow-hidden"},d={class:"flex-1 p-4 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"max-w-full mx-auto px-4"},n={class:"medical-glass-card rounded-b-3xl overflow-hidden"},l={class:"p-4 space-y-4"},c={key:0,class:"text-center py-8"},u={class:"text-blue-300 text-lg"},p={key:1,class:"space-y-6"},v={class:"bg-gradient-to-r from-blue-600/30 to-blue-700/30 border-2 border-blue-400/50 p-4 rounded-xl backdrop-blur-sm shadow-lg hover:shadow-blue-500/25 transition-all duration-300"},g={key:0,class:"space-y-2"},f={class:"bg-gradient-to-r from-blue-600/20 to-blue-700/20 border border-blue-400/40 rounded-lg p-3 backdrop-blur-sm hover:shadow-lg transition-all duration-300"},m={class:"flex items-center justify-between"},b={class:"flex items-center space-x-3"},_={class:"text-right"},x={class:"text-base text-blue-300"},h={key:0,class:"mt-2"},k={class:"flex items-center justify-between mb-2"},C={class:"flex items-center space-x-2"},y={class:"mb-2"},w={class:"text-white text-base leading-relaxed"},L={class:"flex items-center space-x-1"},j={class:"flex items-center space-x-1"},A={key:1,class:"space-y-4"},S={class:"mb-4 p-3 bg-white/10 rounded-xl border border-emerald-300/30"},D={class:"text-3xl font-bold text-blue-100 mb-2"},I={class:"grid grid-cols-1 md:grid-cols-5 gap-2"},q={class:"text-center"},T={class:"text-center"},R={class:"text-center"},O={class:"text-center"},H={class:"text-center"},E={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},N={class:"bg-gradient-to-r from-blue-600/20 to-blue-700/20 border border-blue-400/40 rounded-lg p-3 backdrop-blur-sm hover:shadow-lg transition-all duration-300 h-full flex flex-col"},P={class:"flex items-center justify-between flex-1"},F={class:"flex items-center space-x-3"},B={class:"text-white font-semibold text-lg"},U={class:"text-right"},X={class:"text-base text-blue-300"},$={class:"bg-gradient-to-r from-teal-600/20 to-teal-700/20 border border-teal-400/40 rounded-lg p-3 backdrop-blur-sm hover:shadow-lg transition-all duration-300 h-full flex flex-col"},M={class:"flex items-center justify-between mb-2"},W={class:"flex items-center space-x-3"},Q={key:0,class:"text-gray-300 text-xl"},K={class:"text-right"},Y={class:"text-xl text-teal-300"},z={class:"flex-1 flex flex-col"},J={key:0,class:"bg-teal-500/10 rounded-lg p-3 border border-teal-400/20 flex-1"},V={class:"text-white text-base leading-relaxed font-bold tracking-wide"},G={key:1,class:"bg-gray-500/10 rounded-lg p-3 border border-gray-400/20 flex-1 flex items-center justify-center"},Z={class:"bg-gradient-to-br from-blue-600/30 to-blue-700/30 border-2 border-blue-400/60 shadow-blue-500/25 p-4 rounded-2xl backdrop-blur-sm"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-white"},te={class:"font-semibold text-sm"},ae={class:"font-semibold text-sm"},re={key:0},se={class:"font-semibold flex items-center gap-2"},oe={key:2,class:"text-center py-8"},de={class:"text-red-300 text-lg"};function ie(e,t,a,ie,ne,le){const ce=(0,r.g2)("Header"),ue=(0,r.g2)("ModernSidebar"),pe=(0,r.g2)("AppFooter");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(ce),(0,r.Lk)("div",o,[(0,r.bF)(ue),(0,r.Lk)("main",d,[(0,r.Lk)("div",i,[t[23]||(t[23]=(0,r.Fv)('<div class="medical-glass-card rounded-t-3xl p-2 mb-0 border-b border-blue-300/30" data-v-43a68fbf><div class="text-center" data-v-43a68fbf><h1 class="text-xl font-bold text-white mb-1 tracking-wide drop-shadow-lg" data-v-43a68fbf> MUHIMBILI NATIONAL HOSPITAL </h1><div class="flex justify-center mb-1" data-v-43a68fbf><div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-lg inline-flex items-center gap-2" data-v-43a68fbf><i class="fas fa-clipboard-list text-sm" data-v-43a68fbf></i> REQUEST DETAILS </div></div><h2 class="text-base font-bold text-blue-100 tracking-wide drop-shadow-md mt-1" data-v-43a68fbf> Internal Access Management </h2></div></div>',1)),(0,r.Lk)("div",n,[(0,r.Lk)("div",l,[ie.isLoading?((0,r.uX)(),(0,r.CE)("div",c,[t[1]||(t[1]=(0,r.Lk)("div",{class:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"},null,-1)),t[2]||(t[2]=(0,r.Lk)("h2",{class:"text-white text-2xl"},"Loading request details...",-1)),(0,r.Lk)("p",u," ID: "+(0,r.v_)(ie.formattedRequestId)+", Type: "+(0,r.v_)(ie.formattedRequestType),1)])):ie.requestData?((0,r.uX)(),(0,r.CE)("div",p,[(0,r.Lk)("div",v,[t[14]||(t[14]=(0,r.Fv)('<div class="flex items-center space-x-3 mb-4" data-v-43a68fbf><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md" data-v-43a68fbf><i class="fas fa-route text-white text-sm" data-v-43a68fbf></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-43a68fbf><i class="fas fa-clipboard-check mr-2 text-blue-300" data-v-43a68fbf></i> Approval Trail </h3></div>',1)),ie.isBookingService?((0,r.uX)(),(0,r.CE)("div",g,[(0,r.Lk)("div",f,[(0,r.Lk)("div",m,[(0,r.Lk)("div",b,[(0,r.Lk)("div",{class:(0,r.C4)([ie.getApprovalStepClass("ict"),"w-10 h-10 rounded-lg flex items-center justify-center shadow-md"])},[(0,r.Lk)("i",{class:(0,r.C4)([ie.getApprovalStepIcon("ict"),"text-white text-sm"])},null,2)],2),(0,r.Lk)("div",null,[t[3]||(t[3]=(0,r.Lk)("h4",{class:"text-white font-semibold text-lg"},"ICT Officer",-1)),(0,r.Lk)("p",{class:(0,r.C4)([ie.getApprovalStatusTextClass("ict"),"text-base font-medium"])},(0,r.v_)(ie.getApprovalStatusText("ict")),3)])]),(0,r.Lk)("div",_,[(0,r.Lk)("p",x,(0,r.v_)(ie.requestData?.ict_approved_at?ie.formatDate(ie.requestData.ict_approved_at):ie.requestData?.ictApprovalDate?ie.formatDate(ie.requestData.ictApprovalDate):"Pending"),1)])])]),ie.requestData?.ictNotes&&ie.requestData?.ictNotes.trim()||ie.requestData?.ict_notes&&ie.requestData?.ict_notes.trim()?((0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",{class:(0,r.C4)([ie.getIctCommentsCardClass(),"rounded-lg p-3 backdrop-blur-sm border transition-all duration-300 hover:shadow-lg"])},[(0,r.Lk)("div",k,[(0,r.Lk)("div",C,[(0,r.Lk)("div",{class:(0,r.C4)([ie.getIctCommentsIconBgClass(),"w-8 h-8 rounded-lg flex items-center justify-center shadow-sm"])},[(0,r.Lk)("i",{class:(0,r.C4)([ie.getIctCommentsIcon(),"text-white text-sm"])},null,2)],2),(0,r.Lk)("div",null,[t[4]||(t[4]=(0,r.Lk)("h5",{class:"text-white font-semibold text-base"},"ICT Comments",-1)),(0,r.Lk)("p",{class:(0,r.C4)(["text-sm opacity-75",ie.getIctCommentsTextColor()])},(0,r.v_)("rejected"===ie.requestData?.ictStatus?"Rejection":"approved"===ie.requestData?.ictStatus?"Approval":"Review")+" Reason ",3)])]),(0,r.Lk)("div",{class:(0,r.C4)([ie.getIctCommentsStatusBadgeClass(),"px-3 py-1.5 rounded text-base font-semibold uppercase"])},(0,r.v_)(ie.requestData?.ictStatus),3)]),(0,r.Lk)("div",y,[(0,r.Lk)("p",w,(0,r.v_)(ie.requestData?.ictNotes||ie.requestData?.ict_notes),1)]),(0,r.Lk)("div",{class:(0,r.C4)(["flex justify-between items-center text-sm",ie.getIctCommentsTextColor()])},[(0,r.Lk)("div",L,[t[5]||(t[5]=(0,r.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,r.Lk)("span",null,(0,r.v_)(ie.requestData?.ict_approved_at?ie.formatDateTime(ie.requestData.ict_approved_at):ie.requestData?.ictApprovalDate?ie.formatDateTime(ie.requestData.ictApprovalDate):"Pending"),1)]),(0,r.Lk)("div",j,[t[6]||(t[6]=(0,r.Lk)("i",{class:"fas fa-user"},null,-1)),(0,r.Lk)("span",null,(0,r.v_)(ie.requestData?.ict_approved_by_name||ie.requestData?.ictApprovedBy||"ICT Dept."),1)])],2)],2)])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",A,[(0,r.Lk)("div",S,[(0,r.Lk)("h4",D,(0,r.v_)(ie.formattedRequestType)+" - Status Overview ",1),(0,r.Lk)("div",I,[(0,r.Lk)("div",q,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("hod")?"bg-green-500":"rejected"===ie.getCombinedApprovalStatus("hod")?"bg-red-500":"skipped"===ie.getCombinedApprovalStatus("hod")?"bg-blue-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("hod")?"fas fa-check":"rejected"===ie.getCombinedApprovalStatus("hod")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[7]||(t[7]=(0,r.Lk)("p",{class:"text-base text-white"},"HOD",-1))]),(0,r.Lk)("div",T,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("divisional")?"bg-green-500":"rejected"===ie.getCombinedApprovalStatus("divisional")?"bg-red-500":"skipped"===ie.getCombinedApprovalStatus("divisional")?"bg-blue-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("divisional")?"fas fa-check":"rejected"===ie.getCombinedApprovalStatus("divisional")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[8]||(t[8]=(0,r.Lk)("p",{class:"text-base text-white"},"Divisional",-1))]),(0,r.Lk)("div",R,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("ict_director")?"bg-green-500":"rejected"===ie.getCombinedApprovalStatus("ict_director")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("ict_director")?"fas fa-check":"rejected"===ie.getCombinedApprovalStatus("ict_director")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[9]||(t[9]=(0,r.Lk)("p",{class:"text-base text-white"},"DICT",-1))]),(0,r.Lk)("div",O,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("head_it")?"bg-green-500":"rejected"===ie.getCombinedApprovalStatus("head_it")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("head_it")?"fas fa-check":"rejected"===ie.getCombinedApprovalStatus("head_it")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[10]||(t[10]=(0,r.Lk)("p",{class:"text-base text-white"},"Head IT",-1))]),(0,r.Lk)("div",H,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("ict_officer")?"bg-green-500":"rejected"===ie.getCombinedApprovalStatus("ict_officer")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===ie.getCombinedApprovalStatus("ict_officer")?"fas fa-check":"rejected"===ie.getCombinedApprovalStatus("ict_officer")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[11]||(t[11]=(0,r.Lk)("p",{class:"text-base text-white"},"ICT Officer",-1))])])]),(0,r.Lk)("div",E,[(0,r.Lk)("div",N,[(0,r.Lk)("div",P,[(0,r.Lk)("div",F,[(0,r.Lk)("div",{class:(0,r.C4)([ie.getHODApprovalStepClass(),"w-10 h-10 rounded-lg flex items-center justify-center shadow-md"])},[(0,r.Lk)("i",{class:(0,r.C4)([ie.getHODApprovalStepIcon(),"text-white text-sm"])},null,2)],2),(0,r.Lk)("div",null,[(0,r.Lk)("h4",B,(0,r.v_)(ie.getHODApproverName()),1),(0,r.Lk)("p",{class:(0,r.C4)([ie.getHODApprovalStatusTextClass(),"text-base font-medium"])},(0,r.v_)(ie.getHODApprovalStatusText()),3)])]),(0,r.Lk)("div",U,[(0,r.Lk)("p",X,(0,r.v_)(ie.requestData?.hodApproval?.approved_at||ie.requestData?.hod_approved_at||ie.requestData?.hod_rejected_at?ie.formatDate(ie.requestData?.hodApproval?.approved_at||ie.requestData?.hod_approved_at||ie.requestData?.hod_rejected_at):"rejected"===ie.getHODApprovalStatus()?"Recently":"Pending"),1)])])]),(0,r.Lk)("div",$,[(0,r.Lk)("div",M,[(0,r.Lk)("div",W,[(0,r.Lk)("div",{class:(0,r.C4)([ie.getCombinedIctOfficerStepClass(),"w-10 h-10 rounded-lg flex items-center justify-center shadow-md"])},[(0,r.Lk)("i",{class:(0,r.C4)([ie.getCombinedIctOfficerStepIcon(),"text-white text-sm"])},null,2)],2),(0,r.Lk)("div",null,[t[12]||(t[12]=(0,r.Lk)("h4",{class:"text-white font-semibold text-lg"},"ICT Officer",-1)),ie.getCombinedIctOfficerName()?((0,r.uX)(),(0,r.CE)("p",Q,(0,r.v_)(ie.getCombinedIctOfficerName()),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",{class:(0,r.C4)([ie.getCombinedIctOfficerStatusTextClass(),"text-xl font-semibold"])},(0,r.v_)(ie.getCombinedIctOfficerStatusText()),3)])]),(0,r.Lk)("div",K,[(0,r.Lk)("p",Y,(0,r.v_)(ie.requestData?.ict_officer_approved_at||ie.requestData?.ict_officer_rejected_at?ie.formatDate(ie.requestData?.ict_officer_approved_at||ie.requestData?.ict_officer_rejected_at):"approved"===ie.getCombinedIctOfficerStatus()?"Approved":"rejected"===ie.getCombinedIctOfficerStatus()?"Rejected":"in_progress"===ie.getCombinedIctOfficerStatus()?"In Progress":"Pending"),1)])]),(0,r.Lk)("div",z,[ie.getCombinedIctOfficerComment()?((0,r.uX)(),(0,r.CE)("div",J,[(0,r.Lk)("p",V,(0,r.v_)(ie.getCombinedIctOfficerComment()),1)])):((0,r.uX)(),(0,r.CE)("div",G,[...t[13]||(t[13]=[(0,r.Lk)("p",{class:"text-gray-300 text-base italic font-bold"}," No comments available yet. ",-1)])]))])])])]))]),(0,r.Lk)("div",Z,[t[20]||(t[20]=(0,r.Lk)("h3",{class:"text-xl font-bold text-white mb-2"},"Request Information",-1)),(0,r.Lk)("div",ee,[(0,r.Lk)("div",null,[t[15]||(t[15]=(0,r.Lk)("p",{class:"text-blue-200 text-xs"},"Request ID:",-1)),(0,r.Lk)("p",te,(0,r.v_)(ie.formattedRequestId),1)]),(0,r.Lk)("div",null,[t[16]||(t[16]=(0,r.Lk)("p",{class:"text-blue-200 text-xs"},"Request Type:",-1)),(0,r.Lk)("p",ae,(0,r.v_)(ie.formattedRequestType),1)]),(0,r.Lk)("div",null,[t[17]||(t[17]=(0,r.Lk)("p",{class:"text-blue-200 text-xs"},"Status:",-1)),(0,r.Lk)("p",{class:(0,r.C4)(["font-semibold text-sm",ie.getCurrentStatusTextClass()])},(0,r.v_)(ie.formattedCurrentStatus),3)]),(0,r.Lk)("div",null,[t[18]||(t[18]=(0,r.Lk)("p",{class:"text-blue-200 text-xs"},"ICT Status:",-1)),(0,r.Lk)("p",{class:(0,r.C4)(["font-semibold text-sm",ie.getApprovalStatusTextClass()])},(0,r.v_)(ie.requestData?.ictStatus||"Pending"),3)]),ie.isBookingService?((0,r.uX)(),(0,r.CE)("div",re,[t[19]||(t[19]=(0,r.Lk)("p",{class:"text-blue-200 text-base"},"Return Status:",-1)),(0,r.Lk)("p",se,[(0,r.Lk)("span",{class:(0,r.C4)([ie.getReturnStatusBadgeClass(ie.requestData?.return_status||"not_yet_returned"),"px-2 py-1 rounded-full text-sm font-medium border"])},[(0,r.Lk)("i",{class:(0,r.C4)([ie.getReturnStatusIcon(ie.requestData?.return_status||"not_yet_returned"),"mr-1"])},null,2),(0,r.eW)(" "+(0,r.v_)(ie.getReturnStatusText(ie.requestData?.return_status||"not_yet_returned")),1)],2)])])):(0,r.Q3)("",!0)])])])):((0,r.uX)(),(0,r.CE)("div",oe,[t[21]||(t[21]=(0,r.Lk)("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[(0,r.Lk)("i",{class:"fas fa-exclamation-triangle text-red-600 text-2xl"})],-1)),t[22]||(t[22]=(0,r.Lk)("h2",{class:"text-white text-2xl"},"Failed to Load Request",-1)),(0,r.Lk)("p",de," Could not load request details for ID: "+(0,r.v_)(ie.formattedRequestId),1),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ie.loadRequestData&&ie.loadRequestData(...e)),class:"mt-4 px-6 py-3 bg-blue-600 text-white text-lg rounded-lg hover:bg-blue-700 transition-colors"}," Retry ")]))])])]),(0,r.bF)(pe)])])])}a(4114);var ne=a(1387),le=a(5498),ce=a(8966),ue=a(9101),pe=a(9308),ve={name:"InternalAccessDetailsFixed",components:{Header:le.A,ModernSidebar:ce.A,AppFooter:ue.A},setup(){const e=(0,ne.lq)(),t=(0,r.KR)(null),a=(0,r.KR)(!0),s=(0,r.KR)(e.query.id||"N/A"),o=(0,r.KR)(e.query.type||"N/A"),d=(0,r.EW)(()=>"booking_service"===t.value?.type||"booking_service"===o.value),i=(0,r.EW)(()=>{if(!s.value||"N/A"===s.value)return"N/A";const e=s.value.toString().match(/\d+/);if(e){const t=parseInt(e[0]);return`#REQ-${t.toString().padStart(6,"0")}`}return`#${s.value}`}),n=(0,r.EW)(()=>{if("combined_access"===o.value&&t.value){const e=[];return(t.value.jeeva_modules?.length>0||t.value.request_types?.includes("jeeva_access")||t.value.request_types?.includes("jeeva"))&&e.push("Jeeva"),(t.value.wellsoft_modules?.length>0||t.value.request_types?.includes("wellsoft"))&&e.push("Wellsoft"),(t.value.internet_purposes?.length>0||t.value.request_types?.includes("internet_access_request")||t.value.request_types?.includes("internet"))&&e.push("Internet"),e.length>0?`Combined Access - ${e.join(", ")}`:"Combined Access"}return"booking_service"===o.value?"Device Booking":o.value?.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())||"N/A"}),l=(0,r.EW)(()=>{if(!t.value)return"Loading...";const e=t.value.status||t.value.currentStatus||"pending",a={pending:"Pending Review",pending_hod:"Pending HOD Approval",hod_approved:"HOD Approved",hod_rejected:"HOD Rejected",pending_divisional:"Pending Divisional Director",divisional_approved:"Divisional Director Approved",divisional_rejected:"Divisional Director Rejected",pending_ict_director:"Pending ICT Director",ict_director_approved:"ICT Director Approved",ict_director_rejected:"ICT Director Rejected",pending_head_it:"Pending Head of IT",head_it_approved:"Head of IT Approved",head_it_rejected:"Head of IT Rejected",pending_ict_officer:"Pending ICT Officer",ict_officer_approved:"ICT Officer Approved",ict_officer_rejected:"ICT Officer Rejected",implemented:"Implemented",approved:"Fully Approved",cancelled:"Cancelled"};return a[e]||e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),c=async()=>{a.value=!0;try{if(s.value&&o.value&&"N/A"!==s.value&&"N/A"!==o.value){const e=await pe.A.getRequestDetails(s.value,o.value);e.success?(t.value=e.data,t.value,Object.keys(t.value),t.value.status,t.value.currentStatus,t.value.status,t.value.currentStatus,t.value.request_status,t.value.hod_approval_status,t.value.hodApproval):(console.error("❌ Failed to load request:",{error:e.error,status:e.status,data:e.data,fullResponse:e}),t.value=null)}else console.warn("⚠️ Missing request ID or type"),t.value=null}catch(e){console.error("Error loading request:",e),t.value=null}finally{a.value=!1}},u=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(t){return e}},p=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return e}},v=e=>{t.value;return"bg-gradient-to-br from-blue-500 to-blue-600"},g=e=>{const a=t.value?.ictStatus||"pending";return"approved"===a?"fas fa-check":"rejected"===a?"fas fa-times":"fas fa-clock"},f=e=>{const a=t.value?.ictStatus||"pending";return a.charAt(0).toUpperCase()+a.slice(1)},m=e=>{const a=t.value?.ictStatus||"pending";return"approved"===a?"text-green-400":"rejected"===a?"text-red-400":"text-yellow-400"},b=()=>{const e=t.value?.ictStatus||"pending";return"approved"===e?"bg-gradient-to-br from-blue-600/25 to-green-600/25 border-blue-400/60 shadow-blue-500/30":"rejected"===e?"bg-gradient-to-br from-blue-600/25 to-red-600/25 border-blue-400/60 shadow-blue-500/25":"bg-gradient-to-br from-blue-600/25 to-yellow-600/25 border-blue-400/60 shadow-blue-500/25"},_=()=>{t.value;return"bg-gradient-to-br from-blue-500 to-blue-600"},x=()=>{const e=t.value?.ictStatus||"pending";return"approved"===e?"fas fa-check-circle":"rejected"===e?"fas fa-times-circle":"fas fa-clock"},h=()=>"text-blue-200",k=()=>{const e=t.value?.ictStatus||"pending";return"approved"===e?"bg-green-600 text-green-100 border border-blue-400/50":"rejected"===e?"bg-red-600 text-red-100 border border-blue-400/50":"bg-yellow-600 text-yellow-100 border border-blue-400/50"},C=()=>{const e=t.value?.status||t.value?.currentStatus,a=t.value?.hodApproval?.status||t.value?.hod_approval_status;if(t.value,t.value,t.value,"hod_rejected"===e)return"rejected";if(["hod_approved","divisional_approved","ict_director_approved","head_it_approved","implemented","approved"].includes(e))return"approved";const r=a||"pending";return r},y=()=>{const e=t.value?.hod_comments||t.value?.hodApproval?.comment||t.value?.hodApproval?.rejection_reason||t.value?.hod_approval_comment||t.value?.hod_rejection_reason||t.value?.hod_comment||t.value?.rejection_comment||t.value?.rejection_reason;return t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,t.value,e},w=()=>{const e=t.value?.hodApproval?.approved_by_name||t.value?.hod_approved_by_name||t.value?.hod_rejected_by_name||t.value?.approved_by_name||t.value?.rejected_by_name||t.value?.hod_approver_name||t.value?.hod_name||"Head of Department";return t.value,t.value,t.value,t.value,t.value,t.value,t.value,e},L=()=>{C();return"bg-gradient-to-br from-blue-500 to-blue-600"},j=()=>{const e=C();return"approved"===e?"fas fa-check":"rejected"===e?"fas fa-times":"fas fa-clock"},A=()=>{const e=C();return e.charAt(0).toUpperCase()+e.slice(1)},S=()=>{const e=C();return"approved"===e?"text-green-400":"rejected"===e?"text-red-400":"text-yellow-400"},D=()=>"bg-gradient-to-br from-blue-600/30 to-blue-700/30 border-blue-400/60 shadow-blue-500/25",I=()=>{C();return"bg-gradient-to-br from-blue-500 to-blue-600"},q=()=>{const e=C();return"approved"===e?"fas fa-check-circle":"rejected"===e?"fas fa-times-circle":"fas fa-clock"},T=()=>"text-blue-200",R=()=>{const e=C();return"approved"===e?"bg-green-600 text-green-100 border border-blue-400/50":"rejected"===e?"bg-red-600 text-red-100 border border-blue-400/50":"bg-yellow-600 text-yellow-100 border border-blue-400/50"},O=()=>{const e=U("ict_officer"),a=t.value?.ict_task_assigned_at&&!t.value?.ict_officer_approved_at&&!t.value?.ict_officer_rejected_at;return a?"in_progress":e},H=()=>{O();return"bg-gradient-to-br from-blue-500 to-blue-600"},E=()=>{const e=O();return"approved"===e?"fas fa-check":"rejected"===e?"fas fa-times":"in_progress"===e?"fas fa-cogs":"fas fa-clock"},N=()=>{const e=O();return"in_progress"===e?"In Progress":e.charAt(0).toUpperCase()+e.slice(1)},P=()=>{const e=O();return"approved"===e?"text-green-400":"rejected"===e?"text-red-400":"in_progress"===e?"text-blue-400":"text-yellow-400"},F=()=>t.value?.implementation_comments||t.value?.implementation_comment||t.value?.ict_implementation_comments||t.value?.ict_officer_comments||t.value?.ict_officer_comment||t.value?.ict_implementation_details||"",B=()=>t.value?.ict_officer_name||t.value?.assigned_ict_officer?.name||t.value?.assigned_ict_officer||t.value?.ict_officer||"",U=e=>{if(!t.value)return"pending";const a=t.value.status||t.value.currentStatus||"pending";switch(e){case"hod":return"skipped"===t.value?.hodApprovalStatus?"skipped":["hod_approved","divisional_approved","ict_director_approved","head_it_approved","implemented","approved"].includes(a)?"approved":"hod_rejected"===a?"rejected":"pending";case"divisional":return"skipped"===t.value?.divisionalStatus?"skipped":["divisional_approved","ict_director_approved","head_it_approved","implemented","approved"].includes(a)?"approved":"divisional_rejected"===a?"rejected":["hod_approved","pending_divisional"].includes(a)?"pending":"not_reached";case"ict_director":return["ict_director_approved","head_it_approved","implemented","approved"].includes(a)?"approved":"ict_director_rejected"===a?"rejected":["divisional_approved","pending_ict_director"].includes(a)?"pending":"not_reached";case"head_it":return["head_it_approved","implemented","approved"].includes(a)?"approved":"head_it_rejected"===a?"rejected":["ict_director_approved","pending_head_it"].includes(a)?"pending":"not_reached";case"ict_officer":return["implemented","approved"].includes(a)?"approved":"ict_officer_rejected"===a?"rejected":["head_it_approved","pending_ict_officer"].includes(a)?"pending":"not_reached";default:return"pending"}},X=e=>{const t={not_yet_returned:"bg-blue-100 text-blue-800 border-blue-200",returned:"bg-green-100 text-green-800 border-green-200",returned_but_compromised:"bg-red-100 text-red-800 border-red-200"};return t[e]||t.not_yet_returned},$=e=>{const t={not_yet_returned:"fas fa-hourglass-half",returned:"fas fa-check-circle",returned_but_compromised:"fas fa-exclamation-triangle"};return t[e]||t.not_yet_returned},M=e=>{const t={not_yet_returned:"Not Returned",returned:"Returned",returned_but_compromised:"Compromised"};return t[e]||e||"Unknown"},W=()=>{const e=()=>{document.hidden||c()},t=()=>{c()};return document.addEventListener("visibilitychange",e),window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}},Q=()=>{if(!t.value)return"text-white";const e=t.value.status||t.value.currentStatus||"pending";return e.includes("rejected")||"rejected"===e?"text-red-400":e.includes("approved")||"approved"===e||"implemented"===e?"text-green-400":e.includes("pending")||"pending"===e?"text-yellow-400":"cancelled"===e?"text-gray-400":"text-white"};return(0,r.sV)(()=>{c(),W()}),{requestData:t,isLoading:a,requestId:s,requestType:o,formattedRequestId:i,formattedRequestType:n,formattedCurrentStatus:l,getCurrentStatusTextClass:Q,isBookingService:d,loadRequestData:c,formatDate:u,formatDateTime:p,getApprovalStepClass:v,getApprovalStepIcon:g,getApprovalStatusText:f,getApprovalStatusTextClass:m,getIctCommentsCardClass:b,getIctCommentsIconBgClass:_,getIctCommentsIcon:x,getIctCommentsTextColor:h,getIctCommentsStatusBadgeClass:k,getHODApprovalStatus:C,getHODComment:y,getHODApproverName:w,getHODApprovalStepClass:L,getHODApprovalStepIcon:j,getHODApprovalStatusText:A,getHODApprovalStatusTextClass:S,getHODCommentsCardClass:D,getHODCommentsIconBgClass:I,getHODCommentsIcon:q,getHODCommentsTextColor:T,getHODCommentsStatusBadgeClass:R,getCombinedApprovalStatus:U,getCombinedIctOfficerStatus:O,getCombinedIctOfficerStepClass:H,getCombinedIctOfficerStepIcon:E,getCombinedIctOfficerStatusText:N,getCombinedIctOfficerStatusTextClass:P,getCombinedIctOfficerComment:F,getCombinedIctOfficerName:B,getReturnStatusBadgeClass:X,getReturnStatusIcon:$,getReturnStatusText:M}}},ge=a(1241);const fe=(0,ge.A)(ve,[["render",ie],["__scopeId","data-v-43a68fbf"]]);var me=fe},9101:function(e,t,a){a.d(t,{A:function(){return p}});var r=a(5796);const s={class:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative",style:{position:"relative","z-index":"1","margin-top":"auto"}},o={class:"flex flex-col md:flex-row justify-between items-center"},d={class:"text-base text-blue-100 flex items-center space-x-2"},i={class:"font-medium"};function n(e,t,a,n,l,c){return(0,r.uX)(),(0,r.CE)("footer",s,[(0,r.Lk)("div",o,[(0,r.Lk)("div",d,[t[0]||(t[0]=(0,r.Lk)("div",{class:"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40"},[(0,r.Lk)("i",{class:"fas fa-hospital text-blue-300 text-sm"})],-1)),(0,r.Lk)("p",i," © "+(0,r.v_)(c.currentYear)+" Muhimbili National Hospital. All rights reserved. ",1)])])])}var l={name:"AppFooter",computed:{currentYear(){return(new Date).getFullYear()}}},c=a(1241);const u=(0,c.A)(l,[["render",n],["__scopeId","data-v-2f68623d"]]);var p=u},9308:function(e,t,a){a(8111),a(7588);var r=a(4373);const s="http://127.0.0.1:8000/api",o=r.A.create({baseURL:s,timeout:parseInt("30000")||1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)));const d={async getRequests(e={}){try{const t=await o.get("/request-status",{params:e});return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error fetching requests:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to fetch requests",data:null}}},async getRequestDetails(e,t){try{const a=await o.get("/request-status/details",{params:{id:e,type:t}});a.data;let r=a.data.data;return r&&"combined_access"===t&&((r.hod_approved_at||r.hod_approval_comment)&&(r.hodApproval={status:r.hod_approval_status||"pending",approved_at:r.hod_approved_at,approved_by:r.hod_approved_by,approved_by_name:r.hod_approved_by_name,comment:r.hod_approval_comment,rejection_reason:r.hod_rejection_reason||r.hod_approval_comment}),["divisional_director","ict_director","head_of_it","ict_officer"].forEach(e=>{const t=`${e}_approval_status`,a=`${e}_approved_at`,s=`${e}_approved_by`,o=`${e}_approval_comment`;(r[t]||r[a]||r[o])&&(r[`${e.replace("_","")}Approval`]={status:r[t]||"pending",approved_at:r[a],approved_by:r[s],comment:r[o],rejection_reason:r[o]})})),{success:!0,data:r,message:a.data.message}}catch(a){return console.error("❌ Error fetching request details:",{error:a.message,response:a.response?.data,status:a.response?.status,statusText:a.response?.statusText,headers:a.response?.headers,config:{url:a.config?.url,method:a.config?.method,params:a.config?.params},params:{id:e,type:t}}),{success:!1,error:a.response?.data?.message||a.message||"Failed to fetch request details",data:null}}},async getStatistics(){try{const e=await o.get("/request-status/statistics");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error fetching statistics:",e),{success:!1,error:e.response?.data?.message||e.message||"Failed to fetch statistics",data:null}}},async searchRequests(e={}){try{const t={search:e.search||"",status:e.status||"",type:e.type||"",sort_by:e.sortBy||"created_at",sort_order:e.sortOrder||"desc",per_page:e.perPage||15,page:e.page||1};Object.keys(t).forEach(e=>{""!==t[e]&&null!==t[e]&&void 0!==t[e]||delete t[e]});const a=await o.get("/request-status",{params:t});return{success:!0,data:a.data.data,message:a.data.message}}catch(t){return console.error("Error searching requests:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to search requests",data:null}}},async getRequestsPaginated(e=1,t=15,a={}){try{const r={page:e,per_page:t,...a},s=await o.get("/request-status",{params:r});return{success:!0,data:s.data.data,message:s.data.message}}catch(r){return console.error("Error fetching paginated requests:",r),{success:!1,error:r.response?.data?.message||r.message||"Failed to fetch requests",data:null}}},async refreshRequests(e={}){return this.getRequests(e)},getRequestTypeDisplayName(e){const t={combined_access:"Combined Access",booking_service:"Booking Service",jeeva_access:"Jeeva Access",wellsoft_access:"Wellsoft Access",internet_access:"Internet Access"};return t[e]||e},getStatusDisplayName(e){const t={pending:"Pending",pending_hod:"Pending HOD Approval",pending_divisional:"Pending Divisional Approval",pending_ict_director:"Pending ICT Director Approval",pending_head_it:"Pending Head IT Approval",pending_ict_officer:"Pending ICT Officer Approval",approved:"Approved",hod_approved:"HOD Approved",divisional_approved:"Divisional Approved",ict_director_approved:"ICT Director Approved",head_it_approved:"Head IT Approved",ict_officer_approved:"ICT Officer Approved",rejected:"Rejected",hod_rejected:"HOD Rejected",divisional_rejected:"Divisional Rejected",ict_director_rejected:"ICT Director Rejected",head_it_rejected:"Head IT Rejected",ict_officer_rejected:"ICT Officer Rejected",implemented:"Implemented",cancelled:"Cancelled",in_review:"In Review",in_use:"In Use",returned:"Returned",overdue:"Overdue"};return t[e]||e},getStatusColorClass(e){const t={pending:"bg-yellow-400 animate-pulse",pending_hod:"bg-yellow-400 animate-pulse",pending_divisional:"bg-yellow-400 animate-pulse",pending_ict_director:"bg-yellow-400 animate-pulse",pending_head_it:"bg-yellow-400 animate-pulse",pending_ict_officer:"bg-yellow-400 animate-pulse",approved:"bg-green-400",hod_approved:"bg-green-400",divisional_approved:"bg-green-400",ict_director_approved:"bg-green-400",head_it_approved:"bg-green-400",ict_officer_approved:"bg-green-400",rejected:"bg-red-400",hod_rejected:"bg-red-400",divisional_rejected:"bg-red-400",ict_director_rejected:"bg-red-400",head_it_rejected:"bg-red-400",ict_officer_rejected:"bg-red-400",implemented:"bg-green-400",cancelled:"bg-gray-400",in_review:"bg-blue-400 animate-pulse",in_use:"bg-purple-400",returned:"bg-gray-400",overdue:"bg-red-500 animate-pulse"};return t[e]||"bg-gray-400"},getStatusTextColorClass(e){const t={pending:"text-yellow-400",pending_hod:"text-yellow-400",pending_divisional:"text-yellow-400",pending_ict_director:"text-yellow-400",pending_head_it:"text-yellow-400",pending_ict_officer:"text-yellow-400",approved:"text-green-400",hod_approved:"text-green-400",divisional_approved:"text-green-400",ict_director_approved:"text-green-400",head_it_approved:"text-green-400",ict_officer_approved:"text-green-400",rejected:"text-red-400",hod_rejected:"text-red-400",divisional_rejected:"text-red-400",ict_director_rejected:"text-red-400",head_it_rejected:"text-red-400",ict_officer_rejected:"text-red-400",implemented:"text-green-400",cancelled:"text-gray-400",in_review:"text-blue-400",in_use:"text-purple-400",returned:"text-gray-400",overdue:"text-red-500"};return t[e]||"text-gray-400"},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatTime(e){if(!e)return"";const t=new Date(e);return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},getRequestTypeIcon(e){const t={combined_access:"fas fa-layer-group",booking_service:"fas fa-calendar-check",jeeva_access:"fas fa-file-medical",wellsoft_access:"fas fa-laptop-medical",internet_access:"fas fa-wifi"};return t[e]||"fas fa-file-alt"},async debug(){try{const e=await o.get("/request-status/debug");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error in debug endpoint:",e),{success:!1,error:e.response?.data?.message||e.message||"Debug failed",data:null}}}};t.A=d}}]);
//# sourceMappingURL=637.0af976dd.js.map