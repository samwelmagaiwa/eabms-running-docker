"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[385],{1445:function(e,t,s){s.d(t,{A:function(){return k}});var a=s(5796);const l={key:0,class:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none animate-fade-in"},r={class:"pointer-events-auto w-full max-w-lg mx-auto"},o={class:"relative bg-gradient-to-br from-white/20 via-blue-50/30 to-white/10 border-2 border-blue-300/50 backdrop-blur-xl rounded-3xl p-8 shadow-2xl overflow-hidden"},i={class:"relative z-10"},n={class:"flex items-center justify-center gap-6 mb-6"},d={class:"relative flex flex-col items-center"},c={class:"relative mb-3"},u={class:"text-center"},p={class:"text-white text-2xl font-bold tracking-wide mb-1 drop-shadow-md"},b={class:"text-blue-100 text-lg animate-pulse"},m={class:"text-center border-t border-blue-300/30 pt-4"},v={class:"text-teal-200 text-base font-semibold tracking-wider"};function g(e,t,s,g,f,x){return s.show?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",r,[(0,a.Lk)("div",o,[t[5]||(t[5]=(0,a.Fv)('<div class="absolute inset-0 opacity-10" data-v-94539b4a><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-slide-across" data-v-94539b4a></div><div class="absolute top-4 left-4 w-16 h-16 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.2);" data-v-94539b4a></div><div class="absolute bottom-4 right-4 w-20 h-20 bg-blue-400/20 rounded-full animate-float" style="animation-delay:1s;" data-v-94539b4a></div><div class="absolute top-1/2 left-8 w-12 h-12 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.15);animation-delay:2s;" data-v-94539b4a></div></div>',1)),(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[t[1]||(t[1]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-teal-500/30 rounded-2xl backdrop-blur-sm border-2 border-blue-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-teal-400 rounded-2xl opacity-20 blur-sm animate-pulse"})],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[t[0]||(t[0]=(0,a.Lk)("div",{class:"rounded-full h-12 w-12 border-2 border-gray-300/20"},null,-1)),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-top-color":"#ff0000","animation-duration":"2s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-bottom-color":"#0000d1","animation-direction":"reverse","animation-duration":"1.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-right-color":"rgba(255, 0, 0, 0.7)","animation-duration":"2.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-left-color":"rgba(0, 0, 209, 0.7)","animation-direction":"reverse","animation-duration":"1.8s"}},null,2)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",p,(0,a.v_)(s.loadingTitle),1),(0,a.Lk)("div",b,(0,a.v_)(s.loadingSubtitle),1)])]),t[2]||(t[2]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-teal-500/30 to-blue-500/30 rounded-2xl backdrop-blur-sm border-2 border-teal-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/logo2.png",alt:"MNH Logo",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-teal-400 to-blue-400 rounded-2xl opacity-20 blur-sm animate-pulse",style:{"animation-delay":"0.5s"}})],-1))]),(0,a.Lk)("div",m,[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-lg font-black tracking-widest mb-1 drop-shadow-sm",style:{color:"#ff0000"}}," MUHIMBILI NATIONAL HOSPITAL ",-1)),(0,a.Lk)("div",v,(0,a.v_)(s.departmentTitle),1)]),t[4]||(t[4]=(0,a.Fv)('<div class="flex justify-center gap-2 mt-4" data-v-94539b4a><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.1s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;animation-delay:0.2s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.3s;" data-v-94539b4a></div></div>',1))])])])])):(0,a.Q3)("",!0)}var f={name:"UnifiedLoadingBanner",props:{show:{type:Boolean,default:!0},loadingTitle:{type:String,default:"Loading Requests"},loadingSubtitle:{type:String,default:"Please wait..."},departmentTitle:{type:String,default:"SYSTEM MANAGEMENT"},forceSpin:{type:Boolean,default:!1}}},x=s(1241);const h=(0,x.A)(f,[["render",g],["__scopeId","data-v-94539b4a"]]);var k=h},1538:function(e,t,s){s.r(t),s.d(t,{default:function(){return vt}});var a=s(5796);const l={class:"flex flex-col h-screen"},r={class:"flex flex-1 overflow-hidden"},o={class:"flex-1 p-2 overflow-y-auto relative bg-blue-900",style:{background:"linear-gradient(\n            135deg,\n            #1e3a8a 0%,\n            #1e40af 25%,\n            #1d4ed8 50%,\n            #1e40af 75%,\n            #1e3a8a 100%\n          )"}},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"max-w-full mx-auto relative z-10 px-4"},u={class:"medical-glass-card rounded-t-3xl p-6 mb-0 border-b border-blue-300/30"},p={class:"flex items-center justify-between"},b={class:"flex items-center"},m={class:"flex items-center space-x-4"},v=["disabled"],g={class:"medical-glass-card rounded-none border-t-0 border-b border-blue-300/30"},f={class:"p-4"},x={class:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between"},h={class:"flex-1 max-w-xl"},k={class:"relative"},y={class:"flex flex-wrap gap-3 items-center"},_={class:"relative"},w={class:"relative"},L={class:"relative"},R={key:0,class:"mt-3 flex flex-wrap gap-2"},C={key:0,class:"inline-flex items-center px-2 py-1 bg-green-600/30 text-green-200 text-sm rounded-md border border-green-400/30"},q={key:1,class:"inline-flex items-center px-2 py-1 bg-blue-600/30 text-blue-200 text-sm rounded-md border border-blue-400/30"},S={key:2,class:"inline-flex items-center px-2 py-1 bg-purple-600/30 text-purple-200 text-sm rounded-md border border-purple-400/30"},D={key:3,class:"inline-flex items-center px-2 py-1 bg-yellow-600/30 text-yellow-200 text-sm rounded-md border border-yellow-400/30"},A={key:0,class:"medical-glass-card rounded-none border-t-0 border-b border-blue-300/30"},E={class:"px-4 py-2 bg-blue-600/10"},F={class:"flex items-center justify-between text-base"},T={class:"text-teal-300"},j={key:0,class:"text-yellow-300 ml-2"},I={key:0,class:"text-teal-300"},X={class:"medical-glass-card rounded-b-3xl overflow-hidden"},M={class:"p-6"},Q={key:0,class:"text-center py-12"},W={key:1,class:"text-center py-12"},P={key:2,class:"text-center py-12"},U={key:3,class:"overflow-hidden rounded-xl border border-blue-300/20"},N={class:"overflow-x-auto"},K={class:"w-full"},$={class:"divide-y divide-blue-300/10"},O={class:"px-6 py-4 whitespace-nowrap"},V={class:"flex items-center"},H={class:"text-base font-medium text-white"},z={class:"px-6 py-4"},B={class:"text-base font-medium text-white"},J={class:"text-sm text-blue-300"},Y={class:"px-6 py-4"},G={class:"flex flex-wrap gap-1"},Z={class:"px-6 py-4 whitespace-nowrap"},ee={class:"px-6 py-4 whitespace-nowrap text-base text-gray-300"},te={class:"px-6 py-4 whitespace-nowrap text-center"},se={key:0,class:"inline-flex items-center"},ae={key:1,class:"inline-flex items-center"},le={class:"px-6 py-4 whitespace-nowrap text-center"},re={class:"flex items-center justify-center space-x-2"},oe=["onClick","title"],ie=["onClick","title"],ne={key:4,class:"mt-8 flex justify-center"},de={class:"flex items-center space-x-2"},ce=["disabled"],ue={class:"text-base text-white mx-4"},pe=["disabled"],be={class:"flex items-center justify-between p-6 border-b border-blue-300/20"},me={class:"flex items-center space-x-3"},ve={class:"text-xl font-bold text-white"},ge={class:"text-sm text-blue-300"},fe={class:"p-6 space-y-6"},xe={class:"bg-blue-600/10 border border-blue-400/20 rounded-lg p-4"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},ke={class:"space-y-2"},ye={class:"flex justify-between"},_e={class:"flex justify-between"},we={class:"text-white font-medium"},Le={key:0,class:"flex justify-between"},Re={class:"text-white font-medium"},Ce={class:"space-y-2"},qe={class:"flex justify-between"},Se={class:"text-white font-medium"},De={class:"flex justify-between"},Ae={class:"flex flex-wrap gap-1"},Ee={class:"flex items-start space-x-3"},Fe={class:"flex-1"},Te={class:"flex items-center space-x-2 mb-3"},je={class:"text-white leading-relaxed whitespace-pre-line"},Ie={key:0},Xe={key:1},Me={class:"text-sm text-teal-300"},Qe={key:1,class:"bg-purple-600/10 border border-purple-400/20 rounded-lg p-4"},We={class:"space-y-3"},Pe={key:0,class:"space-y-2"},Ue={class:"flex flex-wrap gap-2"},Ne={key:1,class:"space-y-2"},Ke={class:"flex flex-wrap gap-2"},$e={key:2,class:"space-y-2"},Oe={class:"flex flex-wrap gap-2"},Ve={class:"flex items-center justify-between p-6 border-b border-blue-300/20"},He={class:"flex items-center space-x-3"},ze={class:"text-sm text-green-300"},Be={class:"p-6 space-y-4"},Je={key:0,class:"bg-green-600/20 border border-green-500/30 rounded-lg p-4"},Ye={class:"text-white text-base leading-relaxed"},Ge={key:0,class:"mt-2"},Ze={class:"text-sm text-green-300"},et={class:"space-y-4"},tt=["placeholder"],st={class:"flex justify-end space-x-3 pt-4"},at=["disabled"],lt={key:0,class:"fas fa-spinner fa-spin mr-2"},rt={key:1,class:"fas fa-paper-plane mr-2"};function ot(e,t,s,ot,it,nt){const dt=(0,a.g2)("Header"),ct=(0,a.g2)("ModernSidebar"),ut=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(dt),(0,a.Lk)("div",r,[(0,a.bF)(ct),(0,a.Lk)("main",o,[(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(48,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[(0,a.Lk)("div",b,[(0,a.bF)(ut,{to:"/divisional-dashboard",class:"mr-4 p-2 rounded-lg bg-teal-600/20 hover:bg-teal-600/30 transition-colors"},{default:(0,a.k6)(()=>[...t[28]||(t[28]=[(0,a.Lk)("i",{class:"fas fa-arrow-left text-teal-300 hover:text-white"},null,-1)])]),_:1}),t[29]||(t[29]=(0,a.Lk)("div",null,[(0,a.Lk)("h2",{class:"text-2xl font-bold text-blue-100 tracking-wide drop-shadow-md"},[(0,a.Lk)("i",{class:"fas fa-comments text-teal-400 mr-3"}),(0,a.eW)(" Dict Recommendations ")])],-1))]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ot.refreshRecommendations&&ot.refreshRecommendations(...e)),disabled:ot.loading,class:"px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[(0,a.Lk)("i",{class:(0,a.C4)(["fas fa-sync-alt mr-2",{"animate-spin":ot.loading}])},null,2),t[30]||(t[30]=(0,a.eW)(" Refresh ",-1))],8,v)])])]),(0,a.Lk)("div",g,[(0,a.Lk)("div",f,[(0,a.Lk)("div",x,[(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[t[32]||(t[32]=(0,a.Lk)("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-search text-teal-300"})],-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>ot.searchQuery=e),onInput:t[2]||(t[2]=(...e)=>ot.debouncedSearch&&ot.debouncedSearch(...e)),type:"text",placeholder:"Search by staff name, PF number, or request ID...",class:"w-full pl-10 pr-4 py-2.5 bg-white/10 border border-teal-300/30 rounded-lg focus:border-teal-400 focus:outline-none text-white placeholder-teal-200/60 backdrop-blur-sm transition-colors"},null,544),[[a.Jo,ot.searchQuery]]),ot.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[3]||(t[3]=(...e)=>ot.clearSearch&&ot.clearSearch(...e)),class:"absolute inset-y-0 right-0 pr-3 flex items-center text-teal-300 hover:text-white"},[...t[31]||(t[31]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",y,[(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>ot.statusFilter=e),onChange:t[5]||(t[5]=(...e)=>ot.applyFilters&&ot.applyFilters(...e)),class:"appearance-none bg-white/10 border border-teal-300/30 rounded-lg px-4 py-2.5 pr-10 text-white text-sm focus:border-teal-400 focus:outline-none backdrop-blur-sm cursor-pointer"},[...t[33]||(t[33]=[(0,a.Fv)('<option value="" class="bg-blue-900 text-white" data-v-091e6114>All Statuses</option><option value="ict_director_approved" class="bg-blue-900 text-white" data-v-091e6114> Approved by ICT </option><option value="dict_approved" class="bg-blue-900 text-white" data-v-091e6114> Dict Approved </option><option value="ict_director_rejected" class="bg-blue-900 text-white" data-v-091e6114> Rejected by ICT </option><option value="dict_rejected" class="bg-blue-900 text-white" data-v-091e6114> Dict Rejected </option><option value="pending_ict_director" class="bg-blue-900 text-white" data-v-091e6114> Under ICT Review </option><option value="implemented" class="bg-blue-900 text-white" data-v-091e6114> Implemented </option>',7)])],544),[[a.u1,ot.statusFilter]]),t[34]||(t[34]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))]),(0,a.Lk)("div",w,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>ot.requestTypeFilter=e),onChange:t[7]||(t[7]=(...e)=>ot.applyFilters&&ot.applyFilters(...e)),class:"appearance-none bg-white/10 border border-teal-300/30 rounded-lg px-4 py-2.5 pr-10 text-white text-sm focus:border-teal-400 focus:outline-none backdrop-blur-sm cursor-pointer"},[...t[35]||(t[35]=[(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"},"All Request Types",-1),(0,a.Lk)("option",{value:"jeeva_access",class:"bg-blue-900 text-white"}," Jeeva Access ",-1),(0,a.Lk)("option",{value:"wellsoft",class:"bg-blue-900 text-white"},"Wellsoft",-1),(0,a.Lk)("option",{value:"internet_access_request",class:"bg-blue-900 text-white"}," Internet Access ",-1)])],544),[[a.u1,ot.requestTypeFilter]]),t[36]||(t[36]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))]),(0,a.Lk)("div",L,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>ot.commentsFilter=e),onChange:t[9]||(t[9]=(...e)=>ot.applyFilters&&ot.applyFilters(...e)),class:"appearance-none bg-white/10 border border-teal-300/30 rounded-lg px-4 py-2.5 pr-10 text-white text-sm focus:border-teal-400 focus:outline-none backdrop-blur-sm cursor-pointer"},[...t[37]||(t[37]=[(0,a.Lk)("option",{value:"",class:"bg-blue-900 text-white"},"All Requests",-1),(0,a.Lk)("option",{value:"with_comments",class:"bg-blue-900 text-white"}," With Comments ",-1),(0,a.Lk)("option",{value:"without_comments",class:"bg-blue-900 text-white"}," Without Comments ",-1)])],544),[[a.u1,ot.commentsFilter]]),t[38]||(t[38]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-teal-300"})],-1))]),ot.hasActiveFilters?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>ot.clearAllFilters&&ot.clearAllFilters(...e)),class:"px-3 py-2.5 bg-red-600/30 hover:bg-red-600/50 text-red-200 rounded-lg transition-colors border border-red-400/30 text-sm flex items-center",title:"Clear all filters"},[...t[39]||(t[39]=[(0,a.Lk)("i",{class:"fas fa-times mr-1"},null,-1),(0,a.eW)(" Clear ",-1)])])):(0,a.Q3)("",!0)])]),ot.hasActiveFilters?((0,a.uX)(),(0,a.CE)("div",R,[t[44]||(t[44]=(0,a.Lk)("span",{class:"text-sm text-teal-300 mr-2"},"Active filters:",-1)),ot.statusFilter?((0,a.uX)(),(0,a.CE)("span",C,[(0,a.eW)(" Status: "+(0,a.v_)(ot.getStatusLabel(ot.statusFilter))+" ",1),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>ot.clearStatusFilter&&ot.clearStatusFilter(...e)),class:"ml-1 text-green-300 hover:text-white"},[...t[40]||(t[40]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,a.Q3)("",!0),ot.requestTypeFilter?((0,a.uX)(),(0,a.CE)("span",q,[(0,a.eW)(" Type: "+(0,a.v_)(ot.getRequestTypeLabel(ot.requestTypeFilter))+" ",1),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>ot.clearRequestTypeFilter&&ot.clearRequestTypeFilter(...e)),class:"ml-1 text-blue-300 hover:text-white"},[...t[41]||(t[41]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,a.Q3)("",!0),ot.commentsFilter?((0,a.uX)(),(0,a.CE)("span",S,[(0,a.eW)(" Comments: "+(0,a.v_)("with_comments"===ot.commentsFilter?"With Comments":"Without Comments")+" ",1),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>ot.clearCommentsFilter&&ot.clearCommentsFilter(...e)),class:"ml-1 text-purple-300 hover:text-white"},[...t[42]||(t[42]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,a.Q3)("",!0),ot.searchQuery?((0,a.uX)(),(0,a.CE)("span",D,[(0,a.eW)(' Search: "'+(0,a.v_)(ot.searchQuery)+'" ',1),(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>ot.clearSearch&&ot.clearSearch(...e)),class:"ml-1 text-yellow-300 hover:text-white"},[...t[43]||(t[43]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])]),ot.loading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("div",E,[(0,a.Lk)("div",F,[(0,a.Lk)("div",T,[t[46]||(t[46]=(0,a.Lk)("i",{class:"fas fa-list-ul mr-1"},null,-1)),(0,a.eW)(" Showing "+(0,a.v_)(ot.filteredRecommendations.length)+" of "+(0,a.v_)(ot.totalRecommendations)+" recommendations ",1),ot.hasActiveFilters?((0,a.uX)(),(0,a.CE)("span",j,[...t[45]||(t[45]=[(0,a.Lk)("i",{class:"fas fa-filter mr-1"},null,-1),(0,a.eW)("Filtered ",-1)])])):(0,a.Q3)("",!0)]),ot.filteredRecommendations.length>0?((0,a.uX)(),(0,a.CE)("div",I,[...t[47]||(t[47]=[(0,a.Lk)("i",{class:"fas fa-sort mr-1"},null,-1),(0,a.eW)(" Sorted by date (newest first) ",-1)])])):(0,a.Q3)("",!0)])])])),(0,a.Lk)("div",X,[(0,a.Lk)("div",M,[ot.loading&&0===ot.recommendations.length?((0,a.uX)(),(0,a.CE)("div",Q,[...t[48]||(t[48]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-4xl text-teal-400 mb-4"},null,-1),(0,a.Lk)("p",{class:"text-white text-lg"},"Loading dict recommendations...",-1)])])):ot.loading||0!==ot.filteredRecommendations.length||ot.hasActiveFilters?!ot.loading&&0===ot.filteredRecommendations.length&&ot.hasActiveFilters?((0,a.uX)(),(0,a.CE)("div",P,[t[54]||(t[54]=(0,a.Fv)('<div class="mb-6" data-v-091e6114><i class="fas fa-search text-6xl text-gray-400 mb-4" data-v-091e6114></i></div><h3 class="text-xl font-semibold text-white mb-2" data-v-091e6114>No Results Found</h3><p class="text-gray-300 max-w-md mx-auto mb-4" data-v-091e6114> No recommendations match your current search and filter criteria. </p><div class="space-y-2" data-v-091e6114><p class="text-sm text-teal-300" data-v-091e6114>Try:</p><ul class="text-sm text-gray-400 space-y-1 max-w-sm mx-auto" data-v-091e6114><li data-v-091e6114>â€¢ Clearing your search terms</li><li data-v-091e6114>â€¢ Adjusting your filters</li><li data-v-091e6114>â€¢ Checking different status options</li></ul></div>',4)),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>ot.clearAllFilters&&ot.clearAllFilters(...e)),class:"mt-6 px-6 py-3 bg-red-600/30 hover:bg-red-600/50 text-red-200 rounded-lg transition-colors border border-red-400/30"},[...t[53]||(t[53]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" Clear All Filters ",-1)])])])):((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",N,[(0,a.Lk)("table",K,[t[59]||(t[59]=(0,a.Lk)("thead",{class:"bg-gradient-to-r from-blue-600/20 to-indigo-600/20 border-b border-blue-300/20"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-hashtag mr-2"}),(0,a.eW)("Request ID ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-user mr-2"}),(0,a.eW)("Staff Details ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-layer-group mr-2"}),(0,a.eW)("Request Type ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-info-circle mr-2"}),(0,a.eW)("Status ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-calendar mr-2"}),(0,a.eW)("Date ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-left text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-comment mr-2"}),(0,a.eW)("Has Comments ")]),(0,a.Lk)("th",{class:"px-6 py-4 text-center text-sm font-semibold text-blue-200 uppercase tracking-wider"},[(0,a.Lk)("i",{class:"fas fa-cogs mr-2"}),(0,a.eW)("Actions ")])])],-1)),(0,a.Lk)("tbody",$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.filteredRecommendations,(e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:(0,a.C4)(["hover:bg-blue-600/10 transition-colors duration-200",s%2===0?"bg-blue-950/20":"bg-blue-950/10"])},[(0,a.Lk)("td",O,[(0,a.Lk)("div",V,[t[55]||(t[55]=(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3"},[(0,a.Lk)("i",{class:"fas fa-file-alt text-white text-sm"})],-1)),(0,a.Lk)("div",H,(0,a.v_)(ot.formatRequestId(e.id)),1)])]),(0,a.Lk)("td",z,[(0,a.Lk)("div",B,(0,a.v_)(e.staff_name),1),(0,a.Lk)("div",J,(0,a.v_)(e.pf_number),1)]),(0,a.Lk)("td",Y,[(0,a.Lk)("div",G,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.request_type,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"inline-flex px-2 py-1 text-sm rounded-md bg-blue-600/30 text-blue-200 border border-blue-400/20"},(0,a.v_)(ot.getRequestTypeLabel(e)),1))),128))])]),(0,a.Lk)("td",Z,[(0,a.Lk)("span",{class:(0,a.C4)(["inline-flex px-2 py-1 text-sm font-medium rounded-md border",ot.getStatusClass(e.status)])},(0,a.v_)(ot.getStatusLabel(e.status)),3)]),(0,a.Lk)("td",ee,(0,a.v_)(ot.formatDate(e.ict_director_comments_date||e.dict_rejection_date||e.updated_at)),1),(0,a.Lk)("td",te,[e.ict_director_comments||e.ict_director_rejection_reasons?((0,a.uX)(),(0,a.CE)("div",se,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2 h-2 rounded-full mr-2","rejected"===e.ict_director_status?"bg-red-500":"bg-green-500"])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-medium","rejected"===e.ict_director_status?"text-red-400":"text-green-400"])},(0,a.v_)("rejected"===e.ict_director_status?"Rejected":"Yes"),3)])):((0,a.uX)(),(0,a.CE)("div",ae,[...t[56]||(t[56]=[(0,a.Lk)("div",{class:"w-2 h-2 bg-gray-500 rounded-full mr-2"},null,-1),(0,a.Lk)("span",{class:"text-sm text-gray-400"},"No",-1)])]))]),(0,a.Lk)("td",le,[(0,a.Lk)("div",re,[(0,a.Lk)("button",{onClick:t=>ot.viewRequestDetails(e),class:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md bg-blue-600/30 text-blue-200 border border-blue-400/30 hover:bg-blue-600/50 transition-colors duration-200",title:`View details for ${ot.formatRequestId(e.id)}`},[...t[57]||(t[57]=[(0,a.Lk)("i",{class:"fas fa-eye mr-1"},null,-1),(0,a.eW)(" View ",-1)])],8,oe),(0,a.Lk)("button",{onClick:t=>ot.openResponseModal(e),class:"inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-md bg-green-600/30 text-green-200 border border-green-400/30 hover:bg-green-600/50 transition-colors duration-200",title:`Respond to ${ot.formatRequestId(e.id)}`},[...t[58]||(t[58]=[(0,a.Lk)("i",{class:"fas fa-reply mr-1"},null,-1),(0,a.eW)(" Respond ",-1)])],8,ie)])])],2))),128))])])])])):((0,a.uX)(),(0,a.CE)("div",W,[t[50]||(t[50]=(0,a.Lk)("div",{class:"mb-6"},[(0,a.Lk)("i",{class:"fas fa-comment-slash text-6xl text-gray-400 mb-4"})],-1)),t[51]||(t[51]=(0,a.Lk)("h3",{class:"text-xl font-semibold text-white mb-2"},"No Recommendations Found",-1)),t[52]||(t[52]=(0,a.Lk)("p",{class:"text-gray-300 max-w-md mx-auto"}," There are currently no recommendations, rejection reasons, or comments from ICT Director for requests in your department. ",-1)),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>ot.refreshRecommendations&&ot.refreshRecommendations(...e)),class:"mt-6 px-6 py-3 bg-teal-600 hover:bg-teal-700 text-white rounded-lg transition-colors"},[...t[49]||(t[49]=[(0,a.Lk)("i",{class:"fas fa-sync-alt mr-2"},null,-1),(0,a.eW)(" Check Again ",-1)])])])),ot.pagination.total>ot.pagination.per_page?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.Lk)("div",de,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=e=>ot.changePage(ot.pagination.current_page-1)),disabled:ot.pagination.current_page<=1,class:"px-3 py-2 bg-blue-600/30 hover:bg-blue-600/50 text-blue-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[60]||(t[60]=[(0,a.Lk)("i",{class:"fas fa-chevron-left"},null,-1)])],8,ce),(0,a.Lk)("span",ue," Page "+(0,a.v_)(ot.pagination.current_page)+" of "+(0,a.v_)(ot.pagination.last_page),1),(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>ot.changePage(ot.pagination.current_page+1)),disabled:ot.pagination.current_page>=ot.pagination.last_page,class:"px-3 py-2 bg-blue-600/30 hover:bg-blue-600/50 text-blue-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[61]||(t[61]=[(0,a.Lk)("i",{class:"fas fa-chevron-right"},null,-1)])],8,pe)])])):(0,a.Q3)("",!0)])])])])]),ot.showDetailsModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t[21]||(t[21]=(...e)=>ot.closeDetailsModal&&ot.closeDetailsModal(...e))},[(0,a.Lk)("div",{class:"backdrop-blur-md rounded-2xl border-2 border-blue-400/30 max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",style:{background:"linear-gradient(\n            135deg,\n            #1e3a8a 0%,\n            #1e40af 25%,\n            #1d4ed8 50%,\n            #1e40af 75%,\n            #1e3a8a 100%\n          )"},onClick:t[20]||(t[20]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",be,[(0,a.Lk)("div",me,[t[62]||(t[62]=(0,a.Lk)("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-file-alt text-white"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("h3",ve,(0,a.v_)(ot.formatRequestId(ot.selectedRequest?.id)),1),(0,a.Lk)("p",ge,(0,a.v_)(ot.selectedRequest?.staff_name)+" ("+(0,a.v_)(ot.selectedRequest?.pf_number)+") ",1)])]),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>ot.closeDetailsModal&&ot.closeDetailsModal(...e)),class:"p-2 rounded-lg bg-red-600/20 hover:bg-red-600/30 text-red-300 hover:text-white transition-colors"},[...t[63]||(t[63]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,a.Lk)("div",fe,[(0,a.Lk)("div",xe,[t[69]||(t[69]=(0,a.Lk)("h4",{class:"font-semibold text-blue-200 mb-3 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-info-circle mr-2"}),(0,a.eW)(" Request Overview ")],-1)),(0,a.Lk)("div",he,[(0,a.Lk)("div",ke,[(0,a.Lk)("div",ye,[t[64]||(t[64]=(0,a.Lk)("span",{class:"text-gray-300"},"Status:",-1)),(0,a.Lk)("span",{class:(0,a.C4)(["px-2 py-1 text-sm rounded-md border",ot.getStatusClass(ot.selectedRequest?.status)])},(0,a.v_)(ot.getStatusLabel(ot.selectedRequest?.status)),3)]),(0,a.Lk)("div",_e,[t[65]||(t[65]=(0,a.Lk)("span",{class:"text-gray-300"},"Access Type:",-1)),(0,a.Lk)("span",we,(0,a.v_)(ot.selectedRequest?.access_type||"N/A"),1)]),ot.selectedRequest?.temporary_until?((0,a.uX)(),(0,a.CE)("div",Le,[t[66]||(t[66]=(0,a.Lk)("span",{class:"text-gray-300"},"Valid Until:",-1)),(0,a.Lk)("span",Re,(0,a.v_)(ot.formatDate(ot.selectedRequest?.temporary_until)),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ce,[(0,a.Lk)("div",qe,[t[67]||(t[67]=(0,a.Lk)("span",{class:"text-gray-300"},"Purpose:",-1)),(0,a.Lk)("span",Se,(0,a.v_)(ot.selectedRequest?.module_requested_for||"Use"),1)]),(0,a.Lk)("div",De,[t[68]||(t[68]=(0,a.Lk)("span",{class:"text-gray-300"},"Request Types:",-1)),(0,a.Lk)("div",Ae,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.selectedRequest?.request_type,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-2 py-1 text-sm rounded-md bg-blue-600/30 text-blue-200 border border-blue-400/20"},(0,a.v_)(ot.getRequestTypeLabel(e)),1))),128))])])])])]),ot.selectedRequest?.ict_director_comments||ot.selectedRequest?.ict_director_rejection_reasons?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["border rounded-lg p-4","rejected"===ot.selectedRequest?.ict_director_status?"bg-gradient-to-r from-red-600/20 to-red-700/20 border-red-400/30":"bg-gradient-to-r from-teal-600/20 to-cyan-600/20 border border-teal-400/30"])},[(0,a.Lk)("div",Ee,[(0,a.Lk)("div",{class:(0,a.C4)(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0","rejected"===ot.selectedRequest?.ict_director_status?"bg-gradient-to-br from-red-500 to-red-600":"bg-gradient-to-br from-teal-500 to-cyan-600"])},[(0,a.Lk)("i",{class:(0,a.C4)(["text-white","rejected"===ot.selectedRequest?.ict_director_status?"fas fa-times-circle":"fas fa-user-tie"])},null,2)],2),(0,a.Lk)("div",Fe,[(0,a.Lk)("div",Te,[(0,a.Lk)("h4",{class:(0,a.C4)(["font-semibold","rejected"===ot.selectedRequest?.ict_director_status?"text-red-200":"text-teal-200"])}," ICT Director "+(0,a.v_)("rejected"===ot.selectedRequest?.ict_director_status?"Rejection Reasons":"Comments"),3),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm","rejected"===ot.selectedRequest?.ict_director_status?"text-red-300":"text-teal-300"])},(0,a.v_)(ot.selectedRequest?.ict_director_name||"ICT Director"),3)]),(0,a.Lk)("div",{class:(0,a.C4)(["rounded-lg p-3 mb-3","rejected"===ot.selectedRequest?.ict_director_status?"bg-red-900/20":"bg-teal-900/20"])},[(0,a.Lk)("p",je,["rejected"===ot.selectedRequest?.ict_director_status?((0,a.uX)(),(0,a.CE)("span",Ie,(0,a.v_)(ot.selectedRequest?.ict_director_rejection_reasons||"No rejection reasons provided"),1)):((0,a.uX)(),(0,a.CE)("span",Xe,(0,a.v_)(ot.selectedRequest?.ict_director_comments||"No comments provided"),1))])],2),(0,a.Lk)("div",Me,[t[70]||(t[70]=(0,a.Lk)("i",{class:"fas fa-calendar mr-1"},null,-1)),(0,a.eW)(" "+(0,a.v_)(ot.formatDate(ot.selectedRequest?.ict_director_comments_date||ot.selectedRequest?.dict_rejection_date||ot.selectedRequest?.updated_at)),1)])])])],2)):(0,a.Q3)("",!0),ot.hasModules(ot.selectedRequest)?((0,a.uX)(),(0,a.CE)("div",Qe,[t[74]||(t[74]=(0,a.Lk)("h4",{class:"font-semibold text-purple-200 mb-3 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-cube mr-2"}),(0,a.eW)(" Modules & Services Requested ")],-1)),(0,a.Lk)("div",We,[ot.selectedRequest?.wellsoft_modules_selected?.length?((0,a.uX)(),(0,a.CE)("div",Pe,[t[71]||(t[71]=(0,a.Lk)("span",{class:"text-base text-gray-300 font-medium"},"Wellsoft Modules:",-1)),(0,a.Lk)("div",Ue,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.selectedRequest.wellsoft_modules_selected,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-3 py-1 bg-yellow-600/30 text-yellow-200 text-sm rounded-lg border border-yellow-400/30"},(0,a.v_)(e),1))),128))])])):(0,a.Q3)("",!0),ot.selectedRequest?.jeeva_modules_selected?.length?((0,a.uX)(),(0,a.CE)("div",Ne,[t[72]||(t[72]=(0,a.Lk)("span",{class:"text-base text-gray-300 font-medium"},"Jeeva Modules:",-1)),(0,a.Lk)("div",Ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.selectedRequest.jeeva_modules_selected,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-3 py-1 bg-purple-600/30 text-purple-200 text-sm rounded-lg border border-purple-400/30"},(0,a.v_)(e),1))),128))])])):(0,a.Q3)("",!0),ot.selectedRequest?.internet_purposes?.length?((0,a.uX)(),(0,a.CE)("div",$e,[t[73]||(t[73]=(0,a.Lk)("span",{class:"text-base text-gray-300 font-medium"},"Internet Access Purposes:",-1)),(0,a.Lk)("div",Oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ot.selectedRequest.internet_purposes,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-3 py-1 bg-green-600/30 text-green-200 text-sm rounded-lg border border-green-400/30"},(0,a.v_)(e),1))),128))])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])])])):(0,a.Q3)("",!0),ot.showResponseModal?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t[27]||(t[27]=(...e)=>ot.closeResponseModal&&ot.closeResponseModal(...e))},[(0,a.Lk)("div",{class:"backdrop-blur-md rounded-2xl border-2 border-blue-400/30 max-w-2xl w-full shadow-2xl",style:{background:"linear-gradient(\n            135deg,\n            #1e3a8a 0%,\n            #1e40af 25%,\n            #1d4ed8 50%,\n            #1e40af 75%,\n            #1e3a8a 100%\n          )"},onClick:t[26]||(t[26]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Ve,[(0,a.Lk)("div",He,[t[76]||(t[76]=(0,a.Lk)("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-reply text-white"})],-1)),(0,a.Lk)("div",null,[t[75]||(t[75]=(0,a.Lk)("h3",{class:"text-xl font-bold text-white"},"Respond to DICT",-1)),(0,a.Lk)("p",ze,(0,a.v_)(ot.formatRequestId(ot.selectedRequest?.id))+" - "+(0,a.v_)(ot.selectedRequest?.staff_name),1)])]),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>ot.closeResponseModal&&ot.closeResponseModal(...e)),class:"p-2 rounded-lg bg-red-600/20 hover:bg-red-600/30 text-red-300 hover:text-white transition-colors"},[...t[77]||(t[77]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,a.Lk)("div",Be,[ot.selectedRequest?.divisional_response_to_dict?((0,a.uX)(),(0,a.CE)("div",Je,[t[79]||(t[79]=(0,a.Lk)("h4",{class:"text-sm font-semibold text-green-300 mb-2"},"Your Previous Response:",-1)),(0,a.Lk)("p",Ye,(0,a.v_)(ot.selectedRequest.divisional_response_to_dict),1),ot.selectedRequest.divisional_response_date?((0,a.uX)(),(0,a.CE)("div",Ge,[(0,a.Lk)("span",Ze,[t[78]||(t[78]=(0,a.Lk)("i",{class:"fas fa-clock mr-1"},null,-1)),(0,a.eW)(" Sent: "+(0,a.v_)(ot.formatDate(ot.selectedRequest.divisional_response_date)),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",et,[(0,a.Lk)("div",null,[t[80]||(t[80]=(0,a.Lk)("label",{class:"block text-base font-medium text-green-200 mb-2"}," Your Response to ICT Director ",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[23]||(t[23]=e=>ot.responseText=e),rows:"6",class:"w-full px-4 py-3 bg-white/10 border border-green-400/30 rounded-lg focus:border-green-400 focus:outline-none text-white placeholder-green-200/60 backdrop-blur-sm resize-none",placeholder:`Write your response to DICT regarding Request #${ot.selectedRequest?.id}...`},null,8,tt),[[a.Jo,ot.responseText]])]),(0,a.Lk)("div",st,[(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>ot.closeResponseModal&&ot.closeResponseModal(...e)),class:"px-4 py-2 bg-gray-600/30 hover:bg-gray-600/50 text-gray-200 text-sm rounded-lg transition-colors border border-gray-400/30"}," Cancel "),(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>ot.submitModalResponse&&ot.submitModalResponse(...e)),disabled:!ot.responseText.trim()||ot.submittingModalResponse,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[ot.submittingModalResponse?((0,a.uX)(),(0,a.CE)("i",lt)):((0,a.uX)(),(0,a.CE)("i",rt)),(0,a.eW)(" "+(0,a.v_)(ot.submittingModalResponse?"Sending...":"Send Response"),1)],8,at)])])])])])):(0,a.Q3)("",!0)])}s(4114),s(8111),s(2489),s(7588);var it=s(1387),nt=s(5498),dt=s(8966),ct=s(1127),ut=s(9189),pt={name:"DictRecommendations",components:{Header:nt.A,ModernSidebar:dt.A},setup(){const e=(0,it.rd)(),{requireRole:t,ROLES:s}=(0,ct.h)(),l=(0,a.KR)(!1),r=(0,a.KR)([]),o=(0,a.Kh)({}),i=(0,a.Kh)({}),n=(0,a.KR)({current_page:1,last_page:1,per_page:10,total:0}),d=(0,a.KR)(""),c=(0,a.KR)(""),u=(0,a.KR)(""),p=(0,a.KR)(""),b=(0,a.KR)(null),m=(0,a.KR)(!1),v=(0,a.KR)(!1),g=(0,a.KR)(null),f=(0,a.KR)(""),x=(0,a.KR)(!1),h={jeeva_access:"Jeeva Access",wellsoft:"Wellsoft",internet_access_request:"Internet Access"},k={pending:"Pending",pending_hod:"Pending HOD",hod_approved:"HOD Approved",pending_divisional:"Pending Divisional",divisional_approved:"Divisional Approved",pending_ict_director:"Pending ICT Director",ict_director_approved:"ICT Approved",ict_director_rejected:"DICT Rejected",dict_rejected:"DICT Rejected",implemented:"Implemented",rejected:"Rejected"},y=(0,a.EW)(()=>r.value.length),_=(0,a.EW)(()=>{let e=[...r.value];if(d.value){const t=d.value.toLowerCase().trim();e=e.filter(e=>(e.staff_name||"").toLowerCase().includes(t)||(e.pf_number||"").toLowerCase().includes(t)||(e.id||"").toString().includes(t)||`#${e.id}`.toLowerCase().includes(t)||W(e.id).toLowerCase().includes(t))}return c.value&&(e=e.filter(e=>e.status===c.value)),u.value&&(e=e.filter(e=>{const t=Array.isArray(e.request_type)?e.request_type:[e.request_type];return t.includes(u.value)})),"with_comments"===p.value?e=e.filter(e=>e.ict_director_comments&&""!==e.ict_director_comments.trim()):"without_comments"===p.value&&(e=e.filter(e=>!e.ict_director_comments||""===e.ict_director_comments.trim())),e.sort((e,t)=>{const s=new Date(e.ict_director_comments_date||e.dict_rejection_date||e.updated_at||0),a=new Date(t.ict_director_comments_date||t.dict_rejection_date||t.updated_at||0);return a-s})}),w=(0,a.EW)(()=>!!(d.value||c.value||u.value||p.value)),L=()=>{b.value&&clearTimeout(b.value),b.value=setTimeout(()=>{d.value,E(1)},300)},R=()=>{c.value,u.value,p.value,E(1)},C=()=>{d.value="",E(1)},q=()=>{d.value="",c.value="",u.value="",p.value="",E(1)},S=()=>{c.value="",R()},D=()=>{u.value="",R()},A=()=>{p.value="",R()},E=async(e=1)=>{try{l.value=!0;const t={page:e,per_page:10};d.value&&d.value.trim()&&(t.search=d.value.trim()),c.value&&(t.status=c.value),u.value&&(t.request_type=u.value),p.value&&("with_comments"===p.value?t.has_comments=!0:"without_comments"===p.value&&(t.has_comments=!1));const s=await ut["default"].getDictRecommendations(t);s.success||(s.data={success:!0,data:[{id:1,staff_name:"John Doe",pf_number:"PF12345",request_type:["wellsoft","jeeva_access"],status:"dict_rejected",dict_rejection_reason:null,dict_rejection_date:null,dict_name:null,ict_director_comments:"REJECTION: The requested Wellsoft modules require additional security clearance. Please provide updated documentation before proceeding. The HR Management module access needs department head approval.",ict_director_name:"Dr. Smith (ICT Director)",ict_director_comments_date:"2024-01-14",wellsoft_modules_selected:["Financial Management","HR Management"],jeeva_modules_selected:["Patient Records","Lab Results"],access_type:"permanent",module_requested_for:"use",divisional_response_to_dict:null,divisional_response_date:null},{id:2,staff_name:"Jane Smith",pf_number:"PF67890",request_type:["internet_access_request"],status:"ict_director_approved",dict_rejection_reason:null,dict_rejection_date:null,dict_name:null,ict_director_comments:"APPROVED: Standard internet access granted for research and email communication. RECOMMENDATION: Monitor usage for compliance with hospital policies and ensure VPN access is configured for remote work.",ict_director_name:"Dr. Johnson (ICT Director)",ict_director_comments_date:"2024-01-16",internet_purposes:["Research","Email Communication"],access_type:"temporary",temporary_until:"2024-06-15",module_requested_for:"use",divisional_response_to_dict:"Thank you for the approval. We will monitor usage closely.",divisional_response_date:"2024-01-17"}],pagination:{current_page:1,last_page:1,per_page:10,total:2}});const a={data:s.data};a.data,a.data.success?(a.data.data,r.value=a.data.data,n.value=a.data.pagination||{current_page:1,last_page:1,per_page:10,total:a.data.data.length},a.data.data.forEach(e=>{o[e.id]||(o[e.id]=""),i[e.id]=!1})):console.error("âŒ API returned error:",a.data.message)}catch(t){console.error("ðŸ’¥ Error fetching dict recommendations:",t),console.error("Response status:",t.response?.status),console.error("Response data:",t.response?.data),r.value=[]}finally{l.value=!1}},F=()=>{E(n.value.current_page)},T=e=>{e>=1&&e<=n.value.last_page&&E(e)},j=async e=>{if(o[e]&&!i[e])try{i[e]=!0,o[e];const t=await ut["default"].submitDivisionalResponse(e,{response:o[e],divisional_response_date:(new Date).toISOString()});t.success?(o[e]="",alert("Response sent successfully!"),F()):(console.warn("âš ï¸ Response submission failed:",t.error),alert("Failed to send response: "+(t.error||"Unknown error")+"\n\nNote: This is expected since the backend endpoint is not implemented yet."))}catch(t){console.error("ðŸ’¥ Error sending response:",t),console.error("Error details:",{message:t.message,stack:t.stack,requestId:e,comment:o[e]}),alert("Failed to send response. Please try again.\n\nError: "+t.message+"\n\nNote: This is expected if backend is not implemented yet.")}finally{i[e]=!1}},I=e=>h[e]||e,X=e=>k[e]||e,M=e=>{const t={pending:"bg-yellow-600/30 text-yellow-200 border-yellow-400/30",pending_hod:"bg-orange-600/30 text-orange-200 border-orange-400/30",hod_approved:"bg-blue-600/30 text-blue-200 border-blue-400/30",pending_divisional:"bg-purple-600/30 text-purple-200 border-purple-400/30",divisional_approved:"bg-green-600/30 text-green-200 border-green-400/30",pending_ict_director:"bg-indigo-600/30 text-indigo-200 border-indigo-400/30",ict_director_approved:"bg-teal-600/30 text-teal-200 border-teal-400/30",ict_director_rejected:"bg-red-600/30 text-red-200 border-red-400/30",dict_rejected:"bg-red-600/30 text-red-200 border-red-400/30",implemented:"bg-green-700/30 text-green-100 border-green-500/30",rejected:"bg-red-600/30 text-red-200 border-red-400/30"};return t[e]||"bg-gray-600/30 text-gray-200 border-gray-400/30"},Q=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return e}},W=e=>e?`REQ-${e.toString().padStart(6,"0")}`:"N/A",P=e=>e.wellsoft_modules_selected&&e.wellsoft_modules_selected.length>0||e.jeeva_modules_selected&&e.jeeva_modules_selected.length>0||e.internet_purposes&&e.internet_purposes.length>0,U=t=>{e.push(`/both-service-form/${t}`)},N=e=>"ict_director_rejected"===e||"dict_rejected"===e,K=e=>{},$=e=>{g.value=e,m.value=!0},O=()=>{m.value=!1,g.value=null},V=e=>{g.value=e,f.value=o[e.id]||"",v.value=!0},H=()=>{v.value=!1,g.value=null,f.value=""},z=async()=>{if(f.value.trim()&&!x.value&&g.value)try{x.value=!0,g.value.id,f.value;const e=await ut["default"].submitDivisionalResponse(g.value.id,{response:f.value,divisional_response_date:(new Date).toISOString()});e.success?(f.value="",o[g.value.id]="",alert("Response sent successfully!"),H(),F()):(console.warn("âš ï¸ Response submission failed:",e.error),alert("Failed to send response: "+(e.error||"Unknown error")+"\n\nNote: This is expected since the backend endpoint is not implemented yet."))}catch(e){console.error("ðŸ’¥ Error sending response:",e),alert("Failed to send response. Please try again.\n\nError: "+e.message+"\n\nNote: This is expected if backend is not implemented yet.")}finally{x.value=!1}};return(0,a.sV)(()=>{t([s.DIVISIONAL_DIRECTOR]),ut["default"],ut["default"].submitDivisionalResponse,E()}),{loading:l,recommendations:r,pagination:n,commentForms:o,submittingResponse:i,refreshRecommendations:F,changePage:T,submitResponse:j,getRequestTypeLabel:I,getStatusLabel:X,getStatusClass:M,formatDate:Q,formatRequestId:W,hasModules:P,viewFullRequest:U,isRejectedByDict:N,respondToRecommendation:K,searchQuery:d,statusFilter:c,requestTypeFilter:u,commentsFilter:p,filteredRecommendations:_,totalRecommendations:y,hasActiveFilters:w,debouncedSearch:L,applyFilters:R,clearSearch:C,clearAllFilters:q,clearStatusFilter:S,clearRequestTypeFilter:D,clearCommentsFilter:A,showDetailsModal:m,showResponseModal:v,selectedRequest:g,responseText:f,submittingModalResponse:x,viewRequestDetails:$,closeDetailsModal:O,openResponseModal:V,closeResponseModal:H,submitModalResponse:z}}},bt=s(1241);const mt=(0,bt.A)(pt,[["render",ot],["__scopeId","data-v-091e6114"]]);var vt=mt},2778:function(e,t,s){s.r(t),s.d(t,{default:function(){return Re}});var a=s(5796);const l={class:"flex flex-col h-screen"},r={class:"flex flex-1 overflow-hidden"},o={class:"sidebar-narrow"},i={class:"flex-1 p-4 bg-blue-900 overflow-y-auto"},n={class:"max-w-13 mx-auto"},d={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},c={class:"grid grid-cols-4 gap-4 mb-6"},u={class:"bg-yellow-600/25 border border-yellow-400/40 p-4 rounded-lg"},p={class:"text-white text-3xl font-bold"},b={class:"bg-green-600/25 border border-green-400/40 p-4 rounded-lg"},m={class:"text-white text-3xl font-bold"},v={class:"bg-red-600/25 border border-red-400/40 p-4 rounded-lg"},g={class:"text-white text-3xl font-bold"},f={class:"bg-blue-600/25 border border-blue-400/40 p-4 rounded-lg"},x={class:"text-white text-3xl font-bold"},h={class:"bg-white/10 rounded-lg p-4 mb-6"},k={class:"flex gap-4"},y={class:"bg-white/10 rounded-lg relative",style:{overflow:"visible !important"}},_={class:"w-full",style:{overflow:"visible !important"}},w={style:{overflow:"visible !important"}},L={class:"px-4 py-3"},R={class:"text-white font-bold text-sm"},C={class:"text-purple-300 text-xs"},q={class:"px-4 py-4"},S={class:"flex flex-wrap gap-1"},D={key:0,class:"px-2 py-1 rounded text-xs font-bold bg-blue-100 text-blue-800"},A={key:1,class:"px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-800"},E={key:2,class:"px-2 py-1 rounded text-xs font-bold bg-cyan-100 text-cyan-800"},F={class:"px-4 py-3"},T={class:"text-white font-bold text-sm"},j={class:"text-blue-300 text-xs"},I={key:0,class:"text-teal-300 text-xs"},X={class:"text-blue-200 text-xs"},M={class:"px-4 py-3"},Q={class:"text-white font-bold text-sm"},W={class:"text-blue-300 text-xs"},P={class:"px-4 py-3"},U={class:"flex flex-col"},N={key:0,class:"mb-1 rounded text-xs font-semibold inline-block bg-red-900/30 text-red-300 border border-red-500/40 px-2 py-0.5",style:{width:"fit-content"}},K={key:1,class:"mt-1 px-1.5 py-0.5 rounded text-[10px] font-semibold bg-emerald-900/30 text-emerald-300 border border-emerald-500/40 w-fit"},$={class:"px-4 py-4"},O={class:"flex items-center space-x-2"},V=["onClick","disabled"],H={key:0},z={key:1},B={key:1,class:"text-xs text-blue-200 ml-1"},J={class:"px-4 py-3 text-center relative"},Y={class:"flex justify-center three-dot-menu"},G=["onClick","aria-label"],Z=["onClick"],ee={class:"font-semibold"},te={key:0,class:"text-center py-12"},se={class:"text-blue-300 text-lg"},ae={key:1,class:"px-4 py-3 border-t border-blue-300/30"},le={class:"text-blue-300 text-lg font-bold"},re={class:"bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl shadow-2xl max-w-md w-full p-6 border-2 border-blue-400/40 transform transition-all duration-300 animate-scale-up"},oe={class:"flex items-center justify-between mb-4"},ie={class:"mb-6"},ne={class:"bg-blue-800/40 rounded-lg p-3 border border-blue-400/30"},de={class:"flex gap-3"},ce=["disabled"],ue={key:0,class:"fas fa-spinner fa-spin mr-2"},pe={key:1,class:"fas fa-times-circle mr-2"};function be(e,t,s,be,me,ve){const ge=(0,a.g2)("Header"),fe=(0,a.g2)("ModernSidebar"),xe=(0,a.g2)("AppFooter"),he=(0,a.g2)("UnifiedLoadingBanner"),ke=(0,a.g2)("RequestTimeline");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(ge),(0,a.Lk)("div",r,[(0,a.Lk)("div",o,[(0,a.bF)(fe)]),(0,a.Lk)("main",i,[(0,a.Lk)("div",n,[me.error?((0,a.uX)(),(0,a.CE)("div",d,[t[9]||(t[9]=(0,a.Lk)("h3",{class:"font-bold"},"Error",-1)),(0,a.Lk)("p",null,(0,a.v_)(me.error),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ve.fetchRequests&&ve.fetchRequests(...e)),class:"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Retry ")])):(0,a.Q3)("",!0),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[t[10]||(t[10]=(0,a.Lk)("h3",{class:"text-yellow-200 text-lg font-bold"},"Pending Divisional Approval",-1)),(0,a.Lk)("p",p,(0,a.v_)(me.stats.pendingDivisional),1)]),(0,a.Lk)("div",b,[t[11]||(t[11]=(0,a.Lk)("h3",{class:"text-green-200 text-lg font-bold"},"Divisional Approved",-1)),(0,a.Lk)("p",m,(0,a.v_)(me.stats.divisionalApproved),1)]),(0,a.Lk)("div",v,[t[12]||(t[12]=(0,a.Lk)("h3",{class:"text-red-200 text-lg font-bold"},"Divisional Rejected",-1)),(0,a.Lk)("p",g,(0,a.v_)(me.stats.divisionalRejected),1)]),(0,a.Lk)("div",f,[t[13]||(t[13]=(0,a.Lk)("h3",{class:"text-blue-200 text-lg font-bold"},"Total Requests",-1)),(0,a.Lk)("p",x,(0,a.v_)(me.stats.total),1)])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>me.searchQuery=e),type:"text",placeholder:"Search by staff name, PF number, or department...",class:"flex-1 px-4 py-3 bg-white/20 border border-blue-300/30 rounded text-white placeholder-blue-200/60 text-base"},null,512),[[a.Jo,me.searchQuery]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>me.statusFilter=e),class:"px-4 py-3 bg-white/20 border border-blue-300/30 rounded text-white text-base status-select"},[...t[14]||(t[14]=[(0,a.Fv)('<option value="" data-v-11b491e7>All Statuses</option><option value="pending" data-v-11b491e7>Pending Submission</option><option value="pending_hod" data-v-11b491e7>Pending HOD</option><option value="hod_approved" data-v-11b491e7>Pending Divisional</option><option value="divisional_approved" data-v-11b491e7>Divisional Approved</option><option value="divisional_rejected" data-v-11b491e7>Divisional Rejected</option><option value="approved" data-v-11b491e7>Fully Approved</option><option value="implemented" data-v-11b491e7>Implemented</option><option value="completed" data-v-11b491e7>Completed</option><option value="cancelled" data-v-11b491e7>Cancelled</option>',10)])],512),[[a.u1,me.statusFilter]]),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>ve.refreshRequests&&ve.refreshRequests(...e)),class:"px-6 py-3 bg-teal-600 text-white rounded hover:bg-teal-700 text-base font-bold"}," Refresh ")])]),(0,a.Lk)("div",y,[(0,a.Lk)("table",_,[t[17]||(t[17]=(0,a.Lk)("thead",{class:"bg-blue-800/50"},[(0,a.Lk)("tr"),(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"},"Request ID"),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"},"Request Type"),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"}," Personal Information "),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"}," HOD Approval Date "),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"}," Current Status "),(0,a.Lk)("th",{class:"px-4 py-3 text-left text-blue-100 text-sm font-bold"},"SMS Status"),(0,a.Lk)("th",{class:"px-4 py-3 text-center text-blue-100 text-sm font-bold"},"Actions")])],-1)),(0,a.Lk)("tbody",w,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ve.filteredRequests,s=>((0,a.uX)(),(0,a.CE)("tr",{key:s.id,class:"border-t border-blue-300/20 hover:bg-blue-700/30",style:{overflow:"visible !important"}},[(0,a.Lk)("td",L,[(0,a.Lk)("div",R,(0,a.v_)(s.request_id||`REQ-${s.id.toString().padStart(6,"0")}`),1),(0,a.Lk)("div",C,"ID: "+(0,a.v_)(s.id),1)]),(0,a.Lk)("td",q,[(0,a.Lk)("div",S,[ve.hasService(s,"jeeva")?((0,a.uX)(),(0,a.CE)("span",D," Jeeva ")):(0,a.Q3)("",!0),ve.hasService(s,"wellsoft")?((0,a.uX)(),(0,a.CE)("span",A," Wellsoft ")):(0,a.Q3)("",!0),ve.hasService(s,"internet")?((0,a.uX)(),(0,a.CE)("span",E," Internet ")):(0,a.Q3)("",!0)])]),(0,a.Lk)("td",F,[(0,a.Lk)("div",T,(0,a.v_)(s.staff_name||s.full_name||"Unknown User"),1),(0,a.Lk)("div",j,(0,a.v_)(s.phone||s.phone_number||"No phone"),1),s.pf_number?((0,a.uX)(),(0,a.CE)("div",I," PF: "+(0,a.v_)(s.pf_number),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",X," Dept: "+(0,a.v_)(s.department||"Unknown"),1)]),(0,a.Lk)("td",M,[(0,a.Lk)("div",Q,(0,a.v_)(ve.formatDate(s.hod_approved_at||s.hod_approval_date)),1),(0,a.Lk)("div",W,(0,a.v_)(ve.formatTime(s.hod_approved_at||s.hod_approval_date)),1)]),(0,a.Lk)("td",P,[(0,a.Lk)("div",U,["skipped"===s.divisional_status?((0,a.uX)(),(0,a.CE)("span",N," No Divisional Director â€” Stage Skipped ")):(0,a.Q3)("",!0),(0,a.Lk)("span",{class:(0,a.C4)([ve.getStatusBadgeClass(s.status),"rounded text-sm font-bold inline-block"]),style:{padding:"4px 8px",width:"fit-content"}},(0,a.v_)(ve.getStatusText(s.status)),3),s.has_signature||s.signature?((0,a.uX)(),(0,a.CE)("span",K," Digitally signed ")):(0,a.Q3)("",!0)])]),(0,a.Lk)("td",$,[(0,a.Lk)("div",O,[(0,a.Lk)("div",{class:(0,a.C4)(["w-3 h-3 rounded-full",ve.getSmsStatusColor(ve.getRelevantSmsStatus(s))])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-medium",ve.getSmsStatusTextColor(ve.getRelevantSmsStatus(s))])},(0,a.v_)(ve.getSmsStatusText(ve.getRelevantSmsStatus(s))),3),["failed","pending"].includes(ve.getRelevantSmsStatus(s))?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:(0,a.D$)(t=>e.retrySendSms(s),["stop"]),disabled:e.isRetrying&&e.isRetrying(s.id),class:"ml-2 px-2 py-1 text-xs rounded border border-blue-300/50 text-blue-100 hover:bg-blue-700/40 disabled:opacity-50",title:"Retry sending SMS"},[e.isRetrying&&e.isRetrying(s.id)?((0,a.uX)(),(0,a.CE)("span",z,[...t[15]||(t[15]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),(0,a.eW)("Retrying",-1)])])):((0,a.uX)(),(0,a.CE)("span",H,"Retry"))],8,V)):(0,a.Q3)("",!0),e.getRetryAttempts&&e.getRetryAttempts(s.id)>0?((0,a.uX)(),(0,a.CE)("span",B," ("+(0,a.v_)(e.getRetryAttempts(s.id))+") ",1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("td",J,[(0,a.Lk)("div",Y,[(0,a.Lk)("button",{onClick:(0,a.D$)(e=>ve.toggleDropdown(s.id),["stop"]),class:(0,a.C4)(["three-dot-button p-2 text-white hover:bg-blue-600/40 rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 hover:scale-105 active:scale-95",{"bg-blue-600/40 shadow-lg":me.openDropdownId===s.id}]),"aria-label":"Actions for request "+(s.request_id||"REQ-"+s.id.toString().padStart(6,"0"))},[...t[16]||(t[16]=[(0,a.Lk)("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])],10,G),(0,a.bo)((0,a.Lk)("div",{class:"dropdown-menu absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-xl border border-gray-200 z-[10000] py-1 min-w-max",onClick:(0,a.D$)(()=>{},["stop"]),style:{"box-shadow":"0 10px 25px rgba(0, 0, 0, 0.15),\n                            0 4px 6px rgba(0, 0, 0, 0.1)"}},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ve.getAvailableActions(s),(e,t)=>((0,a.uX)(),(0,a.CE)("button",{key:e.key,onClick:(0,a.D$)(t=>ve.executeAction(e.key,s),["stop"]),class:(0,a.C4)(["w-full text-left px-4 py-3 text-lg transition-all duration-200 flex items-center space-x-3 group",[ve.getActionButtonClass(e.key),{"border-t border-gray-200":t>0&&ve.shouldShowSeparator(e,ve.getAvailableActions(s)[t-1])}]])},[(0,a.Lk)("i",{class:(0,a.C4)([[e.icon,ve.getActionIconClass(e.key)],"flex-shrink-0 transition-colors duration-200 text-lg"])},null,2),(0,a.Lk)("span",ee,(0,a.v_)(e.label),1)],10,Z))),128))],512),[[a.aG,me.openDropdownId===s.id]])])])]))),128))])]),0===ve.filteredRequests.length?((0,a.uX)(),(0,a.CE)("div",te,[t[18]||(t[18]=(0,a.Lk)("h3",{class:"text-white text-2xl font-bold mb-2"},"No requests found",-1)),(0,a.Lk)("p",se,(0,a.v_)(me.searchQuery||me.statusFilter?"No HOD-approved requests from your department are pending your approval.":"Try adjusting your filters"),1)])):(0,a.Q3)("",!0),ve.filteredRequests.length>0?((0,a.uX)(),(0,a.CE)("div",ae,[(0,a.Lk)("div",le," Showing "+(0,a.v_)(ve.filteredRequests.length)+" of "+(0,a.v_)(me.requests.length)+" requests ",1)])):(0,a.Q3)("",!0)]),(0,a.bF)(xe)])])]),me.isLoading?((0,a.uX)(),(0,a.Wv)(he,{key:0,"loading-title":"Loading Access Requests","loading-subtitle":"Fetching HOD-approved requests awaiting divisional review...","department-title":"Divisional Director Dashboard"})):(0,a.Q3)("",!0),(0,a.bF)(ke,{show:me.showTimeline,"request-id":me.selectedRequestId,onClose:ve.closeTimeline,onUpdated:ve.handleTimelineUpdate},null,8,["show","request-id","onClose","onUpdated"]),me.showCancelModal?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] p-4",onClick:t[8]||(t[8]=(0,a.D$)((...e)=>ve.closeCancelModal&&ve.closeCancelModal(...e),["self"]))},[(0,a.Lk)("div",re,[(0,a.Lk)("div",oe,[t[20]||(t[20]=(0,a.Lk)("div",{class:"flex items-center space-x-3"},[(0,a.Lk)("div",{class:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle text-red-300 text-xl"})]),(0,a.Lk)("h3",{class:"text-xl font-bold text-white"},"Confirm Cancellation")],-1)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>ve.closeCancelModal&&ve.closeCancelModal(...e)),class:"text-blue-200 hover:text-white transition-colors duration-200"},[...t[19]||(t[19]=[(0,a.Lk)("i",{class:"fas fa-times text-xl"},null,-1)])])]),(0,a.Lk)("div",ie,[t[22]||(t[22]=(0,a.Lk)("p",{class:"text-blue-100 text-lg mb-4 leading-relaxed font-medium"}," Are you sure you want to cancel this request? This action cannot be undone. ",-1)),(0,a.Lk)("div",ne,[t[21]||(t[21]=(0,a.Lk)("label",{class:"block text-base font-semibold text-blue-200 mb-2"},[(0,a.eW)(" Cancellation Reason "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>me.cancelReason=e),placeholder:"Please provide a reason for cancellation...",class:"w-full px-3 py-2 bg-white border-2 border-blue-300/50 rounded-lg focus:border-blue-400 focus:outline-none text-gray-900 placeholder-gray-400 transition-all duration-300 resize-none text-base",rows:"3"},null,512),[[a.Jo,me.cancelReason]])])]),(0,a.Lk)("div",de,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>ve.closeCancelModal&&ve.closeCancelModal(...e)),class:"flex-1 px-4 py-2.5 bg-blue-800/50 text-white rounded-lg hover:bg-blue-800 transition-all duration-300 font-semibold border border-blue-400/30 text-base"},[...t[23]||(t[23]=[(0,a.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,a.eW)(" Keep Request ",-1)])]),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>ve.confirmCancel&&ve.confirmCancel(...e)),disabled:!me.cancelReason||""===me.cancelReason.trim()||me.isCancelling,class:(0,a.C4)(["flex-1 px-4 py-2.5 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center text-base",!me.cancelReason||""===me.cancelReason.trim()||me.isCancelling?"bg-gray-500 text-gray-300 cursor-not-allowed opacity-50":"bg-red-600 text-white hover:bg-red-700 shadow-lg hover:shadow-xl transform hover:scale-105"])},[me.isCancelling?((0,a.uX)(),(0,a.CE)("i",ue)):((0,a.uX)(),(0,a.CE)("i",pe)),(0,a.eW)(" "+(0,a.v_)(me.isCancelling?"Cancelling...":"Cancel Request"),1)],10,ce)])])])):(0,a.Q3)("",!0)])}s(4114),s(8111),s(2489),s(3579);var me=s(5498),ve=s(8966),ge=s(9101),fe=s(373),xe=s(1445),he=s(4063),ke=s(2398),ye=s(1127),_e={name:"DivisionalRequestList",components:{Header:me.A,ModernSidebar:ve.A,AppFooter:ge.A,RequestTimeline:fe.A,UnifiedLoadingBanner:xe.A},setup(){const{userRole:e}=(0,ye.h)();return{userRole:e}},data(){return{requests:[],searchQuery:"",statusFilter:"",isLoading:!1,stats:{pendingDivisional:0,divisionalApproved:0,divisionalRejected:0,total:0},error:null,openDropdownId:null,retryAttempts:{},retryTimers:{},maxRetryAttempts:5,retryDelays:[3e3,7e3,15e3,3e4,6e4],showTimeline:!1,selectedRequestId:null,showCancelModal:!1,requestToCancel:null,cancelReason:"",isCancelling:!1,$statusUtils:ke.Ay,fetchTimeout:null,isFetchingData:!1}},computed:{filteredRequests(){if(!Array.isArray(this.requests))return console.warn("DivisionalRequestList: requests is not an array:",this.requests),[];let e=this.requests;if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter(e=>(e.staff_name||e.full_name||"").toLowerCase().includes(t)||(e.pf_number||"").toLowerCase().includes(t)||(e.department||"").toLowerCase().includes(t)||(e.request_id||"").toLowerCase().includes(t))}return this.statusFilter&&(e=e.filter(e=>e.status===this.statusFilter)),e.sort((e,t)=>{const s=new Date(e.hod_approved_at||e.hod_approval_date||0),a=new Date(t.hod_approved_at||t.hod_approval_date||0);return s-a})}},async mounted(){try{const e=localStorage.getItem("auth_token");e?await this.fetchRequests():(this.isLoading=!0,window.addEventListener("auth-ready",this.onAuthReady,{once:!0})),this._poller=setInterval(()=>this.fetchRequests({silent:!0}),3e4),document.addEventListener("click",this.closeAllDropdowns)}catch(e){console.error("DivisionalRequestList: Error during mount:",e),this.error="Failed to initialize component: "+e.message,this.isLoading=!1}},beforeUnmount(){document.removeEventListener("click",this.closeAllDropdowns),this._poller&&clearInterval(this._poller),window.removeEventListener("auth-ready",this.onAuthReady)},methods:{onAuthReady(){this.fetchRequests()},async fetchRequests(e={silent:!1}){if(!this.isFetchingData){this.isFetchingData=!0,e?.silent||(this.isLoading=!0,this.error=null);try{const e=await he.A.getDivisionalRequests({search:this.searchQuery||void 0,status:this.statusFilter||void 0,per_page:50});if(!e.success)throw new Error(e.error||"Failed to fetch requests");{const t=e.data?.data||e.data||{};this.requests=Array.isArray(t.data)?t.data:Array.isArray(t)?t:[],this.requests.length,e.data,await this.fetchStatistics(),"function"===typeof this.initAutoRetryForList&&this.initAutoRetryForList()}}catch(t){if("Request aborted"===t.message||t.message?.includes("aborted")||t.message?.includes("canceled"))return this.isFetchingData=!1,void(e?.silent||(this.isLoading=!1));console.error("Error fetching requests:",t),e?.silent||(this.error="Unable to load combined access requests. Please check your connection and try again."),this.requests=[],this.calculateStats()}finally{this.isFetchingData=!1,e?.silent||(this.isLoading=!1)}}},async fetchStatistics(){try{const e=await he.A.getDivisionalStatistics();e.success?this.stats=e.data:this.calculateStats()}catch(e){console.error("Error fetching statistics:",e),this.calculateStats()}},calculateStats(){const e=Array.isArray(this.requests)?this.requests:[];this.stats={pending:e.filter(e=>"pending"===e.status||"pending_hod"===e.status).length,hodApproved:e.filter(e=>"hod_approved"===e.status).length,pendingDivisional:e.filter(e=>"hod_approved"===e.status).length,divisionalApproved:e.filter(e=>"divisional_approved"===e.status).length,divisionalRejected:e.filter(e=>"divisional_rejected"===e.status).length,approved:e.filter(e=>"approved"===e.status).length,implemented:e.filter(e=>"implemented"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length,total:e.length}},async refreshRequests(){this.fetchTimeout&&clearTimeout(this.fetchTimeout),this.fetchTimeout=setTimeout(()=>{this.fetchRequests()},300)},viewAndProcessRequest(e){this.$router.push(`/divisional-dashboard/both-service-form/${e}`)},editRequest(e){this.$router.push(`/divisional-dashboard/both-service-form/${e}?mode=edit`)},cancelRequest(e){this.requestToCancel=e,this.showCancelModal=!0,this.cancelReason=""},closeCancelModal(){this.showCancelModal=!1,this.requestToCancel=null,this.cancelReason="",this.isCancelling=!1},async confirmCancel(){if(this.cancelReason&&""!==this.cancelReason.trim()){this.isCancelling=!0;try{this.requestToCancel;const e=await he.A.cancelRequest(this.requestToCancel,this.cancelReason.trim());if(!e.success)throw new Error(e.error||"Failed to cancel request");{const e=this.requests.findIndex(e=>e.id===this.requestToCancel);-1!==e&&(this.requests[e].divisional_status="cancelled",this.requests[e].status="cancelled"),this.calculateStats(),this.closeCancelModal(),alert("Request cancelled successfully!")}}catch(e){console.error("Error cancelling request:",e),alert("Error cancelling request: "+e.message),this.isCancelling=!1}}},hasService(e,t){return e.services&&e.services.includes(t)||e.request_types&&e.request_types.some(e=>"jeeva"===t&&"jeeva_access"===e||"wellsoft"===t&&"wellsoft"===e||"internet"===t&&"internet_access_request"===e)},canEdit(e){return"hod_approved"===e.status},canCancel(e){const t=["divisional_rejected","cancelled","approved","implemented","completed"];return!t.includes(e.status)},formatDate(e){if(!e)return"N/A";const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatTime(e){if(!e)return"N/A";const t=new Date(e);return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},getStatusBadgeClass(e){return this.$statusUtils.getStatusBadgeClass(e)},getStatusIcon(e){return this.$statusUtils.getStatusIcon(e)},getStatusText(e){return this.$statusUtils.getStatusText(e,"DivisionalRequestList")},toggleDropdown(e){this.openDropdownId=this.openDropdownId===e?null:e,this.openDropdownId===e&&this.$nextTick(()=>{})},closeAllDropdowns(e){e&&e.target.closest(".three-dot-menu")||(this.openDropdownId=null)},getAvailableActions(e){const t=[],s=e.status,a=["divisional_approved","ict_director_approved","dict_approved","head_it_approved","approved","assigned_to_ict","implementation_in_progress","implemented","completed"].includes(s);return a||"hod_approved"!==s||t.push({key:"view_and_process",label:"Approve",icon:"fas fa-check-circle",color:"green"}),a&&t.push({key:"view_approved_request",label:"View Approved Request",icon:"fas fa-eye",color:"blue"}),this.canCancel(e)&&!a&&t.push({key:"cancel_request",label:"Cancel Request",icon:"fas fa-times"}),t.push({key:"view_timeline",label:"View Timeline",icon:"fas fa-history"}),t},executeAction(e,t){switch(this.closeAllDropdowns(),e){case"view_and_process":this.viewAndProcessRequest(t.id);break;case"view_approved_request":this.viewApprovedRequest(t.id);break;case"edit_request":this.editRequest(t.id);break;case"cancel_request":this.cancelRequest(t.id);break;case"view_timeline":this.viewTimeline(t);break;default:console.warn("Unknown action:",e)}},viewApprovedRequest(e){this.$router.push({path:`/divisional-dashboard/both-service-form/${e}`,query:{mode:"view",readonly:"true"}})},viewTimeline(e){e.id,this.selectedRequestId=e.id,this.showTimeline=!0},closeTimeline(){this.showTimeline=!1,this.selectedRequestId=null},async handleTimelineUpdate(){await this.fetchRequests()},shouldShowSeparator(e,t){const s=["cancel_request"],a=["view_timeline","view_progress"];return!(!s.includes(e.key)||s.includes(t?.key))||!(!a.includes(e.key)||a.includes(t?.key)||"view_and_process"===t?.key)},getRelevantSmsStatus(e){const t=e.divisional_status||e.status;return("divisional_approved"===t||"approved"===t||"dict_approved"===t||"implemented"===t)&&e.sms_to_ict_director_status||"pending"},getSmsStatusText(e){const t={sent:"Delivered",pending:"Pending",failed:"Failed"};return t[e]||"Pending"},getSmsStatusColor(e){const t={sent:"bg-green-500",pending:"bg-yellow-500",failed:"bg-red-500"};return t[e]||"bg-gray-400"},getSmsStatusTextColor(e){const t={sent:"text-green-400",pending:"text-yellow-400",failed:"text-red-400"};return t[e]||"text-gray-400"},getActionButtonClass(e){const t={view_and_process:"text-green-700 hover:bg-green-50 hover:text-green-800",view_approved_request:"text-blue-700 hover:bg-blue-50 hover:text-blue-800",cancel_request:"text-red-700 hover:bg-red-50 hover:text-red-800",view_progress:"text-blue-700 hover:bg-blue-50 hover:text-blue-800",view_timeline:"text-gray-700 hover:bg-gray-50 hover:text-gray-800"};return t[e]||"text-gray-700 hover:bg-gray-50 hover:text-gray-800"},getActionIconClass(e){const t={view_and_process:"text-green-600 group-hover:text-green-700",view_approved_request:"text-blue-600 group-hover:text-blue-700",cancel_request:"text-red-600 group-hover:text-red-700",view_progress:"text-blue-600 group-hover:text-blue-700",view_timeline:"text-gray-600 group-hover:text-gray-700"};return t[e]||"text-gray-600 group-hover:text-gray-700"}}},we=s(1241);const Le=(0,we.A)(_e,[["render",be],["__scopeId","data-v-11b491e7"]]);var Re=Le}}]);
//# sourceMappingURL=divisional.15f0f910.js.map