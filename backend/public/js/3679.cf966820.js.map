{"version":3,"file":"js/3679.cf966820.js","mappings":"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","sources":["webpack://frontend/./src/services/authService.js","webpack://frontend/./src/services/signatureService.js","webpack://frontend/./src/components/common/UnifiedLoadingBanner.vue","webpack://frontend/./src/components/common/UnifiedLoadingBanner.vue?6c78","webpack://frontend/./src/services/ictOfficerService.js","webpack://frontend/./src/components/views/forms/both-service-form.vue","webpack://frontend/./src/components/OrbitingDots.vue","webpack://frontend/./src/components/OrbitingDots.vue?b286","webpack://frontend/./src/services/bothServiceFormService.js","webpack://frontend/./src/components/views/forms/both-service-form.vue?d10c","webpack://frontend/./src/components/footer.vue","webpack://frontend/./src/components/footer.vue?1818"],"sourcesContent":["import axios from 'axios'\n\nconst API_BASE_URL = process.env.VUE_APP_API_URL || 'http://localhost:8000/api'\n\n// Create axios instance with default config\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: parseInt(process.env.VUE_APP_API_TIMEOUT) || 10000,\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json'\n  }\n})\n\n// Add auth token to requests\napiClient.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Handle response errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const status = error.response?.status\n    const method = (error.config?.method || '').toString().toLowerCase()\n    const url = (error.config?.url || '').toString()\n\n    if (status === 401) {\n      // IMPORTANT: Do NOT auto-redirect on login failures, so the login\n      // page can display \"Invalid email or password\" in the shared error banner.\n      const isLoginRequest = method === 'post' && url.includes('/login')\n\n      if (!isLoginRequest) {\n        // Token expired or invalid on authenticated routes\n        localStorage.removeItem('auth_token')\n        localStorage.removeItem('user_data')\n        localStorage.removeItem('session_data')\n        window.location.href = '/login'\n      }\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nexport const authService = {\n  /**\n   * Login user with email and password\n   * @param {Object} credentials - { email, password }\n   * @returns {Promise<Object>} - Login response\n   */\n  async login(credentials) {\n    try {\n      const response = await apiClient.post('/login', credentials)\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Login failed',\n        errors: error.response?.data?.errors || {}\n      }\n    }\n  },\n\n  /**\n   * Logout current user\n   * @returns {Promise<Object>} - Logout response\n   */\n  async logout() {\n    try {\n      const response = await apiClient.post('/logout')\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      // Even if logout API fails, we should clear local state\n      return {\n        success: true,\n        message: 'Logged out locally (API call failed)'\n      }\n    }\n  },\n\n  /**\n   * Logout from all sessions\n   * @returns {Promise<Object>} - Logout all response\n   */\n  async logoutAll() {\n    try {\n      const response = await apiClient.post('/logout-all')\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Logout all failed'\n      }\n    }\n  },\n\n  /**\n   * Get current user data\n   * @returns {Promise<Object>} - User data response\n   */\n  async getCurrentUser() {\n    try {\n      const response = await apiClient.get('/current-user')\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to get user data',\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Get role-based redirect URL\n   * @returns {Promise<Object>} - Redirect URL response\n   */\n  async getRoleBasedRedirect() {\n    try {\n      const response = await apiClient.get('/role-redirect')\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to get redirect URL',\n        status: error.response?.status\n      }\n    }\n  },\n\n  /**\n   * Get active sessions\n   * @returns {Promise<Object>} - Active sessions response\n   */\n  async getActiveSessions() {\n    try {\n      const response = await apiClient.get('/active-sessions')\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to get active sessions'\n      }\n    }\n  },\n\n  /**\n   * Revoke a specific session\n   * @param {number} tokenId - Token ID to revoke\n   * @returns {Promise<Object>} - Revoke session response\n   */\n  async revokeSession(tokenId) {\n    try {\n      const response = await apiClient.post('/revoke-session', {\n        token_id: tokenId\n      })\n      return {\n        success: true,\n        data: response.data\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to revoke session'\n      }\n    }\n  },\n\n  /**\n   * Change password for the currently authenticated user\n   * @param {{ current: string, new: string, confirm: string }} payload\n   * @returns {Promise<Object>} - Change password response\n   */\n  async changePassword(payload) {\n    try {\n      const response = await apiClient.post('/change-password', {\n        current_password: payload.current,\n        password: payload.new,\n        password_confirmation: payload.confirm\n      })\n      return {\n        success: true,\n        data: response.data,\n        message: response.data?.message || 'Password changed successfully.'\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to change password.',\n        errors: error.response?.data?.errors || {}\n      }\n    }\n  },\n\n  /**\n   * Request password reset OTP by phone (public, no auth)\n   * @param {string} phone\n   * @returns {Promise<Object>}\n   */\n  async requestPasswordResetByPhone(phone) {\n    try {\n      const response = await apiClient.post('/password-reset/request-by-phone', { phone })\n      return {\n        success: true,\n        data: response.data,\n        message: response.data?.message\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to send OTP.',\n        errors: error.response?.data?.errors || {}\n      }\n    }\n  },\n\n  /**\n   * Verify password reset OTP (phone + otp)\n   * @param {{ phone: string, otp: string }} payload\n   * @returns {Promise<Object>}\n   */\n  async verifyPasswordResetOtp(payload) {\n    try {\n      const response = await apiClient.post('/password-reset/verify-otp', {\n        phone: payload.phone,\n        otp: payload.otp\n      })\n      return {\n        success: true,\n        data: response.data,\n        message: response.data?.message\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to verify OTP.',\n        errors: error.response?.data?.errors || {}\n      }\n    }\n  },\n\n  /**\n   * Reset password using phone + OTP, returns { user, token }\n   * @param {{ phone: string, otp: string, password: string, password_confirmation: string }} payload\n   * @returns {Promise<Object>}\n   */\n  async resetPasswordWithOtp(payload) {\n    try {\n      const response = await apiClient.post('/password-reset/reset-with-otp', {\n        phone: payload.phone,\n        otp: payload.otp,\n        password: payload.password,\n        password_confirmation: payload.password_confirmation\n      })\n      return {\n        success: true,\n        data: response.data?.data,\n        message: response.data?.message\n      }\n    } catch (error) {\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Failed to reset password.',\n        errors: error.response?.data?.errors || {}\n      }\n    }\n  }\n}\n\nexport default authService\n","import axios from 'axios'\n\nconst API_BASE_URL = process.env.VUE_APP_API_URL || 'http://localhost:8000/api'\n\nclass SignatureService {\n  constructor() {\n    this.api = axios.create({\n      baseURL: API_BASE_URL,\n      timeout: 10000,\n      headers: { 'Content-Type': 'application/json', Accept: 'application/json' }\n    })\n\n    this.api.interceptors.request.use(\n      (config) => {\n        const token = localStorage.getItem('auth_token')\n        if (token) config.headers.Authorization = `Bearer ${token}`\n        return config\n      },\n      (error) => Promise.reject(error)\n    )\n  }\n\n  async sign(documentId) {\n    const res = await this.api.post('/documents/sign', { document_id: documentId })\n    return { success: true, data: res.data }\n  }\n\n  async list(documentId) {\n    const res = await this.api.get(`/documents/${documentId}/signatures`)\n    return { success: true, data: res.data.data }\n  }\n\n  async verify(signatureId) {\n    const res = await this.api.get(`/signatures/${signatureId}/verify`)\n    return { success: res.data.success, data: res.data }\n  }\n}\n\nexport default new SignatureService()\n","<template>\n  <div\n    v-if=\"show\"\n    class=\"fixed inset-0 z-40 flex items-center justify-center pointer-events-none animate-fade-in\"\n  >\n    <div class=\"pointer-events-auto w-full max-w-lg mx-auto\">\n      <!-- Main Loading Card -->\n      <div\n        class=\"relative bg-gradient-to-br from-white/20 via-blue-50/30 to-white/10 border-2 border-blue-300/50 backdrop-blur-xl rounded-3xl p-8 shadow-2xl overflow-hidden\"\n      >\n        <!-- Animated Background Pattern -->\n        <div class=\"absolute inset-0 opacity-10\">\n          <div\n            class=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-slide-across\"\n          ></div>\n          <div\n            class=\"absolute top-4 left-4 w-16 h-16 rounded-full animate-float\"\n            style=\"background: rgba(255, 0, 0, 0.2)\"\n          ></div>\n          <div\n            class=\"absolute bottom-4 right-4 w-20 h-20 bg-blue-400/20 rounded-full animate-float\"\n            style=\"animation-delay: 1s\"\n          ></div>\n          <div\n            class=\"absolute top-1/2 left-8 w-12 h-12 rounded-full animate-float\"\n            style=\"background: rgba(255, 0, 0, 0.15); animation-delay: 2s\"\n          ></div>\n        </div>\n\n        <!-- Hospital Logos and Branding -->\n        <div class=\"relative z-10\">\n          <div class=\"flex items-center justify-center gap-6 mb-6\">\n            <!-- Left Logo -->\n            <div class=\"relative\">\n              <div\n                class=\"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-teal-500/30 rounded-2xl backdrop-blur-sm border-2 border-blue-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300\"\n              >\n                <img\n                  src=\"/assets/images/ngao2.png\"\n                  alt=\"National Shield\"\n                  class=\"max-w-12 max-h-12 object-contain drop-shadow-lg\"\n                />\n              </div>\n              <div\n                class=\"absolute -inset-1 bg-gradient-to-r from-blue-400 to-teal-400 rounded-2xl opacity-20 blur-sm animate-pulse\"\n              ></div>\n            </div>\n\n            <!-- Center Loading Spinner -->\n            <div class=\"relative flex flex-col items-center\">\n              <!-- Main Spinner -->\n              <div class=\"relative mb-3\">\n                <!-- Base circle -->\n                <div class=\"rounded-full h-12 w-12 border-2 border-gray-300/20\"></div>\n                <!-- Red orbiting segment -->\n                <div\n                  :class=\"[\n                    'absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg',\n                    forceSpin ? 'always-spin' : 'animate-spin'\n                  ]\"\n                  style=\"border-top-color: #ff0000; animation-duration: 2s\"\n                ></div>\n                <!-- Blue orbiting segment -->\n                <div\n                  :class=\"[\n                    'absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg',\n                    forceSpin ? 'always-spin' : 'animate-spin'\n                  ]\"\n                  style=\"\n                    border-bottom-color: #0000d1;\n                    animation-direction: reverse;\n                    animation-duration: 1.5s;\n                  \"\n                ></div>\n                <!-- Additional red segment for more dynamic effect -->\n                <div\n                  :class=\"[\n                    'absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg',\n                    forceSpin ? 'always-spin' : 'animate-spin'\n                  ]\"\n                  style=\"border-right-color: rgba(255, 0, 0, 0.7); animation-duration: 2.5s\"\n                ></div>\n                <!-- Additional blue segment -->\n                <div\n                  :class=\"[\n                    'absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg',\n                    forceSpin ? 'always-spin' : 'animate-spin'\n                  ]\"\n                  style=\"\n                    border-left-color: rgba(0, 0, 209, 0.7);\n                    animation-direction: reverse;\n                    animation-duration: 1.8s;\n                  \"\n                ></div>\n              </div>\n\n              <!-- Loading Text -->\n              <div class=\"text-center\">\n                <div class=\"text-white text-2xl font-bold tracking-wide mb-1 drop-shadow-md\">\n                  {{ loadingTitle }}\n                </div>\n                <div class=\"text-blue-100 text-lg animate-pulse\">{{ loadingSubtitle }}</div>\n              </div>\n            </div>\n\n            <!-- Right Logo -->\n            <div class=\"relative\">\n              <div\n                class=\"w-16 h-16 bg-gradient-to-br from-teal-500/30 to-blue-500/30 rounded-2xl backdrop-blur-sm border-2 border-teal-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300\"\n              >\n                <img\n                  src=\"/assets/images/logo2.png\"\n                  alt=\"MNH Logo\"\n                  class=\"max-w-12 max-h-12 object-contain drop-shadow-lg\"\n                />\n              </div>\n              <div\n                class=\"absolute -inset-1 bg-gradient-to-r from-teal-400 to-blue-400 rounded-2xl opacity-20 blur-sm animate-pulse\"\n                style=\"animation-delay: 0.5s\"\n              ></div>\n            </div>\n          </div>\n\n          <!-- Hospital Name and Department -->\n          <div class=\"text-center border-t border-blue-300/30 pt-4\">\n            <div\n              class=\"text-lg font-black tracking-widest mb-1 drop-shadow-sm\"\n              style=\"color: #ff0000\"\n            >\n              MUHIMBILI NATIONAL HOSPITAL\n            </div>\n            <div class=\"text-teal-200 text-base font-semibold tracking-wider\">\n              {{ departmentTitle }}\n            </div>\n          </div>\n\n          <!-- Progress Indicators -->\n          <div class=\"flex justify-center gap-2 mt-4\">\n            <div class=\"w-2 h-2 rounded-full animate-bounce\" style=\"background: #ff0000\"></div>\n            <div\n              class=\"w-2 h-2 rounded-full animate-bounce\"\n              style=\"background: #0000d1; animation-delay: 0.1s\"\n            ></div>\n            <div\n              class=\"w-2 h-2 rounded-full animate-bounce\"\n              style=\"background: #ff0000; animation-delay: 0.2s\"\n            ></div>\n            <div\n              class=\"w-2 h-2 rounded-full animate-bounce\"\n              style=\"background: #0000d1; animation-delay: 0.3s\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'UnifiedLoadingBanner',\n    props: {\n      show: {\n        type: Boolean,\n        default: true\n      },\n      loadingTitle: {\n        type: String,\n        default: 'Loading Requests'\n      },\n      loadingSubtitle: {\n        type: String,\n        default: 'Please wait...'\n      },\n      departmentTitle: {\n        type: String,\n        default: 'SYSTEM MANAGEMENT'\n      },\n      forceSpin: {\n        type: Boolean,\n        default: false\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /* Glass morphism effects */\n  .booking-glass-card {\n    background: rgba(59, 130, 246, 0.15);\n    backdrop-filter: blur(25px);\n    -webkit-backdrop-filter: blur(25px);\n    border: 2px solid rgba(96, 165, 250, 0.3);\n    box-shadow:\n      0 8px 32px rgba(29, 78, 216, 0.4),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n\n  /* Animations */\n  @keyframes spinner-rotate {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  .always-spin {\n    animation-name: spinner-rotate;\n    animation-timing-function: linear;\n    animation-iteration-count: infinite;\n  }\n\n  @keyframes float {\n    0%,\n    100% {\n      transform: translateY(0px);\n    }\n    50% {\n      transform: translateY(-15px);\n    }\n  }\n\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes slide-across {\n    0% {\n      transform: translateX(-100%);\n    }\n    100% {\n      transform: translateX(100%);\n    }\n  }\n\n  .animate-float {\n    animation: float 6s ease-in-out infinite;\n  }\n\n  .animate-fade-in {\n    animation: fade-in 1s ease-out;\n  }\n\n  .animate-slide-across {\n    animation: slide-across 2.5s ease-in-out infinite;\n  }\n\n  /* Focus styles for accessibility */\n  input:focus,\n  select:focus {\n    box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.1);\n  }\n\n  button:focus {\n    box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.3);\n  }\n\n  /* Smooth transitions */\n  * {\n    transition-property:\n      color, background-color, border-color, text-decoration-color, fill, stroke, opacity,\n      box-shadow, transform, filter, backdrop-filter;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    transition-duration: 200ms;\n  }\n\n  /* Accessibility - Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    .animate-spin {\n      animation: none !important;\n    }\n\n    .animate-float {\n      animation: none !important;\n    }\n\n    .animate-bounce {\n      animation: pulse 2s ease-in-out infinite alternate;\n    }\n\n    .animate-slide-across {\n      animation: none !important;\n    }\n\n    @keyframes pulse {\n      from {\n        opacity: 0.4;\n      }\n      to {\n        opacity: 1;\n      }\n    }\n  }\n</style>\n","import { render } from \"./UnifiedLoadingBanner.vue?vue&type=template&id=94539b4a&scoped=true\"\nimport script from \"./UnifiedLoadingBanner.vue?vue&type=script&lang=js\"\nexport * from \"./UnifiedLoadingBanner.vue?vue&type=script&lang=js\"\n\nimport \"./UnifiedLoadingBanner.vue?vue&type=style&index=0&id=94539b4a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-94539b4a\"]])\n\nexport default __exports__","import axios from 'axios'\nimport { devLog } from '../utils/devLogger'\n\nconst API_BASE_URL = process.env.VUE_APP_API_URL || 'http://127.0.0.1:8000/api'\n\n// Create axios instance with default config\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 0, // No timeout - let backend take as long as needed\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json'\n  }\n})\n\n// Add auth token to requests and append cache-busting param for GETs\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    if (config.method && config.method.toLowerCase() === 'get') {\n      try {\n        const url = new URL(config.url, config.baseURL)\n        url.searchParams.set('_cb', String(Date.now()))\n        config.url = url.pathname + url.search\n      } catch (e) {\n        const sep = (config.url || '').includes('?') ? '&' : '?'\n        config.url = `${config.url}${sep}_cb=${Date.now()}`\n      }\n    }\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Centralized response handling so locked / unauthenticated users are\n// sent back to login instead of leaving the ICT dashboard in a broken state.\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const status = error.response?.status\n\n    // Only force-logout on 401 (invalid/expired token).\n    // 403 is a normal \"role doesn't have access\" case in this app and should not clear auth.\n    if (status === 401) {\n      // Clear any stale auth data\n      localStorage.removeItem('auth_token')\n      localStorage.removeItem('user_data')\n      localStorage.removeItem('session_data')\n\n      // Redirect to login/root if not already there\n      if (typeof window !== 'undefined') {\n        const path = window.location.pathname || ''\n        if (path !== '/' && path !== '/login') {\n          window.location.href = '/'\n        }\n      }\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nconst ictOfficerService = {\n  /**\n   * Get all access requests approved by Head of IT and available for ICT Officer implementation\n   */\n  async getAccessRequests() {\n    try {\n      devLog.debug(' IctOfficerService: Fetching access requests...')\n      const response = await axiosInstance.get('/ict-officer/access-requests')\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Access requests loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to load access requests:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access requests'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching access requests:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading access requests'\n      }\n    }\n  },\n\n  /**\n   * Get a specific access request by ID\n   */\n  async getAccessRequestById(requestId) {\n    try {\n      devLog.debug(' IctOfficerService: Fetching access request by ID:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}`)\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Access request loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to load access request:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access request'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching access request:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading access request'\n      }\n    }\n  },\n\n  /**\n   * Assign a task to self (ICT Officer takes ownership of implementation)\n   */\n  async assignTaskToSelf(requestId, notes = '') {\n    try {\n      devLog.debug(' IctOfficerService: Assigning task to self:', requestId)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/assign`,\n        {\n          notes: notes\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Task assigned successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to assign task:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to assign task'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error assigning task:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while assigning task'\n      }\n    }\n  },\n\n  /**\n   * Update progress on an assigned task\n   */\n  async updateProgress(requestId, status, notes = '') {\n    try {\n      devLog.debug(' IctOfficerService: Updating progress:', requestId, status)\n\n      const response = await axiosInstance.put(\n        `/ict-officer/access-requests/${requestId}/progress`,\n        {\n          status: status,\n          notes: notes\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Progress updated successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to update progress:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to update progress'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error updating progress:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while updating progress'\n      }\n    }\n  },\n\n  /**\n   * Update implementation progress with detailed comments and status\n   */\n  async updateImplementationProgress(requestId, status, comments = '') {\n    try {\n      devLog.debug(' IctOfficerService: Updating implementation progress:', requestId, status)\n\n      const payload = {\n        implementation_status: status,\n        implementation_comments: comments\n      }\n\n      // Add timestamp based on status\n      if (status === 'implementation_in_progress') {\n        payload.ict_officer_started_at = new Date().toISOString()\n      } else if (status === 'implemented') {\n        payload.ict_officer_implemented_at = new Date().toISOString()\n      }\n\n      const response = await axiosInstance.put(\n        `/ict-officer/access-requests/${requestId}/implementation`,\n        payload\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Implementation progress updated successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message || 'Implementation progress updated successfully'\n        }\n      } else {\n        devLog.error(\n          ' IctOfficerService: Failed to update implementation progress:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to update implementation progress'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error updating implementation progress:', error)\n      return {\n        success: false,\n        message:\n          error.response?.data?.message || 'Network error while updating implementation progress'\n      }\n    }\n  },\n\n  /**\n   * Cancel an assigned task (unassign from self)\n   */\n  async cancelTask(requestId, reason) {\n    try {\n      devLog.debug(' IctOfficerService: Canceling task:', requestId)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/cancel`,\n        {\n          reason: reason\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Task canceled successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to cancel task:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to cancel task'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error canceling task:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while canceling task'\n      }\n    }\n  },\n\n  /**\n   * Complete implementation of access request\n   */\n  async completeImplementation(requestId, notes = '', signatureFile = null) {\n    try {\n      devLog.debug(' IctOfficerService: Completing implementation:', requestId)\n\n      const formData = new FormData()\n      formData.append('notes', notes)\n      if (signatureFile) {\n        formData.append('signature', signatureFile)\n      }\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/complete`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Implementation completed successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(\n          ' IctOfficerService: Failed to complete implementation:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to complete implementation'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error completing implementation:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while completing implementation'\n      }\n    }\n  },\n\n  /**\n   * Get detailed timeline for a specific access request\n   */\n  async getRequestTimeline(requestId) {\n    try {\n      devLog.debug(' IctOfficerService: Fetching request timeline:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}/timeline`)\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Request timeline loaded successfully')\n        return response.data.data\n      } else {\n        devLog.error(\n          ' IctOfficerService: Failed to load request timeline:',\n          response.data.message\n        )\n        throw new Error(response.data.message || 'Failed to load request timeline')\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching request timeline:', error)\n      if (error.response) {\n        throw new Error(error.response.data?.message || 'Failed to load timeline data')\n      } else {\n        throw new Error('Network error while loading timeline')\n      }\n    }\n  },\n\n  /**\n   * Get access request timeline (alias for getRequestTimeline)\n   */\n  async getAccessRequestTimeline(requestId) {\n    try {\n      devLog.debug(' IctOfficerService: Fetching access request timeline:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}/timeline`)\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Access request timeline loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(\n          ' IctOfficerService: Failed to load access request timeline:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access request timeline'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching access request timeline:', error)\n      return {\n        success: false,\n        message:\n          error.response?.data?.message || 'Network error while loading access request timeline'\n      }\n    }\n  },\n\n  /**\n   * Grant access to a request (final step with timeline logging)\n   */\n  async grantAccess(requestId, data) {\n    try {\n      devLog.debug(' IctOfficerService: Granting access for request:', requestId)\n      devLog.debug('Grant access data:', data)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/grant-access`,\n        {\n          comments: data.comments || '',\n          implementation_status: 'implemented',\n          implementation_completed_at: new Date().toISOString()\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Access granted successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message || 'Access granted successfully'\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to grant access:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to grant access'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error granting access:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while granting access'\n      }\n    }\n  },\n\n  /**\n   * Get statistics for ICT Officer dashboard\n   */\n  async getStatistics() {\n    try {\n      devLog.debug(' IctOfficerService: Fetching statistics...')\n      const response = await axiosInstance.get('/ict-officer/statistics')\n\n      if (response.data.success) {\n        devLog.debug(' IctOfficerService: Statistics loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(' IctOfficerService: Failed to load statistics:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load statistics'\n        }\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching statistics:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading statistics'\n      }\n    }\n  },\n\n  /**\n   * Get count of pending access requests for notification badge\n   */\n  async getPendingRequestsCount() {\n    try {\n      devLog.debug(' IctOfficerService: Fetching pending requests count...')\n      const response = await axiosInstance.get('/ict-officer/pending-count')\n\n      if (response.data.success) {\n        // Success logged only in development mode\n        if (process.env.NODE_ENV === 'development') {\n          devLog.debug(' IctOfficerService: Pending count loaded successfully')\n        }\n        return response.data.data\n      } else {\n        devLog.error(' IctOfficerService: Failed to load pending count:', response.data.message)\n        throw new Error(response.data.message || 'Failed to load pending requests count')\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error fetching pending count:', error)\n      if (error.response) {\n        throw new Error(error.response.data?.message || 'Failed to load pending count')\n      } else {\n        throw new Error('Network error while loading pending count')\n      }\n    }\n  },\n\n  /**\n   * Retry or (re)send SMS notification to the requester for a given access request\n   * Backend-agnostic: sends multiple compatible phone keys and hint flags.\n   */\n  async resendRequesterSms(requestId, requesterPhone = null) {\n    try {\n      devLog.debug(' IctOfficerService: Retrying requester SMS for:', {\n        requestId,\n        requesterPhone\n      })\n\n      const normalizePhone = (p) => {\n        if (!p) return null\n        const s = String(p).trim()\n        const keepPlus = s.startsWith('+')\n        const digits = s.replace(/[^\\d]/g, '')\n        return keepPlus ? `+${digits}` : digits\n      }\n\n      const rawPhone = requesterPhone || null\n      const normalized = normalizePhone(rawPhone)\n\n      const payload = {\n        request_id: requestId,\n        role: 'ict_officer',\n        notification_type: 'requester_access_granted',\n        resend_only: true,\n        force: true,\n        force_resend: true,\n        resend_sms: true,\n        send_sms: true,\n        send_sms_to_requester: true,\n        notification_channel: 'sms',\n        // Phone compatibility keys (ignored if not recognized)\n        requester_phone: rawPhone || undefined,\n        requester_phone_number: rawPhone || undefined,\n        requester_msisdn: normalized || undefined,\n        staff_phone: rawPhone || undefined,\n        staff_phone_number: rawPhone || undefined,\n        recipient_phone: normalized || undefined,\n        destination_phone: normalized || undefined,\n        phone_number: normalized || undefined,\n        msisdn: normalized || undefined,\n        contact_phone: normalized || undefined\n      }\n\n      // Try multiple endpoints in order of preference\n      let response\n      const endpoints = [\n        `/ict-officer/access-requests/${requestId}/notify`,\n        `/ict-officer/access-requests/${requestId}/resend-sms`,\n        `/ict-officer/access-requests/${requestId}/send-notification`,\n        `/ict-officer/access-requests/${requestId}/grant-access`,\n        `/ict-officer/notify`,\n        `/ict-officer/resend-sms`\n      ]\n\n      let lastError\n      for (let i = 0; i < endpoints.length; i++) {\n        try {\n          devLog.debug(` Trying endpoint ${i + 1}/${endpoints.length}: ${endpoints[i]}`)\n          response = await axiosInstance.post(endpoints[i], payload)\n          devLog.debug(` Success with endpoint: ${endpoints[i]}`)\n          break\n        } catch (e) {\n          console.warn(\n            ` Endpoint ${endpoints[i]} failed:`,\n            e.response?.status,\n            e.response?.data?.message || e.message\n          )\n          lastError = e\n          if (i === endpoints.length - 1) {\n            devLog.error(' All endpoints failed for SMS retry')\n            throw lastError\n          }\n        }\n      }\n\n      if (response.data?.success) {\n        devLog.debug(' IctOfficerService: Requester SMS retry triggered successfully')\n        return { success: true, data: response.data.data, message: response.data.message }\n      }\n\n      return {\n        success: false,\n        message: response.data?.message || 'Failed to trigger SMS retry'\n      }\n    } catch (error) {\n      devLog.error(' IctOfficerService: Error retrying requester SMS:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while retrying SMS'\n      }\n    }\n  }\n}\n\nexport default ictOfficerService\n","<!-- eslint-disable vue/no-parsing-error -->\n<!-- eslint-disable prettier/prettier -->\n<template>\n  <div class=\"flex flex-col h-screen\">\n    <Header />\n    <div class=\"flex flex-1 overflow-hidden\">\n      <ModernSidebar />\n      <main\n        :class=\"[\n          'flex-1 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative',\n          isReviewMode\n            ? 'p-1'\n            : isDivisionalDirectorUser\n              ? 'p-1'\n              : isHodApprovalEditable\n                ? 'p-1'\n                : 'p-1'\n        ]\"\n      >\n        <!-- Medical Background Pattern -->\n        <div class=\"absolute inset-0 overflow-hidden\">\n          <!-- Medical Cross Pattern -->\n          <div class=\"absolute inset-0 opacity-5\">\n            <div class=\"grid grid-cols-12 gap-8 h-full transform rotate-45\">\n              <div\n                v-for=\"i in 48\"\n                :key=\"i\"\n                class=\"bg-white rounded-full w-2 h-2 animate-pulse\"\n                :style=\"{ animationDelay: i * 0.1 + 's' }\"\n              ></div>\n            </div>\n          </div>\n          <!-- Floating medical icons -->\n          <div class=\"absolute inset-0\">\n            <div\n              v-for=\"i in 15\"\n              :key=\"i\"\n              class=\"absolute text-white opacity-10 animate-float\"\n              :style=\"{\n                left: Math.random() * 100 + '%',\n                top: Math.random() * 100 + '%',\n                animationDelay: Math.random() * 3 + 's',\n                animationDuration: Math.random() * 3 + 2 + 's',\n                fontSize: Math.random() * 20 + 10 + 'px'\n              }\"\n            >\n              <i\n                :class=\"[\n                  'fas',\n                  ['fa-heartbeat', 'fa-user-md', 'fa-hospital', 'fa-stethoscope', 'fa-plus'][\n                    Math.floor(Math.random() * 5)\n                  ]\n                ]\"\n              ></i>\n            </div>\n          </div>\n        </div>\n\n        <!-- Top-center toast -->\n        <div v-if=\"toast && toast.show\" class=\"fixed top-4 left-1/2 -translate-x-1/2 z-[9999]\">\n          <div class=\"px-4 py-2 rounded-lg shadow-xl border border-white/20 text-white bg-green-600/90\"\n               :class=\"toast.type === 'error' ? 'bg-red-600/90' : 'bg-green-600/90'\">\n            <span class=\"text-xs font-semibold\">{{ toast.message }}</span>\n          </div>\n        </div>\n\n        <!-- Loading Banner -->\n        <UnifiedLoadingBanner \n          :show=\"isLoading\"\n          :loadingTitle=\"getLoadingTitle()\"\n          :loadingSubtitle=\"getLoadingSubtitle()\"\n          departmentTitle=\"ACCESS REQUEST APPROVAL SYSTEM\"\n        />\n\n        <div\n          :class=\"[\n            isReviewMode ? 'max-w-full mx-1' : 'max-w-7xl mx-auto',\n            'relative z-10',\n            isReviewMode ? 'review-mode-compact' : '',\n            isReviewMode && isHeadItUser ? 'head-it-compact' : '',\n            !isReviewMode && isDivisionalDirectorUser ? 'divisional-director-compact' : '',\n            !isReviewMode && isIctDirectorUser ? 'ict-director-compact' : '',\n            !isReviewMode && isHodApprovalEditable ? 'hod-compact' : ''\n          ]\"\n        >\n          <!-- Header Section - Reduced height for divisional directors and ICT directors -->\n          <div\n            :class=\"[\n              'medical-glass-card rounded-t-3xl border-b border-blue-300/30',\n              isReviewMode\n                ? 'p-1 mb-0'\n                : isDivisionalDirectorUser\n                  ? 'p-0.5 mb-0'\n                  : isIctDirectorUser\n                    ? 'p-1.5 mb-0'\n                    : isHodApprovalEditable\n                      ? 'p-1 mb-0'\n                      : 'p-1 mb-0'\n            ]\"\n          >\n            <div class=\"flex justify-between items-center\">\n              <!-- Left Logo - Increased sizes for better visibility -->\n              <div\n                :class=\"[\n                  'mr-2 transform hover:scale-110 transition-transform duration-300',\n                  isReviewMode\n                    ? 'w-14 h-14'\n                    : isDivisionalDirectorUser\n                      ? 'w-14 h-14'\n                      : isIctDirectorUser\n                        ? 'w-16 h-16'\n                        : isHodApprovalEditable\n                          ? 'w-16 h-16'\n                          : 'w-18 h-18'\n                ]\"\n              >\n                <div\n                  class=\"w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25\"\n                >\n                  <img\n                    src=\"/assets/images/ngao2.png\"\n                    alt=\"National Shield\"\n                    :class=\"\n                      isReviewMode\n                        ? 'max-w-12 max-h-12'\n                        : isDivisionalDirectorUser\n                          ? 'max-w-12 max-h-12'\n                          : isIctDirectorUser\n                            ? 'max-w-14 max-h-14'\n                            : isHodApprovalEditable\n                              ? 'max-w-14 max-h-14'\n                              : 'max-w-16 max-h-16'\n                    \"\n                    class=\"object-contain\"\n                  />\n                </div>\n              </div>\n\n              <!-- Center Content - Reduced margins for divisional directors -->\n              <div class=\"text-center flex-1\">\n                <h1\n                  class=\"text-lg font-bold text-white tracking-wide drop-shadow-lg animate-fade-in\"\n                  :class=\"\n                    isReviewMode\n                      ? 'mb-0'\n                      : isDivisionalDirectorUser\n                        ? 'mb-0'\n                        : isIctDirectorUser\n                          ? 'mb-0.5'\n                          : isHodApprovalEditable\n                            ? 'mb-0.5'\n                            : 'mb-1'\n                  \"\n                >\n                  MUHIMBILI NATIONAL HOSPITAL\n                </h1>\n                <div\n                  :class=\"[\n                    'relative inline-block',\n                    isReviewMode\n                      ? 'mb-0'\n                      : isDivisionalDirectorUser\n                        ? 'mb-0'\n                        : isIctDirectorUser\n                          ? 'mb-1'\n                          : isHodApprovalEditable\n                            ? 'mb-1'\n                            : 'mb-1'\n                  ]\"\n                >\n                  <div\n                    :class=\"[\n                      'bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full text-sm font-bold shadow-xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-400/60',\n                      isReviewMode\n                        ? 'px-2 py-0'\n                        : isDivisionalDirectorUser\n                          ? 'px-2 py-0'\n                          : isIctDirectorUser\n                            ? 'px-3 py-0.5'\n                            : isHodApprovalEditable\n                              ? 'px-4 py-1'\n                              : 'px-4 py-1'\n                    ]\"\n                  >\n                    <span class=\"relative z-10 flex items-center gap-2\">\n                      <i class=\"fas fa-layer-group\"></i>\n                      COMBINED ACCESS REQUEST\n                    </span>\n                    <div\n                      class=\"absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300\"\n                    ></div>\n                  </div>\n                </div>\n                <h2\n                  class=\"text-sm font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay\"\n                >\n                  {{ isReviewMode ? 'REQUEST REVIEW - ' + displayRequestId : 'UNIFIED SERVICES FORM' }}\n                </h2>\n              </div>\n\n              <!-- Right Logo - Increased sizes for better visibility -->\n              <div\n                :class=\"[\n                  'ml-2 transform hover:scale-110 transition-transform duration-300',\n                  isReviewMode\n                    ? 'w-14 h-14'\n                    : isDivisionalDirectorUser\n                      ? 'w-14 h-14'\n                      : isIctDirectorUser\n                        ? 'w-16 h-16'\n                        : isHodApprovalEditable\n                          ? 'w-16 h-16'\n                          : 'w-18 h-18'\n                ]\"\n              >\n                <div\n                  class=\"w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25\"\n                >\n                  <img\n                    src=\"/assets/images/logo2.png\"\n                    alt=\"Muhimbili Logo\"\n                    :class=\"\n                      isReviewMode\n                        ? 'max-w-12 max-h-12'\n                        : isDivisionalDirectorUser\n                          ? 'max-w-12 max-h-12'\n                          : isIctDirectorUser\n                            ? 'max-w-14 max-h-14'\n                            : isHodApprovalEditable\n                              ? 'max-w-14 max-h-14'\n                              : 'max-w-16 max-h-16'\n                    \"\n                    class=\"object-contain\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Main Form -->\n          <div class=\"medical-glass-card rounded-b-3xl overflow-hidden\">\n            <form\n              @submit.prevent=\"onSubmit\"\n              :class=\"[\n                isReviewMode\n                  ? 'p-1 space-y-1'\n                  : isDivisionalDirectorUser\n                    ? 'p-1 space-y-1'\n                    : isIctDirectorUser\n                      ? 'p-1.5 space-y-1.5'\n                      : isHodApprovalEditable\n                        ? 'p-1.5 space-y-1.5'\n                        : 'p-0.5 space-y-0.5',\n                { 'review-mode': isReviewMode }\n              ]\"\n            >\n              <div\n                :class=\"[\n                  'flex-1 grid grid-cols-1 min-h-0',\n                  isReviewMode\n                    ? 'gap-1'\n                    : isDivisionalDirectorUser\n                      ? 'gap-1'\n                      : isIctDirectorUser\n                        ? 'gap-2'\n                        : isHodApprovalEditable\n                          ? 'gap-2'\n                          : 'gap-1'\n                ]\"\n              >\n                <!-- Left: shared + selectors -->\n                <div\n                  aria-labelledby=\"applicant-details\"\n                  :class=\"[\n                    'xl:col-span-4',\n                    isReviewMode\n                      ? 'space-y-0.5'\n                      : isDivisionalDirectorUser\n                        ? 'space-y-0.5'\n                        : isIctDirectorUser\n                          ? 'space-y-1'\n                          : isHodApprovalEditable\n                            ? 'space-y-1'\n                            : 'space-y-0.5'\n                  ]\"\n                >\n                  <!-- Personal Information Section -->\n                  <div\n                    :class=\"[\n                      'medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group',\n                      isReviewMode\n                        ? 'p-0.5'\n                        : isDivisionalDirectorUser\n                          ? 'p-0.5'\n                          : isIctDirectorUser\n                            ? 'p-1'\n                            : isHodApprovalEditable\n                              ? 'p-1'\n                              : 'p-0.5'\n                    ]\"\n                  >\n                    <div\n                      :class=\"[\n                        'flex items-center space-x-2',\n                        isReviewMode\n                          ? 'mb-0.5'\n                          : isDivisionalDirectorUser\n                            ? 'mb-1'\n                            : isHodApprovalEditable\n                              ? 'mb-1'\n                              : 'mb-0.5'\n                      ]\"\n                    >\n                      <div\n                        class=\"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50\"\n                      >\n                        <i class=\"fas fa-user-md text-white text-sm\"></i>\n                      </div>\n                      <h3 class=\"text-xs font-bold text-white flex items-center\">\n                        <i class=\"fas fa-id-card mr-1 text-blue-300 text-xs\"></i>\n                        Personal Information\n                      </h3>\n                    </div>\n                    <div\n                      :class=\"[\n                        'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4',\n                        isDivisionalDirectorUser\n                          ? 'gap-2'\n                          : isHodApprovalEditable\n                            ? 'gap-3'\n                            : 'gap-1'\n                      ]\"\n                    >\n                      <div>\n                        <label class=\"block text-xs font-medium text-blue-100 mb-1\">\n                          PF Number <span class=\"text-red-400\">*</span>\n                        </label>\n                        <div class=\"relative\">\n                          <input\n                            v-model.trim=\"form.shared.pfNumber\"\n                            type=\"text\"\n                            :readonly=\"isReviewMode || isFormSectionReadOnly\"\n                            class=\"medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs\"\n                            :class=\"{ 'font-bold': form.shared.pfNumber }\"\n                            placeholder=\"PF Number\"\n                            required\n                          />\n                          <div\n                            class=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                          ></div>\n                        </div>\n                        <p v-if=\"errors.pfNumber\" class=\"error text-red-400 text-sm mt-1\">\n                          {{ errors.pfNumber }}\n                        </p>\n                      </div>\n\n                      <div>\n                        <label class=\"block text-xs font-medium text-blue-100 mb-1\">\n                          Staff Name <span class=\"text-red-400\">*</span>\n                        </label>\n                        <div class=\"relative\">\n                          <input\n                            v-model.trim=\"form.shared.staffName\"\n                            type=\"text\"\n                            :readonly=\"isReviewMode || isFormSectionReadOnly\"\n                            class=\"medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs\"\n                            :class=\"{ 'font-bold': form.shared.staffName }\"\n                            placeholder=\"Full name\"\n                            required\n                          />\n                          <div\n                            class=\"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                          ></div>\n                        </div>\n                        <p v-if=\"errors.staffName\" class=\"error text-red-400 text-sm mt-1\">\n                          {{ errors.staffName }}\n                        </p>\n                      </div>\n\n                      <div>\n                        <label class=\"block text-xs font-medium text-blue-100 mb-1\">\n                          Department <span class=\"text-red-400\">*</span>\n                        </label>\n                        <div class=\"relative\">\n                          <input\n                            v-model.trim=\"form.shared.department\"\n                            type=\"text\"\n                            :readonly=\"isReviewMode || isFormSectionReadOnly\"\n                            class=\"medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs\"\n                            :class=\"{ 'font-bold': form.shared.department }\"\n                            placeholder=\"Department\"\n                            required\n                          />\n                          <div\n                            class=\"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                          ></div>\n                        </div>\n                      </div>\n\n                      <div>\n                        <label class=\"block text-xs font-medium text-blue-100 mb-1\">\n                          Contact Number <span class=\"text-red-400\">*</span>\n                        </label>\n                        <div class=\"relative\">\n                          <input\n                            v-model.trim=\"form.shared.phone\"\n                            type=\"tel\"\n                            :readonly=\"isReviewMode || isFormSectionReadOnly\"\n                            class=\"medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs\"\n                            :class=\"{ 'font-bold': form.shared.phone }\"\n                            placeholder=\"e.g. 0712 000 000\"\n                            @blur=\"form.shared.phone = normalizePhoneNumber(form.shared.phone)\"\n                            required\n                          />\n                          <div\n                            class=\"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none\"\n                          ></div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Bottom row: Module Requested for (left), Access Rights (middle), and Signature (right) -->\n                    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-4 items-stretch\">\n                      <!-- Module Requested for Section (Left Column) -->\n                      <div class=\"flex flex-col h-full\">\n                        <div\n                          class=\"bg-white/10 rounded-lg p-2 border border-blue-300/30 backdrop-blur-sm w-full min-h-[85px] flex flex-col justify-center\"\n                          :class=\"{\n                            'opacity-50': isReviewMode && !hasWellsoftRequest && !hasJeevaRequest\n                          }\"\n                        >\n                          <label\n                            class=\"block text-xs font-bold text-blue-100 mb-1 text-center uppercase\"\n                          >\n                            <i class=\"fas fa-toggle-on mr-1 text-blue-300 text-xs\"></i>\n                            Module Requested for\n                            <span class=\"text-red-400\">*</span>\n                            <span\n                              v-if=\"isReviewMode && !hasWellsoftRequest && !hasJeevaRequest && !isHodApprovalEditable\"\n                              class=\"text-xs px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                            >\n                              <i class=\"fas fa-lock text-xs mr-1\"></i>\n                              Not Applicable\n                            </span>\n                          </label>\n                          <div class=\"flex items-center gap-3 justify-center\">\n                            <label\n                              class=\"flex items-center cursor-pointer px-2 py-1 rounded-lg transition-all border min-w-12\"\n                              :class=\"{\n                                'hover:bg-blue-500/20': !isFormSectionReadOnly,\n                                'bg-red-500/30 border-2 border-red-400/50 text-white shadow-lg ring-2 ring-red-400/40':\n                                  isFormSectionReadOnly && wellsoftRequestType === 'use',\n                                'bg-white/5 border-white/10 text-blue-200/80':\n                                  isFormSectionReadOnly && wellsoftRequestType !== 'use',\n                                'pointer-events-none':\n                                  isReviewMode && !hasWellsoftRequest && !hasJeevaRequest\n                              }\"\n                            >\n                              <input\n                                v-model=\"wellsoftRequestType\"\n                                type=\"radio\"\n                                value=\"use\"\n                              :disabled=\"\n                                  (isReviewMode && !hasWellsoftRequest && !hasJeevaRequest && !isHodApprovalEditable) ||\n                                  isFormSectionReadOnly\n                                \"\n                                :class=\"[\n                                  'w-3 h-3 border-blue-300 focus:ring-blue-500 mr-1',\n                                  isFormSectionReadOnly\n                                    ? wellsoftRequestType === 'use'\n                                      ? 'text-amber-500 accent-amber-500'\n                                      : 'text-blue-400 accent-blue-400'\n                                    : 'text-blue-600'\n                                ]\"\n                              />\n                              <span\n                                class=\"text-xs font-semibold flex items-center\"\n                                :class=\"{\n                                  'text-white':\n                                    isFormSectionReadOnly && wellsoftRequestType === 'use',\n                                  'text-blue-100':\n                                    !isFormSectionReadOnly || wellsoftRequestType !== 'use'\n                                }\"\n                              >\n                                <i\n                                  class=\"fas fa-plus-circle mr-1 text-xs\"\n                                  :class=\"{\n                                    'text-white':\n                                      isFormSectionReadOnly && wellsoftRequestType === 'use',\n                                    'text-green-400':\n                                      !isFormSectionReadOnly || wellsoftRequestType !== 'use'\n                                  }\"\n                                ></i>\n                                Use\n                              </span>\n                            </label>\n                            <label\n                              class=\"flex items-center cursor-pointer px-2 py-1 rounded-lg transition-all border min-w-12\"\n                              :class=\"{\n                                'hover:bg-red-500/20': !isFormSectionReadOnly,\n                                'bg-red-500/30 border-2 border-red-400/50 text-white shadow-lg ring-2 ring-red-400/40':\n                                  isFormSectionReadOnly && wellsoftRequestType === 'revoke',\n                                'bg-white/5 border-white/10 text-blue-200/80':\n                                  isFormSectionReadOnly && wellsoftRequestType !== 'revoke',\n                                'pointer-events-none':\n                                  isReviewMode && !hasWellsoftRequest && !hasJeevaRequest\n                              }\"\n                            >\n                              <input\n                                v-model=\"wellsoftRequestType\"\n                                type=\"radio\"\n                                value=\"revoke\"\n                              :disabled=\"\n                                  (isReviewMode && !hasWellsoftRequest && !hasJeevaRequest && !isHodApprovalEditable) ||\n                                  isFormSectionReadOnly\n                                \"\n                                :class=\"[\n                                  'w-3 h-3 border-blue-300 focus:ring-blue-500 mr-1',\n                                  isFormSectionReadOnly\n                                    ? wellsoftRequestType === 'revoke'\n                                      ? 'text-amber-500 accent-amber-500'\n                                      : 'text-blue-400 accent-blue-400'\n                                    : 'text-blue-600'\n                                ]\"\n                              />\n                              <span\n                                class=\"text-xs font-semibold flex items-center\"\n                                :class=\"{\n                                  'text-white':\n                                    isFormSectionReadOnly && wellsoftRequestType === 'revoke',\n                                  'text-blue-100':\n                                    !isFormSectionReadOnly || wellsoftRequestType !== 'revoke'\n                                }\"\n                              >\n                                <i\n                                  class=\"fas fa-minus-circle mr-1 text-xs\"\n                                  :class=\"{\n                                    'text-white':\n                                      isFormSectionReadOnly && wellsoftRequestType === 'revoke',\n                                    'text-red-400':\n                                      !isFormSectionReadOnly || wellsoftRequestType !== 'revoke'\n                                  }\"\n                                ></i>\n                                Revoke\n                              </span>\n                            </label>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- Access Rights Section (Middle) -->\n                      <div class=\"flex flex-col h-full\">\n                        <!-- HOD Access Rights Interface -->\n                        <div\n                          v-if=\"isHodApprovalEditable\"\n                          class=\"bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center\"\n                        >\n                          <!-- Access Rights Section -->\n                          <div>\n                            <label class=\"block text-xs font-bold text-blue-100 mb-1 text-center\">\n                              <i class=\"fas fa-clock mr-1\"></i>\n                              Please Specify Access Rights:\n                            </label>\n                            <div class=\"space-y-0.5 text-left\">\n                              <label class=\"flex items-center cursor-pointer text-xs\">\n                                <input\n                                  v-model=\"hodAccessType\"\n                                  type=\"radio\"\n                                  value=\"permanent\"\n                                  class=\"w-3 h-3 text-blue-600 mr-2\"\n                                />\n                                <span class=\"text-blue-200\">Permanent (until retirement)</span>\n                              </label>\n                              <label class=\"flex items-center cursor-pointer text-xs\">\n                                <input\n                                  v-model=\"hodAccessType\"\n                                  type=\"radio\"\n                                  value=\"temporary\"\n                                  class=\"w-3 h-3 text-blue-600 mr-2\"\n                                />\n                                <span class=\"text-blue-200\">Temporary Until:</span>\n                                <input\n                                  v-if=\"hodAccessType === 'temporary'\"\n                                  v-model=\"hodTemporaryUntil\"\n                                  type=\"date\"\n                                  :min=\"tomorrow\"\n                                  class=\"ml-2 px-1 py-0.5 bg-white/10 border border-blue-300/40 rounded text-xs text-white focus:ring-1 focus:ring-blue-400\"\n                                />\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n\n                        <!-- Read-only Access Rights display for non-HOD editing views -->\n                        <div\n                          v-else\n                          class=\"bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center\"\n                        >\n                          <label class=\"block text-xs font-bold text-blue-100 mb-1 text-center\">\n                            <i class=\"fas fa-user-shield mr-1\"></i>\n                            Access Rights\n                          </label>\n                          <div class=\"flex items-center justify-center gap-3\">\n                            <span\n                              v-if=\"(requestData?.access_type || hodAccessType) === 'permanent'\"\n                              class=\"inline-flex items-center px-3 py-2 rounded-lg text-xs font-bold bg-red-500/30 text-white border-2 border-red-400/50 shadow-lg ring-2 ring-red-400/40\"\n                            >\n                              <i class=\"fas fa-infinity mr-1 text-white\"></i>\n                              Permanent (until retirement)\n                            </span>\n                            <span\n                              v-else\n                              class=\"inline-flex items-center px-3 py-2 rounded-lg text-xs font-bold bg-red-500/30 text-white border-2 border-red-400/50 shadow-lg ring-2 ring-red-400/40\"\n                            >\n                              <i class=\"fas fa-hourglass-half mr-1 text-white\"></i>\n                              Temporary Until:\n                              <span class=\"ml-1 font-bold\">\n                                {{ hodTemporaryUntil || formatDateForInput(requestData?.temporary_until) || 'N/A' }}\n                              </span>\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- Signature Section -->\n                      <div class=\"flex flex-col h-full\">\n                        <div\n                          class=\"relative bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center\"\n                        >\n                          <label class=\"block text-xs font-bold text-blue-100 mb-1 text-center\">\n                            Signature <span class=\"text-red-400\">*</span>\n                          </label>\n\n                          <!-- Unified digital signature status and action (review and edit) -->\n                          <div\n                            class=\"w-full px-1 py-0.5 border-2 rounded-lg backdrop-blur-sm transition-all duration-300 shadow-lg flex items-center justify-center min-h-[28px]\"\n                            :class=\"(hasSignature || hasUserSigned) ? 'border-green-400/50 bg-green-500/10' : 'border-blue-300/40 bg-white/15 hover:shadow-xl hover:shadow-blue-500/20'\"\n                          >\n                            <!-- Loading state -->\n                            <div v-if=\"loading\" class=\"text-center\">\n                              <OrbitingDots size=\"sm\" />\n                              <p class=\"text-blue-100 text-xs mt-0.5\">Loading signature...</p>\n                            </div>\n                            <!-- Loaded state -->\n                            <div v-else class=\"text-center\">\n                              <div v-if=\"hasSignature || hasUserSigned\" class=\"flex flex-col items-center gap-0.5\">\n                                <i class=\"fas fa-check-circle text-green-400 text-sm\"></i>\n                                <p class=\"text-green-300 text-xs font-bold\">\n                                  Digitally signed\n                                  <span v-if=\"signatureDisplay?.name\"> by {{ signatureDisplay.name }}</span>\n                                </p>\n                                <p v-if=\"signatureDisplay?.at\" class=\"text-green-200 text-[10px]\">\n                                  on {{ formatDateTime(signatureDisplay.at) }}\n                                </p>\n                              </div>\n                              <div v-else class=\"flex flex-col items-center\">\n                                <i class=\"fas fa-signature text-blue-300 text-sm\"></i>\n                                <p class=\"text-blue-100 text-xs mt-0.5\">No signature yet</p>\n                                <button\n                                  type=\"button\"\n                                  @click=\"signCurrentDocument\"\n                                  :disabled=\"isSigning\"\n                                  class=\"px-2 py-0.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50 mt-1\"\n                                >\n                                  <i class=\"fas fa-pen-alt\"></i>\n                                  Sign Document\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- HOD Module Selection Section - Jeeva and Wellsoft Side by Side -->\n                    <!-- Show to HOD users when they can edit OR when viewing staff's request in review mode -->\n                    <!-- Always show both Jeeva and Wellsoft sections so HOD can see all modules (selected and unselected) -->\n                    <div\n                      v-if=\"isHodApprovalEditable || (isReviewMode && getUserRole()?.toLowerCase() === 'head_of_department')\"\n                      class=\"mt-2\"\n                    >\n                      <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4 relative\">\n                        <!-- Vertical Divider Line -->\n                        <div\n                          class=\"hidden lg:block absolute left-2/3 top-0 bottom-0 w-px bg-gradient-to-b from-blue-300/30 via-blue-400/50 to-blue-300/30 transform -translate-x-px\"\n                        ></div>\n\n                        <!-- Jeeva Modules (Left Side - Takes 2 columns) -->\n                        <!-- Always show to HOD so they can see all modules even if service wasn't selected -->\n                        <div class=\"lg:col-span-2\">\n                          <div\n                            class=\"bg-white/10 rounded-lg border border-purple-300/30 p-4 w-full h-auto\"\n                          >\n                            <div class=\"mb-1\">\n                              <label\n                                class=\"block text-sm font-semibold text-purple-200 mb-1 flex items-center justify-between\"\n                              >\n                                <span>\n                                  <i class=\"fas fa-database mr-2\"></i>\n                                  Jeeva Modules\n                                </span>\n                                <span class=\"text-xs text-purple-300/70\">\n                                  Selected: {{ selectedJeeva?.length || 0 }} modules\n                                </span>\n                              </label>\n                            </div>\n                            <div\n                              class=\"grid grid-cols-4 gap-1 border border-purple-300/20 rounded p-2\"\n                            >\n                              <label\n                                v-for=\"module in jeevaModules\"\n                                :key=\"'jeeva-' + module\"\n                                :class=\"[\n                                  'flex items-center text-xs p-0.5 rounded transition-colors leading-none',\n                                  isFormSectionReadOnly ? 'cursor-default' : 'cursor-pointer hover:bg-white/10',\n                                  selectedJeeva.includes(module) && isFormSectionReadOnly \n                                    ? 'bg-red-500/30 border-2 border-red-400/50 shadow-md ring-1 ring-red-400/40' \n                                    : selectedJeeva.includes(module) \n                                      ? 'bg-purple-500/20 border border-purple-400/30' \n                                      : 'border border-transparent'\n                                ]\"\n                              >\n                                <input\n                                  v-model=\"selectedJeeva\"\n                                  :value=\"module\"\n                                  type=\"checkbox\"\n                                  :disabled=\"isFormSectionReadOnly\"\n                                  class=\"w-3 h-3 text-red-600 accent-red-600 mr-1 flex-shrink-0\"\n                                />\n                                <span \n                                  :class=\"[\n                                    'text-xs leading-none',\n                                    selectedJeeva.includes(module) && isFormSectionReadOnly \n                                      ? 'text-red-100 font-semibold' \n                                      : 'text-purple-100'\n                                  ]\"\n                                >{{\n                                  module\n                                }}</span>\n                                <i \n                                  v-if=\"selectedJeeva.includes(module) && isFormSectionReadOnly\"\n                                  class=\"fas fa-check-circle text-red-400 text-xs ml-auto\"\n                                  title=\"Selected by staff\"\n                                ></i>\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n\n                        <!-- Wellsoft Modules (Right Side - Takes 1 column) -->\n                        <!-- Always show to HOD so they can see all modules even if service wasn't selected -->\n                        <div class=\"lg:col-span-1\">\n                          <div\n                            class=\"bg-white/10 rounded-lg border border-amber-300/30 p-4 w-full h-auto\"\n                          >\n                            <div class=\"mb-3\">\n                              <label\n                                class=\"block text-sm font-semibold text-amber-200 mb-3 flex items-center justify-between\"\n                              >\n                                <span>\n                                  <i class=\"fas fa-hospital mr-2\"></i>\n                                  Wellsoft Modules\n                                </span>\n                                <span class=\"text-xs text-amber-300/70\">\n                                  Selected: {{ selectedWellsoft?.length || 0 }} modules\n                                </span>\n                              </label>\n                            </div>\n                            <div\n                              class=\"grid grid-cols-2 gap-2 border border-amber-300/20 rounded p-3\"\n                            >\n                              <label\n                                v-for=\"module in wellsoftModules\"\n                                :key=\"'wellsoft-' + module\"\n                                :class=\"[\n                                  'flex items-center text-xs p-1.5 rounded transition-colors',\n                                  isFormSectionReadOnly ? 'cursor-default' : 'cursor-pointer hover:bg-white/10',\n                                  selectedWellsoft.includes(module) && isFormSectionReadOnly \n                                    ? 'bg-red-500/30 border-2 border-red-400/50 shadow-md ring-1 ring-red-400/40' \n                                    : selectedWellsoft.includes(module) \n                                      ? 'bg-amber-500/20 border border-amber-400/30' \n                                      : 'border border-transparent'\n                                ]\"\n                              >\n                                <input\n                                  v-model=\"selectedWellsoft\"\n                                  :value=\"module\"\n                                  type=\"checkbox\"\n                                  :disabled=\"isFormSectionReadOnly\"\n                                  class=\"w-3 h-3 text-red-600 accent-red-600 mr-2 flex-shrink-0\"\n                                />\n                                <span \n                                  :class=\"[\n                                    'text-xs leading-tight',\n                                    selectedWellsoft.includes(module) && isFormSectionReadOnly \n                                      ? 'text-red-100 font-semibold' \n                                      : 'text-amber-100'\n                                  ]\"\n                                >{{\n                                  module\n                                }}</span>\n                                <i \n                                  v-if=\"selectedWellsoft.includes(module) && isFormSectionReadOnly\"\n                                  class=\"fas fa-check-circle text-red-400 text-xs ml-auto\"\n                                  title=\"Selected by staff\"\n                                ></i>\n                              </label>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- HOD Comments + Internet Purposes Section (with visual divider and gap) -->\n                    <!-- Show to HOD users or when not in review mode or when HOD can edit -->\n                    <!-- Hide in strict view mode and during loading -->\n                    <div class=\"mt-4 mb-2\" v-if=\"!loading && !isStrictViewMode && (!isReviewMode || isHodApprovalEditable || (isReviewMode && getUserRole()?.toLowerCase() === 'head_of_department'))\">\n                      <div class=\"medical-card bg-gradient-to-r from-blue-600/15 to-indigo-600/15 border-2 border-blue-400/40 rounded-lg p-3\">\n                        <div :class=\"['grid items-start', hasInternetRequest ? 'grid-cols-1 lg:grid-cols-2 gap-6' : 'grid-cols-1 gap-3']\">\n                          <!-- Left: Internet Purposes (own outer wrap) -->\n                          <div v-if=\"hasInternetRequest\" class=\"h-full\">\n                            <div class=\"bg-white/5 rounded-lg border border-blue-300/20 p-3 h-full\">\n                              <div class=\"text-xs text-blue-100\">\n                                <strong class=\"mr-2\">Internet Purposes</strong>\n                                <span v-if=\"!hasInternetRequest\">Not Requested</span>\n                                <ul v-else class=\"space-y-1 mt-1\">\n                                  <li\n                                    v-for=\"(p, i) in filteredInternetPurposes.slice(0, 4)\"\n                                    :key=\"'ip-' + i\"\n                                    class=\"flex items-start gap-2\"\n                                  >\n                                    <span\n                                      class=\"w-5 h-5 inline-flex items-center justify-center rounded-full bg-white/10 border border-blue-300/30 text-blue-200 text-xs font-semibold flex-shrink-0\"\n                                    >\n                                      {{ i + 1 }}\n                                    </span>\n                                    <span class=\"truncate\">{{ p }}</span>\n                                  </li>\n                                </ul>\n                              </div>\n                            </div>\n                          </div>\n                          <!-- Right: HOD Comments (own outer wrap) -->\n                          <div class=\"h-full\">\n                            <div class=\"bg-white/5 rounded-lg border border-blue-300/20 p-3 h-full\">\n                              <label class=\"block text-blue-100 text-sm mb-1\">\n                                HOD Comments <span class=\"text-red-400\">*</span>\n                              </label>\n                              <textarea\n                                v-model=\"hodComments\"\n                                :disabled=\"false\"\n                                required\n                                class=\"w-full h-20 bg-white/10 border border-blue-300/30 rounded-lg p-2 text-white placeholder-blue-300/60 text-sm resize-none overflow-hidden\"\n                                placeholder=\"HOD specify access category here...\"\n                                rows=\"3\"\n                              ></textarea>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                  <!-- Previous Comments Section - Show modules summary and comments for all users in review mode -->\n                  <!-- Always show Review Summary to provide visibility of what was originally requested -->\n\n                  <div\n                    v-if=\"requestData && !loading\"\n                    v-show=\"!loading\"\n                    :class=\"[\n                      'medical-card bg-gradient-to-r from-amber-600/15 to-orange-600/15 border-2 border-amber-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-amber-500/20 transition-all duration-300 group mb-4',\n                      isReviewMode && isIctDirectorUser\n                        ? 'p-0.5'\n                        : isDivisionalDirectorUser || isIctDirectorUser\n                          ? 'p-1'\n                          : isHodApprovalEditable\n                            ? 'p-1.5'\n                            : 'p-1'\n                    ]\"\n                  >\n                    <div class=\"flex items-center justify-between mb-1\">\n                      <div class=\"flex items-center space-x-2\">\n                        <div\n                          class=\"w-5 h-5 bg-gradient-to-br from-amber-500 to-orange-600 rounded flex items-center justify-center shadow group-hover:scale-105 transition-transform duration-200 border border-amber-300/50\"\n                        >\n                          <i class=\"fas fa-comments text-white text-xs\"></i>\n                        </div>\n                        <span\n                          class=\"text-xs px-2 py-0.5 bg-amber-500/30 rounded-full text-amber-200 font-medium\"\n                        >\n                          {{ (previousComments && previousComments.length) || 0 }}\n                        </span>\n                      </div>\n                      <h3 class=\"text-xs font-bold text-white flex items-center\">\n                        <i class=\"fas fa-history mr-1 text-amber-300 text-xs\"></i>\n                        Review Summary\n                        <span\n                          v-if=\"isRequestFullyCompleted\"\n                          class=\"ml-2 text-xs px-2 py-0.5 bg-green-500/30 rounded-full text-green-300 border border-green-400/30\"\n                        >\n                          <i class=\"fas fa-check-circle mr-1 text-xs\"></i>\n                          Completed\n                        </span>\n                      </h3>\n                    </div>\n\n                    <!-- Skeleton loader for initial load -->\n                    <div v-if=\"loading\" class=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-2\">\n                      <!-- Skeleton for modules summary -->\n                      <div class=\"bg-white/5 rounded-lg border border-amber-300/20 animate-pulse\">\n                        <div class=\"h-12 bg-amber-600/20 rounded-t-lg\"></div>\n                        <div class=\"p-4 space-y-3\">\n                          <div class=\"h-4 bg-white/10 rounded w-3/4\"></div>\n                          <div class=\"h-4 bg-white/10 rounded w-1/2\"></div>\n                          <div class=\"h-4 bg-white/10 rounded w-2/3\"></div>\n                        </div>\n                      </div>\n                      <!-- Skeleton for comments table -->\n                      <div class=\"bg-white/5 rounded-lg border border-amber-300/20 animate-pulse\">\n                        <div class=\"h-12 bg-amber-600/20 rounded-t-lg\"></div>\n                        <div class=\"p-4 space-y-2\">\n                          <div class=\"h-3 bg-white/10 rounded w-full\"></div>\n                          <div class=\"h-3 bg-white/10 rounded w-5/6\"></div>\n                          <div class=\"h-3 bg-white/10 rounded w-4/5\"></div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <!-- Two-column layout: Modules Summary + Comments Table -->\n                    <div v-else class=\"grid grid-cols-1 lg:grid-cols-2 gap-2 mb-1\">\n                      <!-- Left: Selected Modules Summary -->\n                      <div class=\"lg:col-span-1\">\n                        <div\n                          class=\"bg-blue-700/20 rounded-lg border border-amber-300/30 backdrop-blur-sm overflow-hidden\"\n                        >\n                          <!-- Header -->\n                          <div\n                            class=\"border-b border-amber-300/30 p-1\"\n                            style=\"background-color: #0047ab\"\n                          >\n                            <h4 class=\"text-xs font-medium text-white flex items-center leading-none\">\n                              <i class=\"fas fa-list-check mr-1 text-white text-xs\"></i>\n                              Selected Modules Summary\n                            </h4>\n                          </div>\n\n                          <!-- Tabular Content -->\n                          <div class=\"p-1\">\n                            <table class=\"w-full\">\n                              <thead>\n                                <tr class=\"border-b border-amber-300/20\">\n                                  <th\n                                    class=\"text-left py-0.5 px-1.5 text-xs font-medium text-blue-200 uppercase tracking-wide\"\n                                  >\n                                    <i class=\"fas fa-laptop mr-1 text-xs\"></i>Wellsoft\n                                  </th>\n                                  <th\n                                    class=\"text-left py-0.5 px-1.5 text-xs font-medium text-cyan-200 uppercase tracking-wide\"\n                                  >\n                                    <i class=\"fas fa-box mr-1 text-xs\"></i>Jeeva\n                                  </th>\n                                  <th\n                                    class=\"text-left py-0.5 px-1.5 text-xs font-medium text-green-200 uppercase tracking-wide\"\n                                  >\n                                    <i class=\"fas fa-globe mr-1 text-xs\"></i>Internet\n                                  </th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                <tr class=\"align-top\">\n                                  <!-- Wellsoft Modules Column -->\n                                  <td\n                                    class=\"py-2 px-2 border-r border-amber-300/20 vertical-align-top\"\n                                  >\n                                    <div\n                                      v-if=\"!hasWellsoftRequest\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      Not Requested\n                                    </div>\n                                    <div\n                                      v-else-if=\"selectedWellsoft.length === 0\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      No modules selected\n                                    </div>\n                                    <div v-else class=\"space-y-0.5\">\n                                      <div\n                                        v-for=\"module in selectedWellsoft\"\n                                        :key=\"'well-' + module\"\n                                        class=\"flex items-center space-x-1.5\"\n                                      >\n                                        <i class=\"fas fa-check-circle text-red-400 text-xs\"></i>\n                                        <span class=\"text-xs text-blue-100 font-normal\">{{\n                                          module\n                                        }}</span>\n                                      </div>\n                                    </div>\n                                  </td>\n\n                                  <!-- Jeeva Modules Column -->\n                                  <td\n                                    class=\"py-2 px-2 border-r border-amber-300/20 vertical-align-top\"\n                                  >\n                                    <div\n                                      v-if=\"!hasJeevaRequest\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      Not Requested\n                                    </div>\n                                    <div\n                                      v-else-if=\"selectedJeeva.length === 0\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      No modules selected\n                                    </div>\n                                    <div v-else class=\"space-y-0.5\">\n                                      <div\n                                        v-for=\"module in selectedJeeva\"\n                                        :key=\"'jeeva-' + module\"\n                                        class=\"flex items-center space-x-1.5\"\n                                      >\n                                        <i class=\"fas fa-check-circle text-red-400 text-xs\"></i>\n                                        <span class=\"text-xs text-cyan-100 font-medium\">{{\n                                          module\n                                        }}</span>\n                                      </div>\n                                    </div>\n                                  </td>\n\n                                  <!-- Internet Purpose Column -->\n                                  <td class=\"py-2 px-2 vertical-align-top\">\n                                    <div\n                                      v-if=\"!hasInternetRequest\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      Not Requested\n                                    </div>\n                                    <div\n                                      v-else-if=\"!filteredInternetPurposes.length\"\n                                      class=\"text-xs text-gray-400 italic\"\n                                    >\n                                      No purposes specified\n                                    </div>\n                                    <div v-else class=\"space-y-0.5\">\n                                      <div\n                                        v-for=\"(purpose, index) in filteredInternetPurposes.slice(\n                                          0,\n                                          4\n                                        )\"\n                                        :key=\"'purpose-' + index\"\n                                        class=\"flex items-start space-x-1.5\"\n                                      >\n                                        <div\n                                          class=\"w-3 h-3 bg-green-500/30 rounded-full flex items-center justify-center flex-shrink-0\"\n                                        >\n                                          <span class=\"text-xs text-green-300 font-bold\">{{\n                                            index + 1\n                                          }}</span>\n                                        </div>\n                                        <span\n                                          class=\"text-xs text-green-100 font-medium leading-tight\"\n                                        >{{ purpose }}</span>\n                                      </div>\n                                      <div\n                                        v-if=\"filteredInternetPurposes.length > 4\"\n                                        class=\"text-xs text-green-200/70 italic\"\n                                      >\n                                        +{{ filteredInternetPurposes.length - 4 }} more\n                                      </div>\n                                    </div>\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- Right: Comments Table -->\n                      <div class=\"lg:col-span-1\">\n                        <div\n                          class=\"bg-white/10 rounded-lg border border-amber-300/30 backdrop-blur-sm overflow-hidden\"\n                        >\n                          <!-- Table Header -->\n                          <div\n                            class=\"border-b border-amber-300/30 p-1\"\n                            style=\"background-color: #0047ab\"\n                          >\n                            <div\n                              class=\"grid grid-cols-12 gap-0 text-[10px] leading-none font-medium text-white uppercase tracking-wide\"\n                            >\n                              <div class=\"col-span-2\">Name</div>\n                              <div class=\"col-span-2\">Role</div>\n                              <div class=\"col-span-4\">Comments</div>\n                              <div class=\"col-span-2\">Status</div>\n                              <div class=\"col-span-2\">Date</div>\n                            </div>\n                          </div>\n\n                          <!-- Table Body with Virtual Scrolling -->\n                          <div class=\"overflow-visible\">\n                            <!-- Show message if no comments -->\n                            <div\n                              v-if=\"!previousComments || previousComments.length === 0\"\n                              class=\"p-4 text-center\"\n                            >\n                              <div class=\"text-amber-300/70 text-xs italic\">\n                                <i class=\"fas fa-info-circle mr-1\"></i>\n                                No previous comments available\n                              </div>\n                            </div>\n                            <!-- Show only visible comments for performance -->\n                            <div\n                              v-for=\"(comment, index) in visibleComments\"\n                              :key=\"comment.stage + '-' + index\"\n                              :class=\"rowClass(comment, index)\"\n                            >\n                              <!-- Name -->\n                              <div class=\"col-span-2\">\n                                <div class=\"flex items-center space-x-0.5\">\n                                  <div\n                                    :class=\"[\n                                      'w-4 h-4 rounded-full flex items-center justify-center text-xs flex-shrink-0',\n                                      comment.isApproved\n                                        ? 'bg-green-500/30 text-green-300'\n                                        : comment.isRejected\n                                          ? 'bg-red-500/30 text-red-300'\n                                          : 'bg-blue-500/30 text-blue-300'\n                                    ]\"\n                                  >\n                                    <i\n                                      :class=\"[\n                                        'text-xs',\n                                        comment.isApproved\n                                          ? 'fas fa-check'\n                                          : comment.isRejected\n                                            ? 'fas fa-times'\n                                            : 'fas fa-clock'\n                                      ]\"\n                                    ></i>\n                                  </div>\n                                  <div class=\"text-[9px] leading-[1.05] text-white font-normal truncate\">\n                                    {{ comment.name || 'Name not available' }}\n                                  </div>\n                                </div>\n                              </div>\n\n                              <!-- Role -->\n                              <div class=\"col-span-2\">\n                                <div class=\"text-[9px] leading-[1.05] text-amber-200 font-normal\">\n                                  {{ comment.stageName }}\n                                </div>\n                              </div>\n\n                              <!-- Comments -->\n                              <div class=\"col-span-4\">\n                                <div\n                                  :class=\"[\n                                    'p-0 rounded text-[8px] leading-[1.05] border',\n                                    comment.isApproved\n                                      ? 'bg-green-900/20 border-green-400/30 text-green-100'\n                                      : comment.isRejected\n                                        ? 'bg-red-900/20 border-red-400/30 text-red-100'\n                                        : 'bg-blue-900/20 border-blue-400/30 text-blue-100'\n                                  ]\"\n                                >\n                                  {{ comment.comments }}\n                                </div>\n                              </div>\n\n                              <!-- Status -->\n                              <div class=\"col-span-2\">\n                                <span\n                                  :class=\"[\n                                    'inline-flex items-center px-1 py-0 rounded text-[9px] font-normal',\n                                    comment.isApproved\n                                      ? 'bg-green-600/30 text-green-200 border border-green-400/30'\n                                      : comment.isRejected\n                                        ? 'bg-red-600/30 text-red-200 border border-red-400/30'\n                                        : 'bg-blue-600/30 text-blue-200 border border-blue-400/30'\n                                  ]\"\n                                >\n                                  <i\n                                    :class=\"[\n                                      'mr-1 text-xs',\n                                      comment.isApproved\n                                        ? 'fas fa-check-circle'\n                                        : comment.isRejected\n                                          ? 'fas fa-times-circle'\n                                          : 'fas fa-clock'\n                                    ]\"\n                                  ></i>\n                                  {{ comment.isApproved ? 'OK' : comment.isRejected ? 'X' : 'Rev' }}\n                                </span>\n                              </div>\n\n                              <!-- Date -->\n                              <div class=\"col-span-2\">\n                                <div class=\"flex items-center text-[9px] leading-[1.05] text-gray-400\">\n                                  <i\n                                    :class=\"[\n                                      'fas mr-1',\n                                      comment.hasSpecificDate\n                                        ? 'fa-calendar text-gray-400'\n                                        : 'fa-clock text-yellow-400'\n                                    ]\"\n                                  ></i>\n                                  <div\n                                    v-if=\"comment.date\"\n                                    :class=\"comment.hasSpecificDate ? '' : 'text-yellow-300'\"\n                                  >\n                                    {{ formatCommentDate(comment.date) }}\n                                    <div v-if=\"!comment.hasSpecificDate\" class=\"opacity-70 text-xs\">\n                                      (approx.)\n                                    </div>\n                                  </div>\n                                  <div v-else class=\"text-yellow-300\">\n                                    <i class=\"fas fa-exclamation-triangle mr-1\"></i>\n                                    <div class=\"text-xs\">Date unavailable</div>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n\n                            <!-- Show count if comments are truncated -->\n                            <div\n                              v-if=\"\n                                previousComments && previousComments.length > maxVisibleComments\n                              \"\n                              class=\"p-2 text-center border-t border-amber-300/20\"\n                            >\n                              <span class=\"text-xs text-amber-300/70 italic\">\n                                Showing {{ maxVisibleComments }} of\n                                {{ previousComments.length }} comments\n                              </span>\n                            </div>\n                          </div>\n\n\n                          <!-- Read-only notice -->\n                          <div\n                            class=\"border-t border-amber-300/30 p-1\"\n                            style=\"background-color: #0047ab\"\n                          >\n                            <div class=\"flex items-center justify-center text-xs text-white\">\n                              <i class=\"fas fa-lock mr-1 text-xs\"></i>\n                              <span>Read-only</span>\n                            </div>\n                          </div>\n                          <!-- Role comment editor inside right column, flush at bottom -->\n<div class=\"mt-3\">\n                            <div\n                              v-if=\"!( (getUserRole() || '').toLowerCase() === 'ict_officer' || (getUserRole() || '').toLowerCase() === 'officer_ict')\"\n                              class=\"rounded-lg p-2 border border-blue-300/30\"\n                              style=\"background-color: #0047ab\"\n                            >\n                              <textarea\n                                v-model=\"roleCommentsDraft\"\n                                :readonly=\"!isRoleCommentEditable\"\n                                :placeholder=\"roleCommentLabel\"\n                                class=\"w-full h-20 border border-blue-300/20 text-blue-100 placeholder-blue-200/70 rounded p-2 text-base focus:outline-none focus:ring-1 focus:ring-blue-400 resize-none role-comment-textarea\"\n                                style=\"background-color: #0047ab\"\n                              ></textarea>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n          <!-- Grant Access Popup (ICT Officer) -->\n          <div v-if=\"showGrantAccessPopup\" class=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4\">\n            <div class=\"bg-white/10 rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden border border-blue-300/40 backdrop-blur-md\">\n              <div class=\"px-5 py-3\" style=\"background-color:red\">\n                <h3 class=\"text-white text-2xl font-bold flex items-center gap-2\">\n                  <i class=\"fas fa-user-shield\"></i>\n                  Grant Access\n                </h3>\n                <p class=\"text-blue-100 text-base mt-1\">Provide your implementation note before granting access.</p>\n              </div>\n              <div class=\"px-5 py-4 bg-blue-900/20\">\n                <label class=\"block text-blue-100 text-lg mb-1\">ICT Officer Comment <span class=\"text-red-400\">*</span></label>\n                <textarea\n                  v-model=\"grantAccessComment\"\n                  class=\"w-full h-28 bg-white/10 border border-blue-300/30 rounded-lg p-2 text-white placeholder-blue-300/60 text-sm resize-none focus:outline-none focus:ring-1 focus:ring-blue-400\"\n                  placeholder=\"Enter implementation details (max 1000 characters)...\"\n                  rows=\"5\"\n                  required\n                ></textarea>\n                <div class=\"flex justify-between mt-1\">\n                  <span class=\"text-xs text-blue-200/70\">Remaining: {{ Math.max(0, 1000 - (grantAccessComment || '').length) }}</span>\n                  <span class=\"text-xs text-blue-200/80\">\n                    {{ (grantAccessComment || '').length }}/1000\n                  </span>\n                </div>\n                <p v-if=\"grantAccessError\" class=\"text-red-300 text-xs mt-1\">{{ grantAccessError }}</p>\n                \n                <!-- SMS Preview -->\n                <div class=\"mt-4 p-3 bg-blue-800/40 border border-blue-300/30 rounded-lg\">\n                  <div class=\"flex items-center gap-2 mb-2\">\n                    <i class=\"fas fa-sms text-blue-300 text-lg\"></i>\n                    <label class=\"text-blue-100 text-base font-semibold\">SMS Preview (will be sent to requester):</label>\n                  </div>\n                  <div class=\"bg-blue-900/50 rounded p-2 text-base text-blue-100 font-mono leading-relaxed\">\n                    {{ getSmsPreviewText() }}\n                  </div>\n                  <div class=\"flex justify-between mt-1\">\n                    <span class=\"text-xs text-blue-200/70\">Length: {{ getSmsPreviewText().length }} chars</span>\n                    <span class=\"text-xs text-blue-200/70\">(Long messages may be split into multiple SMS parts)</span>\n                  </div>\n                  <p class=\"text-blue-300/70 text-base mt-2 italic\">\n                    <i class=\"fas fa-info-circle mr-1\"></i>\n                    This message will be sent to {{ form.staff_name || 'the requester' }} at {{ form.phone_number || 'their phone number' }}\n                  </p>\n                </div>\n              </div>\n              <div class=\"px-5 py-3 flex gap-2 justify-end bg-blue-900/30 border-t border-blue-300/30\">\n                <button @click=\"cancelGrantAccess\" type=\"button\" class=\"px-3 py-1.5 rounded-lg text-white bg-gray-600 hover:bg-gray-700 text-sm\">Cancel</button>\n                <button @click=\"confirmGrantAccess\" type=\"button\" :disabled=\"processing || !grantAccessComment.trim()\" class=\"px-3 py-1.5 rounded-lg text-white text-sm border border-blue-300/50 shadow disabled:opacity-50\"\n                  style=\"background:linear-gradient(135deg,#0f52ba 0%,#1e3a8a 100%)\">\n                  <i class=\"fas fa-key mr-1\"></i>\n                  Grant Access\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- Head of IT Approval Success Modal -->\n          <div v-if=\"showHeadItApproveSuccessModal\" class=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4\">\n            <div class=\"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden\">\n              <div class=\"px-6 py-4 text-center\" style=\"background: linear-gradient(135deg, #0f52ba 0%, #1e3a8a 100%)\">\n                <div class=\"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg\">\n                  <i class=\"fas fa-check text-2xl\" style=\"color: #0f52ba\"></i>\n                </div>\n                <h3 class=\"text-xl font-bold text-white\">Request Approved</h3>\n                <p class=\"text-blue-100 text-sm mt-1\">The request has been approved successfully.</p>\n              </div>\n              <div class=\"px-6 py-6 text-center\">\n                <p class=\"text-gray-700 text-base mb-6\">Click below to assign this task to an ICT Officer.</p>\n                <div class=\"flex gap-3\">\n                  <button @click=\"redirectToAssignIctOfficer\" class=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-200\">\n                    Assign to ICT Officer\n                  </button>\n                  <button @click=\"showHeadItApproveSuccessModal = false\" class=\"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition duration-200\">\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n                  <!-- Approval Section -->\n                  <div\n                    :class=\"[\n                      'medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group',\n                      isReviewMode && isIctDirectorUser\n                        ? 'p-0.5'\n                        : isDivisionalDirectorUser || isIctDirectorUser\n                          ? 'p-1'\n                          : isHodApprovalEditable\n                            ? 'p-1.5'\n                            : 'p-1'\n                    ]\"\n                  >\n                    <div class=\"flex items-center mb-1\">\n                      <div class=\"flex items-center space-x-2\">\n                        <div\n                          class=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50\"\n                        >\n                          <i class=\"fas fa-check-circle text-white text-sm\"></i>\n                        </div>\n                        <h3\n                          :class=\"[\n                            'text-sm font-bold text-white flex items-center',\n                            isStrictViewMode ? 'select-none' : 'cursor-pointer select-none'\n                          ]\"\n                          @click=\"!isStrictViewMode && (showApprovalSections = !showApprovalSections)\"\n                          :aria-expanded=\"showApprovalSections ? 'true' : 'false'\"\n                          :aria-controls=\"'approval-sections'\"\n                          :title=\"isStrictViewMode ? 'Approval information' : 'Toggle approval sections'\"\n                        >\n                          <i class=\"fas fa-clipboard-check mr-1 text-blue-300\"></i>\n                          <span>{{ isStrictViewMode ? 'Approvals' : 'Click here to Approve' }}</span>\n                          <i\n                            v-if=\"!isStrictViewMode\"\n                            :class=\"['fas', showApprovalSections ? 'fa-chevron-up' : 'fa-chevron-down']\"\n                            class=\"ml-1\"\n                          ></i>\n                        </h3>\n                      </div>\n                    </div>\n\n                    <div\n                      id=\"approval-sections\"\n                      v-show=\"isStrictViewMode || showApprovalSections\"\n                      :class=\"[\n                        'grid grid-cols-1 lg:grid-cols-3',\n                        isDivisionalDirectorUser\n                          ? 'gap-3'\n                          : isHodApprovalEditable\n                            ? 'gap-4'\n                            : 'gap-1'\n                      ]\"\n                    >\n                      <!-- HoD/BM -->\n                      <div\n                        :class=\"[\n                          'bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm',\n                          isDivisionalDirectorUser ? 'p-3' : isHodApprovalEditable ? 'p-3' : 'p-2'\n                        ]\"\n                      >\n                        <h5\n                          class=\"font-bold text-white mb-1 text-center text-base flex items-center justify-center gap-2\"\n                        >\n                          <i class=\"fas fa-user-tie mr-2 text-blue-300\"></i>\n                          HoD/BM\n                          <span\n                            v-if=\"isStageCompleted('hod')\"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-check text-base mr-1\"></i>\n                            Completed\n                          </span>\n                          <span\n                            v-else-if=\"isHodSkipped\"\n                            class=\"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-ban text-base mr-1\"></i>\n                            Skipped\n                          </span>\n                          <span\n                            v-else-if=\"!isHodApprovalEditable && isReviewMode\"\n                            class=\"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                          >\n                            <i class=\"fas fa-clock text-base mr-1\"></i>\n                            Pending\n                          </span>\n                        </h5>\n                        <div class=\"space-y-3\">\n                          <div>\n                            <label class=\"block text-base font-semibold text-white mb-1\">Name<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.hod.name\"\n                                type=\"text\"\n                                readonly\n                                :placeholder=\"getApprovalNamePlaceholder('hod')\"\n                                class=\"medical-input w-full px-3 py-2 bg-white/30 border-2 border-blue-300/50 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-100/80 backdrop-blur-sm cursor-not-allowed font-medium\"\n                                :title=\"getApprovalNameTitle('hod')\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  class=\"fas fa-lock text-blue-300 text-xs\"\n                                  title=\"This field is auto-populated from your account\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-semibold text-white mb-1\">Signature<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <!-- Debug: Show which template condition is active -->\n                              <!-- {{ console.log(' HOD Template Debug:', { shouldShowHodSignedIndicator, shouldShowHodNoSignatureIndicator, hodSignaturePreview, isReviewMode }) }} -->\n\n                              <!-- Show 'Signed' indicator for when HOD has signed (visible to later roles) -->\n                              <div\n                                v-if=\"shouldShowHodSignedIndicator\"\n                                :class=\"[\n                                  'w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative',\n                                  'border-2 border-green-400/50 bg-green-500/10 shadow-lg',\n                                  isIctDirectorApprovalActive\n                                    ? 'ring-1 ring-green-300/40 shadow-xl'\n                                    : ''\n                                ]\"\n                                :title=\"getSignedByYouTooltip('hod')\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-check text-green-400 text-sm\"></i>\n                                    </div>\n                                    <span\n                                      :class=\"[\n                                        'text-base',\n                                        isIctDirectorApprovalActive\n                                          ? 'text-green-300 font-extrabold uppercase tracking-wide'\n                                          : 'text-green-400 font-semibold'\n                                      ]\"\n                                      >Signed</span>\n                                  </div>\n                                  <p\n                                    :class=\"[\n                                      isIctDirectorApprovalActive\n                                        ? 'text-green-200 font-semibold text-base'\n                                        : 'text-green-300/80 text-base'\n                                    ]\"\n                                  >\n                                    Approved at: {{ getApprovalDateFormatted('hod') }}\n                                  </p>\n                                </div>\n                                <!-- Optional: Show signature preview icon -->\n                                <div class=\"absolute top-2 right-2\">\n                                  <div\n                                    class=\"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center\"\n                                  >\n                                    <i\n                                      class=\"fas fa-signature text-green-400 text-xs\"\n                                      title=\"Signature on file\"\n                                    ></i>\n                                  </div>\n                                </div>\n                              </div>\n\n                              <!-- Skipped indicator for HOD when request is from ICT Officer -->\n                              <div\n                                v-else-if=\"isHodSkipped\"\n                                class=\"w-full px-3 py-2 border-2 border-red-400/60 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                                title=\"HOD approval skipped\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div class=\"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center\">\n                                      <i class=\"fas fa-ban text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">Signature skipped</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">HOD approval skipped</p>\n                                </div>\n                              </div>\n\n                              <!-- Default read-only indicator for next stage when HOD has not signed -->\n                              <div\n                                v-else-if=\"shouldShowHodNoSignatureIndicator\"\n                                class=\"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-times text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">No signature on file</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">HOD approval pending</p>\n                                </div>\n                              </div>\n\n                              <!-- Edit mode: Show uploaded signature preview -->\n                              <div\n                                v-else-if=\"hodSignaturePreview\"\n                                class=\"w-full px-2 py-2 border-2 border-blue-300/40 rounded-lg bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[35px] flex items-center justify-center relative\"\n                              >\n                                <div v-if=\"isImage(hodSignaturePreview)\" class=\"text-center\">\n                                  <img\n                                    :src=\"hodSignaturePreview\"\n                                    alt=\"HOD Signature\"\n                                    class=\"max-h-[50px] max-w-full object-contain mx-auto mb-1\"\n                                  />\n                                  <p class=\"text-xs text-blue-100\">\n                                    {{ hodSignatureFileName }}\n                                  </p>\n                                </div>\n                                <div v-else class=\"text-center\">\n                                  <div\n                                    class=\"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center mx-auto mb-1\"\n                                  >\n                                    <i class=\"fas fa-file-pdf text-red-400 text-lg\"></i>\n                                  </div>\n                                  <p class=\"text-xs text-blue-100\">\n                                    {{ hodSignatureFileName }}\n                                  </p>\n                                </div>\n\n                                <div\n                                  v-if=\"isHodApprovalEditable\"\n                                  class=\"absolute top-2 right-2 flex gap-1\"\n                                >\n                                  <button\n                                    type=\"button\"\n                                    @click=\"triggerHodSignatureUpload\"\n                                    class=\"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-blue-600 transition-colors duration-200 shadow-lg\"\n                                    title=\"Change signature\"\n                                  >\n                                    <i class=\"fas fa-edit\"></i>\n                                  </button>\n                                  <button\n                                    type=\"button\"\n                                    @click=\"clearHodSignature\"\n                                    class=\"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200 shadow-lg\"\n                                    title=\"Remove signature\"\n                                  >\n                                    <i class=\"fas fa-times\"></i>\n                                  </button>\n                                </div>\n                              </div>\n\n                              <!-- Default signature upload area (for HODs when they can edit) -->\n                              <div\n                                v-else\n                                class=\"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20\"\n                              >\n                                <!-- Display signature status with proper styling like others -->\n                                <div\n                                  :class=\"[\n                                    'w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative',\n                                    requestData?.approvals?.hod?.signature_status === 'Signed'\n                                      ? 'border-2 border-green-400/50 bg-green-500/10 shadow-lg'\n                                      : 'border-2 border-red-400/50 bg-red-500/10 shadow-lg'\n                                  ]\"\n                                >\n                                  <div class=\"text-center\">\n                                    <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                      <div\n                                        :class=\"[\n                                          'w-8 h-8 rounded-full flex items-center justify-center',\n                                          requestData?.approvals?.hod?.signature_status === 'Signed'\n                                            ? 'bg-green-500/20'\n                                            : 'bg-red-500/20'\n                                        ]\"\n                                      >\n                                        <i\n                                          :class=\"[\n                                            'text-sm',\n                                            requestData?.approvals?.hod?.signature_status ===\n                                            'Signed'\n                                              ? 'fas fa-check text-green-400'\n                                              : 'fas fa-times text-red-400'\n                                          ]\"\n                                        ></i>\n                                      </div>\n                                      <span\n                                        :class=\"[\n                                          'text-sm font-semibold',\n                                          requestData?.approvals?.hod?.signature_status === 'Signed'\n                                            ? 'text-green-400'\n                                            : 'text-red-400'\n                                        ]\"\n                                      >\n                                        {{\n                                          requestData?.approvals?.hod?.signature_display ||\n                                          'No signature'\n                                        }}\n                                      </span>\n                                    </div>\n                                    <!-- Optional: Show signature preview icon for signed status -->\n                                    <div\n                                      v-if=\"\n                                        requestData?.approvals?.hod?.signature_status === 'Signed'\n                                      \"\n                                      class=\"absolute top-2 right-2\"\n                                    >\n                                      <div\n                                        class=\"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center\"\n                                      >\n                                        <i\n                                          class=\"fas fa-signature text-green-400 text-xs\"\n                                          title=\"Signature on file\"\n                                        ></i>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n\n                                <!-- Keep upload button section for when user can edit and signature is not already uploaded -->\n                                <div v-if=\"requestData?.approvals?.hod?.signature_status !== 'Signed' && !hasUserSigned && !(currentUser?.name && historyHasSigner(currentUser.name))\" class=\"text-center mt-2\">\n                                  <button\n                                    v-if=\"canUploadHodSignature\"\n                                    type=\"button\"\n                                    @click=\"signCurrentDocument\"\n                                    :disabled=\"isSigning || !isReviewMode\"\n                                    class=\"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50\"\n                                  >\n                                    <i class=\"fas fa-pen-alt\"></i>\n                                    Sign Document\n                                  </button>\n                                  <p v-if=\"!isReviewMode\" class=\"text-xs text-blue-200 mt-1\">Available after submitting the request</p>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-semibold text-white mb-1\">Date (mm/dd/yyyy)<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.hod.date\"\n                                type=\"date\"\n                                :readonly=\"true\"\n:class=\"[\n                                  'medical-input w-full px-3 py-2 bg-white/30 border-2 rounded-lg focus:outline-none text-white backdrop-blur-sm cursor-not-allowed font-medium',\n                                  shouldShowHodSignedIndicator\n                                    ? 'border-green-400/60 ring-1 ring-green-300/40'\n                                    : '',\n                                  shouldShowHodNoSignatureIndicator ? 'border-red-400/40' : '',\n                                  isHodSkipped ? 'border-red-400/60 bg-red-500/10' : '',\n                                  isIctDirectorApprovalActive && shouldShowHodSignedIndicator\n                                    ? 'font-semibold text-green-200'\n                                    : ''\n                                ]\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  v-if=\"isHodSkipped\"\n                                  class=\"fas fa-ban text-red-400 text-xs\"\n                                  title=\"HOD approval skipped\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowHodSignedIndicator\"\n                                  class=\"fas fa-check text-green-400 text-xs\"\n                                  title=\"HOD has signed - date populated from approval\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowHodNoSignatureIndicator\"\n                                  class=\"fas fa-clock text-red-400 text-xs\"\n                                  title=\"Pending HOD approval\"\n                                ></i>\n                                <i\n                                  v-else\n                                  class=\"fas fa-calendar text-blue-300 text-xs\"\n                                  title=\"Date will be populated when HOD approves\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- Divisional Director -->\n                      <div\n                        :class=\"[\n                          'bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm',\n                          isDivisionalDirectorUser ? 'p-3' : 'p-4'\n                        ]\"\n                      >\n                        <h5\n                          class=\"font-bold text-white mb-1 text-center text-base flex items-center justify-center gap-2\"\n                        >\n                          <i class=\"fas fa-user-circle mr-2 text-blue-300\"></i>\n                          Divisional Director\n                          <!-- HOD view - Show signature status for higher approvers -->\n                          <span\n                            v-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              requestData?.divisional_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-signature text-base mr-1\"></i>\n                            Signed\n                          </span>\n                          <span\n                            v-else-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              !requestData?.divisional_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-times text-base mr-1\"></i>\n                            No Signature\n                          </span>\n                          <!-- Other roles view -->\n                          <span\n                            v-else-if=\"isStageCompleted('divisional')\"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-check text-base mr-1\"></i>\n                            Completed\n                          </span>\n                          <span\n                            v-else-if=\"isDivisionalSkipped\"\n                            class=\"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-ban text-base mr-1\"></i>\n                            Skipped\n                          </span>\n                          <span\n                            v-else-if=\"!isDivisionalApprovalEditable && isReviewMode\"\n                            class=\"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                          >\n                            <i class=\"fas fa-clock text-base mr-1\"></i>\n                            Pending\n                          </span>\n                        </h5>\n                        <div class=\"space-y-3\">\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-1\">Name<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.divisionalDirector.name\"\n                                type=\"text\"\n                                readonly\n                                :placeholder=\"getApprovalNamePlaceholder('divisional_director')\"\n                                class=\"medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed\"\n                                :title=\"getApprovalNameTitle('divisional_director')\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  class=\"fas fa-lock text-blue-300 text-xs\"\n                                  title=\"This field is auto-populated from your account\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-1\">Signature<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <!-- Show Divisional Director signed indicator for ICT Director stage -->\n                              <div\n                                v-if=\"shouldShowDivisionalSignedIndicator\"\n                                :class=\"[\n                                  'w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center',\n                                  'border-2 border-green-400/50 bg-green-500/10 shadow-lg',\n                                  isIctDirectorApprovalActive\n                                    ? 'ring-1 ring-green-300/40 shadow-xl'\n                                    : ''\n                                ]\"\n                                :title=\"getSignedByYouTooltip('divisional')\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-check text-green-400 text-sm\"></i>\n                                    </div>\n                                    <span\n                                      :class=\"[\n                                        'text-base',\n                                        isIctDirectorApprovalActive\n                                          ? 'text-green-300 font-extrabold uppercase tracking-wide'\n                                          : 'text-green-400 font-semibold'\n                                      ]\"\n                                      >Signed</span>\n                                  </div>\n                                  <p\n                                    :class=\"[\n                                      isIctDirectorApprovalActive\n                                        ? 'text-green-200 font-semibold text-base'\n                                        : 'text-green-300/80 text-base'\n                                    ]\"\n                                  >\n                                    Approved at: {{ getApprovalDateFormatted('divisional') }}\n                                  </p>\n                                </div>\n                              </div>\n\n                              <!-- Divisional Director skipped indicator -->\n                              <div\n                                v-else-if=\"isDivisionalSkipped\"\n                                class=\"w-full px-3 py-2 border-2 border-red-400/60 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                                title=\"Divisional Director approval skipped\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div class=\"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center\">\n                                      <i class=\"fas fa-ban text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">Signature skipped</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">\n                                    Divisional Director approval skipped\n                                  </p>\n                                </div>\n                              </div>\n\n                              <!-- Show Divisional Director missing signature indicator for ICT Director stage -->\n                              <div\n                                v-else-if=\"shouldShowDivisionalNoSignatureIndicator\"\n                                class=\"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-times text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">No signature on file</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">\n                                    Divisional Director approval pending\n                                  </p>\n                                </div>\n                              </div>\n\n                              <div\n                                v-else-if=\"!divDirectorSignaturePreview\"\n                                class=\"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20\"\n                              >\n                                <!-- Display signature status with proper styling like HOD -->\n                                <div\n                                  :class=\"[\n                                    'w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative',\n                                    requestData?.approvals?.divisionalDirector?.signature_status ===\n                                    'Signed'\n                                      ? 'border-2 border-green-400/50 bg-green-500/10 shadow-lg'\n                                      : 'border-2 border-red-400/50 bg-red-500/10 shadow-lg'\n                                  ]\"\n                                >\n                                  <div class=\"text-center\">\n                                    <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                      <div\n                                        :class=\"[\n                                          'w-8 h-8 rounded-full flex items-center justify-center',\n                                          requestData?.approvals?.divisionalDirector\n                                            ?.signature_status === 'Signed'\n                                            ? 'bg-green-500/20'\n                                            : 'bg-red-500/20'\n                                        ]\"\n                                      >\n                                        <i\n                                          :class=\"[\n                                            'text-sm',\n                                            requestData?.approvals?.divisionalDirector\n                                              ?.signature_status === 'Signed'\n                                              ? 'fas fa-check text-green-400'\n                                              : 'fas fa-times text-red-400'\n                                          ]\"\n                                        ></i>\n                                      </div>\n                                      <span\n                                        :class=\"[\n                                          'text-sm font-semibold',\n                                          requestData?.approvals?.divisionalDirector\n                                            ?.signature_status === 'Signed'\n                                            ? 'text-green-400'\n                                            : 'text-red-400'\n                                        ]\"\n                                      >\n                                        {{\n                                          requestData?.approvals?.divisionalDirector\n                                            ?.signature_display || 'No signature'\n                                        }}\n                                      </span>\n                                    </div>\n                                    <!-- Optional: Show signature preview icon for signed status -->\n                                    <div\n                                      v-if=\"\n                                        requestData?.approvals?.divisionalDirector\n                                          ?.signature_status === 'Signed'\n                                      \"\n                                      class=\"absolute top-2 right-2\"\n                                    >\n                                      <div\n                                        class=\"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center\"\n                                      >\n                                        <i\n                                          class=\"fas fa-signature text-green-400 text-xs\"\n                                          title=\"Signature on file\"\n                                        ></i>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n\n                                <!-- Keep upload button section for when user can edit -->\n                                <div class=\"text-center mt-2\">\n                                  <button\n                                    v-if=\"isDivisionalApprovalEditable && !(hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name)))\"\n                                    type=\"button\"\n                                    @click=\"signCurrentDocument\"\n                                    :disabled=\"isSigning || !isReviewMode\"\n                                    class=\"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50\"\n                                  >\n                                    <i class=\"fas fa-pen-alt\"></i>\n                                    Sign Document\n                                  </button>\n                                  <p v-if=\"!isReviewMode\" class=\"text-xs text-blue-200 mt-1\">Available after submitting the request</p>\n                                </div>\n                              </div>\n\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-1\">Date (mm/dd/yyyy)<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.divisionalDirector.date\"\n                                type=\"date\"\n                                :readonly=\"true\"\n:class=\"[\n                                  'medical-input w-full px-3 py-2 bg-white/15 border rounded-lg focus:outline-none text-white backdrop-blur-sm cursor-not-allowed',\n                                  shouldShowDivisionalSignedIndicator\n                                    ? 'border-green-400/60 ring-1 ring-green-300/40'\n                                    : '',\n                                  shouldShowDivisionalNoSignatureIndicator\n                                    ? 'border-red-400/40'\n                                    : '',\n                                  isDivisionalSkipped ? 'border-red-400/60 bg-red-500/10' : '',\n                                  isIctDirectorApprovalActive && shouldShowDivisionalSignedIndicator\n                                    ? 'font-semibold text-green-200'\n                                    : ''\n                                ]\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  v-if=\"isDivisionalSkipped\"\n                                  class=\"fas fa-ban text-red-400 text-xs\"\n                                  title=\"Divisional Director approval skipped\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowDivisionalSignedIndicator\"\n                                  class=\"fas fa-check text-green-400 text-xs\"\n                                  title=\"Divisional Director has signed - date populated from approval\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowDivisionalNoSignatureIndicator\"\n                                  class=\"fas fa-clock text-red-400 text-xs\"\n                                  title=\"Pending Divisional Director approval\"\n                                ></i>\n                                <i\n                                  v-else\n                                  class=\"fas fa-calendar text-blue-300 text-xs\"\n                                  title=\"Date will be populated when Divisional Director approves\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- Director of ICT -->\n                      <div\n                        :class=\"[\n                          'bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm',\n                          isDivisionalDirectorUser ? 'p-3' : 'p-4'\n                        ]\"\n                      >\n                        <h5\n                          class=\"font-bold text-white mb-1 text-center text-sm flex items-center justify-center gap-2\"\n                        >\n                          <i class=\"fas fa-laptop-code mr-2 text-blue-300\"></i>\n                          Director of ICT\n                          <!-- HOD view - Show signature status for higher approvers -->\n                          <span\n                            v-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              requestData?.ict_director_signature_path\n                            \"\n                            class=\"text-xs px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-signature text-xs mr-1\"></i>\n                            Signed\n                          </span>\n                          <span\n                            v-else-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              !requestData?.ict_director_signature_path\n                            \"\n                            class=\"text-xs px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-times text-xs mr-1\"></i>\n                            No Signature\n                          </span>\n                          <!-- Other roles view -->\n                          <span\n                            v-else-if=\"isStageCompleted('ict_director')\"\n                            class=\"text-xs px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-check text-xs mr-1\"></i>\n                            Completed\n                          </span>\n                          <span\n                            v-else-if=\"!isIctDirectorApprovalEditable && isReviewMode\"\n                            class=\"text-xs px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                          >\n                            <i class=\"fas fa-clock text-xs mr-1\"></i>\n                            Pending\n                          </span>\n                        </h5>\n                        <div class=\"space-y-3\">\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-1\">Name<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.directorICT.name\"\n                                type=\"text\"\n                                readonly\n                                :placeholder=\"getApprovalNamePlaceholder('ict_director')\"\n                                class=\"medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed\"\n                                :title=\"getApprovalNameTitle('ict_director')\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  class=\"fas fa-lock text-blue-300 text-xs\"\n                                  title=\"This field is auto-populated from your account\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-1\">Signature<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <!-- Show ICT Director signed indicator for Head IT stage -->\n                              <div\n                                v-if=\"shouldShowIctDirectorSignedIndicator\"\n                                class=\"w-full px-3 py-2 border-2 border-green-400/50 rounded-xl bg-green-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                                :title=\"getSignedByYouTooltip('ict_director')\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-check text-green-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-green-400 font-semibold text-base\">Signed</span>\n                                  </div>\n                                  <p class=\"text-green-300/80 text-base\">\n                                    Approved at: {{ getApprovalDateFormatted('ict_director') }}\n                                  </p>\n                                </div>\n                              </div>\n\n                              <!-- Show ICT Director missing signature indicator for Head IT stage -->\n                              <div\n                                v-else-if=\"shouldShowIctDirectorNoSignatureIndicator\"\n                                class=\"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-times text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">No signature on file</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">\n                                    ICT Director approval pending\n                                  </p>\n                                </div>\n                              </div>\n\n                              <div\n                                v-else-if=\"!directorICTSignaturePreview\"\n                                class=\"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20\"\n                              >\n                                <!-- Display signature status with proper styling like HOD -->\n                                <div\n                                  :class=\"[\n                                    'w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative',\n                                    requestData?.approvals?.directorICT?.signature_status ===\n                                    'Signed'\n                                      ? 'border-2 border-green-400/50 bg-green-500/10 shadow-lg'\n                                      : 'border-2 border-red-400/50 bg-red-500/10 shadow-lg'\n                                  ]\"\n                                >\n                                  <div class=\"text-center\">\n                                    <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                      <div\n                                        :class=\"[\n                                          'w-8 h-8 rounded-full flex items-center justify-center',\n                                          requestData?.approvals?.directorICT?.signature_status ===\n                                          'Signed'\n                                            ? 'bg-green-500/20'\n                                            : 'bg-red-500/20'\n                                        ]\"\n                                      >\n                                        <i\n                                          :class=\"[\n                                            'text-sm',\n                                            requestData?.approvals?.directorICT\n                                              ?.signature_status === 'Signed'\n                                              ? 'fas fa-check text-green-400'\n                                              : 'fas fa-times text-red-400'\n                                          ]\"\n                                        ></i>\n                                      </div>\n                                      <span\n                                        :class=\"[\n                                          'text-sm font-semibold',\n                                          requestData?.approvals?.directorICT?.signature_status ===\n                                          'Signed'\n                                            ? 'text-green-400'\n                                            : 'text-red-400'\n                                        ]\"\n                                      >\n                                        {{\n                                          requestData?.approvals?.directorICT?.signature_display ||\n                                          'No signature'\n                                        }}\n                                      </span>\n                                    </div>\n                                    <!-- Optional: Show signature preview icon for signed status -->\n                                    <div\n                                      v-if=\"\n                                        requestData?.approvals?.directorICT?.signature_status ===\n                                        'Signed'\n                                      \"\n                                      class=\"absolute top-2 right-2\"\n                                    >\n                                      <div\n                                        class=\"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center\"\n                                      >\n                                        <i\n                                          class=\"fas fa-signature text-green-400 text-xs\"\n                                          title=\"Signature on file\"\n                                        ></i>\n                                      </div>\n                                    </div>\n                                  </div>\n                                </div>\n\n                                <!-- Keep upload button section for when user can edit -->\n                                <div class=\"text-center mt-2\">\n                                  <button\n                                    v-if=\"isIctDirectorApprovalEditable && !(hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name)))\"\n                                    type=\"button\"\n                                    @click=\"signCurrentDocument\"\n                                    :disabled=\"isSigning || !isReviewMode\"\n                                    class=\"px-3 py-1.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs font-semibold rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-green-400/50\"\n                                  >\n                                    <i class=\"fas fa-pen-alt\"></i>\n                                    Sign Document\n                                  </button>\n                                  <p v-if=\"!isReviewMode\" class=\"text-xs text-blue-200 mt-1\">Available after submitting the request</p>\n                                </div>\n                              </div>\n\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-xs font-medium text-blue-100 mb-1\">Date (mm/dd/yyyy)<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.directorICT.date\"\n                                type=\"date\"\n                                :readonly=\"!isIctDirectorApprovalEditable\"\n                                class=\"medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm\"\n                                :class=\"{\n                                  'cursor-not-allowed': !isIctDirectorApprovalEditable,\n                                  'ict-director-approval-editable': isIctDirectorApprovalEditable,\n                                  'bg-green-100/20 border-green-400/40':\n                                    shouldShowIctDirectorSignedIndicator,\n                                  'bg-red-100/20 border-red-400/40':\n                                    shouldShowIctDirectorNoSignatureIndicator\n                                }\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  v-if=\"shouldShowIctDirectorSignedIndicator\"\n                                  class=\"fas fa-check text-green-400 text-xs\"\n                                  title=\"ICT Director has signed - date populated from approval\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowIctDirectorNoSignatureIndicator\"\n                                  class=\"fas fa-clock text-red-400 text-xs\"\n                                  title=\"Pending ICT Director approval\"\n                                ></i>\n                                <i\n                                  v-else\n                                  class=\"fas fa-calendar text-blue-300 text-xs\"\n                                  :title=\"\n                                    isIctDirectorApprovalEditable\n                                      ? 'Select ICT Director approval date'\n                                      : 'Date will be populated when ICT Director approves'\n                                  \"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n\n                  <!-- For Implementation Section -->\n                  <div :class=\"implementationCardClass\">\n                    <div :class=\"implementationHeaderClass\">\n                      <div\n                        class=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50\"\n                      >\n                        <i class=\"fas fa-cogs text-white text-sm\"></i>\n                      </div>\n                      <h3 \n                        :class=\"[\n                          'text-base font-bold text-white flex items-center',\n                          isStrictViewMode ? 'select-none' : 'cursor-pointer select-none'\n                        ]\"\n                        @click=\"!isStrictViewMode && (showImplementationSections = !showImplementationSections)\"\n                        :aria-expanded=\"showImplementationSections ? 'true' : 'false'\"\n                        :aria-controls=\"'implementation-sections'\"\n                        :title=\"isStrictViewMode ? 'Implementation information' : 'Toggle implementation sections'\"\n                      >\n                        <i class=\"fas fa-tools mr-1 text-blue-300\"></i>\n                        For Implementation\n                        <i\n                          v-if=\"!isStrictViewMode\"\n                          :class=\"['fas', showImplementationSections ? 'fa-chevron-up' : 'fa-chevron-down']\"\n                          class=\"ml-2\"\n                        ></i>\n                      </h3>\n                    </div>\n\n                    <div id=\"implementation-sections\" v-show=\"isStrictViewMode || showImplementationSections\" :class=\"implementationGridClass\">\n                      <!-- Head of IT -->\n                      <div :class=\"headItSectionClass\">\n                        <h5\n                          class=\"font-bold text-white mb-0.5 text-center text-base flex items-center justify-center gap-1\"\n                        >\n                          <i class=\"fas fa-user-cog mr-2\"></i>\n                          Head of IT\n                          <!-- HOD view - Show signature status for higher approvers -->\n                          <span\n                            v-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              requestData?.head_it_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-signature text-base mr-1\"></i>\n                            Signed\n                          </span>\n                          <span\n                            v-else-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              !requestData?.head_it_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-times text-base mr-1\"></i>\n                            No Signature\n                          </span>\n                          <!-- Other roles view -->\n                          <span\n                            v-else-if=\"isStageCompleted('head_it')\"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-check text-base mr-1\"></i>\n                            Completed\n                          </span>\n                          <span\n                            v-else-if=\"!isHeadItApprovalEditable && isReviewMode\"\n                            class=\"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                          >\n                            <i class=\"fas fa-clock text-base mr-1\"></i>\n                            Pending\n                          </span>\n                        </h5>\n                        <div class=\"space-y-0.5\">\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-0.5\">Name<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.implementation.headIT.name\"\n                                type=\"text\"\n                                :readonly=\"\n                                  !isHeadItApprovalEditable ||\n                                  (isHeadItApprovalEditable && !!form.implementation.headIT.name)\n                                \"\n                                :placeholder=\"getApprovalNamePlaceholder('head_it')\"\n                                class=\"medical-input w-full px-2 py-1 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm text-xs\"\n                                :class=\"{\n                                  'cursor-not-allowed bg-gray-500/20':\n                                    !isHeadItApprovalEditable ||\n                                    (isHeadItApprovalEditable && !!form.implementation.headIT.name),\n                                  'bg-white/15':\n                                    !form.implementation.headIT.name && isHeadItApprovalEditable,\n                                  'bg-blue-500/20 border-blue-400/50':\n                                    isHeadItApprovalEditable && !!form.implementation.headIT.name,\n                                  'font-bold text-yellow-300':\n                                    isHeadItApprovalEditable && form.implementation.headIT.name\n                                }\"\n                                :title=\"\n                                  form.implementation.headIT.name\n                                    ? 'Auto-populated from your account - cannot be modified'\n                                    : getApprovalNameTitle('head_it')\n                                \"\n                              />\n                              <div\n                                class=\"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-2\"\n                              >\n                                <!-- Debug button for Head IT auto-population (development only) -->\n                                <i\n                                  class=\"fas fa-lock text-blue-300 text-xs\"\n                                  :class=\"{\n                                    'text-yellow-300':\n                                      isHeadItApprovalEditable && form.implementation.headIT.name\n                                  }\"\n                                  :title=\"\n                                    isHeadItApprovalEditable\n                                      ? 'This field is auto-populated from your account'\n                                      : 'This field will be auto-populated when Head IT reviews the request'\n                                  \"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-0.5\">Signature<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <!-- Show Head IT signed indicator for ICT Officer stage -->\n                              <div\n                                v-if=\"shouldShowHeadITSignedIndicator\"\n                                class=\"w-full px-2 py-1 border-2 border-green-400/50 rounded-lg bg-green-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[25px] flex items-center justify-center\"\n                                :title=\"getSignedByYouTooltip('head_it')\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-check text-green-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-green-400 font-semibold text-base\">Signed</span>\n                                  </div>\n                                  <p class=\"text-green-300/80 text-base\">\n                                    Approved at: {{ getApprovalDateFormatted('head_it') }}\n                                  </p>\n                                </div>\n                              </div>\n\n                              <!-- Show Head IT missing signature indicator for ICT Officer stage -->\n                              <div\n                                v-else-if=\"shouldShowHeadITNoSignatureIndicator\"\n                                class=\"w-full px-2 py-1 border-2 border-red-400/50 rounded-lg bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[25px] flex items-center justify-center\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-6 h-6 bg-red-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-times text-red-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-red-400 font-semibold text-base\">No signature on file</span>\n                                  </div>\n                                  <p class=\"text-red-300/80 text-base\">Head IT approval pending</p>\n                                </div>\n                              </div>\n\n                              <div\n                                v-else-if=\"!headITSignaturePreview\"\n                                class=\"w-full px-2 py-1 border border-blue-300/30 rounded-lg focus-within:border-blue-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[20px] flex items-center justify-center backdrop-blur-sm\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"mb-1\">\n                                    <i class=\"fas fa-signature text-blue-300 text-sm mb-1\"></i>\n                                    <p class=\"text-blue-100 text-xs\">No signature</p>\n                                  </div>\n                                  <button\n                                    v-if=\"isHeadItApprovalEditable && !(hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name)))\"\n                                    type=\"button\"\n                                    @click=\"signCurrentDocument\"\n                                    :disabled=\"isSigning || !isReviewMode\"\n                                    class=\"px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto\"\n                                  >\n                                    <i class=\"fas fa-pen-alt\"></i>\n                                    Sign Document\n                                  </button>\n                                  <p v-if=\"!isReviewMode\" class=\"text-[10px] text-blue-200 mt-0.5\">Available after submitting the request</p>\n                                </div>\n                              </div>\n\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-base font-medium text-blue-100 mb-0.5\">Date (mm/dd/yyyy)<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.implementation.headIT.date\"\n                                type=\"date\"\n                                :readonly=\"!isHeadItApprovalEditable\"\n                                class=\"medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm text-xs\"\n                                :class=\"{\n                                  'cursor-not-allowed': !isHeadItApprovalEditable,\n                                  'font-bold text-yellow-300':\n                                    isHeadItApprovalEditable && form.implementation.headIT.date,\n                                  'bg-green-100/20 border-green-400/40':\n                                    shouldShowHeadITSignedIndicator,\n                                  'bg-red-100/20 border-red-400/40':\n                                    shouldShowHeadITNoSignatureIndicator\n                                }\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  v-if=\"shouldShowHeadITSignedIndicator\"\n                                  class=\"fas fa-check text-green-400 text-xs\"\n                                  title=\"Head IT has signed - date populated from approval\"\n                                ></i>\n                                <i\n                                  v-else-if=\"shouldShowHeadITNoSignatureIndicator\"\n                                  class=\"fas fa-clock text-red-400 text-xs\"\n                                  title=\"Pending Head IT approval\"\n                                ></i>\n                                <i\n                                  v-else\n                                  class=\"fas fa-calendar text-blue-300 text-xs\"\n                                  title=\"Date will be populated when Head IT approves\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <!-- ICT Officer granting access -->\n                      <div :class=\"ictOfficerSectionClass\">\n                        <h5\n                          class=\"font-bold text-white mb-0.5 text-center text-base flex items-center justify-center gap-1\"\n                        >\n                          <i class=\"fas fa-user-shield mr-2\"></i>\n                          ICT Officer granting access\n                          <!-- HOD view - Show signature status for higher approvers -->\n                          <span\n                            v-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              requestData?.ict_officer_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-signature text-base mr-1\"></i>\n                            Signed\n                          </span>\n                          <span\n                            v-else-if=\"\n                              isHodApprovalEditable &&\n                              isReviewMode &&\n                              !requestData?.ict_officer_signature_path\n                            \"\n                            class=\"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300\"\n                          >\n                            <i class=\"fas fa-times text-base mr-1\"></i>\n                            No Signature\n                          </span>\n                          <!-- Other roles view -->\n                          <span\n                            v-else-if=\"isStageCompleted('ict_officer')\"\n                            class=\"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300\"\n                          >\n                            <i class=\"fas fa-check text-base mr-1\"></i>\n                            Completed\n                          </span>\n                          <span\n                            v-else-if=\"!isIctOfficerApprovalEditable && isReviewMode\"\n                            class=\"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300\"\n                          >\n                            <i class=\"fas fa-clock text-xs mr-1\"></i>\n                            Pending\n                          </span>\n                        </h5>\n                        <div class=\"space-y-0.5\">\n                          <div>\n                            <label class=\"block text-xs font-medium text-blue-100 mb-0\">Name<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.implementation.ictOfficer.name\"\n                                type=\"text\"\n                                readonly\n                                :placeholder=\"getApprovalNamePlaceholder('ict_officer')\"\n                                class=\"medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed text-xs\"\n                                :title=\"getApprovalNameTitle('ict_officer')\"\n                              />\n                              <div class=\"absolute right-3 top-1/2 transform -translate-y-1/2\">\n                                <i\n                                  class=\"fas fa-lock text-blue-300 text-xs\"\n                                  title=\"This field is auto-populated from your account\"\n                                ></i>\n                              </div>\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-xs font-medium text-blue-100 mb-0\">Signature<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <div\n                                v-if=\"\n                                  !ictOfficerSignaturePreview &&\n                                  !isImplementationAlreadyCompleted &&\n                                  !(shouldShowIctOfficerSignedIndicator || (viewerStage() === 'ict_officer' && (hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name)))))\n                                \"\n                                class=\"w-full px-2 py-1 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[20px] flex items-center justify-center hover:bg-white/20\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"mb-0.5\">\n                                    <i class=\"fas fa-signature text-blue-300 text-sm mb-0.5\"></i>\n                                    <p class=\"text-blue-100 text-xs\">No signature yet</p>\n                                  </div>\n                                  <button\n                                    v-if=\"\n                                      (isIctOfficerApprovalEditable ||\n                                        currentUser?.role === 'ict_officer') &&\n                                      !isImplementationAlreadyCompleted &&\n                                      !(hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name)))\n                                    \"\n                                    type=\"button\"\n                                    @click=\"signCurrentDocument\"\n                                    :disabled=\"isSigning || !isReviewMode\"\n                                    class=\"px-2 py-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50\"\n                                  >\n                                    <i class=\"fas fa-pen-alt\"></i>\n                                    Sign Document\n                                  </button>\n                                  <p v-if=\"!isReviewMode\" class=\"text-[10px] text-blue-200 mt-0.5\">Available after submitting the request</p>\n                                </div>\n                              </div>\n\n                              <!-- Show existing signature when implementation is completed or when digitally signed -->\n                              <div\n                                v-else-if=\"\n                                  shouldShowIctOfficerSignedIndicator ||\n                                  (viewerStage() === 'ict_officer' && (hasUserSigned || (currentUser?.name && historyHasSigner(currentUser.name))))\n                                \"\n                                class=\"w-full px-3 py-2 border-2 border-green-300/40 rounded-xl bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-green-500/20 min-h-[35px] flex items-center justify-center relative\"\n                                :title=\"getSignedByYouTooltip('ict_officer')\"\n                              >\n                                <div class=\"text-center\">\n                                  <div class=\"flex items-center justify-center space-x-2 mb-1\">\n                                    <div\n                                      class=\"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center\"\n                                    >\n                                      <i class=\"fas fa-check text-green-400 text-sm\"></i>\n                                    </div>\n                                    <span class=\"text-green-300 font-extrabold text-base uppercase tracking-wide\">Signed</span>\n                                  </div>\n                                  <p class=\"text-green-200 font-semibold text-sm\">\n                                    Approved at: {{ getApprovalDateFormatted('ict_officer') }}\n                                  </p>\n                                </div>\n                                <!-- Optional: Show signature preview icon -->\n                                <div class=\"absolute top-2 right-2\">\n                                  <div\n                                    class=\"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center\"\n                                  >\n                                    <i\n                                      class=\"fas fa-signature text-green-400 text-xs\"\n                                      title=\"Signature on file\"\n                                    ></i>\n                                  </div>\n                                </div>\n                              </div>\n\n                              <!-- Show no signature indicator (development fallback) -->\n                              <div\n                                v-else-if=\"shouldShowIctOfficerNoSignatureIndicator\"\n                                class=\"w-full px-2 py-1 border-2 border-dashed border-red-300/40 rounded-lg bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[20px] flex items-center justify-center\"\n                              >\n                                <div class=\"text-center\">\n                                  <i class=\"fas fa-times text-red-400 text-sm mb-0.5\"></i>\n                                  <p class=\"text-red-300 text-xs\">No signature</p>\n                                </div>\n                              </div>\n\n                              <!-- Show uploaded signature preview -->\n                            </div>\n                          </div>\n                          <div>\n                            <label class=\"block text-xs font-medium text-blue-100 mb-0\">Date<span class=\"text-red-400\">*</span></label>\n                            <div class=\"relative\">\n                              <input\n                                v-model=\"form.approvals.hod.date\"\n                                type=\"date\"\n                                class=\"medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm hod-approval-editable text-xs\"\n                              />\n                            </div>\n                          </div>\n\n                          <!-- ICT Officer Approve Request Button (after signature upload) - Hide in strict view mode -->\n                          <div\n                            v-if=\"\n                              !isStrictViewMode &&\n                              (isIctOfficerApprovalEditable || currentUser?.role === 'ict_officer') &&\n                              (shouldShowIctOfficerSignedIndicator || hasUserSigned) &&\n                              !isImplementationAlreadyCompleted\n                            \"\n                            class=\"mt-3\"\n                          >\n                            <button\n                              type=\"button\"\n                              @click=\"onIctOfficerApproveClick\"\n                              :disabled=\"isImplementationApprovalDisabled\"\n                              :class=\"[\n                                'w-full px-4 py-2 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-xs',\n                                isImplementationApprovalDisabled\n                                  ? 'bg-gray-500 text-gray-300 cursor-not-allowed opacity-50'\n                                  : 'bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700'\n                              ]\"\n                            >\n                              <i v-if=\"processing\" class=\"fas fa-spinner fa-spin mr-2\"></i>\n                              <i v-else class=\"fas fa-check mr-2\"></i>\n                              {{ processing ? 'Approving...' : 'Approve Request' }}\n                            </button>\n                          </div>\n\n                          <!-- Select ICT Officer Button (Head IT Only - Persistent after approval) - Hide in strict view mode -->\n                          <div v-if=\"!isStrictViewMode && shouldShowSelectIctOfficerButton\" class=\"mt-2\">\n                            <div\n                              class=\"bg-yellow-500/10 border-2 border-yellow-400/30 rounded-lg p-2 backdrop-blur-sm\"\n                            >\n                              <div class=\"flex items-center justify-between\">\n                                <div class=\"flex items-center space-x-2\">\n                                  <div\n                                    class=\"w-6 h-6 bg-yellow-500/20 rounded-full flex items-center justify-center\"\n                                  >\n                                    <i class=\"fas fa-user-shield text-yellow-400 text-sm\"></i>\n                                  </div>\n                                  <div>\n                                    <h6 class=\"text-xs font-semibold text-yellow-200 mb-0.5\">\n                                      ICT Officer Assignment Required\n                                    </h6>\n                                    <p class=\"text-xs text-yellow-300/80\">\n                                      Request approved. Please assign an ICT Officer.\n                                    </p>\n                                  </div>\n                                </div>\n                                <button\n                                  @click=\"navigateToSelectIctOfficer\"\n                                  class=\"px-3 py-1.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-xs\"\n                                >\n                                  <i class=\"fas fa-user-plus mr-1\"></i>\n                                  Select ICT Officer\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <!-- Action Buttons (Review Mode Only) - Hide in strict view mode -->\n                  <div\n                    v-if=\"isReviewMode && canApproveAtStage() && !showApprovalSuccessCard && !isStrictViewMode\"\n                    :class=\"actionButtonsClass\"\n                  >\n                    <!-- Action Buttons -->\n                    <div class=\"flex justify-between gap-4\">\n                      <!-- Approve Button - Left Side -->\n                      <button\n                        type=\"button\"\n                        @click=\"approveRequest\"\n                        :disabled=\"areApprovalButtonsDisabled\"\n                        :class=\"[\n                          'flex-1 px-6 py-3 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg transform',\n                          areApprovalButtonsDisabled\n                            ? 'bg-gray-500 text-gray-300 cursor-not-allowed opacity-50'\n                            : 'bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 hover:shadow-xl hover:scale-105'\n                        ]\"\n                        :title=\"approvalButtonTooltip\"\n                      >\n                        <i v-if=\"loading || processing\" class=\"fas fa-spinner fa-spin mr-2\"></i>\n                        <i v-else class=\"fas fa-check mr-2\"></i>\n                        {{ loading || processing ? 'Processing...' : 'Approve Request' }}\n                      </button>\n\n                      <!-- Reject Button - Right Side -->\n                      <button\n                        type=\"button\"\n                        @click=\"rejectRequest\"\n                        :disabled=\"areApprovalButtonsDisabled\"\n                        :class=\"[\n                          'flex-1 px-6 py-3 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg transform',\n                          areApprovalButtonsDisabled\n                            ? 'bg-gray-500 text-gray-300 cursor-not-allowed opacity-50'\n                            : 'bg-gradient-to-r from-red-600 to-pink-600 text-white hover:from-red-700 hover:to-pink-700 hover:shadow-xl hover:scale-105'\n                        ]\"\n                        :title=\"\n                          isSignatureRequiredForApproval\n                            ? 'Please upload your signature first'\n                            : 'Reject this request'\n                        \"\n                      >\n                        <i class=\"fas fa-times mr-2\"></i>\n                        Reject Request\n                      </button>\n                    </div>\n                  </div>\n\n                  <!-- Footer & Submit (Normal Mode) -->\n                  <div v-if=\"!isReviewMode\" class=\"border-t-2 border-gray-200 pt-3\">\n                    <div class=\"flex flex-col sm:flex-row justify-between gap-3\">\n                      <button\n                        type=\"button\"\n                        @click=\"onReset\"\n                        class=\"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl\"\n                      >\n                        <svg class=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path\n                            fill-rule=\"evenodd\"\n                            d=\"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z\"\n                            clip-rule=\"evenodd\"\n                          />\n                        </svg>\n                        Reset Form\n                      </button>\n                      <button\n                        type=\"submit\"\n                        class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl\"\n                      >\n                        <svg class=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path\n                            fill-rule=\"evenodd\"\n                            d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                            clip-rule=\"evenodd\"\n                          />\n                        </svg>\n                        Submit Request\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Right: tabs -->\n                <div\n                  v-if=\"!isReviewMode\"\n                  aria-labelledby=\"module-tabs\"\n                  class=\"lg:col-span-1 space-y-4\"\n                >\n                  <!-- Debug info for HOD module tabs (development only) -->\n                  <div\n                    v-if=\"isDevelopment && (getUserRole() || '').toLowerCase().includes('hod')\"\n                    class=\"bg-yellow-500/20 border-2 border-yellow-400/60 rounded-lg p-2 mb-4\"\n                  >\n                    <h4 class=\"text-yellow-200 font-bold text-sm mb-2\"> HOD Module Debug Info</h4>\n                    <div class=\"text-xs text-yellow-100 space-y-1\">\n                      <div>isReviewMode: {{ isReviewMode }}</div>\n                      <div>isHodApprovalEditable: {{ isHodApprovalEditable }}</div>\n                      <div>User Role: {{ getUserRole() }}</div>\n                      <div>Request Status: {{ requestData?.status || 'none' }}</div>\n                      <div>Show Tabs: {{ !isReviewMode || isHodApprovalEditable }}</div>\n                      <div>Module reviewMode: {{ isReviewMode && !isHodApprovalEditable }}</div>\n                      <div>Available Tabs: {{ tabs.map((t) => t.label).join(', ') }}</div>\n                    </div>\n                  </div>\n                  <h2 id=\"module-tabs\" class=\"sr-only\">Module Details</h2>\n\n                  <!-- Desktop tabs -->\n                  <div class=\"hidden md:block\">\n                    <div class=\"flex items-center gap-2 overflow-x-auto pb-1\">\n                      <button\n                        v-for=\"t in tabs\"\n                        :key=\"t.key\"\n                        class=\"tab\"\n                        :class=\"t.key === activeTab ? 'tab-active' : ''\"\n                        @click=\"activeTab = t.key\"\n                        :aria-selected=\"t.key === activeTab\"\n                        role=\"tab\"\n                      >\n                        {{ t.label }}\n                        <i\n                          class=\"fas fa-times ml-2 text-xs opacity-70 hover:opacity-100\"\n                          @click.stop=\"tryCloseTab(t.key)\"\n                        ></i>\n                      </button>\n                    </div>\n                    <!-- Removed module detail panel to eliminate large white section under chips -->\n                    <div class=\"mt-2\" v-if=\"false\"></div>\n                  </div>\n\n                  <!-- Mobile accordion -->\n                  <div class=\"md:hidden space-y-2\">\n                    <div v-for=\"t in tabs\" :key=\"t.key\" class=\"card\">\n                      <button\n                        class=\"w-full flex items-center justify-between text-left\"\n                        @click=\"toggleAccordion(t.key)\"\n                      >\n                        <span class=\"font-semibold\">{{ t.label }}</span>\n                        <i\n                          :class=\"[\n                            'fas',\n                            openAccordions.has(t.key) ? 'fa-chevron-up' : 'fa-chevron-down'\n                          ]\"\n                        ></i>\n                      </button>\n                      <!-- Removed mobile detail panel as requested -->\n                      <transition name=\"fade\">\n                        <div v-if=\"false\"></div>\n                      </transition>\n                    </div>\n                  </div>\n                </div>\n                </div>\n              </div>\n            </form>\n          </div>\n\n          <!-- Footer moved to bottom of main content -->\n          <div class=\"mt-6\">\n            <AppFooter />\n          </div>\n        </div>\n      </main>\n    </div>\n\n    <!-- Close Tab Confirmation Modal -->\n    <transition name=\"fade\">\n      <div\n        v-if=\"confirm.key\"\n        class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n      >\n        <div class=\"bg-white rounded-lg shadow-xl max-w-md w-full p-4\">\n          <h3 class=\"text-lg font-semibold text-gray-800\">Remove {{ confirm.label }}?</h3>\n          <p class=\"text-sm text-gray-600 mt-1\">\n            You have unsaved data in this module. Are you sure you want to close it?\n          </p>\n          <div class=\"mt-4 flex justify-end gap-2\">\n            <button class=\"btn-secondary\" @click=\"confirm = { key: '', label: '' }\">Cancel</button>\n            <button class=\"btn-danger\" @click=\"closeTab(confirm.key)\">Remove</button>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    <!-- Rejection Reason Modal -->\n    <transition name=\"fade\">\n      <div\n        v-if=\"showRejectionModal\"\n        class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n      >\n        <div class=\"bg-white rounded-xl shadow-2xl max-w-md w-full p-6\">\n          <div class=\"flex items-center space-x-3 mb-4\">\n            <div class=\"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center\">\n              <i class=\"fas fa-times text-red-600\"></i>\n            </div>\n            <div>\n              <h3 class=\"text-lg font-semibold text-gray-800\">Reject Request</h3>\n              <p class=\"text-sm text-gray-600\">\n                Please provide a reason for rejecting this request\n              </p>\n            </div>\n          </div>\n\n          <div class=\"mb-4\">\n            <label class=\"block text-base font-medium text-gray-700 mb-1\">Rejection Reason *</label>\n            <textarea\n              v-model=\"rejectionReason\"\n              class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm\"\n              rows=\"4\"\n              placeholder=\"Enter the reason for rejecting this request...\"\n              required\n            ></textarea>\n          </div>\n\n          <div class=\"flex justify-end space-x-3\">\n            <button\n              @click=\"cancelRejectRequest\"\n              class=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              @click=\"confirmRejectRequest\"\n              :disabled=\"!rejectionReason?.trim()\"\n              class=\"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-300 text-white rounded-lg font-medium transition-colors flex items-center\"\n            >\n              <i class=\"fas fa-times mr-2\"></i>\n              Reject Request\n            </button>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n\n    <!-- Success Modal Popup (Head IT Only) -->\n    <transition name=\"fade\">\n      <div\n        v-if=\"showApprovalSuccessCard && isHeadItUser\"\n        class=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\"\n      >\n        <div\n          class=\"bg-white rounded-2xl shadow-2xl max-w-lg w-full transform transition-all duration-500 scale-100\"\n        >\n          <!-- Header with success icon -->\n          <div\n            class=\"bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-6 text-center rounded-t-2xl\"\n          >\n            <div\n              class=\"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\"\n            >\n              <i class=\"fas fa-check text-green-600 text-3xl\"></i>\n            </div>\n            <h3 class=\"text-2xl font-bold text-white mb-2\">Request Approved Successfully!</h3>\n          </div>\n\n          <!-- Content -->\n          <div class=\"px-6 py-6 text-center\">\n            <div class=\"mb-6\">\n              <div class=\"flex items-center justify-center mb-4\">\n                <div class=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n                  <i class=\"fas fa-user-shield text-blue-600 text-xl\"></i>\n                </div>\n              </div>\n              <p class=\"text-gray-700 text-lg leading-relaxed\">\n                Now you can select the ICT Officer who will be assigned this task of releasing\n                access to\n                <span class=\"font-semibold text-blue-600\">{{ getRequesterName() }}</span>.\n              </p>\n            </div>\n\n            <!-- Action buttons -->\n            <div class=\"flex gap-3\">\n              <button\n                @click=\"closeSuccessModal\"\n                class=\"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-200 text-base font-medium\"\n              >\n                Later\n              </button>\n              <button\n                @click=\"navigateToSelectIctOfficer\"\n                class=\"flex-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-base\"\n              >\n                <i class=\"fas fa-user-plus mr-2\"></i>\n                Select ICT Officer\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n\n    <!-- ICT Officer Confirmation Popup -->\n    <transition name=\"fade\">\n      <div\n        v-if=\"showIctOfficerConfirmation\"\n        class=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4\"\n      >\n        <div\n          class=\"bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-500 scale-100\"\n        >\n          <!-- Header with blue gradient -->\n          <div\n            class=\"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-6 text-center rounded-t-2xl\"\n          >\n            <div\n              class=\"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\"\n            >\n              <i class=\"fas fa-user-shield text-blue-600 text-2xl\"></i>\n            </div>\n            <h3 class=\"text-xl font-bold text-white mb-2\">Grant Access Confirmation</h3>\n          </div>\n\n          <!-- Content -->\n          <div class=\"px-6 py-6 text-center\">\n            <p class=\"text-gray-700 text-base leading-relaxed mb-6\">\n              You are approaching to grant access to\n              <span class=\"font-semibold text-blue-600\">{{ getRequesterName() }}</span>. Do you want to continue?\n            </p>\n\n            <!-- Action buttons -->\n            <div class=\"flex gap-3\">\n              <button\n                @click=\"showIctOfficerConfirmation = false\"\n                class=\"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-6 rounded-lg transition duration-200 text-base font-medium flex items-center justify-center\"\n              >\n                <i class=\"fas fa-times mr-2\"></i>\n                No\n              </button>\n              <button\n                @click=\"proceedToUserSecurityAccess\"\n                class=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg transition duration-200 text-base font-medium flex items-center justify-center\"\n              >\n                <i class=\"fas fa-check mr-2\"></i>\n                Yes\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<style scoped>\n  /* Medical Glass morphism effects */\n  .medical-glass-card {\n    background: rgba(59, 130, 246, 0.15);\n    backdrop-filter: blur(25px);\n    -webkit-backdrop-filter: blur(25px);\n    border: 2px solid rgba(96, 165, 250, 0.3);\n    box-shadow:\n      0 8px 32px rgba(29, 78, 216, 0.4),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n\n  .medical-card {\n    position: relative;\n    overflow: hidden;\n    background: rgba(59, 130, 246, 0.1);\n    backdrop-filter: blur(15px);\n    -webkit-backdrop-filter: blur(15px);\n  }\n\n  .medical-card::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(96, 165, 250, 0.2), transparent);\n    transition: left 0.5s;\n  }\n\n  .medical-card:hover::before {\n    left: 100%;\n  }\n\n  .medical-input {\n    position: relative;\n    z-index: 1;\n    color: white;\n  }\n\n  .medical-input::placeholder {\n    color: rgba(191, 219, 254, 0.6);\n  }\n\n  .medical-input:focus {\n    border-color: rgba(45, 212, 191, 0.8);\n    box-shadow: 0 0 0 3px rgba(45, 212, 191, 0.2);\n  }\n\n  /* Animations */\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  @keyframes fade-in-delay {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  .animate-fade-in {\n    animation: fade-in 1s ease-out;\n  }\n\n  .animate-fade-in-delay {\n    animation: fade-in-delay 1s ease-out 0.3s both;\n  }\n\n  /* Slide across animation for loading screen */\n  @keyframes slide-across {\n    0% {\n      transform: translateX(-100%);\n    }\n    100% {\n      transform: translateX(100%);\n    }\n  }\n\n  .animate-slide-across {\n    animation: slide-across 2s linear infinite;\n  }\n\n  /* Review mode styles */\n  .review-mode input[readonly],\n  .review-mode select[disabled],\n  .review-mode textarea[readonly] {\n    background-color: rgba(59, 130, 246, 0.1) !important;\n    border-color: rgba(96, 165, 250, 0.2) !important;\n    cursor: not-allowed;\n  }\n\n  .review-mode input[type='checkbox'][disabled],\n  .review-mode input[type='radio'][disabled] {\n    opacity: 0.7;\n    cursor: not-allowed;\n  }\n\n  /* Enhanced font sizes for review mode - ICT Director readability */\n  .review-mode {\n    font-size: 1.125rem; /* 18px base font size */\n    line-height: 1.6;\n  }\n\n  .review-mode .label,\n  .review-mode label {\n    font-size: 1.25rem !important; /* 20px for labels */\n    font-weight: 600 !important;\n    line-height: 1.5;\n  }\n\n  .review-mode input,\n  .review-mode select,\n  .review-mode textarea {\n    font-size: 1.125rem !important; /* 18px for form inputs */\n    line-height: 1.5;\n    padding: 0.875rem 1rem !important; /* Increase padding for better readability */\n  }\n\n  .review-mode h1,\n  .review-mode h2,\n  .review-mode h3 {\n    font-size: 1.5rem !important; /* 24px for headings */\n    line-height: 1.4;\n  }\n\n  .review-mode p,\n  .review-mode div,\n  .review-mode span {\n    font-size: 1.125rem; /* 18px for general text */\n    line-height: 1.6;\n  }\n\n  .review-mode .text-xs {\n    font-size: 1rem !important; /* Override small text to be readable */\n  }\n\n  .review-mode .text-sm {\n    font-size: 1.125rem !important; /* Override small text */\n  }\n\n  .review-mode .text-base {\n    font-size: 1.25rem !important; /* Larger base text */\n  }\n\n  .review-mode .text-lg {\n    font-size: 1.375rem !important; /* Even larger text */\n  }\n\n  .review-mode .text-xl {\n    font-size: 1.5rem !important; /* Extra large text */\n  }\n\n  /* Review mode button styling for better visibility */\n  .review-mode button {\n    font-size: 1.125rem !important;\n    padding: 0.875rem 1.5rem !important;\n    font-weight: 600 !important;\n  }\n\n  /* Review mode card and section spacing - ORIGINAL (overridden by compact) */\n  .review-mode .card,\n  .review-mode .border-l-2 {\n    padding: 2rem !important;\n    margin-bottom: 1.5rem;\n  }\n\n  /* Review mode compact layout - overrides above for minimal scrolling */\n  .review-mode-compact {\n    /* Ultra-compact spacing for all review mode roles */\n    line-height: 1.3 !important;\n  }\n\n  .review-mode-compact .medical-card {\n    /* Minimal card spacing */\n    margin-bottom: 0.25rem !important;\n    padding: 0.5rem !important;\n  }\n\n  .review-mode-compact .space-y-0\\.5 > * + * {\n    margin-top: 0.125rem !important;\n  }\n\n  .review-mode-compact .space-y-1 > * + * {\n    margin-top: 0.25rem !important;\n  }\n\n  .review-mode-compact .space-y-2 > * + * {\n    margin-top: 0.375rem !important;\n  }\n\n  .review-mode-compact .space-y-3 > * + * {\n    margin-top: 0.5rem !important;\n  }\n\n  .review-mode-compact .space-y-4 > * + * {\n    margin-top: 0.75rem !important;\n  }\n\n  .review-mode-compact .grid {\n    gap: 0.5rem !important;\n  }\n\n  .review-mode-compact .p-1 {\n    padding: 0.25rem !important;\n  }\n\n  .review-mode-compact .p-2 {\n    padding: 0.5rem !important;\n  }\n\n  .review-mode-compact .p-3 {\n    padding: 0.75rem !important;\n  }\n\n  .review-mode-compact .p-4 {\n    padding: 1rem !important;\n  }\n\n  .review-mode-compact .mb-0\\.5 {\n    margin-bottom: 0.125rem !important;\n  }\n\n  .review-mode-compact .mb-1 {\n    margin-bottom: 0.25rem !important;\n  }\n\n  .review-mode-compact .mb-1 {\n    margin-bottom: 0.5rem !important;\n  }\n\n  .review-mode-compact .mb-3 {\n    margin-bottom: 0.75rem !important;\n  }\n\n  .review-mode-compact .mb-4 {\n    margin-bottom: 1rem !important;\n  }\n\n  .review-mode-compact h1,\n  .review-mode-compact h2,\n  .review-mode-compact h3,\n  .review-mode-compact h4,\n  .review-mode-compact h5 {\n    margin-bottom: 0.25rem !important;\n    line-height: 1.3 !important;\n  }\n\n  .review-mode-compact input,\n  .review-mode-compact textarea,\n  .review-mode-compact select {\n    padding-top: 0.375rem !important;\n    padding-bottom: 0.375rem !important;\n    line-height: 1.4 !important;\n  }\n\n  .review-mode-compact label {\n    margin-bottom: 0.25rem !important;\n    line-height: 1.3 !important;\n  }\n\n  .review-mode-compact .bg-white\\/15,\n  .review-mode-compact .bg-white\\/20 {\n    padding: 0.375rem !important;\n  }\n\n  /* Override review-mode card spacing for compact mode */\n  .review-mode-compact.review-mode .card,\n  .review-mode-compact.review-mode .border-l-2 {\n    padding: 0.5rem !important;\n    margin-bottom: 0.25rem !important;\n  }\n\n  .review-mode-compact button {\n    padding: 0.5rem 1rem !important;\n    font-size: 1rem !important;\n  }\n\n  /* Divisional Director compact layout */\n  .divisional-director-compact {\n    /* Reduce overall vertical spacing */\n    line-height: 1.3 !important;\n    font-size: 1.125rem; /* 18px base font size - matching review-mode */\n  }\n\n  .divisional-director-compact .medical-card {\n    /* Tighter card spacing */\n    margin-bottom: 0.25rem !important;\n  }\n\n  .divisional-director-compact .space-y-1 > * + * {\n    margin-top: 0.125rem !important;\n  }\n\n  .divisional-director-compact .space-y-2 > * + * {\n    margin-top: 0.25rem !important;\n  }\n\n  .divisional-director-compact .space-y-3 > * + * {\n    margin-top: 0.375rem !important;\n  }\n\n  .divisional-director-compact .space-y-4 > * + * {\n    margin-top: 0.5rem !important;\n  }\n\n  .divisional-director-compact input,\n  .divisional-director-compact textarea,\n  .divisional-director-compact select {\n    padding-top: 0.25rem !important;\n    padding-bottom: 0.25rem !important;\n    font-size: 1.125rem !important; /* 18px for form inputs - matching review-mode */\n    line-height: 1.5;\n  }\n\n  .divisional-director-compact .grid {\n    gap: 0.5rem !important;\n  }\n\n  .divisional-director-compact label {\n    margin-bottom: 0.125rem !important;\n    font-size: 1.25rem !important; /* 20px for labels - matching review-mode */\n    font-weight: 600 !important;\n    line-height: 1.5;\n  }\n\n  .divisional-director-compact .bg-white\\/15 {\n    padding: 0.5rem !important;\n  }\n\n  /* Ultra-compact for divisional directors */\n  .divisional-director-compact .medical-input {\n    padding: 0.125rem 0.375rem !important;\n    min-height: auto !important;\n    height: 1.75rem !important;\n  }\n\n  .divisional-director-compact textarea {\n    padding: 0.25rem 0.375rem !important;\n    min-height: 2rem !important;\n  }\n\n  .divisional-director-compact .rounded-xl,\n  .divisional-director-compact .rounded-lg {\n    border-radius: 0.375rem !important;\n  }\n\n  .divisional-director-compact .shadow-lg {\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;\n  }\n\n  .divisional-director-compact h1,\n  .divisional-director-compact h2,\n  .divisional-director-compact h3,\n  .divisional-director-compact h4,\n  .divisional-director-compact h5 {\n    margin-bottom: 0.25rem !important;\n    font-size: 1.5rem !important; /* 24px for headings - matching review-mode */\n    line-height: 1.4;\n  }\n\n  .divisional-director-compact .mb-1 {\n    margin-bottom: 0.125rem !important;\n  }\n\n  .divisional-director-compact .mb-1 {\n    margin-bottom: 0.25rem !important;\n  }\n\n  .divisional-director-compact .mb-3 {\n    margin-bottom: 0.375rem !important;\n  }\n\n  .divisional-director-compact .mb-4 {\n    margin-bottom: 0.5rem !important;\n  }\n\n  .divisional-director-compact .p-3 {\n    padding: 0.375rem !important;\n  }\n\n  .divisional-director-compact .p-4 {\n    padding: 0.5rem !important;\n  }\n\n  /* Button styling for divisional director matching review-mode */\n  .divisional-director-compact button {\n    font-size: 1.125rem !important;\n    padding: 0.5rem 1rem !important;\n    font-weight: 600 !important;\n  }\n\n  /* General text styling for divisional director matching review-mode */\n  .divisional-director-compact p,\n  .divisional-director-compact div,\n  .divisional-director-compact span {\n    font-size: 1.125rem; /* 18px for general text */\n    line-height: 1.6;\n  }\n\n  /* Text size classes for divisional director matching review-mode */\n  .divisional-director-compact .text-xs {\n    font-size: 1rem !important;\n  }\n\n  .divisional-director-compact .text-sm {\n    font-size: 1.125rem !important;\n  }\n\n  .divisional-director-compact .text-base {\n    font-size: 1.25rem !important;\n  }\n\n  .divisional-director-compact .text-lg {\n    font-size: 1.375rem !important;\n  }\n\n  .divisional-director-compact .text-xl {\n    font-size: 1.5rem !important;\n  }\n\n  /* ICT Director compact layout - matching review-mode font sizes */\n  .ict-director-compact {\n    /* Base font size matching review-mode */\n    font-size: 1.125rem; /* 18px base font size - matching review-mode */\n    line-height: 1.6;\n  }\n\n  .ict-director-compact .medical-card {\n    /* Compact card spacing */\n    margin-bottom: 0.5rem !important;\n    padding: 0.75rem !important;\n  }\n\n  .ict-director-compact .space-y-1 > * + * {\n    margin-top: 0.25rem !important;\n  }\n\n  .ict-director-compact .space-y-2 > * + * {\n    margin-top: 0.5rem !important;\n  }\n\n  .ict-director-compact .space-y-3 > * + * {\n    margin-top: 0.75rem !important;\n  }\n\n  .ict-director-compact .space-y-4 > * + * {\n    margin-top: 1rem !important;\n  }\n\n  .ict-director-compact .grid {\n    gap: 0.75rem !important;\n  }\n\n  /* Labels with large font size matching review-mode */\n  .ict-director-compact label,\n  .ict-director-compact .label {\n    font-size: 1.25rem !important; /* 20px for labels - matching review-mode */\n    font-weight: 600 !important;\n    line-height: 1.5;\n    margin-bottom: 0.5rem !important;\n  }\n\n  /* Form inputs with large font size matching review-mode */\n  .ict-director-compact input,\n  .ict-director-compact textarea,\n  .ict-director-compact select {\n    font-size: 1.125rem !important; /* 18px for form inputs - matching review-mode */\n    line-height: 1.5;\n    padding: 0.875rem 1rem !important; /* Increase padding for better readability */\n  }\n\n  /* Headings with large font size matching review-mode */\n  .ict-director-compact h1,\n  .ict-director-compact h2,\n  .ict-director-compact h3,\n  .ict-director-compact h4,\n  .ict-director-compact h5 {\n    font-size: 1.5rem !important; /* 24px for headings - matching review-mode */\n    line-height: 1.4;\n    margin-bottom: 0.75rem !important;\n  }\n\n  /* Button styling for ICT director matching review-mode */\n  .ict-director-compact button {\n    font-size: 1.125rem !important;\n    padding: 0.875rem 1.5rem !important;\n    font-weight: 600 !important;\n  }\n\n  /* General text styling for ICT director matching review-mode */\n  .ict-director-compact p,\n  .ict-director-compact div,\n  .ict-director-compact span {\n    font-size: 1.125rem; /* 18px for general text */\n    line-height: 1.6;\n  }\n\n  /* Text size classes for ICT director matching review-mode */\n  .ict-director-compact .text-xs {\n    font-size: 1rem !important; /* Override small text to be readable */\n  }\n\n  .ict-director-compact .text-sm {\n    font-size: 1.125rem !important; /* Override small text */\n  }\n\n  .ict-director-compact .text-base {\n    font-size: 1.25rem !important; /* Larger base text */\n  }\n\n  .ict-director-compact .text-lg {\n    font-size: 1.375rem !important; /* Even larger text */\n  }\n\n  .ict-director-compact .text-xl {\n    font-size: 1.5rem !important; /* Extra large text */\n  }\n\n  /* Head of IT readable layout - larger typography for review mode */\n  .head-it-compact {\n    font-size: 1.25rem; /* 20px base */\n    line-height: 1.75;\n  }\n  .head-it-compact .text-xs {\n    font-size: 1.125rem !important;\n  }\n  .head-it-compact .text-sm {\n    font-size: 1.25rem !important;\n  }\n  .head-it-compact .text-base {\n    font-size: 1.375rem !important;\n  }\n  .head-it-compact .text-lg {\n    font-size: 1.5rem !important;\n  }\n  .head-it-compact .text-xl {\n    font-size: 1.75rem !important;\n  }\n  .head-it-compact input,\n  .head-it-compact select,\n  .head-it-compact textarea {\n    padding: 1rem 1.125rem !important;\n    font-size: 1.25rem !important;\n  }\n  .head-it-compact label,\n  .head-it-compact .label {\n    font-size: 1.5rem !important;\n    font-weight: 700 !important;\n  }\n  .head-it-compact h1,\n  .head-it-compact h2,\n  .head-it-compact h3 {\n    font-size: 1.75rem !important;\n  }\n  .head-it-compact h4,\n  .head-it-compact h5 {\n    font-size: 1.5rem !important;\n  }\n  .head-it-compact p,\n  .head-it-compact span,\n  .head-it-compact li,\n  .head-it-compact td,\n  .head-it-compact th {\n    font-size: 1.25rem !important;\n    line-height: 1.7;\n  }\n\n  /* Padding and margin adjustments for ICT director */\n  .ict-director-compact .p-1 {\n    padding: 0.5rem !important;\n  }\n\n  .ict-director-compact .p-2 {\n    padding: 0.75rem !important;\n  }\n\n  .ict-director-compact .p-3 {\n    padding: 1rem !important;\n  }\n\n  .ict-director-compact .p-4 {\n    padding: 1.25rem !important;\n  }\n\n  .ict-director-compact .mb-1 {\n    margin-bottom: 0.5rem !important;\n  }\n\n  .ict-director-compact .mb-2 {\n    margin-bottom: 0.75rem !important;\n  }\n\n  .ict-director-compact .mb-3 {\n    margin-bottom: 1rem !important;\n  }\n\n  .ict-director-compact .mb-4 {\n    margin-bottom: 1.25rem !important;\n  }\n\n  .ict-director-compact .bg-white\\/15,\n  .ict-director-compact .bg-white\\/20 {\n    padding: 0.875rem !important;\n  }\n\n  /* HOD compact layout - Enhanced for minimal scrolling */\n  .hod-compact {\n    /* Better utilization of screen width for HOD users */\n    width: 100% !important;\n    max-width: 100% !important;\n    line-height: 1.1 !important; /* Even tighter line height */\n  }\n\n  .hod-compact .medical-card {\n    /* Tighter card spacing for HOD users while utilizing full width */\n    margin-bottom: 0.375rem !important; /* Reduced from 0.5rem */\n    padding: 0.375rem !important; /* Reduced from 0.5rem */\n    width: 100% !important;\n  }\n\n  .hod-compact .space-y-1 > * + * {\n    margin-top: 0.125rem !important; /* Reduced from 0.25rem */\n  }\n\n  .hod-compact .space-y-2 > * + * {\n    margin-top: 0.25rem !important; /* Reduced from 0.375rem */\n  }\n\n  .hod-compact .space-y-3 > * + * {\n    margin-top: 0.375rem !important; /* Reduced from 0.5rem */\n  }\n\n  .hod-compact .space-y-4 > * + * {\n    margin-top: 0.5rem !important; /* Reduced from 0.75rem */\n  }\n\n  .hod-compact .grid {\n    gap: 0.5rem !important; /* Reduced from 0.75rem */\n    width: 100% !important;\n  }\n\n  .hod-compact .grid.grid-cols-1 {\n    grid-template-columns: 1fr !important;\n  }\n\n  .hod-compact .grid.grid-cols-2 {\n    grid-template-columns: repeat(2, 1fr) !important;\n  }\n\n  .hod-compact .grid.grid-cols-4 {\n    grid-template-columns: repeat(4, 1fr) !important;\n  }\n\n  .hod-compact .p-2 {\n    padding: 0.25rem !important; /* Reduced from 0.375rem */\n  }\n\n  .hod-compact .p-3 {\n    padding: 0.375rem !important; /* Reduced from 0.5rem */\n  }\n\n  .hod-compact .p-4 {\n    padding: 0.5rem !important; /* Reduced from 0.75rem */\n  }\n\n  .hod-compact .mb-1 {\n    margin-bottom: 0.125rem !important; /* Reduced from 0.25rem */\n  }\n\n  .hod-compact .mb-1 {\n    margin-bottom: 0.25rem !important; /* Reduced from 0.375rem */\n  }\n\n  .hod-compact .mb-3 {\n    margin-bottom: 0.375rem !important; /* Reduced from 0.5rem */\n  }\n\n  .hod-compact .mb-4 {\n    margin-bottom: 0.5rem !important; /* Reduced from 0.75rem */\n  }\n\n  .hod-compact h3,\n  .hod-compact h4,\n  .hod-compact h5 {\n    font-size: 1rem !important;\n    margin-bottom: 0.25rem !important;\n    line-height: 1.3 !important;\n  }\n\n  /* Additional HOD-specific reductions for input elements */\n  .hod-compact input,\n  .hod-compact textarea,\n  .hod-compact select {\n    padding-top: 0.25rem !important; /* Reduced from 0.375rem */\n    padding-bottom: 0.25rem !important; /* Reduced from 0.375rem */\n  }\n\n  .hod-compact label {\n    margin-bottom: 0.125rem !important; /* Reduced from 0.25rem */\n  }\n\n  .hod-compact .medical-input {\n    padding: 0.25rem 0.5rem !important; /* Reduced from 0.375rem 0.75rem */\n    font-size: 0.875rem !important;\n  }\n\n  .hod-compact label {\n    font-size: 0.875rem !important;\n    margin-bottom: 0.125rem !important; /* Reduced from 0.25rem */\n  }\n\n  /* Better width utilization for HOD form sections */\n  .hod-compact .flex-1 {\n    width: 100% !important;\n  }\n\n  .hod-compact form {\n    width: 100% !important;\n    max-width: 100% !important;\n  }\n\n  .hod-compact .medical-glass-card {\n    width: 100% !important;\n    max-width: 100% !important;\n  }\n\n  .hod-compact section {\n    width: 100% !important;\n  }\n\n  /* Table styling for modules summary */\n  .vertical-align-top {\n    vertical-align: top !important;\n  }\n\n  /* Custom scrollbar for modules summary table */\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 3px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: rgba(251, 191, 36, 0.3);\n    border-radius: 3px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: rgba(251, 191, 36, 0.5);\n  }\n\n  /* Fade transition for modals */\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: opacity 0.3s ease;\n  }\n\n  .fade-enter-from,\n  .fade-leave-to {\n    opacity: 0;\n  }\n\n  /* Modal animation styles */\n  .fade-enter-active .transform,\n  .fade-leave-active .transform {\n    transition: all 0.3s ease;\n  }\n\n  .fade-enter-from .transform {\n    transform: scale(0.9) translateY(-20px);\n    opacity: 0;\n  }\n\n  .fade-leave-to .transform {\n    transform: scale(0.9) translateY(-20px);\n    opacity: 0;\n  }\n\n  /* Mobile modal adjustments */\n  @media (max-width: 768px) {\n    .max-w-lg {\n      max-width: calc(100vw - 2rem);\n    }\n  }\n</style>\n\n<script>\n  /* eslint-disable vue/no-parsing-error */\n  /* eslint-disable no-unused-vars */\n\n  // Import required services\n  import Header from '@/components/header.vue'\n  import ModernSidebar from '@/components/ModernSidebar.vue'\n  import OrbitingDots from '@/components/OrbitingDots.vue'\n  import AppFooter from '@/components/footer.vue'\n  import UnifiedLoadingBanner from '@/components/common/UnifiedLoadingBanner.vue'\n  import authService from '@/services/authService'\n  import combinedAccessService from '@/services/combinedAccessService'\n  import ictOfficerService from '@/services/ictOfficerService'\n  import bothServiceFormService from '@/services/bothServiceFormService'\n  import signatureService from '@/services/signatureService'\n  import { useAuthStore } from '@/stores/auth'\n\n  export default {\n    name: 'BothServiceForm',\n    components: {\n      Header,\n      ModernSidebar,\n      OrbitingDots,\n      AppFooter,\n      UnifiedLoadingBanner\n    },\n    inject: {\n      authStore: {\n        from: 'authStore',\n        default: () => useAuthStore()\n      }\n    },\n\n    // Props for component\n    props: {\n      requestId: {\n        type: [String, Number],\n        default: null\n      }\n    },\n\n    data() {\n      return {\n        // UI: Head of IT approval success modal\n        showHeadItApproveSuccessModal: false,\n        // ICT Officer Grant Access popup state\n        showGrantAccessPopup: false,\n        grantAccessComment: '',\n        grantAccessError: '',\n        // Recently added comment meta for highlight\n        lastAddedCommentMeta: null,\n        // Signature handling\n        signaturePreview: '',\n        signatureFileName: '',\n        // HOD Access Rights (decided during HOD approval)\n        hodAccessType: 'permanent',\n        hodTemporaryUntil: '',\n        hodTemporaryUntilError: '',\n        // HOD Comments for access category specification\n        hodComments: '',\n        // Approval signatures\n        hodSignaturePreview: '',\n        hodSignatureFileName: '',\n        divDirectorSignaturePreview: '',\n        divDirectorSignatureFileName: '',\n        directorICTSignaturePreview: '',\n        directorICTSignatureFileName: '',\n        // Implementation signatures\n        headITSignaturePreview: '',\n        headITSignatureFileName: '',\n        ictOfficerSignaturePreview: '',\n        ictOfficerSignatureFileName: '',\n        // Jeeva Requested for selector state,\n        // Role-based comment draft (saved on approval)\n        roleCommentsDraft: '',\n        // Jeeva Requested for selector state\n        jeevaItemOpen: false,\n        jeevaItemFocusIndex: 0,\n        jeevaItemOptions: [\n          'Use',\n          'Revoke',\n          'Access Rights',\n          'Approval',\n          'Comments',\n          'For Implementation'\n        ],\n        jeevaItemSelections: [],\n        // Dynamic modules loaded from database\n        wellsoftModules: [],\n        jeevaModules: [],\n        // Suggested Internet purposes\n        // internetPurposes: ['Research','Training','Remote Work','Telemedicine','Email/Communication'], // Removed duplicate - using the one in form data\n\n        form: {\n          shared: { pfNumber: '', staffName: '', department: '', phone: '' },\n          // accessRights removed - this will be decided by HOD during approval\n          approvals: {\n            hod: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            divisionalDirector: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            directorICT: {\n              name: '',\n              signature: '',\n              date: ''\n            }\n          },\n          comments: '',\n          implementation: {\n            headIT: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            ictOfficer: {\n              name: '',\n              signature: '',\n              date: ''\n            }\n          }\n        },\n\n        selectedWellsoft: [],\n        selectedJeeva: [],\n        wellsoftRequestType: 'use',\n        jeevaRequestType: 'use', // HOD can select use/revoke for Jeeva modules\n        // search queries\n        wellsoftQuery: '',\n        jeevaQuery: '',\n        internetPurposes: ['', '', '', ''],\n\n        tabs: [],\n        activeTab: '',\n        openAccordions: new Set(),\n        moduleData: {},\n\n        confirm: { key: '', label: '' },\n        toast: { show: false, message: '' },\n        // Digital signature state\n        isSigning: false,\n        hasUserSigned: false,\n        lastSignedAt: null,\n        errors: { pfNumber: '', staffName: '' },\n        // Review mode data\n        requestData: null,\n        loading: false,\n        error: null,\n        // Digital signature history for this document\n        signatureHistory: [],\n        // Rejection modal data\n        showRejectionModal: false,\n        rejectionReason: '',\n        // Current authenticated user data\n        currentUser: null,\n        // Performance optimization flags\n        loadingRequestData: false,\n        // Main loading state for initial page load\n        isLoading: false,\n        // Debouncing flag for approval button\n        processing: false,\n        // Divisional Director comments (editable for divisional director)\n        editableDivisionalDirectorComments: '',\n        // Virtual scrolling configuration\n        maxVisibleComments: 50,\n        maxVisibleModules: 10,\n        // Success message card state\n        showApprovalSuccessCard: false,\n        // ICT Officer confirmation popup\n        showIctOfficerConfirmation: false,\n        // UI collapsible toggle for Approval sections\n        showApprovalSections: false,\n        // UI collapsible toggle for Implementation sections\n        showImplementationSections: false\n      }\n    },\n    computed: {\n      // Environment check for development features\n      isDevelopment() {\n        // Use process.env.NODE_ENV if available (provided by webpack DefinePlugin)\n        // or fallback to checking hostname for development detection\n        try {\n          return process.env.NODE_ENV === 'development'\n        } catch {\n          // Fallback if process.env is not available\n          return (\n            window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'\n          )\n        }\n      },\n\n      // Review mode check\n      isReviewMode() {\n        return this.getRequestId != null\n      },\n\n      // Get effective request ID (prefer route param, then loaded record id; ignore stale query if params present)\n      getRequestId() {\n        const propId = this.requestId\n        const paramId = this.$route?.params?.id\n        const queryId = this.$route?.query?.id\n        // Coerce to numeric string if possible\n        const norm = (v) => (v == null ? null : String(v).trim())\n        let id = norm(propId) || norm(paramId) || null\n        // If we have loaded requestData.id and it differs, trust the loaded record id\n        const loadedId = norm(this.requestData?.id)\n        if (!id && norm(queryId)) {\n          id = norm(queryId)\n        }\n        if (loadedId && id && loadedId !== id) {\n          // Prefer backend-loaded record id to avoid mismatches\n          id = loadedId\n        } else if (!id && loadedId) {\n          id = loadedId\n        }\n        return id\n      },\n\n      // Formatted display id like REQ-000065; prefer backend-provided request_id if present\n      displayRequestId() {\n        const backendRef = this.requestData?.request_id || this.requestData?.requestId\n        if (backendRef) return String(backendRef)\n        const raw = this.getRequestId\n        if (!raw) return ''\n        const num = String(raw).replace(/\\D+/g, '')\n        return 'REQ-' + (num ? num.padStart(6, '0') : String(raw))\n      },\n\n      currentTab() {\n        return this.tabs.find((t) => t.key === this.activeTab) || null\n      },\n      filteredWellsoft() {\n        const q = (this.wellsoftQuery || '').toLowerCase()\n        return !q\n          ? this.wellsoftModules\n          : this.wellsoftModules.filter((m) => m.toLowerCase().includes(q))\n      },\n      filteredJeeva() {\n        const q = (this.jeevaQuery || '').toLowerCase()\n        return !q ? this.jeevaModules : this.jeevaModules.filter((m) => m.toLowerCase().includes(q))\n      },\n\n      // Cached filtered internet purposes for performance\n      filteredInternetPurposes() {\n        if (!Array.isArray(this.internetPurposes)) return []\n        return this.internetPurposes.filter((p) => p && p.trim())\n      },\n\n      // Virtual scrolling for comments - only show a limited number for performance\n      visibleComments() {\n        if (!Array.isArray(this.previousComments)) return []\n        return this.previousComments.slice(0, this.maxVisibleComments)\n      },\n\n      tomorrow() {\n        const d = new Date()\n        d.setDate(d.getDate() + 1)\n        const yyyy = d.getFullYear()\n        const mm = String(d.getMonth() + 1).padStart(2, '0')\n        const dd = String(d.getDate()).padStart(2, '0')\n        return `${yyyy}-${mm}-${dd}`\n      },\n\n      signatureDisplay() {\n        // Staff/applicant signature display for the top Signature card\n        try {\n          const staff = (this.requesterName || '').trim().toLowerCase()\n          const list = Array.isArray(this.signatureHistory) ? this.signatureHistory : []\n          const getTs = (s) => s?.signed_at || s?.created_at || s?.timestamp\n\n          // 1) Prefer exact match with staff/applicant name\n          const staffEntry = list.find(\n            (s) =>\n              String(s.user_name || s.name || '')\n                .trim()\n                .toLowerCase() === staff\n          )\n          if (staffEntry) {\n            return {\n              name: staffEntry.user_name || staffEntry.name,\n              at: getTs(staffEntry)\n            }\n          }\n\n          // 2) Fall back to earliest signature (usually staff signed first)\n          if (list.length > 0) {\n            const sortedAsc = [...list]\n              .filter((s) => !!getTs(s))\n              .sort((a, b) => new Date(getTs(a)) - new Date(getTs(b)))\n            const first = sortedAsc[0] || list[0]\n            return { name: first.user_name || first.name, at: getTs(first) }\n          }\n\n          return null\n        } catch (e) {\n          return null\n        }\n      },\n\n      requesterName() {\n        // Resolve the applicant (staff) name from available fields\n        try {\n          return (\n            this.form?.shared?.staffName ||\n            this.requestData?.shared?.staffName ||\n            this.requestData?.staff_name ||\n            this.requestData?.full_name ||\n            ''\n          )\n        } catch {\n          return ''\n        }\n      },\n\n      summaryErrors() {\n        const list = []\n        // Defensive guards for shared\n        const shared = this.form?.shared || {}\n        if (!shared.pfNumber) list.push('PF Number is required.')\n        if (!shared.staffName) list.push('Staff Name is required.')\n\n        // Tabs validation (guard against undefined tabs/moduleData)\n        const tabs = Array.isArray(this.tabs) ? this.tabs : []\n        tabs.forEach((t) => {\n          if (!t || !t.key) return\n          // accessType validation removed - will be decided by HOD during approval\n          if (t.type === 'internet' && !this.internetPurposes[0].trim()) {\n            list.push('Internet Purpose is required.')\n          }\n        })\n        return list\n      },\n\n      // Check if signature exists in the database\n      hasSignature() {\n        const rd = this.requestData || {}\n        const hasData = !!rd\n        const hasPath = !!rd.signature_path\n        const pathNotEmpty = hasPath && String(rd.signature_path).trim() !== ''\n        const digitalFlag = rd.digitalSignature === true || rd.digital_signature === true\n        const signatureCounts = Number(rd.signatures_count || rd.signature_count || 0) > 0\n        const historyHasAny =\n          Array.isArray(this.signatureHistory) && this.signatureHistory.length > 0\n        const staffMatch = this.historyHasSigner(this.requesterName)\n\n        // Prefer any positive digital signal, but prioritize staff match\n        const result =\n          hasData && (pathNotEmpty || digitalFlag || signatureCounts || staffMatch || historyHasAny)\n\n        if (this.isDevelopment) {\n          console.log('hasSignature debug:', {\n            signaturePath: rd.signature_path,\n            digitalFlag,\n            signatureCounts: rd.signatures_count || rd.signature_count,\n            historyCount: (this.signatureHistory || []).length,\n            staffMatch,\n            staffName: this.requesterName,\n            result\n          })\n        }\n\n        return result\n      },\n\n      // Get request types from loaded data\n      requestTypes() {\n        if (!this.requestData) return []\n\n        // Handle both array and object formats\n        let types = this.requestData.request_types || this.requestData.request_type || []\n        if (!Array.isArray(types)) {\n          types = [types]\n        }\n\n        if (this.isDevelopment) {\n          console.log('Request types (computed):', types)\n        }\n        return types\n      },\n\n      // Check if specific request type is included (optimized with direct checks)\n      hasWellsoftRequest() {\n        const types = this.requestTypes\n        return types.includes('wellsoft')\n      },\n\n      hasJeevaRequest() {\n        const types = this.requestTypes\n        return types.includes('jeeva_access') || types.includes('jeeva')\n      },\n\n      hasInternetRequest() {\n        const types = this.requestTypes\n        return types.includes('internet_access_request') || types.includes('internet')\n      },\n\n      // Determine if sections should be readonly based on review mode and request type\n      isWellsoftReadonly() {\n        return (this.isReviewMode && !this.hasWellsoftRequest) || this.isFormSectionReadOnly\n      },\n\n      isJeevaReadonly() {\n        return (this.isReviewMode && !this.hasJeevaRequest) || this.isFormSectionReadOnly\n      },\n\n      isInternetReadonly() {\n        return (this.isReviewMode && !this.hasInternetRequest) || this.isFormSectionReadOnly\n      },\n\n      // Get current approval stage from request status\n      currentApprovalStage() {\n        if (!this.requestData) return 'pending'\n\n        const status = (this.requestData.status || 'pending').toLowerCase()\n        const stageMap = {\n          pending: 'hod',\n          pending_hod: 'hod',\n          hod_approved: 'divisional',\n          pending_divisional: 'divisional',\n          divisional_approved: 'ict_director',\n          pending_ict_director: 'ict_director',\n          pending_dict: 'ict_director', // synonym sometimes used in DICT endpoints\n          ict_director_approved: 'head_it',\n          dict_approved: 'head_it', // synonym\n          pending_head_it: 'head_it',\n          head_it_approved: 'ict_officer',\n          pending_ict_officer: 'ict_officer',\n          implementation_in_progress: 'ict_officer',\n          implemented: 'completed',\n          approved: 'completed',\n          completed: 'completed',\n          hod_rejected: 'completed',\n          // Rejected statuses - requests go back to HOD for revision\n          divisional_rejected: 'hod', // Divisional rejected - back to HOD\n          ict_director_rejected: 'hod', // ICT Director rejected - back to HOD\n          head_it_rejected: 'hod', // Head IT rejected - back to HOD\n          ict_officer_rejected: 'hod', // ICT Officer rejected - back to HOD\n          cancelled: 'completed'\n        }\n\n        // Primary: map by overall status\n        let stageFromStatus = stageMap[status]\n\n        // Secondary: infer from per-stage statuses (works for ICT Officer-origin with skipped HOD/DIV)\n        const hod = (this.requestData.hod_status || '').toLowerCase()\n        const div = (this.requestData.divisional_status || '').toLowerCase()\n        const dict = (\n          this.requestData.ict_director_status ||\n          this.requestData.dict_status ||\n          ''\n        ).toLowerCase()\n        const head = (this.requestData.head_it_status || '').toLowerCase()\n        const impl = (this.requestData.ict_officer_status || '').toLowerCase()\n\n        let stageFromStages = null\n        if (['implemented', 'approved', 'completed'].includes(impl)) {\n          stageFromStages = 'completed'\n        } else if (\n          !['approved', 'rejected'].includes(head) &&\n          ['approved', 'skipped'].includes(dict)\n        ) {\n          // Head IT stage when DICT has processed\n          stageFromStages = 'head_it'\n        } else if (\n          !['approved', 'rejected'].includes(dict) &&\n          ['approved', 'skipped'].includes(hod) &&\n          ['approved', 'skipped'].includes(div)\n        ) {\n          // ICT Director stage when HOD/DIV done (approved/skipped) and DICT pending/empty\n          stageFromStages = 'ict_director'\n        } else if (!['approved', 'rejected'].includes(div) && hod === 'approved') {\n          stageFromStages = 'divisional'\n        } else if (!['approved', 'rejected'].includes(hod)) {\n          stageFromStages = 'hod'\n        }\n\n        // Reconcile: choose the later stage between status-based and per-stage inference\n        const rank = {\n          hod: 1,\n          divisional: 2,\n          ict_director: 3,\n          head_it: 4,\n          ict_officer: 5,\n          completed: 6\n        }\n        const pick = (a, b) => {\n          if (!a) return b\n          if (!b) return a\n          return (rank[b] || 0) > (rank[a] || 0) ? b : a\n        }\n\n        const finalStage = pick(stageFromStatus, stageFromStages) || 'hod'\n        return finalStage\n      },\n\n      // Determine if approval sections should be readonly based on current stage\n      isHodApprovalEditable() {\n        // Check if edit mode is explicitly enabled via query parameter\n        const queryMode = this.$route?.query?.mode\n        const queryRole = this.$route?.query?.role\n        const queryReadonly = this.$route?.query?.readonly\n\n        // Strict view-only mode - disable all editing\n        if (queryMode === 'view' && queryReadonly === 'true') {\n          return false\n        }\n\n        // If mode=edit and role=hod in query params, allow HOD to edit\n        if (queryMode === 'edit' && queryRole === 'hod') {\n          const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n          const hodRoles = ['head_of_department', 'hod']\n          if (hodRoles.includes(userRole)) {\n            console.log(' HOD Edit Mode Enabled via Query Parameter')\n            return true\n          }\n        }\n\n        // If mode=readonly, disable editing\n        if (queryMode === 'readonly') {\n          return false\n        }\n\n        // Active only for HOD users while reviewing at the HOD stage\n        if (!this.isReviewMode || !this.requestData) return false\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const hodRoles = ['head_of_department', 'hod']\n        const status = this.requestData.status || 'pending'\n        // HOD can edit only in these scenarios:\n        // 1. Initial HOD approval stage (pending, pending_hod)\n        // 2. When request is rejected back to HOD from higher levels\n        const hodEditableStatuses = [\n          'pending',\n          'pending_hod',\n          'hod_pending', // Alternative naming convention\n          'submitted', // Initial submission state\n          'divisional_rejected', // Rejected by Divisional Director - back to HOD\n          'ict_director_rejected', // Rejected by ICT Director - back to HOD\n          'head_it_rejected', // Rejected by Head IT - back to HOD\n          'ict_officer_rejected' // Rejected by ICT Officer - back to HOD\n        ]\n\n        const canEdit = hodRoles.includes(userRole) && hodEditableStatuses.includes(status)\n\n        // Reduced debug logging frequency to improve performance\n        if (this.isDevelopment && Math.random() < 0.1) {\n          // Only log 10% of the time\n          console.log(' HOD Module Access Check:', {\n            userRole,\n            canEdit,\n            status,\n            requestId: this.getRequestId\n          })\n        }\n\n        return canEdit\n      },\n\n      // Allow HOD users to upload signature during HOD stage even if other gates are strict\n      canUploadHodSignature() {\n        // In strict view-only mode, disable all uploads\n        const queryMode = this.$route?.query?.mode\n        const queryReadonly = this.$route?.query?.readonly\n        if (queryMode === 'view' && queryReadonly === 'true') {\n          return false\n        }\n\n        if (this.isHodApprovalEditable) return true\n\n        // Allow HOD to upload signature in readonly mode\n        if (queryMode === 'readonly') {\n          const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n          const hodRoles = ['head_of_department', 'hod']\n          if (hodRoles.includes(userRole)) {\n            return true\n          }\n        }\n\n        if (!this.isReviewMode) return false\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const hodRoles = [\n          'head_of_department',\n          'hod',\n          'department_head',\n          'head_department',\n          'hod_user',\n          'head_of_dept'\n        ]\n        return hodRoles.includes(userRole) && this.currentApprovalStage === 'hod'\n      },\n\n      // Check if request was rejected back to HOD from a higher approval stage\n      isRejectedBackToHod() {\n        if (!this.requestData) return false\n        const status = this.requestData.status || 'pending'\n        const rejectedStatuses = [\n          'divisional_rejected',\n          'ict_director_rejected',\n          'head_it_rejected',\n          'ict_officer_rejected'\n        ]\n        return rejectedStatuses.includes(status)\n      },\n\n      // Get rejection details for display\n      rejectionDetails() {\n        if (!this.isRejectedBackToHod || !this.requestData) return null\n\n        const status = this.requestData.status || 'pending'\n        const rejectionMap = {\n          divisional_rejected: {\n            stage: 'Divisional Director',\n            reason:\n              this.requestData.divisional_rejection_reason || this.requestData.rejection_reason,\n            date: this.requestData.divisional_rejection_date || this.requestData.rejection_date\n          },\n          ict_director_rejected: {\n            stage: 'ICT Director',\n            reason: this.requestData.dict_rejection_reason || this.requestData.rejection_reason,\n            date: this.requestData.dict_rejection_date || this.requestData.rejection_date\n          },\n          head_it_rejected: {\n            stage: 'Head of IT',\n            reason: this.requestData.head_it_rejection_reason || this.requestData.rejection_reason,\n            date: this.requestData.head_it_rejection_date || this.requestData.rejection_date\n          },\n          ict_officer_rejected: {\n            stage: 'ICT Officer',\n            reason:\n              this.requestData.ict_officer_rejection_reason || this.requestData.rejection_reason,\n            date: this.requestData.ict_officer_rejection_date || this.requestData.rejection_date\n          }\n        }\n\n        return rejectionMap[status] || null\n      },\n\n      // Expose current saved comment for diffing and placeholders\n      roleCommentOriginal() {\n        return this.getExistingRoleComment()\n      },\n\n      // Role-based comment bindings\n      roleCommentKey() {\n        const role = (this.getUserRole() || '').toLowerCase()\n        if (role === 'divisional_director') return 'divisional_director_comments'\n        if (role === 'head_it' || role === 'head_of_it') return 'head_it_comments'\n        if (role === 'ict_officer' || role === 'officer_ict') return 'ict_officer_comments'\n        if (role === 'ict_director' || role === 'dict') return 'ict_director_comments'\n        return ''\n      },\n      roleCommentLabel() {\n        const role = (this.getUserRole() || '').toLowerCase()\n        if (role === 'divisional_director') return 'Divisional Director Comment'\n        if (role === 'head_it' || role === 'head_of_it') return 'Head of IT Comment'\n        if (role === 'ict_officer' || role === 'officer_ict') return 'ICT Officer Comment'\n        if (role === 'ict_director' || role === 'dict') return 'ICT Director Comment'\n        return 'Comment'\n      },\n      isRoleCommentEditable() {\n        // Make role comment writable for all approver roles regardless of stage\n        const role = (this.getUserRole() || '').toLowerCase()\n        return [\n          'divisional_director',\n          'head_it',\n          'head_of_it',\n          'ict_officer',\n          'officer_ict',\n          'ict_director',\n          'dict'\n        ].includes(role)\n      },\n\n      isDivisionalApprovalEditable() {\n        // Active only for Divisional Director users while reviewing at the divisional stage\n        if (!this.isReviewMode || !this.requestData) return false\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const divisionalRoles = ['divisional_director']\n        return this.currentApprovalStage === 'divisional' && divisionalRoles.includes(userRole)\n      },\n\n      // Check if current user is a divisional director viewing the form (should see everything as read-only except their approval section)\n      isDivisionalDirectorReadOnly() {\n        if (!this.isReviewMode || !this.requestData) return false\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const divisionalRoles = ['divisional_director']\n        // Active only for divisional director users (ICT directors handled separately)\n        return divisionalRoles.includes(userRole)\n      },\n\n      // Check if current user is ICT Director viewing the form (should see everything as read-only except their approval section)\n      isIctDirectorReadOnly() {\n        if (!this.isReviewMode || !this.requestData) return false\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const ictDirectorRoles = ['ict_director', 'dict']\n        // Active when user is ICT Director (no longer depends on role parameter)\n        return ictDirectorRoles.includes(userRole)\n      },\n\n      // Consolidated read-only state for form sections (combines divisional director and ICT director)\n      isFormSectionReadOnly() {\n        // Check if readonly mode is explicitly set via query parameter\n        const queryMode = this.$route?.query?.mode\n        const queryReadonly = this.$route?.query?.readonly\n\n        // Strict view-only mode (mode=view with readonly=true)\n        if (queryMode === 'view' && queryReadonly === 'true') {\n          if (this.isDevelopment) {\n            console.log(' Form in STRICT VIEW-ONLY mode')\n          }\n          return true\n        }\n\n        if (queryMode === 'readonly') {\n          if (this.isDevelopment) {\n            console.log(' Form sections are READ-ONLY via query parameter')\n          }\n          return true\n        }\n\n        // If HOD can edit (initial approval or after rejection back to them), sections should be editable\n        // This is the primary check - HOD users should always be able to edit when it's their turn\n        if (this.isHodApprovalEditable) {\n          if (this.isDevelopment) {\n            console.log(' Form sections are EDITABLE for HOD user')\n          }\n          return false\n        }\n\n        // Once HOD has approved and request moves to higher stages, make all modules read-only\n        if (this.isReviewMode && this.requestData) {\n          const status = this.requestData.status || 'pending'\n          const hodStatus = this.requestData.hod_status || 'pending'\n          const postHodStatuses = [\n            'hod_approved',\n            'pending_divisional',\n            'divisional_approved',\n            'pending_ict_director',\n            'ict_director_approved',\n            'pending_head_it',\n            'head_it_approved',\n            'pending_ict_officer',\n            'implemented',\n            'approved'\n          ]\n\n          // If status indicates form has moved beyond HOD stage, make modules read-only\n          if (postHodStatuses.includes(status) || postHodStatuses.includes(hodStatus)) {\n            if (this.isDevelopment) {\n              console.log(' Form sections are READ-ONLY - request moved beyond HOD stage:', {\n                status,\n                hodStatus\n              })\n            }\n            return true\n          }\n        }\n\n        const readOnlyResult = this.isDivisionalDirectorReadOnly || this.isIctDirectorReadOnly\n        if (this.isDevelopment && readOnlyResult) {\n          console.log(' Form sections are READ-ONLY for divisional/ICT director')\n        }\n\n        return readOnlyResult\n      },\n\n      // Check if we're in strict view-only mode (no edits or actions allowed)\n      isStrictViewMode() {\n        const queryMode = this.$route?.query?.mode\n        const queryReadonly = this.$route?.query?.readonly\n        return queryMode === 'view' && queryReadonly === 'true'\n      },\n\n      // Check if current user is ICT Director\n      isIctDirectorUser() {\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        return ['ict_director', 'dict'].includes(userRole)\n      },\n\n      // Check if current user is Divisional Director\n      isDivisionalDirectorUser() {\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        return ['divisional_director'].includes(userRole)\n      },\n\n      // Check if current user is Head IT\n      isHeadItUser() {\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        return ['head_it', 'head_of_it'].includes(userRole)\n      },\n\n      // Check if Select ICT Officer button should be shown\n      shouldShowSelectIctOfficerButton() {\n        // Only show for Head IT users in review mode\n        if (!this.isHeadItUser || !this.isReviewMode || !this.requestData) {\n          return false\n        }\n\n        const status = this.requestData.status || 'pending'\n\n        // Show button if:\n        // 1. Request has been approved by Head IT (status is 'head_it_approved')\n        // 2. But no ICT Officer has been assigned yet (check if ict_officer_name is empty/null)\n        // 3. And request hasn't been completed yet\n        const isHeadItApproved = status === 'head_it_approved' || status === 'pending_ict_officer'\n        const noIctOfficerAssigned =\n          !this.requestData.ict_officer_name && !this.form.implementation.ictOfficer.name\n        const notCompleted = !['implemented', 'approved', 'completed'].includes(status)\n\n        const shouldShow = isHeadItApproved && noIctOfficerAssigned && notCompleted\n\n        // Debug logging in development\n        if (this.isDevelopment && this.isHeadItUser) {\n          console.log(' Select ICT Officer Button Visibility Check:', {\n            isHeadItUser: this.isHeadItUser,\n            isReviewMode: this.isReviewMode,\n            status: status,\n            isHeadItApproved: isHeadItApproved,\n            noIctOfficerAssigned: noIctOfficerAssigned,\n            notCompleted: notCompleted,\n            ict_officer_name: this.requestData.ict_officer_name,\n            form_ict_officer_name: this.form.implementation.ictOfficer.name,\n            shouldShow: shouldShow\n          })\n        }\n\n        return shouldShow\n      },\n\n      // Check if ICT Director approval is active (based on user role and approval stage)\n      isIctDirectorApprovalActive() {\n        const userRole = (this.getUserRole() || '').toLowerCase()\n\n        // ICT Director section is active if:\n        // 1. User is ICT Director and we're in review mode at the ICT Director stage\n        return (\n          ['ict_director', 'dict'].includes(userRole) &&\n          this.isReviewMode &&\n          this.currentApprovalStage === 'ict_director'\n        )\n      },\n\n      isIctDirectorApprovalEditable() {\n        // Allow editing when the request is at or effectively at the ICT Director stage\n        if (!this.isReviewMode) return true\n        if (this.currentApprovalStage === 'ict_director') return true\n        // Fallback: infer from per-stage statuses\n        try {\n          const hod = (this.requestData?.hod_status || '').toLowerCase()\n          const div = (this.requestData?.divisional_status || '').toLowerCase()\n          const dict = (\n            this.requestData?.ict_director_status ||\n            this.requestData?.dict_status ||\n            ''\n          ).toLowerCase()\n          const isPreDictDone =\n            ['approved', 'skipped'].includes(hod) && ['approved', 'skipped'].includes(div)\n          const isDictPending = !['approved', 'rejected'].includes(dict)\n          return isPreDictDone && isDictPending\n        } catch {\n          return false\n        }\n      },\n\n      isHeadItApprovalEditable() {\n        // Only allow Head IT users to edit when it's their stage\n        if (!this.isReviewMode) return true // In create mode, allow editing\n\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const headItRoles = ['head_it', 'head_of_it']\n        const currentStage = this.currentApprovalStage\n        const result = currentStage === 'head_it' && headItRoles.includes(userRole)\n\n        // Debug logging for role-based access control verification (development only)\n        if (this.isDevelopment) {\n          console.log(' Head IT Approval Access Control Check:', {\n            userRole,\n            currentStage,\n            headItRoles,\n            isStageMatch: currentStage === 'head_it',\n            isRoleMatch: headItRoles.includes(userRole),\n            finalResult: result,\n            isReviewMode: this.isReviewMode\n          })\n        }\n\n        // Only active for Head IT users when at the head_it approval stage\n        return result\n      },\n\n      isIctOfficerApprovalEditable() {\n        // Only allow ICT Officer users to edit when it's their stage\n        if (!this.isReviewMode) return true // In create mode, allow editing\n\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const ictOfficerRoles = ['ict_officer', 'officer_ict']\n\n        // For ICT Officers logged in, always allow editing if they have the proper role\n        // This simplifies the logic and ensures they can always interact with their section\n        const isIctOfficer = ictOfficerRoles.includes(userRole)\n\n        // Check if current user is assigned ICT Officer for this request\n        const currentUserId = this.currentUser?.id\n        const isAssignedOfficer =\n          this.requestData?.ict_officer_user_id &&\n          this.requestData.ict_officer_user_id === currentUserId\n\n        // Check if request is in a state that allows ICT Officer implementation\n        const status = this.requestData?.status || ''\n        const canImplement = [\n          'assigned_to_ict',\n          'implementation_in_progress',\n          'head_it_approved',\n          'pending_ict_officer',\n          'head_it_pending',\n          'ict_director_approved'\n        ].includes(status)\n\n        // Check if implementation is not yet completed - be more thorough in checking\n        const notYetImplemented =\n          !this.requestData?.ict_officer_implemented_at &&\n          this.requestData?.ict_officer_status !== 'implemented' &&\n          this.requestData?.ict_officer_status !== 'rejected' &&\n          this.requestData?.status !== 'implemented' &&\n          this.requestData?.status !== 'approved' &&\n          this.requestData?.status !== 'completed' &&\n          !this.getValidIctOfficerDate\n\n        // Allow editing if user is ICT Officer and:\n        // 1. Access has not yet been implemented/granted AND\n        // 2. Either they are assigned OR request is in implementable state\n        const result = isIctOfficer && notYetImplemented && (isAssignedOfficer || canImplement)\n\n        // Enhanced debug logging for role-based access control verification\n        console.log(' ICT Officer Approval Access Control DETAILED DEBUG:', {\n          '=== BASIC CONDITIONS ===': '---',\n          userRole: userRole,\n          'userRole valid?': ictOfficerRoles.includes(userRole),\n          currentStage: this.currentApprovalStage,\n          status: status,\n          isReviewMode: this.isReviewMode,\n          requestId: this.getRequestId,\n          '=== USER DATA ===': '---',\n          currentUserId: currentUserId,\n          'currentUser exists': !!this.currentUser,\n          'currentUser object': this.currentUser,\n          'currentUser name': this.currentUser?.name,\n          'currentUser role': this.currentUser?.role || this.currentUser?.user_role,\n          'getUserRole()': this.getUserRole(),\n          '=== REQUEST DATA DETAILS ===': '---',\n          'requestData exists': !!this.requestData,\n          'full status': this.requestData?.status,\n          assignedOfficerId: this.requestData?.ict_officer_user_id,\n          ict_officer_name: this.requestData?.ict_officer_name,\n          ict_officer_status: this.requestData?.ict_officer_status,\n          ict_officer_implemented_at: this.requestData?.ict_officer_implemented_at,\n          head_it_status: this.requestData?.head_it_status,\n          ict_director_status: this.requestData?.ict_director_status,\n          '=== CHECKS ===': '---',\n          isIctOfficer: isIctOfficer,\n          isAssignedOfficer: isAssignedOfficer,\n          canImplement: canImplement,\n          'canImplement statuses': [\n            'assigned_to_ict',\n            'implementation_in_progress',\n            'head_it_approved',\n            'pending_ict_officer'\n          ],\n          notYetImplemented: notYetImplemented,\n          '=== FINAL ===': '---',\n          finalResult: result,\n          WHY_FALSE: result\n            ? 'Access granted'\n            : {\n                noUserRole: !ictOfficerRoles.includes(userRole),\n                notAssigned: !isAssignedOfficer,\n                cannotImplement: !canImplement,\n                alreadyImplemented: !notYetImplemented,\n                allConditionsMet:\n                  isIctOfficer && (isAssignedOfficer || canImplement || notYetImplemented)\n              }\n        })\n\n        return result\n      },\n\n      // Check if ICT Officer has a valid implementation date\n      getValidIctOfficerDate() {\n        if (!this.requestData) return null\n\n        const timestamp =\n          this.requestData.ict_officer_implemented_at ||\n          this.requestData.implementation?.ictOfficer?.date ||\n          this.requestData.implementation?.ictOfficer?.approved_at\n\n        if (!timestamp) return null\n\n        try {\n          const date = new Date(timestamp)\n          // Check if date is valid and not too far in the past/future\n          if (isNaN(date.getTime()) || date.getFullYear() < 2020 || date.getFullYear() > 2030) {\n            if (this.isDevelopment) {\n              console.warn('Invalid ICT Officer implementation timestamp detected:', timestamp)\n            }\n            return null\n          }\n          return timestamp\n        } catch (error) {\n          if (this.isDevelopment) {\n            console.warn('Error parsing ICT Officer implementation timestamp:', timestamp, error)\n          }\n          return null\n        }\n      },\n\n      // Check if a stage has been completed\n      isStageCompleted() {\n        return (stage) => {\n          if (!this.requestData) return false\n\n          // Check both status-based completion AND approval date presence\n          // This ensures we catch completed stages even if status calculation is off\n          const status = this.requestData.status || 'pending'\n          const completedStages = {\n            hod: [\n              'hod_approved',\n              'divisional_approved',\n              'pending_divisional',\n              'ict_director_approved',\n              'pending_ict_director',\n              'head_it_approved',\n              'pending_head_it',\n              'ict_officer_approved',\n              'pending_ict_officer',\n              'implemented',\n              'approved'\n            ],\n            divisional: [\n              'divisional_approved',\n              'ict_director_approved',\n              'pending_ict_director',\n              'head_it_approved',\n              'pending_head_it',\n              'ict_officer_approved',\n              'pending_ict_officer',\n              'implemented',\n              'approved'\n            ],\n            ict_director: [\n              'ict_director_approved',\n              'head_it_approved',\n              'pending_head_it',\n              'ict_officer_approved',\n              'pending_ict_officer',\n              'implemented',\n              'approved'\n            ],\n            head_it: [\n              'head_it_approved',\n              'ict_officer_approved',\n              'pending_ict_officer',\n              'implemented',\n              'approved'\n            ],\n            ict_officer: ['implemented', 'approved']\n          }\n\n          const statusBasedCompletion = completedStages[stage]?.includes(status) || false\n\n          // Also check for approval date presence as a fallback\n          // Check both flattened fields AND nested approval objects\n          const dateBasedCompletion = {\n            hod: !!(\n              this.requestData.hod_approved_at ||\n              this.requestData.approvals?.hod?.date ||\n              this.requestData.approvals?.hod?.approved_at\n            ),\n            divisional: !!(\n              this.requestData.divisional_approved_at ||\n              this.requestData.approvals?.divisionalDirector?.date ||\n              this.requestData.approvals?.divisionalDirector?.approved_at\n            ),\n            ict_director: !!(\n              this.requestData.ict_director_approved_at ||\n              this.requestData.dict_approved_at ||\n              this.requestData.approvals?.directorICT?.date ||\n              this.requestData.approvals?.directorICT?.approved_at\n            ),\n            head_it: !!(\n              this.requestData.head_it_approved_at ||\n              this.requestData.implementation?.headIT?.date ||\n              this.requestData.implementation?.headIT?.approved_at\n            ),\n            ict_officer: !!(\n              (this.requestData.ict_officer_status === 'implemented' ||\n                this.requestData.ict_officer_status === 'approved') &&\n              this.getValidIctOfficerDate\n            )\n          }\n\n          const result = statusBasedCompletion || dateBasedCompletion[stage] || false\n\n          // TEMPORARY DEBUG: Log stage completion check\n          if (stage === 'hod' || stage === 'divisional' || stage === 'ict_director') {\n            console.log(` isStageCompleted(${stage}):`, {\n              status,\n              statusBasedCompletion,\n              dateBasedCompletion: dateBasedCompletion[stage],\n              approvalDate:\n                stage === 'hod'\n                  ? this.requestData.hod_approved_at\n                  : stage === 'divisional'\n                    ? this.requestData.divisional_approved_at\n                    : stage === 'ict_director'\n                      ? this.requestData.ict_director_approved_at\n                      : 'unknown',\n              availableDateFields: Object.keys(this.requestData).filter(\n                (key) =>\n                  key.includes('approved') || key.includes('implemented') || key.includes('date')\n              ),\n              result\n            })\n          }\n\n          return result\n        }\n      },\n\n      // Check if a digital signature (by current user) is required for the current stage\n      isSignatureRequiredForApproval() {\n        if (!this.isReviewMode || !this.requestData) return false\n\n        const stage = this.currentApprovalStage\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const roleMap = {\n          hod: [\n            'head_of_department',\n            'hod',\n            'department_head',\n            'head_department',\n            'hod_user',\n            'head_of_dept'\n          ],\n          divisional: ['divisional_director'],\n          ict_director: ['ict_director', 'dict'],\n          head_it: ['head_it', 'head_of_it']\n        }\n\n        // Ensure signature is required at ICT Director stage regardless of role string mismatches\n        let requiresSignature = stage === 'ict_director'\n        if (!requiresSignature) {\n          requiresSignature = !!roleMap[stage] && roleMap[stage].includes(userRole)\n        }\n        if (!requiresSignature) return false\n\n        const currentUserName = this.currentUser?.name || ''\n        const hasDigital = !!this.hasUserSigned || this.historyHasSigner(currentUserName)\n        return !hasDigital\n      },\n\n      // Get HOD comments from requestData for display in review mode\n      displayedHodComments() {\n        if (!this.requestData) return null\n\n        // Try multiple possible sources for HOD comments - prioritize hod_comments field\n        const hodComments =\n          this.requestData.hod_comments ||\n          this.requestData.comments ||\n          this.requestData.approvals?.hod?.comments ||\n          null\n\n        if (this.isDevelopment) {\n          console.log('HOD Comments debug:', {\n            requestData_keys: Object.keys(this.requestData),\n            hodComments: hodComments,\n            hod_comments_field: this.requestData.hod_comments,\n            general_comments: this.requestData.comments,\n            approval_comments: this.requestData.approvals?.hod?.comments\n          })\n        }\n\n        return hodComments?.trim() || null\n      },\n\n      // Get Divisional Director comments from requestData for ICT Directors to view\n      divisionalDirectorComments() {\n        if (!this.requestData) return null\n\n        // Try multiple possible sources for Divisional Director comments\n        const divisionalComments =\n          this.requestData.divisional_comments ||\n          this.requestData.approvals?.divisionalDirector?.comments ||\n          null\n\n        if (this.isDevelopment) {\n          console.log('Divisional Director Comments debug:', {\n            requestData_keys: Object.keys(this.requestData),\n            divisionalComments: divisionalComments,\n            divisional_comments_field: this.requestData.divisional_comments,\n            approval_comments: this.requestData.approvals?.divisionalDirector?.comments\n          })\n        }\n\n        return divisionalComments?.trim() || null\n      },\n\n      // Get ICT Director comments from requestData for Head IT to view\n      ictDirectorComments() {\n        if (!this.requestData) return null\n\n        // Try multiple possible sources for ICT Director comments\n        const ictDirectorComments =\n          this.requestData.ict_director_comments ||\n          this.requestData.dict_comments ||\n          this.requestData.approvals?.directorICT?.comments ||\n          null\n\n        return ictDirectorComments?.trim() || null\n      },\n\n      // Get Head IT comments from requestData for ICT Officer to view\n      headItComments() {\n        if (!this.requestData) return null\n\n        // Try multiple possible sources for Head IT comments\n        const headItComments =\n          this.requestData.head_it_comments ||\n          this.requestData.implementation?.headIT?.comments ||\n          null\n\n        return headItComments?.trim() || null\n      },\n\n      // Get ICT Officer comments from requestData\n      ictOfficerComments() {\n        if (!this.requestData) return null\n\n        // Try multiple possible sources for ICT Officer comments\n        const ictOfficerComments =\n          this.requestData.ict_officer_comments ||\n          this.requestData.implementation?.ictOfficer?.comments ||\n          null\n\n        return ictOfficerComments?.trim() || null\n      },\n\n      // Collect all previous comments from completed stages in chronological order\n      // This should show ALL comments from completed stages, regardless of current request status\n      previousComments() {\n        if (!this.requestData) {\n          return []\n        }\n\n        const comments = []\n        const currentRole = this.getUserRole()?.toLowerCase()\n\n        // Define the approval workflow stages in order\n        const stages = [\n          {\n            key: 'hod',\n            name: 'Head of Department',\n            icon: 'fa-user-tie',\n            color: 'blue',\n            getComments: () => this.displayedHodComments,\n            getDate: () => {\n              const date =\n                this.requestData.hod_approved_at ||\n                this.requestData.approvals?.hod?.approved_at ||\n                this.requestData.approvals?.hod?.date ||\n                this.requestData.hod_date ||\n                this.requestData.updated_at ||\n                this.requestData.created_at\n              if (this.isDevelopment) {\n                console.log(' HOD Date:', {\n                  date,\n                  sources: {\n                    hod_approved_at: this.requestData.hod_approved_at,\n                    approval_approved_at: this.requestData.approvals?.hod?.approved_at,\n                    approval_date: this.requestData.approvals?.hod?.date,\n                    hod_date: this.requestData.hod_date,\n                    updated_at: this.requestData.updated_at,\n                    created_at: this.requestData.created_at\n                  }\n                })\n              }\n              return date\n            },\n            getName: () => this.requestData.hod_name || this.requestData.approvals?.hod?.name,\n            isCompleted: () => this.isStageCompleted('hod'),\n            getStatus: () =>\n              this.requestData.hod_status || (this.isStageCompleted('hod') ? 'approved' : 'pending')\n          },\n          {\n            key: 'divisional',\n            name: 'Divisional Director',\n            icon: 'fa-user-shield',\n            color: 'purple',\n            getComments: () => this.divisionalDirectorComments,\n            getDate: () => {\n              return (\n                this.requestData.divisional_approved_at ||\n                this.requestData.approvals?.divisionalDirector?.approved_at ||\n                this.requestData.approvals?.divisionalDirector?.date ||\n                this.requestData.divisional_date ||\n                this.requestData.updated_at ||\n                this.requestData.created_at\n              )\n            },\n            getName: () =>\n              this.requestData.divisional_director_name ||\n              this.requestData.approvals?.divisionalDirector?.name,\n            isCompleted: () => this.isStageCompleted('divisional'),\n            getStatus: () =>\n              this.requestData.divisional_status ||\n              (this.isStageCompleted('divisional') ? 'approved' : 'pending')\n          },\n          {\n            key: 'ict_director',\n            name: 'ICT Director',\n            icon: 'fa-user-cog',\n            color: 'teal',\n            getComments: () => this.ictDirectorComments,\n            getDate: () => {\n              return (\n                this.requestData.dict_approved_at ||\n                this.requestData.ict_director_approved_at ||\n                this.requestData.approvals?.directorICT?.approved_at ||\n                this.requestData.approvals?.directorICT?.date ||\n                this.requestData.dict_date ||\n                this.requestData.ict_director_date ||\n                this.requestData.updated_at ||\n                this.requestData.created_at\n              )\n            },\n            getName: () =>\n              this.requestData.dict_name || this.requestData.approvals?.directorICT?.name,\n            isCompleted: () => this.isStageCompleted('ict_director'),\n            getStatus: () =>\n              this.requestData.ict_director_status ||\n              this.requestData.dict_status ||\n              (this.isStageCompleted('ict_director') ? 'approved' : 'pending')\n          },\n          {\n            key: 'head_it',\n            name: 'Head of IT',\n            icon: 'fa-laptop-code',\n            color: 'indigo',\n            getComments: () => this.headItComments,\n            getDate: () => {\n              return (\n                this.requestData.head_it_approved_at ||\n                this.requestData.implementation?.headIT?.approved_at ||\n                this.requestData.implementation?.headIT?.date ||\n                this.requestData.head_it_date ||\n                this.requestData.updated_at ||\n                this.requestData.created_at\n              )\n            },\n            getName: () =>\n              this.requestData.head_it_name || this.requestData.implementation?.headIT?.name,\n            isCompleted: () => this.isStageCompleted('head_it'),\n            getStatus: () =>\n              this.requestData.head_it_status ||\n              (this.isStageCompleted('head_it') ? 'approved' : 'pending')\n          },\n          {\n            key: 'ict_officer',\n            name: 'ICT Officer',\n            icon: 'fa-tools',\n            color: 'green',\n            getComments: () => this.ictOfficerComments,\n            getDate: () => {\n              return (\n                this.requestData.ict_officer_approved_at ||\n                this.requestData.implementation?.ictOfficer?.approved_at ||\n                this.requestData.implementation?.ictOfficer?.date ||\n                this.requestData.ict_officer_date ||\n                this.requestData.updated_at ||\n                this.requestData.created_at\n              )\n            },\n            getName: () =>\n              this.requestData.ict_officer_name ||\n              this.requestData.implementation?.ictOfficer?.name,\n            isCompleted: () => this.isStageCompleted('ict_officer'),\n            getStatus: () =>\n              this.requestData.ict_officer_status ||\n              (this.isStageCompleted('ict_officer') ? 'approved' : 'pending')\n          }\n        ]\n\n        // Show comments from all completed stages that have comments\n        // Head of IT should see previous comments from HOD, Divisional Director, and ICT Director\n        stages.forEach((stage) => {\n          // Always include completed stages that have comments, regardless of current user role\n          // The \"Previous Comments\" section should show all prior approvers' feedback\n          const stageComments = stage.getComments()\n          // Include if stage completed OR it's the current viewer's stage (to show in-progress comments)\n          const shouldInclude =\n            stage.isCompleted() || (stage.key === this.viewerStage() && !!stageComments)\n\n          // TEMPORARY DEBUG: Log each stage processing\n          try {\n            console.log(\n              ` Stage ${stage.key}: completed=${shouldInclude}, hasComments=${!!stageComments}`,\n              stageComments ? `\"${stageComments.substring(0, 30)}...\"` : 'no comments'\n            )\n          } catch (e) {\n            console.error(` Error logging stage ${stage.key}:`, e)\n          }\n\n          if (shouldInclude) {\n            if (stageComments) {\n              const status = stage.getStatus()\n              const stageDate = stage.getDate()\n              const fallbackDate = this.requestData.updated_at || this.requestData.created_at\n\n              comments.push({\n                stage: stage.key,\n                stageName: stage.name,\n                icon: stage.icon,\n                color: stage.color,\n                comments: stageComments,\n                date: stageDate || fallbackDate,\n                name: stage.getName(),\n                status: status,\n                isApproved: status === 'approved',\n                isRejected: status === 'rejected',\n                hasSpecificDate: !!stageDate\n              })\n            }\n          }\n        })\n\n        // Sort comments\n        const sortedComments = comments.sort((a, b) => {\n          const dateA = a.date || this.requestData.updated_at || this.requestData.created_at\n          const dateB = b.date || this.requestData.updated_at || this.requestData.created_at\n\n          if (!dateA && !dateB) return 0\n          if (!dateA) return 1\n          if (!dateB) return -1\n\n          return new Date(dateA) - new Date(dateB)\n        })\n\n        return sortedComments\n      },\n\n      // Check if there are any previous comments to show\n      hasPreviousComments() {\n        return this.previousComments && this.previousComments.length > 0\n      },\n\n      // Check if the request is fully completed/approved (all stages done)\n      isRequestFullyCompleted() {\n        if (!this.requestData) return false\n\n        // A request is fully completed when ICT Officer has implemented it\n        const status = this.requestData.getCalculatedOverallStatus\n          ? this.requestData.getCalculatedOverallStatus()\n          : this.requestData.status || 'pending'\n\n        const completedStatuses = ['implemented', 'approved', 'completed']\n        const hasIctOfficerImplementation = !!this.requestData.ict_officer_implemented_at\n\n        return completedStatuses.includes(status) || hasIctOfficerImplementation\n      },\n\n      // Get all validation errors for current approval stage\n      validationErrors() {\n        const errors = []\n\n        // Basic field validation\n        if (!this.form?.shared?.pfNumber?.trim()) {\n          errors.push('PF Number is required')\n        }\n        if (!this.form?.shared?.staffName?.trim()) {\n          errors.push('Staff Name is required')\n        }\n        if (!this.form?.shared?.department?.trim()) {\n          errors.push('Department is required')\n        }\n        if (!this.form?.shared?.phone?.trim()) {\n          errors.push('Contact Number is required')\n        }\n\n        // Stage-specific validation\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const hodRoles = ['head_of_department', 'hod']\n        const isHodUser = hodRoles.includes(userRole)\n        const isHodStage = this.currentApprovalStage === 'hod'\n\n        // HOD validation\n        if (isHodUser && isHodStage) {\n          if (!this.hodComments?.trim()) {\n            errors.push('HOD Comments are required')\n          }\n          // At least one module must be selected\n          const hasModules =\n            this.selectedWellsoft?.length > 0 ||\n            this.selectedJeeva?.length > 0 ||\n            this.filteredInternetPurposes?.length > 0\n          if (!hasModules) {\n            errors.push('At least one module or service must be selected')\n          }\n        }\n\n        // Signature validation for current stage\n        if (this.isSignatureRequiredForApproval) {\n          errors.push('Signature is required for approval')\n        }\n\n        return errors\n      },\n\n      // Check if approval buttons should be disabled due to missing signature or HOD comments\n      areApprovalButtonsDisabled() {\n        // Enable once digital signature exists; keep disabled only for loading/processing/signature-missing\n        return this.loading || this.processing || this.isSignatureRequiredForApproval\n      },\n\n      // Get the appropriate tooltip message for approval button\n      approvalButtonTooltip() {\n        const errors = this.validationErrors\n        if (errors.length > 0) {\n          return errors.join('; ')\n        }\n        return 'Approve this request'\n      },\n\n      // General signature presence check for any stage\n      hasStageSigned() {\n        return (stage) => {\n          if (!this.requestData) return false\n\n          const map = {\n            hod: {\n              sig:\n                this.requestData.approvals?.hod?.signature ||\n                this.requestData.approvals?.hod?.signature_path ||\n                this.requestData.hod_signature_path ||\n                '',\n              date:\n                this.requestData.approvals?.hod?.date ||\n                this.requestData.approvals?.hod?.approved_at ||\n                this.requestData.hod_approved_at ||\n                '',\n              name: this.requestData.approvals?.hod?.name || this.requestData.hod_name || ''\n            },\n            divisional: {\n              sig:\n                this.requestData.approvals?.divisionalDirector?.signature ||\n                this.requestData.approvals?.divisionalDirector?.signature_path ||\n                this.requestData.divisional_signature_path,\n              date:\n                this.requestData.approvals?.divisionalDirector?.date ||\n                this.requestData.approvals?.divisionalDirector?.approved_at ||\n                this.requestData.divisional_approved_at,\n              name:\n                this.requestData.approvals?.divisionalDirector?.name ||\n                this.requestData.divisional_director_name\n            },\n            ict_director: {\n              sig:\n                this.requestData.approvals?.directorICT?.signature ||\n                this.requestData.approvals?.directorICT?.signature_path ||\n                this.requestData.dict_signature_path,\n              date:\n                this.requestData.approvals?.directorICT?.date ||\n                this.requestData.approvals?.directorICT?.approved_at ||\n                this.requestData.dict_approved_at,\n              name: this.requestData.approvals?.directorICT?.name || this.requestData.dict_name\n            },\n            head_it: {\n              sig:\n                this.requestData.implementation?.headIT?.signature ||\n                this.requestData.implementation?.headIT?.signature_path ||\n                this.requestData.head_it_signature_path,\n              date:\n                this.requestData.implementation?.headIT?.date ||\n                this.requestData.implementation?.headIT?.approved_at ||\n                this.requestData.head_it_approved_at,\n              name: this.requestData.implementation?.headIT?.name || this.requestData.head_it_name\n            },\n            ict_officer: {\n              sig:\n                this.requestData.implementation?.ictOfficer?.signature ||\n                this.requestData.implementation?.ictOfficer?.signature_path ||\n                this.requestData.ict_officer_signature_path,\n              date:\n                this.requestData.implementation?.ictOfficer?.date ||\n                this.requestData.implementation?.ictOfficer?.approved_at ||\n                this.requestData.ict_officer_approved_at,\n              name:\n                this.requestData.implementation?.ictOfficer?.name ||\n                this.requestData.ict_officer_name\n            }\n          }\n\n          const e = map[stage] || {}\n          const hasSig = !!(e.sig && String(e.sig).length > 0)\n          const hasDate = !!e.date\n          const hasName = !!(e.name && String(e.name).trim().length > 0)\n\n          // Also check if this stage is completed based on request status\n          const isStageCompleted = this.isStageCompleted(stage)\n\n          // A stage is considered signed if ANY of these are true:\n          // A) Legacy: It has signature file AND date AND name\n          // B) Legacy: Stage is completed AND has a name AND date\n          // C) Legacy: For HOD specifically, hod_signature_path exists\n          // D) Digital: Signature history contains a signature by the stage's approver name\n          // E) Digital: Current viewer is that stage role and has signed (history contains currentUser.name)\n          let result = (hasSig && hasDate && hasName) || (isStageCompleted && hasName && hasDate)\n\n          // C) Special case for HOD (legacy file path)\n          if (stage === 'hod' && this.requestData?.hod_signature_path) {\n            result = true\n            if (this.isDevelopment) {\n              console.log(\n                '\\u2705 HOD signature found via hod_signature_path:',\n                this.requestData.hod_signature_path\n              )\n            }\n          }\n\n          // D) Digital: Check signature history for matching approver name\n          if (!result && hasName && this.historyHasSigner(e.name)) {\n            result = true\n          }\n\n          // E) Digital: If viewer is that stage role and history has current user name\n          const roleMap = {\n            hod: ['head_of_department', 'hod'],\n            divisional: ['divisional_director'],\n            ict_director: ['ict_director', 'dict'],\n            head_it: ['head_it', 'head_of_it'],\n            ict_officer: ['ict_officer', 'officer_ict']\n          }\n          const viewerRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n          if (\n            !result &&\n            roleMap[stage] &&\n            roleMap[stage].includes(viewerRole) &&\n            this.currentUser?.name &&\n            this.historyHasSigner(this.currentUser.name)\n          ) {\n            result = true\n          }\n\n          // Debug logging for signature detection (development only)\n          if (this.isDevelopment) {\n            console.log(`\\ud83d\\udd0d Stage ${stage} signature check:`, {\n              signature: e.sig,\n              date: e.date,\n              name: e.name,\n              hasSig,\n              hasDate,\n              hasName,\n              isStageCompleted,\n              hod_signature_path: stage === 'hod' ? this.requestData?.hod_signature_path : 'N/A',\n              result\n            })\n          }\n\n          return result\n        }\n      },\n\n      // Should show signed indicators for the previous stage while current stage is pending\n      shouldShowHodSignedIndicator() {\n        // Show as signed when:\n        // 1) Viewer is after HOD stage and HOD stage is signed (original behaviour), OR\n        // 2) Viewer IS the HOD and they have digitally signed (in this session or history), OR\n        // 3) Divisional Director fallback when legacy hod_signature_path exists\n        const afterStage =\n          this.isReviewMode && this.viewerAfter('hod') && this.hasStageSigned('hod')\n        const isHodViewer = this.viewerStage() === 'hod'\n        const hasDigital =\n          !!this.hasUserSigned ||\n          (this.currentUser?.name && this.historyHasSigner(this.currentUser.name))\n        const hodSelf = this.isReviewMode && isHodViewer && hasDigital\n\n        // Explicit fallback: if user is divisional director and hod_signature_path exists, show signed\n        const isDivisionalDirector =\n          (this.getUserRole() || '').toLowerCase() === 'divisional_director'\n        const hodSignatureExists = !!this.requestData?.hod_signature_path\n        const fallbackResult = this.isReviewMode && isDivisionalDirector && hodSignatureExists\n\n        const result = afterStage || hodSelf || fallbackResult\n\n        if (this.isDevelopment) {\n          console.log('\\ud83d\\udfe2 shouldShowHodSignedIndicator:', {\n            isReviewMode: this.isReviewMode,\n            viewerAfter_hod: this.viewerAfter('hod'),\n            hasStageSigned_hod: this.hasStageSigned('hod'),\n            isHodViewer,\n            hasDigital,\n            isDivisionalDirector,\n            hodSignatureExists,\n            result\n          })\n        }\n        return result\n      },\n      shouldShowHodNoSignatureIndicator() {\n        // If the current user can edit/upload as HOD, do NOT show the no-signature indicator\n        if (this.isHodApprovalEditable || this.canUploadHodSignature) {\n          return false\n        }\n        // Hide when a local signature has been selected (preview) or exists in form state\n        if (this.hodSignaturePreview || this.form?.approvals?.hod?.signature) {\n          return false\n        }\n        // Don't show no signature if we should show signed indicator\n        const shouldShowSigned = this.shouldShowHodSignedIndicator\n        const baseResult =\n          this.isReviewMode && this.viewerAfter('hod') && !this.hasStageSigned('hod')\n        const result = baseResult && !shouldShowSigned\n\n        if (this.isDevelopment) {\n          console.log('\\ud83d\\udd34 shouldShowHodNoSignatureIndicator:', {\n            isReviewMode: this.isReviewMode,\n            viewerAfter_hod: this.viewerAfter('hod'),\n            hasStageSigned_hod: this.hasStageSigned('hod'),\n            shouldShowSigned,\n            baseResult,\n            result,\n            isHodApprovalEditable: this.isHodApprovalEditable,\n            canUploadHodSignature: this.canUploadHodSignature\n          })\n        }\n        return result\n      },\n      shouldShowDivisionalSignedIndicator() {\n        // Show green signed state whenever a divisional signature exists in DB\n        return this.isReviewMode && this.hasStageSigned('divisional')\n      },\n      shouldShowDivisionalNoSignatureIndicator() {\n        return (\n          this.isReviewMode && this.viewerAfter('divisional') && !this.hasStageSigned('divisional')\n        )\n      },\n      // Skipped-state helpers for HOD and Divisional Director\n      isHodSkipped() {\n        const v = (this.requestData?.hod_status || '').toString().toLowerCase()\n        return v === 'skipped'\n      },\n      isDivisionalSkipped() {\n        const v = (this.requestData?.divisional_status || '').toString().toLowerCase()\n        return v === 'skipped'\n      },\n      shouldShowIctDirectorSignedIndicator() {\n        // Show green signed state whenever an ICT Director signature exists in DB\n        return this.isReviewMode && this.hasStageSigned('ict_director')\n      },\n      shouldShowIctDirectorNoSignatureIndicator() {\n        // Show 'no signature' only when NOT the ICT Director stage for the viewer.\n        if (this.isIctDirectorApprovalEditable) return false\n        return (\n          this.isReviewMode &&\n          this.viewerAfter('ict_director') &&\n          !this.hasStageSigned('ict_director')\n        )\n      },\n      shouldShowHeadITSignedIndicator() {\n        // Show green signed state whenever a Head IT signature exists in DB\n        return this.isReviewMode && this.hasStageSigned('head_it')\n      },\n      shouldShowHeadITNoSignatureIndicator() {\n        // Don't show no signature if we should show signed indicator\n        const shouldShowSigned = this.shouldShowHeadITSignedIndicator\n        const baseResult =\n          this.isReviewMode && this.viewerAfter('head_it') && !this.hasStageSigned('head_it')\n        const result = baseResult && !shouldShowSigned\n\n        if (this.isDevelopment) {\n          console.log(' shouldShowHeadITNoSignatureIndicator:', {\n            isReviewMode: this.isReviewMode,\n            viewerAfter_head_it: this.viewerAfter('head_it'),\n            hasStageSigned_head_it: this.hasStageSigned('head_it'),\n            shouldShowSigned,\n            baseResult,\n            result\n          })\n        }\n        return result\n      },\n\n      // ICT Officer signature visibility indicators\n      shouldShowIctOfficerSignedIndicator() {\n        // Show green signed state whenever an ICT Officer signature exists in DB\n        return this.isReviewMode && this.hasStageSigned('ict_officer')\n      },\n      shouldShowIctOfficerNoSignatureIndicator() {\n        // Don't show no signature if we should show signed indicator\n        const shouldShowSigned = this.shouldShowIctOfficerSignedIndicator\n        const baseResult =\n          this.isReviewMode &&\n          this.viewerAfter('ict_officer') &&\n          !this.hasStageSigned('ict_officer')\n        const result = baseResult && !shouldShowSigned\n\n        if (this.isDevelopment) {\n          console.log(' shouldShowIctOfficerNoSignatureIndicator:', {\n            isReviewMode: this.isReviewMode,\n            viewerAfter_ict_officer: this.viewerAfter('ict_officer'),\n            hasStageSigned_ict_officer: this.hasStageSigned('ict_officer'),\n            shouldShowSigned,\n            baseResult,\n            result\n          })\n        }\n        return result\n      },\n\n      // UI class helpers to simplify template conditions\n      implementationCardClass() {\n        const baseClass =\n          'medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group'\n\n        if (this.isReviewMode && this.isIctDirectorUser) {\n          return `${baseClass} p-0.5`\n        } else if (this.isDivisionalDirectorUser || this.isIctDirectorUser) {\n          return `${baseClass} p-0.5`\n        } else {\n          return `${baseClass} p-0.5`\n        }\n      },\n\n      implementationHeaderClass() {\n        const baseClass = 'flex items-center space-x-1'\n        return this.isReviewMode && this.isIctDirectorUser\n          ? `${baseClass} mb-0.5`\n          : `${baseClass} mb-0.5`\n      },\n\n      implementationGridClass() {\n        const baseClass = 'grid grid-cols-1 lg:grid-cols-2'\n\n        if (this.isReviewMode && this.isIctDirectorUser) {\n          return `${baseClass} gap-0.5`\n        } else if (this.isDivisionalDirectorUser) {\n          return `${baseClass} gap-1`\n        } else {\n          return `${baseClass} gap-1`\n        }\n      },\n\n      headItSectionClass() {\n        const baseClass = 'bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm'\n\n        let paddingClass = ''\n        if (this.isReviewMode && this.isIctDirectorUser) {\n          paddingClass = 'p-1'\n        } else if (this.isDivisionalDirectorUser) {\n          paddingClass = 'p-1.5'\n        } else {\n          paddingClass = 'p-2'\n        }\n\n        return [baseClass, paddingClass].filter(Boolean).join(' ')\n      },\n\n      ictOfficerSectionClass() {\n        const baseClass = 'bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm'\n\n        let paddingClass = ''\n        if (this.isReviewMode && this.isIctDirectorUser) {\n          paddingClass = 'p-1'\n        } else if (this.isDivisionalDirectorUser) {\n          paddingClass = 'p-1.5'\n        } else {\n          paddingClass = 'p-2'\n        }\n\n        return [baseClass, paddingClass].filter(Boolean).join(' ')\n      },\n\n      actionButtonsClass() {\n        const baseClass = 'flex flex-col'\n\n        if (this.isReviewMode && this.isIctDirectorUser) {\n          return `${baseClass} gap-1 mt-1`\n        } else if (this.isDivisionalDirectorUser || this.isIctDirectorUser) {\n          return `${baseClass} gap-2 mt-2`\n        } else {\n          return `${baseClass} gap-4 mt-4`\n        }\n      },\n\n      // Check if ICT Officer implementation approval button should be disabled\n      isImplementationApprovalDisabled() {\n        // ICT Officer: enable when a digital signature exists (no legacy file required)\n        const hasDigital =\n          !!this.hasUserSigned ||\n          (this.currentUser?.name && this.historyHasSigner(this.currentUser.name)) ||\n          this.shouldShowIctOfficerSignedIndicator\n        return this.processing || this.loading || !hasDigital\n      },\n\n      // Check if the implementation is already completed\n      isImplementationAlreadyCompleted() {\n        if (!this.requestData) return false\n\n        // Check multiple indicators of completion\n        const hasImplementationDate = !!this.getValidIctOfficerDate\n        const hasImplementedStatus =\n          this.requestData?.ict_officer_status === 'implemented' ||\n          this.requestData?.status === 'implemented' ||\n          this.requestData?.status === 'approved' ||\n          this.requestData?.status === 'completed'\n        const hasSignaturePath = !!this.requestData?.ict_officer_signature_path\n\n        const isCompleted = hasImplementationDate || hasImplementedStatus || hasSignaturePath\n\n        // Debug logging for development\n        if (this.isDevelopment && this.isReviewMode) {\n          console.log(' Implementation completion check:', {\n            hasImplementationDate,\n            hasImplementedStatus,\n            hasSignaturePath,\n            isCompleted,\n            ict_officer_implemented_at: this.requestData?.ict_officer_implemented_at,\n            ict_officer_status: this.requestData?.ict_officer_status,\n            status: this.requestData?.status\n          })\n        }\n\n        return isCompleted\n      }\n    },\n    async mounted() {\n      console.log(' Component mounted - starting initialization...')\n\n      // Show loading screen\n      this.isLoading = true\n\n      // Use Promise.all for parallel loading to reduce total load time\n      try {\n        // Load critical data in parallel - modules can be cached\n        const [currentUser] = await Promise.all([\n          this.getCurrentUser(),\n          this.loadModulesWithCaching() // Load modules with caching strategy\n        ])\n        console.log(' After getCurrentUser:', {\n          hasCurrentUser: !!this.currentUser,\n          userName: this.currentUser?.name,\n          userRole: this.currentUser?.role || this.currentUser?.user_role\n        })\n\n        // Fallback to localStorage if API fails\n        if (!this.currentUser || !this.currentUser.name) {\n          console.log(' API failed, trying localStorage fallback...')\n          this.tryGetUserFromLocalStorage()\n          console.log(' After localStorage:', {\n            hasCurrentUser: !!this.currentUser,\n            userName: this.currentUser?.name\n          })\n        }\n\n        // Fallback to Pinia store\n        if (!this.currentUser || !this.currentUser.name) {\n          console.log(' localStorage failed, trying Pinia store fallback...')\n          this.tryGetUserFromStore()\n          console.log(' After Pinia store:', {\n            hasCurrentUser: !!this.currentUser,\n            userName: this.currentUser?.name,\n            userRole: this.getUserRole()\n          })\n        }\n\n        // Final check\n        if (!this.currentUser || !this.currentUser.name) {\n          console.error(' CRITICAL: Unable to load user from any source!')\n          console.error(' This will cause role detection to fail')\n        } else {\n          console.log(' User successfully loaded:', this.currentUser.name)\n          console.log(' Detected user role:', this.getUserRole())\n\n          // IMMEDIATE HOD CHECK for troubleshooting\n          const userRole = (this.getUserRole() || '').toLowerCase()\n          const hodRoles = [\n            'head_of_department',\n            'hod',\n            'department_head',\n            'head_department',\n            'hod_user',\n            'head_of_dept'\n          ]\n          const isHodUser = hodRoles.includes(userRole)\n\n          console.log(' IMMEDIATE HOD CHECK ON MOUNT:', {\n            userName: this.currentUser.name,\n            detectedRole: userRole,\n            isHodUser,\n            hodRolesChecked: hodRoles,\n            isInReviewMode: this.isReviewMode,\n            requestId: this.getRequestId\n          })\n        }\n\n        // In strict view mode, expand sections by default\n        if (this.isStrictViewMode) {\n          this.showApprovalSections = true\n          this.showImplementationSections = true\n        }\n\n        if (this.isReviewMode && this.getRequestId) {\n          await this.loadRequestData()\n\n          // Hide loading screen after data is loaded\n          this.isLoading = false\n\n          // Debug: Check signature indicators after data loads (development only)\n          if (this.isDevelopment) {\n            setTimeout(() => {\n              console.log('\\u23f0 5-second debug check after mount:', {\n                shouldShowHodSignedIndicator: this.shouldShowHodSignedIndicator,\n                shouldShowHodNoSignatureIndicator: this.shouldShowHodNoSignatureIndicator,\n                hasStageSigned_hod: this.hasStageSigned('hod'),\n                viewerAfter_hod: this.viewerAfter('hod'),\n                isReviewMode: this.isReviewMode,\n                currentUser: this.currentUser,\n                userRole: this.getUserRole(),\n                viewerStage: this.viewerStage(),\n                viewerRank: this.viewerRank(),\n                requestStatus: this.requestData?.status,\n                requestId: this.getRequestId\n              })\n            }, 5000)\n          }\n        } else {\n          // Not in review mode, hide loading immediately\n          this.isLoading = false\n        }\n      } catch (error) {\n        console.error(' Component mount error:', error)\n        // Hide loading screen on error\n        this.isLoading = false\n        // Don't let mount errors cause page to disappear\n        // Just log the error and continue with basic functionality\n        this.error = 'Failed to fully initialize component, but continuing...'\n      }\n    },\n    watch: {\n      selectedWellsoft: {\n        handler(v) {\n          this.syncTabs('wellsoft', v)\n        },\n        deep: true\n      },\n      selectedJeeva: {\n        handler(v) {\n          this.syncTabs('jeeva', v)\n        },\n        deep: true\n      },\n      // Watch for when approval sections become editable (now just for logging)\n      isHodApprovalEditable: {\n        handler(isEditable) {\n          if (this.isDevelopment) {\n            console.log('HOD approval editable changed:', {\n              isEditable,\n              currentHodName: this.form.approvals.hod.name,\n              hasCurrentUser: !!this.currentUser,\n              isReviewMode: this.isReviewMode,\n              currentApprovalStage: this.currentApprovalStage\n            })\n          }\n          // Role-based population is now handled by currentUser watcher\n        },\n        immediate: true\n      },\n      isDivisionalApprovalEditable: {\n        handler(isEditable) {\n          if (this.isDevelopment) {\n            console.log('Divisional approval editable changed:', {\n              isEditable,\n              currentDivisionalName: this.form.approvals.divisionalDirector.name,\n              hasCurrentUser: !!this.currentUser,\n              isReviewMode: this.isReviewMode,\n              currentApprovalStage: this.currentApprovalStage\n            })\n          }\n\n          // Auto-populate Divisional Director date when they become editable\n          if (isEditable && this.requestData) {\n            this.populateDivisionalDirectorDateFromHod()\n          }\n        },\n        immediate: true\n      },\n      isIctDirectorApprovalEditable: {\n        handler(isEditable) {\n          if (this.isDevelopment) {\n            console.log('ICT Director approval editable changed:', {\n              isEditable,\n              currentIctDirectorName: this.form.approvals.directorICT.name,\n              hasCurrentUser: !!this.currentUser,\n              isReviewMode: this.isReviewMode,\n              currentApprovalStage: this.currentApprovalStage\n            })\n          }\n          // Role-based population is now handled by currentUser watcher\n        },\n        immediate: true\n      },\n      isHeadItApprovalEditable: {\n        handler(isEditable) {\n          if (this.isDevelopment) {\n            console.log('Head IT approval editable changed:', {\n              isEditable,\n              currentHeadItName: this.form.implementation.headIT.name,\n              hasCurrentUser: !!this.currentUser,\n              isReviewMode: this.isReviewMode,\n              currentApprovalStage: this.currentApprovalStage,\n              userRole: this.getUserRole()\n            })\n          }\n\n          // Auto-populate Head IT name when section becomes editable\n          if (isEditable && this.currentUser && this.currentUser.name) {\n            const userRole = (this.getUserRole() || '').toLowerCase()\n            const isHeadIt = ['head_it', 'head_of_it', 'ict_head', 'it_head'].includes(userRole)\n\n            if (isHeadIt && !this.form.implementation.headIT.name) {\n              console.log(' Auto-populating Head IT name:', this.currentUser.name)\n              this.form.implementation.headIT.name = this.currentUser.name\n              this.form.implementation.headIT.date = this.formatDateForInput(new Date())\n              this.$forceUpdate() // Force reactivity update\n            }\n          }\n        },\n        immediate: true\n      },\n      isIctOfficerApprovalEditable: {\n        handler(isEditable) {\n          if (this.isDevelopment) {\n            console.log('ICT Officer approval editable changed:', {\n              isEditable,\n              currentIctOfficerName: this.form.implementation.ictOfficer.name,\n              hasCurrentUser: !!this.currentUser,\n              isReviewMode: this.isReviewMode,\n              currentApprovalStage: this.currentApprovalStage\n            })\n          }\n          // Role-based population is now handled by currentUser watcher\n        },\n        immediate: true\n      },\n      // Watch for when currentUser data is loaded to trigger auto-population\n      currentUser: {\n        handler(newUser) {\n          if (newUser && newUser.name) {\n            if (this.isDevelopment) {\n              console.log('Current user data loaded, role-based auto-population:', {\n                userName: newUser.name,\n                userId: newUser.id,\n                userRole: newUser.role,\n                isReviewMode: this.isReviewMode,\n                currentApprovalStage: this.currentApprovalStage\n              })\n            }\n\n            // Role-based population - only populate the field that matches user's role\n            this.populateBasedOnUserRole(newUser)\n          }\n        },\n        immediate: true\n      },\n\n      // Watch for changes in the central wellsoftRequestType and sync with jeevaRequestType\n      wellsoftRequestType: {\n        handler(newValue) {\n          // Sync the central Use/Revoke selection with both module types\n          this.jeevaRequestType = newValue\n          if (this.isDevelopment) {\n            console.log(' Central request type changed:', {\n              newValue,\n              appliedToBoth: 'Jeeva and Wellsoft modules'\n            })\n          }\n        },\n        immediate: true\n      },\n\n      // Watch for when request data is loaded and user is Head IT\n      requestData: {\n        handler(newRequestData) {\n          if (newRequestData && this.currentUser && this.currentUser.name) {\n            const userRole = (this.getUserRole() || '').toLowerCase()\n            const isHeadIt = ['head_it', 'head_of_it'].includes(userRole)\n            const isHeadItStage = this.currentApprovalStage === 'head_it'\n\n            if (isHeadIt && isHeadItStage && this.isReviewMode) {\n              console.log(\n                ' Head IT user detected with loaded request data - triggering name population'\n              )\n\n              // Force population of Head IT name if it's empty\n              if (!this.form.implementation.headIT.name) {\n                console.log(' Force-populating Head IT name field')\n                this.populateApproverName('head_it')\n              }\n            }\n          }\n        },\n        immediate: false\n      },\n      // Also refresh role comment when request loads\n      requestDataLoadForComments: {\n        handler() {\n          this.loadRoleCommentDraft()\n        },\n        immediate: true\n      }\n    },\n    methods: {\n      formatDateTime(ts) {\n        try {\n          const d = typeof ts === 'string' ? new Date(ts) : ts\n          if (isNaN(d?.getTime?.())) return ''\n          return d.toLocaleString()\n        } catch {\n          return ''\n        }\n      },\n      normalizePhoneNumber(input) {\n        if (!input) return ''\n        let v = String(input).trim().replace(/\\s|-/g, '')\n        if (v.startsWith('+255')) return v\n        if (v.startsWith('255')) return '+' + v\n        if (v.startsWith('0')) return '+255' + v.slice(1)\n        return v\n      },\n      async signCurrentDocument() {\n        try {\n          if (this.isSigning) return\n          const documentId = this.getRequestId || this.requestData?.id || this.$route.params.id\n          if (!documentId) {\n            this.showToast(\n              'Cannot sign until the request is created. Please submit first.',\n              'error'\n            )\n            return\n          }\n          this.isSigning = true\n          const res = await signatureService.sign(documentId)\n          if (res && (res.success || res.data)) {\n            this.hasUserSigned = true\n            this.lastSignedAt = res?.data?.signed_at || res?.signed_at || new Date().toISOString()\n            const signer = this.currentUser?.name || 'you'\n            this.toast = {\n              show: true,\n              message: `Document successfully signed by ${signer} on ${new Date(this.lastSignedAt).toLocaleString()}`\n            }\n            // Refresh local signature history so indicators update without reload\n            await this.fetchSignatureHistory().catch(() => {})\n            // Optimistically reflect signed status for current stage to hide buttons immediately\n            try {\n              const stage = this.viewerStage()\n              if (this.requestData) {\n                this.requestData.approvals = this.requestData.approvals || {}\n                if (stage === 'hod') {\n                  this.requestData.approvals.hod = {\n                    ...(this.requestData.approvals.hod || {}),\n                    signature_status: 'Signed',\n                    signature_display: 'Digitally signed'\n                  }\n                } else if (stage === 'divisional') {\n                  this.requestData.approvals.divisionalDirector = {\n                    ...(this.requestData.approvals.divisionalDirector || {}),\n                    signature_status: 'Signed',\n                    signature_display: 'Digitally signed'\n                  }\n                } else if (stage === 'ict_director') {\n                  this.requestData.approvals.directorICT = {\n                    ...(this.requestData.approvals.directorICT || {}),\n                    signature_status: 'Signed',\n                    signature_display: 'Digitally signed'\n                  }\n                  // Auto-capture date for ICT Director when signing\n                  try {\n                    const today = this.formatDateForInput(new Date())\n                    if (!this.form?.approvals?.directorICT?.date) {\n                      this.form.approvals.directorICT.date = today\n                    }\n                    if (!this.requestData.approvals.directorICT.date) {\n                      this.requestData.approvals.directorICT.date = today\n                    }\n                  } catch (e) {\n                    /* no-op */\n                  }\n                } else if (stage === 'head_it') {\n                  this.requestData.implementation = this.requestData.implementation || {}\n                  this.requestData.implementation.headIT = {\n                    ...(this.requestData.implementation.headIT || {}),\n                    signature_status: 'Signed',\n                    signature_display: 'Digitally signed'\n                  }\n                }\n              }\n            } catch (err) {\n              // Ensure UI updates even if optimistic local patch fails\n              console.warn('Signature optimistic update failed:', err)\n            }\n            this.$forceUpdate()\n            // Ensure date input reflects immediately for DICT stage\n            try {\n              this.ensureIctDirectorDateAutoFill()\n            } catch (e) {\n              /* no-op */\n            }\n            setTimeout(() => (this.toast.show = false), 4000)\n          } else {\n            this.showToast(res?.message || 'Failed to sign document', 'error')\n          }\n        } catch (e) {\n          console.error('Sign error:', e)\n          this.showToast(e.message || 'Failed to sign document', 'error')\n        } finally {\n          this.isSigning = false\n        }\n      },\n      // ===========================================\n      // DIGITAL SIGNATURE HISTORY\n      // ===========================================\n      async fetchSignatureHistory() {\n        try {\n          const id = this.getRequestId || this.requestData?.id || this.$route.params.id\n          if (!id) return\n          const res = await signatureService.list(id)\n          // Accept either {data: [...] } or direct array\n          this.signatureHistory = Array.isArray(res?.data)\n            ? res.data\n            : Array.isArray(res)\n              ? res\n              : []\n        } catch (e) {\n          console.warn('Failed to load signature history:', e?.message || e)\n          this.signatureHistory = []\n        } finally {\n          // After loading signature history, ensure DICT date is filled if viewer is ICT Director\n          this.$nextTick(() => {\n            try {\n              this.ensureIctDirectorDateAutoFill()\n            } catch (e) {\n              /* no-op */\n            }\n          })\n        }\n      },\n\n      // Auto-fill DICT date when signed/pending at DICT stage\n      ensureIctDirectorDateAutoFill() {\n        try {\n          if (this.viewerStage() !== 'ict_director') return\n          const hasDigital =\n            !!this.hasUserSigned ||\n            (this.currentUser?.name && this.historyHasSigner(this.currentUser.name))\n          const atDictStage = this.currentApprovalStage === 'ict_director'\n          if ((hasDigital || this.shouldShowIctDirectorSignedIndicator) && atDictStage) {\n            const empty = !this.form?.approvals?.directorICT?.date\n            if (empty) {\n              this.form.approvals.directorICT.date = this.formatDateForInput(new Date())\n              this.$forceUpdate()\n            }\n          }\n        } catch (e) {\n          /* no-op */\n        }\n      },\n\n      // Helper: does history contain a signature by this exact person name (case-insensitive)?\n      historyHasSigner(name) {\n        if (!name) return false\n        const n = String(name).trim().toLowerCase()\n        return (this.signatureHistory || []).some(\n          (s) =>\n            String(s.user_name || s.name || '')\n              .trim()\n              .toLowerCase() === n\n        )\n      },\n\n      // Return a hover tooltip like \"Signed by You at HH:MM\" for the given stage if current user signed\n      getSignedByYouTooltip(stage) {\n        try {\n          const userName = this.currentUser?.name\n          if (!userName) return ''\n          // Only show when the viewer's role matches the stage role\n          const roleMap = {\n            hod: ['head_of_department', 'hod'],\n            divisional: ['divisional_director'],\n            ict_director: ['ict_director', 'dict'],\n            head_it: ['head_it', 'head_of_it'],\n            ict_officer: ['ict_officer', 'officer_ict']\n          }\n          const viewerRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n          if (!roleMap[stage] || !roleMap[stage].includes(viewerRole)) return ''\n\n          // Find current user's signature entry\n          const entry = (this.signatureHistory || []).find(\n            (s) =>\n              String(s.user_name || s.name || '')\n                .trim()\n                .toLowerCase() === String(userName).trim().toLowerCase()\n          )\n          if (!entry) return ''\n          const ts = entry.signed_at || entry.created_at || entry.timestamp\n          if (!ts) return 'Signed by You'\n          const d = new Date(ts)\n          if (isNaN(d.getTime())) return 'Signed by You'\n          const time = d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n          return `Signed by You at ${time}`\n        } catch {\n          return ''\n        }\n      },\n\n      // ===========================================\n      // ROLE COMMENT HELPERS\n      // ===========================================\n      getExistingRoleComment() {\n        if (!this.requestData) return ''\n        const key = this.roleCommentKey\n        if (!key) return ''\n        const aliases = {\n          divisional_director_comments: ['divisional_comments'],\n          ict_director_comments: ['dict_comments'],\n          head_it_comments: ['head_it_comments'],\n          ict_officer_comments: ['ict_officer_comments']\n        }\n        const tryKeys = [key, ...(aliases[key] || [])]\n        for (const k of tryKeys) {\n          if (this.requestData[k]) return this.requestData[k]\n        }\n        const nested = {\n          divisional_director_comments: this.requestData.approvals?.divisionalDirector?.comments,\n          ict_director_comments: this.requestData.approvals?.directorICT?.comments,\n          head_it_comments: this.requestData.implementation?.headIT?.comments,\n          ict_officer_comments: this.requestData.implementation?.ictOfficer?.comments\n        }\n        return nested[key] || ''\n      },\n      loadRoleCommentDraft() {\n        this.roleCommentsDraft = this.getExistingRoleComment() || ''\n      },\n\n      // Intercept ICT Officer approve click to open Grant Access popup\n      onIctOfficerApproveClick() {\n        // Only ICT Officer flow\n        const role = (this.getUserRole() || '').toLowerCase()\n        if (!['ict_officer', 'officer_ict'].includes(role)) return\n        // Require digital signature before proceeding\n        const currentUserName = this.currentUser?.name || ''\n        const hasDigital = !!this.hasUserSigned || this.historyHasSigner(currentUserName)\n        if (!hasDigital) {\n          this.showToast('Please digitally sign the request first', 'error')\n          return\n        }\n        this.grantAccessComment = (this.roleCommentsDraft || '').trim()\n        this.grantAccessError = ''\n        this.showGrantAccessPopup = true\n      },\n\n      async confirmGrantAccess() {\n        const comment = (this.grantAccessComment || '').trim()\n        if (!comment) {\n          this.grantAccessError = 'Comment is required.'\n          return\n        }\n        this.grantAccessError = ''\n        try {\n          this.processing = true\n          // Digital signature flow: no legacy file required\n          const fdPayload = {\n            ict_officer_name:\n              this.form?.implementation?.ictOfficer?.name || this.currentUser?.name || '',\n            ict_officer_date: new Date().toISOString().slice(0, 10),\n            ict_officer_comments: comment,\n            ict_officer_status: 'implemented'\n          }\n\n          const res = await bothServiceFormService.ictOfficerApprove(this.getRequestId, fdPayload)\n          if (res.success) {\n            this.showGrantAccessPopup = false\n            this.showToast('Access granted successfully', 'success')\n\n            // Immediately update local state to hide approve button\n            if (this.requestData) {\n              this.requestData.ict_officer_status = 'implemented'\n              this.requestData.ict_officer_implemented_at = new Date().toISOString()\n              this.requestData.ict_officer_comments = comment\n              this.requestData.status = 'implemented'\n            }\n\n            // Redirect to ICT Officer dashboard after a brief delay to show success message\n            setTimeout(() => {\n              this.$router.push('/ict-dashboard/access-requests')\n            }, 1500)\n          } else {\n            this.showToast(res.error || 'Failed to grant access', 'error')\n          }\n        } catch (e) {\n          console.error('Grant access error:', e)\n          this.showToast(e.message || 'Failed to grant access', 'error')\n        } finally {\n          this.processing = false\n        }\n      },\n\n      cancelGrantAccess() {\n        this.showGrantAccessPopup = false\n        this.grantAccessError = ''\n      },\n\n      // Generate SMS preview text (matches backend template)\n      getSmsPreviewText() {\n        const name = this.form.staff_name || 'User'\n        const ref =\n          this.form.request_id || 'MLG-REQ' + String(this.getRequestId || '').padStart(6, '0')\n\n        // Get access types (previous template)\n        const accessTypes = []\n        if (\n          this.form.jeeva_access_request ||\n          (this.form.jeeva_modules_selected && this.form.jeeva_modules_selected.length > 0)\n        ) {\n          accessTypes.push('Jeeva')\n        }\n        if (\n          this.form.wellsoft_access_request ||\n          (this.form.wellsoft_modules_selected && this.form.wellsoft_modules_selected.length > 0)\n        ) {\n          accessTypes.push('Wellsoft')\n        }\n        if (\n          this.form.internet_access_request ||\n          (this.form.internet_purposes && this.form.internet_purposes.length > 0)\n        ) {\n          accessTypes.push('Internet')\n        }\n        const types = accessTypes.length > 0 ? accessTypes.join(' & ') : 'Access'\n\n        const comment = (this.grantAccessComment || '').trim() || '[YOUR COMMENT HERE]'\n\n        // Avoid \"Access access\" when types falls back to \"Access\"\n        const accessText =\n          String(types).toLowerCase() === 'access' ? 'access request' : `${types} access`\n\n        return `Dear ${name}, your ${accessText} has been GRANTED and is now ACTIVE. Ref: ${ref}. Note: ${comment} - EABMS`\n      },\n\n      // Helper to compute row class safely\n      rowClass(comment, index) {\n        const base =\n          'grid grid-cols-12 gap-0 p-0 border-b border-amber-300/20 transition-none hover:bg-amber-500/10 items-start'\n        const isLast = index === this.visibleComments.length - 1\n        const highlight = this.isHighlightedComment(comment)\n          ? 'ring-2 ring-green-400/60 bg-green-900/20'\n          : ''\n        return [base, highlight, isLast ? 'border-b-0' : '']\n      },\n      isHighlightedComment(comment) {\n        try {\n          if (!this.lastAddedCommentMeta) return false\n          if (!comment || typeof comment !== 'object') return false\n          if (comment.stage !== 'ict_officer') return false\n          const a = (comment.comments || '').trim()\n          const b = (this.lastAddedCommentMeta.text || '').trim()\n          return a.length > 0 && a === b\n        } catch (e) {\n          return false\n        }\n      },\n\n      // ===========================================\n      // MODULE LOADING METHODS WITH CACHING\n      // ===========================================\n\n      // Cache modules in localStorage with 24-hour TTL\n      async loadModulesWithCaching() {\n        const CACHE_KEY_WELLSOFT = 'cached_wellsoft_modules'\n        const CACHE_KEY_JEEVA = 'cached_jeeva_modules'\n        const CACHE_TTL = 24 * 60 * 60 * 1000 // 24 hours\n\n        const loadFromCacheOrAPI = async (cacheKey, apiCall, fallbackData) => {\n          try {\n            // Check cache first\n            const cached = localStorage.getItem(cacheKey)\n            if (cached) {\n              const { data, timestamp } = JSON.parse(cached)\n              if (Date.now() - timestamp < CACHE_TTL) {\n                console.log(` Using cached ${cacheKey}:`, data.length, 'modules')\n                return data\n              }\n            }\n\n            // Load from API if cache miss or expired\n            const response = await apiCall()\n            if (response && response.success && Array.isArray(response.data)) {\n              const modules = response.data.map((module) => module.name).sort()\n              // Cache the result\n              localStorage.setItem(\n                cacheKey,\n                JSON.stringify({\n                  data: modules,\n                  timestamp: Date.now()\n                })\n              )\n              console.log(` ${cacheKey} loaded from API:`, modules.length, 'modules')\n              return modules\n            } else {\n              throw new Error('Invalid API response')\n            }\n          } catch (error) {\n            console.warn(` Failed to load ${cacheKey}, using fallback`, error)\n            return fallbackData\n          }\n        }\n\n        // Load both module types in parallel with caching\n        const [wellsoftModules, jeevaModules] = await Promise.all([\n          loadFromCacheOrAPI(CACHE_KEY_WELLSOFT, combinedAccessService.getWellsoftModules, []),\n          loadFromCacheOrAPI(CACHE_KEY_JEEVA, combinedAccessService.getJeevaModules, [])\n        ])\n\n        this.wellsoftModules = wellsoftModules\n        this.jeevaModules = jeevaModules\n      },\n\n      // Legacy methods kept for compatibility - now just call cached version\n      async loadWellsoftModules() {\n        await this.loadModulesWithCaching()\n      },\n\n      async loadJeevaModules() {\n        await this.loadModulesWithCaching()\n      },\n\n      // ===========================================\n      // JEEVA DROPDOWN HANDLERS\n      // ===========================================\n      isJeevaItemSelected(label) {\n        return this.jeevaItemSelections.includes(label)\n      },\n      toggleJeevaItem(label) {\n        let sel = [...this.jeevaItemSelections]\n        if (label === 'Use') sel = sel.filter((v) => v !== 'Revoke')\n        if (label === 'Revoke') sel = sel.filter((v) => v !== 'Use')\n        if (sel.includes(label)) sel = sel.filter((v) => v !== label)\n        else sel.push(label)\n        this.jeevaItemSelections = sel\n        // propagate into first Jeeva tab if exists\n        const firstJeeva = this.tabs.find((t) => t.type === 'jeeva')\n        if (firstJeeva) {\n          const cur = this.moduleData[firstJeeva.key] || {}\n          this.moduleData[firstJeeva.key] = { ...cur, selections: sel }\n        }\n      },\n      onJeevaItemsKeydown(e) {\n        if (!this.jeevaItemOpen && (e.key === 'Enter' || e.key === ' ')) {\n          e.preventDefault()\n          this.jeevaItemOpen = true\n          return\n        }\n        if (!this.jeevaItemOpen) return\n        if (e.key === 'Escape') {\n          e.preventDefault()\n          this.jeevaItemOpen = false\n          return\n        }\n        const max = this.jeevaItemOptions.length - 1\n        if (e.key === 'ArrowDown') {\n          e.preventDefault()\n          this.jeevaItemFocusIndex = Math.min(max, this.jeevaItemFocusIndex + 1)\n        }\n        if (e.key === 'ArrowUp') {\n          e.preventDefault()\n          this.jeevaItemFocusIndex = Math.max(0, this.jeevaItemFocusIndex - 1)\n        }\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault()\n          this.toggleJeevaItem(this.jeevaItemOptions[this.jeevaItemFocusIndex])\n        }\n      },\n\n      // ===========================================\n      // TABS AND MODULE MANAGEMENT\n      // ===========================================\n      syncTabs(type, values) {\n        const prefix = { wellsoft: 'W', jeeva: 'J', internet: 'I' }[type]\n        const newTabs = []\n        const newData = { ...this.moduleData }\n        values.forEach((val) => {\n          const key = `${prefix}:${val}`\n          if (!newData[key]) newData[key] = {}\n          newTabs.push({\n            key,\n            label: val,\n            type,\n            component: this.componentFor(type)\n          })\n        })\n        this.tabs = newTabs\n        this.moduleData = newData\n        this.activeTab = this.tabs[0]?.key || ''\n      },\n\n      // ===========================================\n      // HELPER FUNCTIONS\n      // ===========================================\n      isSelected(type, value) {\n        if (type === 'wellsoft') return this.selectedWellsoft.includes(value)\n        if (type === 'jeeva') return this.selectedJeeva.includes(value)\n        return false\n      },\n\n      // ===========================================\n\n      // APPROVAL AND USER ROLE METHODS\n      // ===========================================\n\n      /**\n       * Get the appropriate name placeholder for approval sections based on user role\n       */\n      getApprovalNamePlaceholder(approvalType) {\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const roleMapping = {\n          hod: [\n            'head_of_department',\n            'hod',\n            'head_department',\n            'department_head',\n            'hod_user',\n            'head_of_dept'\n          ],\n          divisional_director: ['divisional_director'],\n          ict_director: ['ict_director', 'dict'],\n          head_it: ['head_it', 'head_of_it'],\n          ict_officer: ['ict_officer', 'officer_ict']\n        }\n\n        // Check if current user's role matches this approval type\n        if (roleMapping[approvalType] && roleMapping[approvalType].includes(userRole)) {\n          return this.currentUser?.name || 'Loading user...'\n        }\n\n        // For other roles, show empty or existing data\n        return this.getExistingApprovalName(approvalType) || ''\n      },\n\n      /**\n       * Get the appropriate title for approval name fields\n       */\n      getApprovalNameTitle(approvalType) {\n        const userRole = (this.getUserRole() || '').toLowerCase().replace(/[\\s-]+/g, '_')\n        const roleMapping = {\n          hod: [\n            'head_of_department',\n            'hod',\n            'head_department',\n            'department_head',\n            'hod_user',\n            'head_of_dept'\n          ],\n          divisional_director: ['divisional_director'],\n          ict_director: ['ict_director', 'dict'],\n          head_it: ['head_it', 'head_of_it'],\n          ict_officer: ['ict_officer', 'officer_ict']\n        }\n\n        // Check if current user's role matches this approval type\n        if (roleMapping[approvalType] && roleMapping[approvalType].includes(userRole)) {\n          return 'Auto-filled with: ' + (this.currentUser?.name || 'Loading...')\n        }\n\n        return 'This field will be filled by the appropriate approver'\n      },\n\n      /**\n       * Get existing approval name from form data or request data\n       */\n      getExistingApprovalName(approvalType) {\n        switch (approvalType) {\n          case 'hod':\n            return this.form.approvals.hod.name || this.requestData?.approvals?.hod?.name\n          case 'divisional_director':\n            return (\n              this.form.approvals.divisionalDirector.name ||\n              this.requestData?.approvals?.divisionalDirector?.name\n            )\n          case 'ict_director':\n            return (\n              this.form.approvals.directorICT.name || this.requestData?.approvals?.directorICT?.name\n            )\n          case 'head_it':\n            return (\n              this.form.implementation.headIT.name || this.requestData?.implementation?.headIT?.name\n            )\n          case 'ict_officer':\n            return (\n              this.form.implementation.ictOfficer.name ||\n              this.requestData?.implementation?.ictOfficer?.name\n            )\n          default:\n            return ''\n        }\n      },\n\n      /**\n       * Get current user role from various sources\n       */\n      getUserRole() {\n        // Try multiple sources for user role from currentUser data\n        if (!this.currentUser) {\n          console.warn('No current user found for role detection')\n\n          // Try to get from authStore as backup\n          if (this.authStore && (this.authStore.user || this.authStore.currentUser)) {\n            const storeUser = this.authStore.user || this.authStore.currentUser\n            console.log(' Trying to get role from authStore:', storeUser)\n            const storeRole = storeUser.role || storeUser.user_role || storeUser.primary_role\n            if (storeRole) {\n              console.log(' Got role from authStore:', storeRole)\n              return storeRole\n            }\n          }\n\n          return null\n        }\n\n        // Try different role properties\n        const role =\n          this.currentUser.role ||\n          this.currentUser.user_role ||\n          this.currentUser.primary_role ||\n          this.currentUser.userRole\n\n        // Handle array of roles - prioritize specific roles if user has multiple\n        if (Array.isArray(this.currentUser.roles) && this.currentUser.roles.length > 0) {\n          // Priority order for roles (highest to lowest)\n          const rolePriority = [\n            'head_of_it',\n            'head_it',\n            'ict_director',\n            'divisional_director',\n            'head_of_department',\n            'hod',\n            'department_head',\n            'head_department',\n            'hod_user',\n            'head_of_dept',\n            'ict_officer'\n          ]\n\n          // Extract role names from the roles array\n          const userRoleNames = this.currentUser.roles.map((roleObj) => {\n            return typeof roleObj === 'string' ? roleObj : roleObj.name\n          })\n\n          console.log(' User has multiple roles:', userRoleNames)\n\n          // Find highest priority role\n          for (const priorityRole of rolePriority) {\n            if (userRoleNames.includes(priorityRole)) {\n              console.log(' Using prioritized role:', priorityRole)\n              return priorityRole\n            }\n          }\n\n          // Fallback to first role if no priority match\n          const firstRole = userRoleNames[0]\n          console.log(' Using first role as fallback:', firstRole)\n          return firstRole\n        }\n\n        console.log(' CRITICAL: getUserRole debug for HOD troubleshooting:', {\n          detectedRole: role,\n          currentUserExists: !!this.currentUser,\n          currentUserName: this.currentUser?.name,\n          roleProperty: this.currentUser?.role,\n          userRoleProperty: this.currentUser?.user_role,\n          primaryRoleProperty: this.currentUser?.primary_role,\n          userRoleProperty2: this.currentUser?.userRole,\n          rolesArray: this.currentUser?.roles,\n          rolesArrayLength: this.currentUser?.roles?.length,\n          fullCurrentUser: JSON.stringify(this.currentUser, null, 2)\n        })\n\n        return role || ''\n      },\n\n      // ===========================================\n      // MODULE SELECTION METHODS\n      // ===========================================\n      toggleWellsoft(m) {\n        this.selectedWellsoft = this.isSelected('wellsoft', m)\n          ? this.selectedWellsoft.filter((x) => x !== m)\n          : [...this.selectedWellsoft, m]\n      },\n      toggleJeeva(m) {\n        this.selectedJeeva = this.isSelected('jeeva', m)\n          ? this.selectedJeeva.filter((x) => x !== m)\n          : [...this.selectedJeeva, m]\n      },\n      selectAll(type) {\n        if (type === 'wellsoft') this.selectedWellsoft = [...this.wellsoftModules]\n        if (type === 'jeeva') this.selectedJeeva = [...this.jeevaModules]\n      },\n      clearAll(type) {\n        if (type === 'wellsoft') this.selectedWellsoft = []\n        if (type === 'jeeva') this.selectedJeeva = []\n      },\n      componentFor(type) {\n        if (type === 'wellsoft') return 'WellsoftPanel'\n        if (type === 'jeeva') return 'JeevaPanel'\n        return 'InternetPanel'\n      },\n\n      // ===========================================\n      // UI INTERACTION METHODS\n      // ===========================================\n      toggleAccordion(key) {\n        this.openAccordions.has(key)\n          ? this.openAccordions.delete(key)\n          : this.openAccordions.add(key)\n      },\n      tryCloseTab(key) {\n        const t = this.tabs.find((x) => x.key === key)\n        if (!t) return\n        this.confirm = { key, label: t.label }\n      },\n      closeTab(key) {\n        this.tabs = this.tabs.filter((t) => t.key !== key)\n        const data = { ...this.moduleData }\n        delete data[key]\n        this.moduleData = data\n        const [p, v] = key.split(':')\n        if (p === 'W') this.selectedWellsoft = this.selectedWellsoft.filter((x) => x !== v)\n        if (p === 'J') this.selectedJeeva = this.selectedJeeva.filter((x) => x !== v)\n        this.confirm = { key: '', label: '' }\n        this.activeTab = this.tabs[0]?.key || ''\n      },\n\n      // Access type change handler\n      onAccessTypeChange(type) {\n        console.log('Access type changed to:', type)\n        this.hodAccessType = type\n\n        // Clear temporary until date and error if switching to permanent\n        if (type === 'permanent') {\n          this.hodTemporaryUntil = ''\n          this.hodTemporaryUntilError = ''\n        }\n\n        // Force reactivity update\n        this.$forceUpdate()\n      },\n\n      // Submit\n      async onSubmit() {\n        // Reset errors\n        this.errors = { pfNumber: '', staffName: '' }\n\n        // Basic validation\n        if (!this.form.shared.pfNumber) {\n          this.errors.pfNumber = 'PF Number is required.'\n          return\n        }\n        if (!this.form.shared.staffName) {\n          this.errors.staffName = 'Staff Name is required.'\n          return\n        }\n\n        // Enhanced validation: Check each service type based on what's expected\n        // Determine what services should be available based on request_types or inferred from selections\n        const hasWellsoftSelected = this.selectedWellsoft.length > 0\n        const hasJeevaSelected = this.selectedJeeva.length > 0\n        const hasInternetPurposes = this.internetPurposes.some((purpose) => purpose.trim())\n\n        // If in review mode, check against the request_types from the database\n        if (this.isReviewMode && this.requestData) {\n          const requestTypes = this.requestData.request_types || this.requestData.request_type || []\n\n          if (requestTypes.includes('wellsoft') && this.selectedWellsoft.length === 0) {\n            this.toast = {\n              show: true,\n              message:\n                'This request requires Wellsoft access. Please select at least 1 Wellsoft module.'\n            }\n            setTimeout(() => (this.toast.show = false), 5000)\n            return\n          }\n\n          if (\n            (requestTypes.includes('jeeva_access') || requestTypes.includes('jeeva')) &&\n            this.selectedJeeva.length === 0\n          ) {\n            this.toast = {\n              show: true,\n              message: 'This request requires Jeeva access. Please select at least 1 Jeeva module.'\n            }\n            setTimeout(() => (this.toast.show = false), 5000)\n            return\n          }\n\n          if (\n            (requestTypes.includes('internet_access_request') ||\n              requestTypes.includes('internet')) &&\n            !hasInternetPurposes\n          ) {\n            this.toast = {\n              show: true,\n              message:\n                'This request requires Internet access. Please provide at least 1 internet purpose.'\n            }\n            setTimeout(() => (this.toast.show = false), 5000)\n            return\n          }\n        } else {\n          // For new requests, ensure at least one service is selected\n          if (!hasWellsoftSelected && !hasJeevaSelected && !hasInternetPurposes) {\n            this.toast = {\n              show: true,\n              message:\n                'Please select at least one service (Wellsoft modules, Jeeva modules, or Internet access)'\n            }\n            setTimeout(() => (this.toast.show = false), 5000)\n            return\n          }\n        }\n\n        // Check if signature is provided (accept either uploaded file or digital signature)\n        if (!this.signaturePreview && !this.hasUserSigned) {\n          this.toast = {\n            show: true,\n            message: 'Please sign the document before submitting'\n          }\n          setTimeout(() => (this.toast.show = false), 5000)\n          return\n        }\n\n        try {\n          this.loading = true\n\n          // Debug: Log form state before preparation\n          console.log('=== FORM DEBUG START ===')\n          console.log('Form state before submission:', {\n            shared: this.form.shared,\n            selectedWellsoft: this.selectedWellsoft,\n            selectedJeeva: this.selectedJeeva,\n            wellsoftRequestType: this.wellsoftRequestType,\n            jeevaRequestType: this.jeevaRequestType,\n            internetPurposes: this.internetPurposes,\n            // HOD access rights\n            hodAccessType: this.hodAccessType,\n            hodTemporaryUntil: this.hodTemporaryUntil,\n            approvals: this.form.approvals,\n            implementation: this.form.implementation,\n            comments: this.form.comments,\n            signatureFile: this.form.shared.signature ? 'File object present' : 'No signature file'\n          })\n\n          // Prepare form data for submission\n          const formData = {\n            shared: {\n              pfNumber: this.form.shared.pfNumber,\n              staffName: this.form.shared.staffName,\n              department: this.form.shared.department,\n              phone: this.form.shared.phone\n            },\n            selectedWellsoft: this.selectedWellsoft,\n            selectedJeeva: this.selectedJeeva,\n            wellsoftRequestType: this.wellsoftRequestType,\n            jeevaRequestType: this.jeevaRequestType, // HOD can specify use/revoke for Jeeva modules\n            internetPurposes: this.internetPurposes.filter((purpose) => purpose.trim()),\n            // HOD access rights (decided during HOD approval)\n            hodAccessType: this.hodAccessType,\n            hodTemporaryUntil: this.hodAccessType === 'temporary' ? this.hodTemporaryUntil : null,\n            signature: this.form.shared.signature, // This should be the actual file object\n            approvals: {\n              hod: {\n                name: this.form.approvals.hod.name,\n                signature: this.form.approvals.hod.signature,\n                date: this.form.approvals.hod.date\n              },\n              divisionalDirector: {\n                name: this.form.approvals.divisionalDirector.name,\n                signature: this.form.approvals.divisionalDirector.signature,\n                date: this.form.approvals.divisionalDirector.date\n              },\n              directorICT: {\n                name: this.form.approvals.directorICT.name,\n                signature: this.form.approvals.directorICT.signature,\n                date: this.form.approvals.directorICT.date\n              }\n            },\n            implementation: {\n              headIT: {\n                name: this.form.implementation.headIT.name,\n                signature: this.form.implementation.headIT.signature,\n                date: this.form.implementation.headIT.date\n              },\n              ictOfficer: {\n                name: this.form.implementation.ictOfficer.name,\n                signature: this.form.implementation.ictOfficer.signature,\n                date: this.form.implementation.ictOfficer.date\n              }\n            },\n            comments: this.form.comments\n          }\n\n          console.log('Prepared formData object:', {\n            ...formData,\n            signature: formData.signature ? 'File uploaded' : 'No signature'\n          })\n          console.log('=== FORM DEBUG END ===')\n\n          // Validate form data\n          const validation = bothServiceFormService.validateFormData(formData)\n          if (!validation.isValid) {\n            this.toast = {\n              show: true,\n              message: validation.errors.join(', ')\n            }\n            setTimeout(() => (this.toast.show = false), 5000)\n            return\n          }\n\n          // Submit the form\n          const response = await bothServiceFormService.submitCombinedRequest(formData)\n\n          if (response.success) {\n            console.log(' Form submitted successfully:', response.data)\n\n            this.toast = {\n              show: true,\n              message: `Combined access request submitted successfully! Request ID: ${response.data.id || 'N/A'}`\n            }\n\n            // Optionally redirect to a success page or reset form\n            setTimeout(() => {\n              this.toast.show = false\n              // Uncomment to reset form after successful submission\n              // this.onReset()\n            }, 8000)\n          } else {\n            console.error(' Form submission failed:', response.error)\n\n            // Handle validation errors\n            if (response.errors) {\n              let errorMessage = 'Please fix the following errors: '\n              Object.keys(response.errors).forEach((field) => {\n                if (Array.isArray(response.errors[field])) {\n                  errorMessage += response.errors[field].join(', ') + ' '\n                }\n              })\n\n              this.toast = {\n                show: true,\n                message: errorMessage\n              }\n            } else {\n              this.toast = {\n                show: true,\n                message: response.message || 'Failed to submit request. Please try again.'\n              }\n            }\n\n            setTimeout(() => (this.toast.show = false), 8000)\n          }\n        } catch (error) {\n          console.error(' Unexpected error during form submission:', error)\n\n          this.toast = {\n            show: true,\n            message: 'An unexpected error occurred. Please try again.'\n          }\n          setTimeout(() => (this.toast.show = false), 5000)\n        } finally {\n          this.loading = false\n        }\n      },\n      onReset() {\n        this.form = {\n          shared: { pfNumber: '', staffName: '', department: '', phone: '' },\n          // accessRights removed - will be decided by HOD during approval\n          approvals: {\n            hod: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            divisionalDirector: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            directorICT: {\n              name: '',\n              signature: '',\n              date: ''\n            }\n          },\n          comments: '',\n          implementation: {\n            headIT: {\n              name: '',\n              signature: '',\n              date: ''\n            },\n            ictOfficer: {\n              name: '',\n              signature: '',\n              date: ''\n            }\n          }\n        }\n        this.selectedWellsoft = []\n        this.selectedJeeva = []\n        this.wellsoftQuery = ''\n        this.jeevaQuery = ''\n        this.internetPurposes = ['', '', '', '']\n        this.wellsoftRequestType = 'use'\n        this.tabs = []\n        this.moduleData = {}\n        this.activeTab = ''\n        this.openAccordions.clear()\n        this.errors = { pfNumber: '', staffName: '' }\n        // Reset signatures\n        this.signaturePreview = ''\n        this.signatureFileName = ''\n        this.hodSignaturePreview = ''\n        this.hodSignatureFileName = ''\n        this.divDirectorSignaturePreview = ''\n        this.divDirectorSignatureFileName = ''\n        this.directorICTSignaturePreview = ''\n        this.directorICTSignatureFileName = ''\n        this.headITSignaturePreview = ''\n        this.headITSignatureFileName = ''\n        this.ictOfficerSignaturePreview = ''\n        this.ictOfficerSignatureFileName = ''\n      },\n\n      // Review mode methods - optimized with request deduplication and timeout\n      async loadRequestData() {\n        // Prevent multiple simultaneous API calls for the same request\n        if (this.loadingRequestData) {\n          console.log(' Request data already loading, waiting...')\n          return\n        }\n\n        try {\n          this.loading = true\n          this.loadingRequestData = true\n          this.error = null\n\n          // Load request data for review mode with timeout\n          console.log(' Loading request data for ID:', this.getRequestId)\n\n          const requestId = this.getRequestId\n          if (!requestId) {\n            throw new Error('No request ID provided')\n          }\n\n          // Use race condition with timeout to prevent hanging\n          const timeoutPromise = new Promise((_, reject) =>\n            setTimeout(() => reject(new Error('Request timeout - API call took too long')), 15000)\n          )\n\n          const userRole = (this.getUserRole() || '').toLowerCase()\n          console.log(' User role:', userRole)\n\n          console.log(' Trying combined API service with timeout...')\n          let response\n          try {\n            response = await Promise.race([\n              combinedAccessService.getRequestById(requestId),\n              timeoutPromise\n            ])\n            console.log(' Combined API response received successfully')\n          } catch (error) {\n            console.warn(' Combined API failed, trying role-specific API:', error.message)\n\n            if (['ict_officer', 'officer_ict'].includes(userRole)) {\n              console.log(' Using ICT Officer API service as fallback')\n              response = await Promise.race([\n                ictOfficerService.getAccessRequestById(requestId),\n                timeoutPromise\n              ])\n            } else {\n              console.error(' No fallback API available')\n              throw error\n            }\n          }\n\n          console.log(' API response received:', response)\n\n          if (response && response.success && response.data) {\n            console.log(' Request data loaded successfully')\n            this.requestData = response.data\n            // Initialize role comment draft once data is available\n            this.loadRoleCommentDraft()\n            if (this.isDevelopment) {\n              console.log('Loaded request data:', this.requestData)\n              console.log(' Signature Status Debug:', {\n                hod_signature_status: this.requestData.approvals?.hod?.signature_status,\n                hod_signature_display: this.requestData.approvals?.hod?.signature_display,\n                divisional_signature_status:\n                  this.requestData.approvals?.divisionalDirector?.signature_status,\n                divisional_signature_display:\n                  this.requestData.approvals?.divisionalDirector?.signature_display,\n                ict_signature_status: this.requestData.approvals?.directorICT?.signature_status,\n                ict_signature_display: this.requestData.approvals?.directorICT?.signature_display,\n                full_approvals_object: this.requestData.approvals\n              })\n            }\n            // Initialize HOD access rights from server if present\n            if (this.requestData.access_type) {\n              this.hodAccessType = this.requestData.access_type\n            }\n            if (this.requestData.temporary_until) {\n              // Expecting YYYY-MM-DD or date string; normalize to YYYY-MM-DD for input[type=date]\n              const d = new Date(this.requestData.temporary_until)\n              if (!isNaN(d.getTime())) {\n                const yyyy = d.getFullYear()\n                const mm = String(d.getMonth() + 1).padStart(2, '0')\n                const dd = String(d.getDate()).padStart(2, '0')\n                this.hodTemporaryUntil = `${yyyy}-${mm}-${dd}`\n              }\n            }\n            // Load HOD comments from database\n            if (this.requestData.hod_comments) {\n              this.hodComments = this.requestData.hod_comments\n            }\n            if (this.isDevelopment) {\n              console.log('Signature path from API:', this.requestData.signature_path)\n              console.log('Type of signature_path:', typeof this.requestData.signature_path)\n            }\n\n            // Populate form with request data\n            if (this.isDevelopment) {\n              console.log(' Debug: Full requestData structure:', this.requestData)\n              console.log(' Debug: requestData.shared structure:', this.requestData.shared)\n            }\n\n            // Map approvals from backend to form (names and dates) so read-only fields show values\n            try {\n              const ap = this.requestData.approvals || {}\n              const impl = this.requestData.implementation || {}\n              const rd = this.requestData\n\n              if (this.isDevelopment) {\n                console.log(' Mapping approvals debug:', {\n                  approvals_nested: ap,\n                  direct_hod_name: rd.hod_name,\n                  direct_hod_signature_path: rd.hod_signature_path,\n                  direct_hod_approved_at: rd.hod_approved_at,\n                  divisional_name: rd.divisional_director_name,\n                  divisional_approved_at: rd.divisional_approved_at,\n                  dict_name: rd.dict_name,\n                  dict_approved_at: rd.dict_approved_at\n                })\n              }\n\n              // HOD mapping - check multiple sources\n              this.form.approvals.hod.name =\n                ap.hod?.name || rd.hod_name || this.form.approvals.hod.name || ''\n              this.form.approvals.hod.date = this.formatDateForInput(\n                ap.hod?.date ||\n                  ap.hod?.approved_at ||\n                  rd.hod_approved_at ||\n                  this.form.approvals.hod.date\n              )\n\n              // Divisional Director mapping\n              this.form.approvals.divisionalDirector.name =\n                ap.divisionalDirector?.name ||\n                rd.divisional_director_name ||\n                this.form.approvals.divisionalDirector.name ||\n                ''\n              this.form.approvals.divisionalDirector.date = this.formatDateForInput(\n                ap.divisionalDirector?.date ||\n                  ap.divisionalDirector?.approved_at ||\n                  rd.divisional_approved_at ||\n                  this.form.approvals.divisionalDirector.date\n              )\n\n              // ICT Director mapping\n              this.form.approvals.directorICT.name =\n                ap.directorICT?.name || rd.dict_name || this.form.approvals.directorICT.name || ''\n              this.form.approvals.directorICT.date = this.formatDateForInput(\n                ap.directorICT?.date ||\n                  ap.directorICT?.approved_at ||\n                  rd.dict_approved_at ||\n                  this.form.approvals.directorICT.date\n              )\n\n              // Head IT mapping\n              this.form.implementation.headIT.name =\n                impl.headIT?.name || rd.head_it_name || this.form.implementation.headIT.name || ''\n              this.form.implementation.headIT.date = this.formatDateForInput(\n                impl.headIT?.date ||\n                  impl.headIT?.approved_at ||\n                  rd.head_it_approved_at ||\n                  this.form.implementation.headIT.date\n              )\n\n              // ICT Officer mapping\n              this.form.implementation.ictOfficer.name =\n                impl.ictOfficer?.name ||\n                rd.ict_officer_name ||\n                this.form.implementation.ictOfficer.name ||\n                ''\n              this.form.implementation.ictOfficer.date = this.formatDateForInput(\n                impl.ictOfficer?.date ||\n                  impl.ictOfficer?.approved_at ||\n                  rd.ict_officer_approved_at ||\n                  this.form.implementation.ictOfficer.date\n              )\n\n              if (this.isDevelopment) {\n                console.log(' Form after mapping:', {\n                  hod: {\n                    name: this.form.approvals.hod.name,\n                    date: this.form.approvals.hod.date\n                  },\n                  divisional: {\n                    name: this.form.approvals.divisionalDirector.name,\n                    date: this.form.approvals.divisionalDirector.date\n                  },\n                  dict: {\n                    name: this.form.approvals.directorICT.name,\n                    date: this.form.approvals.directorICT.date\n                  }\n                })\n              }\n\n              // Force reactivity update after mapping\n              this.$nextTick(() => {\n                if (this.isDevelopment) {\n                  console.log(' After nextTick - checking signature status:', {\n                    shouldShowHodSignedIndicator: this.shouldShowHodSignedIndicator,\n                    shouldShowHodNoSignatureIndicator: this.shouldShowHodNoSignatureIndicator,\n                    currentUser: this.currentUser?.name,\n                    userRole: this.getUserRole(),\n                    isReviewMode: this.isReviewMode,\n                    requestStatus: this.requestData?.status\n                  })\n                }\n              })\n            } catch (e) {\n              console.warn('Mapping approvals to form failed:', e)\n            }\n\n            // After mapping, load digital signature history for this request\n            await this.fetchSignatureHistory()\n\n            // Ensure DICT date is set if we are at DICT stage\n            try {\n              this.ensureIctDirectorDateAutoFill()\n            } catch (e) {\n              /* no-op */\n            }\n\n            // Check if data is in the 'shared' object (as returned by backend API)\n            if (this.requestData.shared) {\n              if (this.isDevelopment) {\n                console.log(' Using data from requestData.shared')\n              }\n              this.form.shared = {\n                pfNumber: this.requestData.shared.pfNumber || '',\n                staffName: this.requestData.shared.staffName || '',\n                department: this.requestData.shared.department || '',\n                phone: this.normalizePhoneNumber(this.requestData.shared.phone || '')\n              }\n            } else {\n              // Fallback to direct properties (legacy support)\n              if (this.isDevelopment) {\n                console.log(' Fallback: Using direct properties from requestData')\n              }\n              this.form.shared = {\n                pfNumber: this.requestData.pf_number || '',\n                staffName: this.requestData.staff_name || this.requestData.full_name || '',\n                department: this.requestData.department || this.requestData.department_name || '',\n                phone: this.normalizePhoneNumber(\n                  this.requestData.phone || this.requestData.phone_number || ''\n                )\n              }\n            }\n\n            if (this.isDevelopment) {\n              console.log(' Personal Information populated:', this.form.shared)\n            }\n\n            // Auto-populate Divisional Director date field from HOD approval date\n            this.populateDivisionalDirectorDateFromHod()\n\n            // Trigger Head IT name population if user is Head IT\n            this.triggerHeadItNamePopulationIfNeeded()\n\n            // Force ICT Officer approval refresh after data loads\n            this.$nextTick(() => {\n              console.log(' Post-load ICT Officer approval check:', {\n                hasCurrentUser: !!this.currentUser,\n                hasRequestData: !!this.requestData,\n                userRole: this.getUserRole(),\n                currentStage: this.currentApprovalStage,\n                status: this.requestData?.status,\n                isIctOfficerApprovalEditable: this.isIctOfficerApprovalEditable\n              })\n              // Force update to recalculate computed properties\n              this.$forceUpdate()\n            })\n\n            // Force reactivity update\n            this.$forceUpdate()\n\n            // Handle signature data\n            if (this.requestData.signature_path) {\n              if (this.isDevelopment) {\n                console.log('Signature found:', this.requestData.signature_path)\n              }\n              // In review mode, we don't load the actual file, just show the status\n              this.signatureFileName = this.getSignatureFileName(this.requestData.signature_path)\n            }\n\n            // Populate module selections based on actual database data\n            if (this.requestData.request_types || this.requestData.request_type) {\n              const types = this.requestData.request_types || this.requestData.request_type || []\n\n              // Debug logging for HOD users\n              if (\n                this.isDevelopment &&\n                [\n                  'head_of_department',\n                  'hod',\n                  'department_head',\n                  'head_department',\n                  'hod_user',\n                  'head_of_dept'\n                ].includes(this.getUserRole()?.toLowerCase())\n              ) {\n                console.log(' HOD Module Loading Debug:', {\n                  requestTypes: types,\n                  userRole: this.getUserRole(),\n                  canEdit: this.isHodApprovalEditable,\n                  isReviewMode: this.isReviewMode\n                })\n              }\n\n              // Handle Wellsoft modules - use selected modules from database\n              if (types.includes('wellsoft')) {\n                // Try multiple possible column names for selected Wellsoft modules\n                const wellsoftSelected =\n                  this.requestData.wellsoft_modules_selected ||\n                  this.requestData.selected_wellsoft ||\n                  this.requestData.wellsoft_modules ||\n                  []\n\n                // Parse if it's a JSON string\n                let parsedWellsoft = []\n                if (typeof wellsoftSelected === 'string') {\n                  try {\n                    parsedWellsoft = JSON.parse(wellsoftSelected)\n                  } catch (e) {\n                    console.warn('Failed to parse Wellsoft modules:', wellsoftSelected)\n                    parsedWellsoft = []\n                  }\n                } else if (Array.isArray(wellsoftSelected)) {\n                  parsedWellsoft = wellsoftSelected\n                }\n\n                this.selectedWellsoft = Array.isArray(parsedWellsoft) ? parsedWellsoft : []\n\n                // Load Wellsoft request type (use/revoke)\n                const wellsoftReqType =\n                  this.requestData.wellsoft_request_type || this.requestData.wellsoft_type || 'use'\n                this.wellsoftRequestType = ['use', 'revoke'].includes(wellsoftReqType)\n                  ? wellsoftReqType\n                  : 'use'\n\n                if (this.isDevelopment) {\n                  console.log('Loaded Wellsoft selected modules:', this.selectedWellsoft)\n                  console.log('Loaded Wellsoft request type:', this.wellsoftRequestType)\n                }\n              } else {\n                this.selectedWellsoft = []\n              }\n\n              // Handle Jeeva modules - use selected modules from database\n              if (types.includes('jeeva_access') || types.includes('jeeva')) {\n                // Try multiple possible column names for selected Jeeva modules\n                const jeevaSelected =\n                  this.requestData.jeeva_modules_selected ||\n                  this.requestData.selected_jeeva ||\n                  this.requestData.jeeva_modules ||\n                  []\n\n                // Parse if it's a JSON string\n                let parsedJeeva = []\n                if (typeof jeevaSelected === 'string') {\n                  try {\n                    parsedJeeva = JSON.parse(jeevaSelected)\n                  } catch (e) {\n                    console.warn('Failed to parse Jeeva modules:', jeevaSelected)\n                    parsedJeeva = []\n                  }\n                } else if (Array.isArray(jeevaSelected)) {\n                  parsedJeeva = jeevaSelected\n                }\n\n                this.selectedJeeva = Array.isArray(parsedJeeva) ? parsedJeeva : []\n\n                // Load Jeeva request type (use/revoke)\n                const jeevaReqType =\n                  this.requestData.jeeva_request_type || this.requestData.jeeva_type || 'use'\n                this.jeevaRequestType = ['use', 'revoke'].includes(jeevaReqType)\n                  ? jeevaReqType\n                  : 'use'\n\n                if (this.isDevelopment) {\n                  console.log('Loaded Jeeva selected modules:', this.selectedJeeva)\n                  console.log('Loaded Jeeva request type:', this.jeevaRequestType)\n                }\n              } else {\n                this.selectedJeeva = []\n              }\n\n              // Handle Internet purposes\n              if (types.includes('internet_access_request') || types.includes('internet')) {\n                const internetPurposes =\n                  this.requestData.internet_purposes || this.requestData.purpose || []\n                const purposes = Array.isArray(internetPurposes)\n                  ? internetPurposes\n                  : [internetPurposes]\n                // Ensure we have exactly 4 purpose slots\n                this.internetPurposes = [...purposes, '', '', '', ''].slice(0, 4)\n                if (this.isDevelopment) {\n                  console.log('Loaded Internet purposes:', this.internetPurposes)\n                }\n              } else {\n                this.internetPurposes = ['', '', '', '']\n              }\n            } else {\n              // Reset all selections if no request types\n              this.selectedWellsoft = []\n              this.selectedJeeva = []\n              this.internetPurposes = ['', '', '', '']\n            }\n\n            // Force tab generation for HOD users in review mode to ensure they see the module tabs\n            // This is crucial for HOD workflow - they need to see and edit modules for pending requests\n\n            // CRITICAL DEBUG: Always log this for troubleshooting HOD workflow\n            console.log(' CRITICAL HOD DEBUG - loadRequestData end:', {\n              isHodApprovalEditable: this.isHodApprovalEditable,\n              isReviewMode: this.isReviewMode,\n              hasRequestData: !!this.requestData,\n              requestStatus: this.requestData?.status,\n              hodStatus: this.requestData?.hod_status,\n              userRole: this.getUserRole(),\n              requestId: this.getRequestId,\n              currentTabs: this.tabs.length,\n              tabDetails: this.tabs.map((t) => ({ key: t.key, label: t.label, type: t.type }))\n            })\n\n            if (this.isHodApprovalEditable) {\n              if (this.isDevelopment) {\n                console.log(' HOD Force Tab Generation Debug:', {\n                  isHodApprovalEditable: this.isHodApprovalEditable,\n                  selectedWellsoft: this.selectedWellsoft,\n                  selectedJeeva: this.selectedJeeva,\n                  requestTypes: this.requestData.request_types || this.requestData.request_type,\n                  currentTabs: this.tabs.length\n                })\n              }\n\n              // For HOD users, ensure all available module types are accessible even if not initially selected\n              // This allows them to select modules for pending requests\n              const requestTypes =\n                this.requestData.request_types || this.requestData.request_type || []\n\n              // Check if this is a combined access request that should have Wellsoft and Jeeva options\n              const shouldShowWellsoft = requestTypes.includes('wellsoft')\n              const shouldShowJeeva =\n                requestTypes.includes('jeeva_access') || requestTypes.includes('jeeva')\n              const shouldShowInternet =\n                requestTypes.includes('internet_access_request') ||\n                requestTypes.includes('internet')\n\n              // Always sync tabs for HOD users to allow module selection\n              if (shouldShowWellsoft) {\n                this.syncTabs('wellsoft', this.selectedWellsoft)\n              }\n\n              if (shouldShowJeeva) {\n                this.syncTabs('jeeva', this.selectedJeeva)\n              }\n\n              // Also handle internet if present or if no specific request types are defined\n              if (shouldShowInternet && this.internetPurposes.some((purpose) => purpose.trim())) {\n                this.syncTabs('internet', [])\n              }\n\n              if (this.isDevelopment) {\n                console.log(' HOD Module tabs force-synced:', {\n                  shouldShowWellsoft,\n                  shouldShowJeeva,\n                  shouldShowInternet,\n                  wellsoftTabs: this.selectedWellsoft,\n                  jeevaTabs: this.selectedJeeva,\n                  internetPurposes: this.internetPurposes.filter((p) => p.trim()),\n                  resultingTabs: this.tabs.map((t) => ({\n                    key: t.key,\n                    label: t.label,\n                    type: t.type\n                  }))\n                })\n              }\n\n              // Force the first tab to be active if no tab is currently active\n              if (\n                this.tabs.length > 0 &&\n                (!this.activeTab || !this.tabs.find((t) => t.key === this.activeTab))\n              ) {\n                this.activeTab = this.tabs[0].key\n                if (this.isDevelopment) {\n                  console.log(' HOD: Set active tab to:', this.activeTab)\n                }\n              }\n            }\n\n            if (this.isDevelopment) {\n              console.log('Form populated successfully')\n            }\n          } else {\n            console.error(' Request data loading failed:')\n            console.error(' Response:', response)\n            console.error(' Response success:', response?.success)\n            console.error(' Response data:', response?.data)\n            console.error(' Response error:', response?.error)\n            throw new Error(response?.error || response?.message || 'Failed to load request data')\n          }\n        } catch (error) {\n          console.error('Error loading request data:', error)\n          this.error = `Failed to load request data: ${error.message}`\n\n          // For ICT Officers, try to continue with minimal functionality instead of failing completely\n          const userRole = (this.getUserRole() || '').toLowerCase()\n          if (['ict_officer', 'officer_ict'].includes(userRole)) {\n            console.log(\n              ' ICT Officer detected - attempting graceful degradation instead of complete failure'\n            )\n            // Only show toast if essential data is missing; otherwise, degrade silently\n            const essentialOk = !!(this.requestData && this.requestData.id)\n            if (!essentialOk) {\n              this.toast = {\n                show: true,\n                message: 'Some data could not be loaded, but you can still view the form.'\n              }\n            } else {\n              try {\n                console.warn(\n                  'BothServiceForm: Partial load for ICT Officer (non-critical data missing); suppressing toast'\n                )\n              } catch (e) {\n                /* noop */\n              }\n            }\n          } else {\n            this.toast = {\n              show: true,\n              message: 'Error loading request data'\n            }\n          }\n\n          setTimeout(() => (this.toast.show = false), 3000)\n        } finally {\n          this.loading = false\n          this.loadingRequestData = false\n        }\n      },\n\n      getApprovalStatus(role) {\n        if (!this.requestData) return 'pending'\n\n        switch (role) {\n          case 'hod':\n            return this.requestData.hod_approval_status || 'pending'\n          case 'divisional':\n            return this.requestData.divisional_approval_status || 'pending'\n          case 'dict':\n            return this.requestData.dict_approval_status || 'pending'\n          case 'headOfIt':\n            return this.requestData.head_it_approval_status || 'pending'\n          case 'ict':\n            return this.requestData.ict_approval_status || 'pending'\n          default:\n            return 'pending'\n        }\n      },\n\n      // Extract filename from signature path\n      getSignatureFileName(signaturePath) {\n        if (!signaturePath) return ''\n        return signaturePath.split('/').pop() || signaturePath\n      },\n\n      canApproveAtStage() {\n        // Only show in review mode with loaded data\n        if (!this.isReviewMode || !this.requestData) return false\n\n        const stage = this.currentApprovalStage\n        const userRole = (this.getUserRole() || '').toLowerCase()\n\n        // Define role mappings for each stage\n        const hodRoles = [\n          'head_of_department',\n          'hod',\n          'department_head',\n          'head_department',\n          'hod_user',\n          'head_of_dept'\n        ]\n        const divisionalRoles = ['divisional_director']\n        const ictDirectorRoles = ['ict_director', 'dict']\n\n        // Check if user can approve at current stage\n        if (stage === 'hod' && hodRoles.includes(userRole)) {\n          // Allow if HOD approval still pending (fallback to pending)\n          const hodStatus = this.requestData.hod_approval_status || 'pending'\n          return hodStatus === 'pending'\n        }\n\n        if (stage === 'divisional' && divisionalRoles.includes(userRole)) {\n          // Allow if request is HOD approved and divisional approval is pending\n          const status = this.requestData.status || 'pending'\n          return status === 'hod_approved' || status === 'pending_divisional'\n        }\n\n        if (stage === 'ict_director') {\n          // Only ICT Director users should see the action bar for this stage\n          const isDictUser =\n            ictDirectorRoles.includes(userRole) || this.viewerStage() === 'ict_director'\n\n          if (!isDictUser) return false\n\n          // If the ICT Director section is active or explicitly editable, show action bar\n          if (this.isIctDirectorApprovalActive || this.isIctDirectorApprovalEditable) return true\n\n          // Fallbacks for older payloads and generic statuses\n          const status = (\n            this.requestData.status ||\n            this.requestData.dict_status ||\n            ''\n          ).toLowerCase()\n          const dictStagePending =\n            (\n              this.requestData.ict_director_status ||\n              this.requestData.dict_status ||\n              ''\n            ).toLowerCase() === 'pending'\n\n          const result =\n            ['divisional_approved', 'pending_ict_director', 'pending_dict'].includes(status) ||\n            dictStagePending\n\n          if (this.isDevelopment) {\n            try {\n              console.log(' canApproveAtStage (DICT):', {\n                stage,\n                userRole,\n                isDictUser,\n                isIctDirectorApprovalActive: this.isIctDirectorApprovalActive,\n                isIctDirectorApprovalEditable: this.isIctDirectorApprovalEditable,\n                status,\n                dictStagePending,\n                result\n              })\n            } catch (e) {\n              /* no-op: debug log suppressed */\n            }\n          }\n\n          return result\n        }\n\n        // Head IT roles check\n        const headItRoles = ['head_it', 'head_of_it']\n        if (stage === 'head_it' && headItRoles.includes(userRole)) {\n          // Allow if request is ICT Director approved and Head IT approval is pending\n          const status = this.requestData.status || 'pending'\n          return status === 'ict_director_approved' || status === 'pending_head_it'\n        }\n\n        return false\n      },\n\n      async approveRequest() {\n        // Prevent multiple rapid clicks using debouncing\n        if (this.processing || this.loading) {\n          return\n        }\n\n        // Check if a digital signature is required but missing\n        if (this.isSignatureRequiredForApproval) {\n          this.toast = {\n            show: true,\n            message: 'Please digitally sign this request before approving.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        // Gentle validation gate: if we still have validation errors (e.g., HOD comments), prompt and stop\n        const errs = this.validationErrors\n        if (errs && errs.length) {\n          this.toast = { show: true, message: errs[0] }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        try {\n          this.processing = true\n          this.loading = true\n\n          const stage = this.currentApprovalStage\n          const userRole = (this.getUserRole() || '').toLowerCase()\n\n          // Route to appropriate approval method based on stage and role\n          if (\n            stage === 'hod' &&\n            [\n              'head_of_department',\n              'hod',\n              'department_head',\n              'head_department',\n              'hod_user',\n              'head_of_dept'\n            ].includes(userRole)\n          ) {\n            await this.approveAsHod()\n          } else if (stage === 'divisional' && ['divisional_director'].includes(userRole)) {\n            await this.approveAsDivisionalDirector()\n          } else if (stage === 'ict_director' && ['ict_director', 'dict'].includes(userRole)) {\n            await this.approveAsIctDirector()\n          } else if (stage === 'head_it' && ['head_it', 'head_of_it'].includes(userRole)) {\n            await this.approveAsHeadIt()\n          } else {\n            throw new Error('You do not have permission to approve at this stage')\n          }\n        } catch (error) {\n          console.error('Error approving request:', error)\n          this.toast = {\n            show: true,\n            message: `Error approving request: ${error.message}`\n          }\n          setTimeout(() => (this.toast.show = false), 3000)\n        } finally {\n          this.processing = false\n          this.loading = false\n        }\n      },\n\n      async approveAsHod() {\n        // Validate minimal HOD fields\n        const hodName = this.form.approvals.hod.name || this.currentUser?.name || ''\n        const hodDate = this.form.approvals.hod.date || new Date().toISOString().slice(0, 10)\n        // Digital signature required will be enforced by backend; proceed if comments are valid\n\n        // Validate access rights (HOD-only)\n        this.hodTemporaryUntilError = ''\n        if (this.hodAccessType === 'temporary') {\n          if (!this.hodTemporaryUntil) {\n            this.hodTemporaryUntilError = 'Please select an end date for temporary access'\n            this.toast = { show: true, message: this.hodTemporaryUntilError }\n            setTimeout(() => (this.toast.show = false), 3000)\n            return\n          }\n          // Ensure future date\n          const today = new Date()\n          today.setHours(0, 0, 0, 0)\n          const tmp = new Date(this.hodTemporaryUntil)\n          if (isNaN(tmp.getTime()) || tmp <= today) {\n            this.hodTemporaryUntilError = 'Temporary access end date must be in the future'\n            this.toast = { show: true, message: this.hodTemporaryUntilError }\n            setTimeout(() => (this.toast.show = false), 3000)\n            return\n          }\n        }\n\n        const payload = {\n          hodName,\n          approvedDate: hodDate,\n          comments: this.hodComments || this.form.comments || 'Approved by HOD',\n          selectedWellsoft: this.selectedWellsoft,\n          selectedJeeva: this.selectedJeeva,\n          moduleRequestedFor: this.wellsoftRequestType || 'use',\n          accessType: this.hodAccessType,\n          temporaryUntil: this.hodAccessType === 'temporary' ? this.hodTemporaryUntil : undefined,\n          hodComments: this.hodComments // Add HOD comments to payload\n        }\n\n        // Add timeout to prevent hanging requests\n        const approvalPromise = bothServiceFormService.hodApproveModuleRequest(\n          this.getRequestId,\n          payload\n        )\n        const timeoutPromise = new Promise((_, reject) =>\n          setTimeout(() => reject(new Error('Request timed out. Please try again.')), 30000)\n        )\n\n        const result = await Promise.race([approvalPromise, timeoutPromise])\n\n        if (result.success) {\n          // Optimistically update local comments so the summary reflects immediately\n          this.updateRoleCommentsLocally(\n            'hod',\n            this.hodComments || this.form.comments || 'Approved by HOD'\n          )\n\n          // Persist last approved request so the list can keep it visible even if filtered\n          try {\n            const idStr = String(this.getRequestId)\n            localStorage.setItem('lastApprovedRequestId', idStr)\n            // Maintain a set of approved IDs that should remain visible on the list\n            const keepRaw = localStorage.getItem('keepVisibleRequests')\n            const keepArr = Array.isArray(JSON.parse(keepRaw || '[]'))\n              ? JSON.parse(keepRaw || '[]')\n              : []\n            if (!keepArr.includes(idStr)) {\n              keepArr.push(idStr)\n              localStorage.setItem('keepVisibleRequests', JSON.stringify(keepArr))\n            }\n          } catch (e) {\n            console.warn('Persist keepVisibleRequests failed', e)\n          }\n\n          this.toast = {\n            show: true,\n            message: 'Request approved successfully'\n          }\n          setTimeout(() => {\n            this.toast.show = false\n            this.goBackToRequests()\n          }, 1200)\n        } else {\n          // Handle specific error types\n          let errorMessage = 'Failed to approve request'\n\n          if (result.errors && Object.keys(result.errors).length > 0) {\n            errorMessage = 'Validation errors: ' + Object.values(result.errors).flat().join(', ')\n          } else if (result.error) {\n            errorMessage = result.error\n          }\n\n          throw new Error(errorMessage)\n        }\n      },\n\n      async approveAsDivisionalDirector() {\n        // Validate Divisional Director fields\n        const divisionalDirectorName =\n          this.form.approvals.divisionalDirector.name || this.currentUser?.name || ''\n        const divisionalDate =\n          this.form.approvals.divisionalDirector.date || new Date().toISOString().slice(0, 10)\n        // Digital signature required will be enforced by backend\n\n        // Use role comment draft as the authoritative comments input\n        const roleComment = (this.roleCommentsDraft || '').trim()\n        if (!roleComment) {\n          this.toast = {\n            show: true,\n            message: 'Please provide your comments/recommendations before approving'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        const payload = {\n          divisionalDirectorName,\n          approvedDate: divisionalDate,\n          comments: roleComment\n        }\n\n        // Add timeout to prevent hanging requests\n        const approvalPromise = bothServiceFormService.divisionalDirectorApprove(\n          this.getRequestId,\n          payload\n        )\n        const timeoutPromise = new Promise((_, reject) =>\n          setTimeout(() => reject(new Error('Request timed out. Please try again.')), 30000)\n        )\n\n        const result = await Promise.race([approvalPromise, timeoutPromise])\n\n        if (result.success) {\n          // Optimistically update local comments for Divisional Director\n          this.updateRoleCommentsLocally('divisional', roleComment)\n\n          this.toast = {\n            show: true,\n            message: 'Request approved successfully by Divisional Director'\n          }\n          setTimeout(() => {\n            this.toast.show = false\n            this.goBackToDivisionalRequests()\n          }, 1500)\n        } else {\n          // Handle specific error types\n          let errorMessage = 'Failed to approve request'\n\n          if (result.errors && Object.keys(result.errors).length > 0) {\n            errorMessage = 'Validation errors: ' + Object.values(result.errors).flat().join(', ')\n          } else if (result.error) {\n            errorMessage = result.error\n          }\n\n          throw new Error(errorMessage)\n        }\n      },\n\n      // ICT Director specific approval method\n      async approveDictRequest() {\n        // Prevent multiple rapid clicks\n        if (this.processing || this.loading) {\n          return\n        }\n\n        // Check if a digital signature is required but missing\n        if (this.isSignatureRequiredForApproval) {\n          this.toast = {\n            show: true,\n            message: 'Please digitally sign this request before approving.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        try {\n          this.processing = true\n          this.loading = true\n\n          await this.approveAsIctDirector()\n        } catch (error) {\n          console.error('Error approving request as ICT Director:', error)\n          this.toast = {\n            show: true,\n            message: `Error approving request: ${error.message}`\n          }\n          setTimeout(() => (this.toast.show = false), 3000)\n        } finally {\n          this.processing = false\n          this.loading = false\n        }\n      },\n\n      // ICT Director specific rejection method\n      async rejectDictRequest() {\n        // Check if signature is required but missing\n        if (this.isSignatureRequiredForApproval) {\n          this.toast = {\n            show: true,\n            message: 'Please upload your ICT Director signature before rejecting this request.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        // Show rejection reason modal\n        this.showRejectionModal = true\n      },\n\n      async approveAsIctDirector() {\n        // Guard: ensure the current user has the exact ict_director role to prevent 403s\n        try {\n          const roles = (this.currentUser?.roles || [])\n            .map((r) => (typeof r === 'string' ? r : r?.name))\n            .filter(Boolean)\n          const normalized = roles.map((r) =>\n            String(r)\n              .toLowerCase()\n              .replace(/[-\\s]+/g, '_')\n          )\n          const isIctDirector = normalized.includes('ict_director') || normalized.includes('dict')\n          if (!isIctDirector) {\n            this.toast = {\n              show: true,\n              type: 'error',\n              message: 'You do not have ICT Director privileges for this action.'\n            }\n            setTimeout(() => (this.toast.show = false), 4000)\n            return\n          }\n        } catch (_) {\n          // If user info missing, fall through to server-side check which will 403\n        }\n\n        // Validate ICT Director fields\n        const ictDirectorName = this.form.approvals.directorICT.name || this.currentUser?.name || ''\n        // Digital signature required will be enforced by backend\n\n        // Validate ICT Director comments (from role comment editor)\n        const roleComment = (this.roleCommentsDraft || '').trim()\n        if (!roleComment) {\n          this.toast = {\n            show: true,\n            message: 'Please provide your technical comments/evaluation before approving'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        const ictDirectorDate =\n          this.form.approvals.directorICT.date || new Date().toISOString().slice(0, 10)\n\n        const payload = {\n          ictDirectorName: ictDirectorName,\n          approvedDate: ictDirectorDate,\n          comments: roleComment\n        }\n\n        // Use the both service form service for approval (consistent with HOD/Divisional)\n        const result = await bothServiceFormService.ictDirectorApprove(this.getRequestId, payload)\n\n        if (result.success) {\n          // Optimistically update local comments for ICT Director\n          this.updateRoleCommentsLocally('ict_director', roleComment)\n\n          this.toast = {\n            show: true,\n            message: 'Request approved successfully by ICT Director'\n          }\n          setTimeout(() => {\n            this.toast.show = false\n            this.goBackToDictRequests()\n          }, 2000)\n        } else {\n          // Handle specific error types\n          let errorMessage = 'Failed to approve request'\n\n          if (result.errors && Object.keys(result.errors).length > 0) {\n            errorMessage = 'Validation errors: ' + Object.values(result.errors).flat().join(', ')\n          } else if (result.error) {\n            errorMessage = result.error\n          }\n\n          throw new Error(errorMessage)\n        }\n      },\n\n      goBackToDictRequests() {\n        try {\n          console.log('Navigating back to ICT Director combined requests list')\n          this.$router.push('/dict-dashboard/combined-requests')\n        } catch (error) {\n          console.error('Error navigating back to ICT Director requests:', error)\n          // Fallback navigation\n          this.$router.push('/dict-dashboard')\n        }\n      },\n\n      // Divisional back nav\n      goBackToDivisionalRequests() {\n        try {\n          console.log('Navigating back to Divisional combined requests list')\n          this.$router.push('/divisional-dashboard/combined-requests')\n        } catch (error) {\n          console.error('Error navigating back to Divisional requests:', error)\n          this.$router.push('/divisional-dashboard/combined-requests')\n        }\n      },\n\n      // Head IT specific approval method\n      async approveHeadItRequest() {\n        // Prevent multiple rapid clicks\n        if (this.processing || this.loading) {\n          return\n        }\n\n        // Digital signature required will be enforced by backend\n\n        try {\n          this.processing = true\n          this.loading = true\n\n          await this.approveAsHeadIt()\n        } catch (error) {\n          console.error('Error approving request as Head IT:', error)\n          this.toast = {\n            show: true,\n            message: `Error approving request: ${error.message}`\n          }\n          setTimeout(() => (this.toast.show = false), 3000)\n        } finally {\n          this.processing = false\n          this.loading = false\n        }\n      },\n\n      // Head IT specific rejection method\n      async rejectHeadItRequest() {\n        // Check if signature is required but missing\n        if (!this.form.implementation.headIT.signature) {\n          this.toast = {\n            show: true,\n            message: 'Please upload your Head of IT signature before rejecting this request.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        // Show rejection reason modal\n        this.showRejectionModal = true\n      },\n\n      async approveAsHeadIt() {\n        // Validate Head IT fields\n        const headItName = this.form.implementation.headIT.name || this.currentUser?.name || ''\n        // Digital signature required will be enforced by backend\n\n        // Auto-populate date if not set\n        const headItDate =\n          this.form.implementation.headIT.date || new Date().toISOString().slice(0, 10)\n        this.form.implementation.headIT.date = headItDate\n\n        const payload = {\n          headItName: headItName,\n          approvedDate: headItDate,\n          comments: this.roleCommentsDraft || this.form.comments || 'Approved by Head of IT'\n        }\n\n        // Use the both service form service for Head IT approval\n        const result = await bothServiceFormService.headItApprove(this.getRequestId, payload)\n\n        if (result.success) {\n          // Optimistically update local comments for Head of IT\n          this.updateRoleCommentsLocally(\n            'head_it',\n            this.roleCommentsDraft || this.form.comments || 'Approved by Head of IT'\n          )\n\n          // Show approval success modal with CTA to assign ICT officer\n          this.onHeadItApproveSuccess()\n        } else {\n          // Handle specific error types\n          let errorMessage = 'Failed to approve request'\n\n          if (result.errors && Object.keys(result.errors).length > 0) {\n            errorMessage = 'Validation errors: ' + Object.values(result.errors).flat().join(', ')\n          } else if (result.error) {\n            errorMessage = result.error\n          }\n\n          throw new Error(errorMessage)\n        }\n      },\n\n      goBackToHeadItRequests() {\n        try {\n          console.log('Navigating back to Head IT combined requests list')\n          this.$router.push('/head_of_it-dashboard/combined-requests')\n        } catch (error) {\n          console.error('Error navigating back to Head IT requests:', error)\n          // Fallback navigation\n          this.$router.push('/head_of_it-dashboard')\n        }\n      },\n\n      // Get requester's full name for success message\n      getRequesterName() {\n        if (this.requestData && this.requestData.staff_name) {\n          return this.requestData.staff_name\n        }\n        if (this.form.shared.staffName) {\n          return this.form.shared.staffName\n        }\n        return 'the requester'\n      },\n\n      // Navigate to ICT Officer selection page\n      navigateToSelectIctOfficer() {\n        try {\n          console.log('Navigating to ICT Officer selection for request:', this.getRequestId)\n          this.$router.push(`/head_of_it-dashboard/select-ict-officer/${this.getRequestId}`)\n        } catch (error) {\n          console.error('Error navigating to ICT Officer selection:', error)\n          // Fallback: show error message and navigate back\n          this.toast = {\n            show: true,\n            message: 'Error navigating to ICT Officer selection. Please try again.'\n          }\n          setTimeout(() => {\n            this.toast.show = false\n            this.goBackToHeadItRequests()\n          }, 3000)\n        }\n      },\n\n      // Close success modal and navigate back to requests\n      closeSuccessModal() {\n        this.showApprovalSuccessCard = false\n        this.goBackToHeadItRequests()\n      },\n\n      async rejectRequest() {\n        // Check if a digital signature is required but missing\n        if (this.isSignatureRequiredForApproval) {\n          this.toast = {\n            show: true,\n            message: 'Please digitally sign this request before rejecting.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        // Show rejection reason modal\n        this.showRejectionModal = true\n      },\n\n      async confirmRejectRequest() {\n        if (!this.rejectionReason?.trim()) {\n          this.toast = {\n            show: true,\n            message: 'Please provide a reason for rejection'\n          }\n          setTimeout(() => (this.toast.show = false), 3000)\n          return\n        }\n\n        try {\n          this.loading = true\n          this.showRejectionModal = false\n\n          const stage = this.currentApprovalStage\n          const userRole = (this.getUserRole() || '').toLowerCase()\n\n          console.log('Rejecting request:', this.getRequestId, 'with reason:', this.rejectionReason)\n\n          let result\n\n          if (\n            stage === 'hod' &&\n            [\n              'head_of_department',\n              'hod',\n              'department_head',\n              'head_department',\n              'hod_user',\n              'head_of_dept'\n            ].includes(userRole)\n          ) {\n            // HOD rejection using the existing API\n            result = await combinedAccessService.updateHodApproval(this.getRequestId, {\n              status: 'rejected',\n              comments: this.rejectionReason\n            })\n          } else if (stage === 'divisional' && ['divisional_director'].includes(userRole)) {\n            // Divisional Director rejection using new API\n            const currentUserName = this.currentUser?.name || ''\n            result = await bothServiceFormService.divisionalDirectorReject(this.getRequestId, {\n              divisionalDirectorName: currentUserName,\n              rejectionReason: this.rejectionReason,\n              rejectionDate: new Date().toISOString().slice(0, 10)\n            })\n          } else if (stage === 'ict_director' && ['ict_director', 'dict'].includes(userRole)) {\n            // ICT Director rejection using both service form service\n            result = await bothServiceFormService.ictDirectorReject(this.getRequestId, {\n              ictDirectorName: this.currentUser?.name || '',\n              rejectionReason: this.rejectionReason,\n              rejectionDate: new Date().toISOString().slice(0, 10)\n            })\n          } else if (stage === 'head_it' && ['head_it', 'head_of_it'].includes(userRole)) {\n            // Head IT rejection using both service form service\n            result = await bothServiceFormService.headItReject(this.getRequestId, {\n              headItName: this.currentUser?.name || '',\n              rejectionReason: this.rejectionReason,\n              rejectionDate: new Date().toISOString().slice(0, 10)\n            })\n          } else {\n            throw new Error('You do not have permission to reject at this stage')\n          }\n\n          if (result.success) {\n            this.toast = {\n              show: true,\n              message: 'Request rejected successfully'\n            }\n            setTimeout(() => {\n              this.toast.show = false\n              // Navigate back to appropriate dashboard based on user role\n              if (['ict_director', 'dict'].includes(userRole)) {\n                this.goBackToDictRequests()\n              } else if (['head_it', 'head_of_it'].includes(userRole)) {\n                this.goBackToHeadItRequests()\n              } else if (['divisional_director'].includes(userRole)) {\n                this.goBackToDivisionalRequests()\n              } else {\n                this.goBackToRequests()\n              }\n            }, 2000)\n          } else {\n            throw new Error(result.error || 'Failed to reject request')\n          }\n        } catch (error) {\n          console.error('Error rejecting request:', error)\n          this.toast = {\n            show: true,\n            message: `Error rejecting request: ${error.message}`\n          }\n          setTimeout(() => (this.toast.show = false), 3000)\n        } finally {\n          this.loading = false\n          this.rejectionReason = ''\n        }\n      },\n\n      // Helper: update local requestData comments for immediate UI refresh\n      updateRoleCommentsLocally(role, comment) {\n        try {\n          if (!this.requestData || !comment) return\n          const cmt = String(comment).trim()\n          if (!cmt) return\n          const nowIso = new Date().toISOString()\n          switch (role) {\n            case 'hod':\n              this.requestData.hod_comments = cmt\n              this.requestData.approvals = this.requestData.approvals || {}\n              this.requestData.approvals.hod = this.requestData.approvals.hod || {}\n              this.requestData.approvals.hod.comments = cmt\n              this.requestData.hod_approved_at = this.requestData.hod_approved_at || nowIso\n              break\n            case 'divisional':\n              this.requestData.divisional_comments = cmt\n              this.requestData.approvals = this.requestData.approvals || {}\n              this.requestData.approvals.divisionalDirector =\n                this.requestData.approvals.divisionalDirector || {}\n              this.requestData.approvals.divisionalDirector.comments = cmt\n              this.requestData.divisional_approved_at =\n                this.requestData.divisional_approved_at || nowIso\n              break\n            case 'ict_director':\n              this.requestData.ict_director_comments = cmt\n              this.requestData.dict_comments = cmt\n              this.requestData.approvals = this.requestData.approvals || {}\n              this.requestData.approvals.directorICT = this.requestData.approvals.directorICT || {}\n              this.requestData.approvals.directorICT.comments = cmt\n              this.requestData.ict_director_approved_at =\n                this.requestData.ict_director_approved_at || nowIso\n              break\n            case 'head_it':\n              this.requestData.head_it_comments = cmt\n              this.requestData.implementation = this.requestData.implementation || {}\n              this.requestData.implementation.headIT = this.requestData.implementation.headIT || {}\n              this.requestData.implementation.headIT.comments = cmt\n              this.requestData.head_it_approved_at = this.requestData.head_it_approved_at || nowIso\n              break\n            default:\n              break\n          }\n          this.requestData.updated_at = nowIso\n          this.$forceUpdate()\n        } catch (_) {\n          /* no-op */\n        }\n      },\n\n      // ICT Officer implementation approval method\n      async approveIctOfficerImplementation() {\n        if (!this.ictOfficerSignaturePreview && !this.form.implementation.ictOfficer.signature) {\n          this.toast = {\n            show: true,\n            message: 'Please upload your signature before approving the implementation.'\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n          return\n        }\n\n        this.processing = true\n\n        try {\n          const payload = {\n            ict_officer_name: this.currentUser?.name || 'ICT Officer',\n            approved_date:\n              this.form.implementation.ictOfficer.date || new Date().toISOString().slice(0, 10),\n            comments: this.form.comments || '',\n            status: 'implemented'\n          }\n\n          const result = await bothServiceFormService.ictOfficerApprove(this.getRequestId, payload)\n\n          if (result && result.success) {\n            this.toast = {\n              show: true,\n              message: 'Implementation approved successfully.'\n            }\n            setTimeout(() => {\n              this.toast.show = false\n              this.$router.push('/ict-dashboard/access-requests')\n            }, 1500)\n          } else {\n            throw new Error(result?.error || 'Failed to approve implementation')\n          }\n        } catch (error) {\n          console.error('Error approving ICT Officer implementation:', error)\n          this.toast = {\n            show: true,\n            message: `Error approving implementation: ${error.message}`\n          }\n          setTimeout(() => (this.toast.show = false), 4000)\n        } finally {\n          this.processing = false\n        }\n      },\n\n      // Navigate to User Security Access page\n      proceedToUserSecurityAccess() {\n        this.showIctOfficerConfirmation = false\n        this.$router.push({\n          name: 'UserSecurityAccess',\n          params: {\n            id: this.getRequestId\n          },\n          query: {\n            role: 'ict_officer'\n          }\n        })\n      },\n\n      cancelRejectRequest() {\n        this.showRejectionModal = false\n        this.rejectionReason = ''\n      },\n\n      goBackToRequests() {\n        try {\n          console.log('Navigating back to HOD combined requests list')\n          this.$router.push({\n            name: 'HODCombinedRequestList',\n            path: '/hod-dashboard/combined-requests',\n            query: { from: 'approval_done' }\n          })\n        } catch (error) {\n          console.error('Error navigating back to requests:', error)\n          // Fallback navigation using path\n          this.$router.push('/hod-dashboard/combined-requests?from=approval_done')\n        }\n      },\n\n      goToRequestDetails() {\n        try {\n          console.log('Navigating to request details for ID:', this.getRequestId)\n          this.$router.push({\n            path: '/request-details',\n            query: {\n              id: this.getRequestId,\n              type: 'combined_access'\n            }\n          })\n        } catch (error) {\n          console.error('Error navigating to request details:', error)\n          // Fallback navigation\n          this.$router.push(`/request-details?id=${this.getRequestId}&type=combined_access`)\n        }\n      },\n\n      // Signature handling methods\n      triggerFileUpload() {\n        this.$refs.signatureInput.click()\n      },\n\n      onSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.shared.signature = file || null\n\n        if (!file) {\n          this.signaturePreview = ''\n          this.signatureFileName = ''\n          return\n        }\n\n        // Validate file type\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearSignature()\n          return\n        }\n\n        // Validate file size (max 5MB)\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearSignature()\n          return\n        }\n\n        this.signatureFileName = file.name\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.signaturePreview = reader.result\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.signaturePreview = 'pdf'\n        }\n      },\n\n      isImage(preview) {\n        return typeof preview === 'string' && preview !== 'pdf'\n      },\n\n      clearSignature() {\n        this.form.shared.signature = null\n        this.signaturePreview = ''\n        this.signatureFileName = ''\n        if (this.$refs.signatureInput) {\n          this.$refs.signatureInput.value = ''\n        }\n      },\n\n      showNotification(message) {\n        // Simple notification - you can replace with a proper notification system\n        alert(message)\n      },\n\n      showSignatureUploadSuccess(roleType) {\n        this.toast = {\n          show: true,\n          message: `${roleType} signature uploaded successfully! You can now approve or reject this request.`\n        }\n        setTimeout(() => (this.toast.show = false), 4000)\n      },\n\n      showToast(message, type = 'success') {\n        this.toast = {\n          show: true,\n          message: message,\n          type: type\n        }\n        setTimeout(() => {\n          this.toast.show = false\n        }, 4000)\n      },\n\n      // Get formatted approval date for any stage\n      getApprovalDateFormatted(stage) {\n        if (!this.requestData) return 'Date unavailable'\n\n        const dateMap = {\n          hod:\n            this.requestData.approvals?.hod?.date ||\n            this.requestData.approvals?.hod?.approved_at ||\n            this.requestData.hod_approved_at,\n          divisional:\n            this.requestData.approvals?.divisionalDirector?.date ||\n            this.requestData.approvals?.divisionalDirector?.approved_at ||\n            this.requestData.divisional_approved_at,\n          ict_director:\n            this.requestData.approvals?.directorICT?.date ||\n            this.requestData.approvals?.directorICT?.approved_at ||\n            this.requestData.dict_approved_at,\n          head_it:\n            this.requestData.implementation?.headIT?.date ||\n            this.requestData.implementation?.headIT?.approved_at ||\n            this.requestData.head_it_approved_at,\n          ict_officer:\n            this.requestData.implementation?.ictOfficer?.date ||\n            this.requestData.implementation?.ictOfficer?.approved_at ||\n            this.requestData.ict_officer_approved_at\n        }\n\n        let at = dateMap[stage]\n\n        // Fallback: derive from digital signature history for that approver if available\n        if (!at) {\n          try {\n            const approverNameMap = {\n              hod: this.requestData.approvals?.hod?.name || this.requestData.hod_name,\n              divisional:\n                this.requestData.approvals?.divisionalDirector?.name ||\n                this.requestData.divisional_director_name,\n              ict_director:\n                this.requestData.approvals?.directorICT?.name || this.requestData.dict_name,\n              head_it:\n                this.requestData.implementation?.headIT?.name || this.requestData.head_it_name,\n              ict_officer:\n                this.requestData.implementation?.ictOfficer?.name ||\n                this.requestData.ict_officer_name\n            }\n            const approver = String(approverNameMap[stage] || '')\n              .trim()\n              .toLowerCase()\n            const getTs = (s) => s?.signed_at || s?.created_at || s?.timestamp\n            let entry = (this.signatureHistory || []).find(\n              (s) =>\n                String(s.user_name || s.name || '')\n                  .trim()\n                  .toLowerCase() === approver\n            )\n\n            // Additional fallback: if viewer is at this stage and has signed, use current user entry\n            if (!entry) {\n              const viewerIsStage = this.viewerStage() === stage\n              const viewerName = (this.currentUser?.name || '').trim().toLowerCase()\n              if (viewerIsStage && viewerName) {\n                entry = (this.signatureHistory || []).find(\n                  (s) =>\n                    String(s.user_name || s.name || '')\n                      .trim()\n                      .toLowerCase() === viewerName\n                )\n                if (!entry && this.hasUserSigned && this.lastSignedAt) {\n                  // Construct a synthetic entry from local state\n                  at = this.lastSignedAt\n                }\n              }\n            }\n            if (!at && entry) at = getTs(entry)\n          } catch (_) {\n            /* no-op */\n          }\n        }\n\n        if (!at) return 'Date unavailable'\n        try {\n          const date = new Date(at)\n          if (isNaN(date.getTime())) return 'Date unavailable'\n          return date.toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric'\n          })\n        } catch (error) {\n          console.warn('Error formatting approval date for', stage, error)\n          return 'Date unavailable'\n        }\n      },\n\n      // Auto-populate HOD date field for Divisional Director view using HOD approval date\n      populateDivisionalDirectorDateFromHod() {\n        if (!this.requestData) return\n\n        // Only auto-populate when Divisional Director is reviewing\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const isDivisionalDirector = ['divisional_director'].includes(userRole)\n\n        if (!isDivisionalDirector || !this.isReviewMode) return\n\n        // Get HOD approval date from various possible sources\n        const hodApprovedAt =\n          this.requestData.approvals?.hod?.date ||\n          this.requestData.approvals?.hod?.approved_at ||\n          this.requestData.hod_approved_at ||\n          null\n\n        if (!hodApprovedAt) return\n\n        try {\n          // Convert HOD approval date to YYYY-MM-DD format for input[type=\"date\"]\n          const date = new Date(hodApprovedAt)\n          if (isNaN(date.getTime())) return\n\n          const yyyy = date.getFullYear()\n          const mm = String(date.getMonth() + 1).padStart(2, '0')\n          const dd = String(date.getDate()).padStart(2, '0')\n          const formattedDate = `${yyyy}-${mm}-${dd}`\n\n          // Only populate if the HOD date field is currently empty\n          if (!this.form.approvals.hod.date) {\n            this.form.approvals.hod.date = formattedDate\n            console.log(\n              ' Auto-populated HOD date from HOD approval for Divisional Director view:',\n              {\n                originalHodDate: hodApprovedAt,\n                formattedDate: formattedDate\n              }\n            )\n          }\n        } catch (error) {\n          console.warn('Error auto-populating HOD date for Divisional Director view:', error)\n        }\n      },\n\n      // HOD Signature methods\n      triggerHodSignatureUpload() {\n        this.$refs.hodSignatureInput.click()\n      },\n\n      onHodSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.approvals.hod.signature = file || null\n\n        if (!file) {\n          this.hodSignaturePreview = ''\n          this.hodSignatureFileName = ''\n          return\n        }\n\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearHodSignature()\n          return\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearHodSignature()\n          return\n        }\n\n        this.hodSignatureFileName = file.name\n        // Auto-capture approval date on signature selection\n        const today = new Date()\n        const yyyy = today.getFullYear()\n        const mm = String(today.getMonth() + 1).padStart(2, '0')\n        const dd = String(today.getDate()).padStart(2, '0')\n        this.form.approvals.hod.date = `${yyyy}-${mm}-${dd}`\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.hodSignaturePreview = reader.result\n            this.showSignatureUploadSuccess('HOD')\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.hodSignaturePreview = 'pdf'\n          this.showSignatureUploadSuccess('HOD')\n        }\n      },\n\n      clearHodSignature() {\n        this.form.approvals.hod.signature = null\n        this.hodSignaturePreview = ''\n        this.hodSignatureFileName = ''\n        if (this.$refs.hodSignatureInput) {\n          this.$refs.hodSignatureInput.value = ''\n        }\n      },\n\n      // Divisional Director Signature methods\n      triggerDivDirectorSignatureUpload() {\n        this.$refs.divDirectorSignatureInput.click()\n      },\n\n      onDivDirectorSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.approvals.divisionalDirector.signature = file || null\n\n        if (!file) {\n          this.divDirectorSignaturePreview = ''\n          this.divDirectorSignatureFileName = ''\n          return\n        }\n\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearDivDirectorSignature()\n          return\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearDivDirectorSignature()\n          return\n        }\n\n        this.divDirectorSignatureFileName = file.name\n        // Auto-capture approval date on signature selection\n        this.form.approvals.divisionalDirector.date = new Date().toISOString().slice(0, 10)\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.divDirectorSignaturePreview = reader.result\n            this.showSignatureUploadSuccess('Divisional Director')\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.divDirectorSignaturePreview = 'pdf'\n          this.showSignatureUploadSuccess('Divisional Director')\n        }\n      },\n\n      clearDivDirectorSignature() {\n        this.form.approvals.divisionalDirector.signature = null\n        this.divDirectorSignaturePreview = ''\n        this.divDirectorSignatureFileName = ''\n        if (this.$refs.divDirectorSignatureInput) {\n          this.$refs.divDirectorSignatureInput.value = ''\n        }\n      },\n\n      // Director ICT Signature methods\n      triggerDirectorICTSignatureUpload() {\n        this.$refs.directorICTSignatureInput.click()\n      },\n\n      onDirectorICTSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.approvals.directorICT.signature = file || null\n\n        if (!file) {\n          this.directorICTSignaturePreview = ''\n          this.directorICTSignatureFileName = ''\n          return\n        }\n\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearDirectorICTSignature()\n          return\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearDirectorICTSignature()\n          return\n        }\n\n        this.directorICTSignatureFileName = file.name\n        // Auto-capture approval date on signature selection\n        this.form.approvals.directorICT.date = new Date().toISOString().slice(0, 10)\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.directorICTSignaturePreview = reader.result\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.directorICTSignaturePreview = 'pdf'\n        }\n      },\n\n      clearDirectorICTSignature() {\n        this.form.approvals.directorICT.signature = null\n        this.directorICTSignaturePreview = ''\n        this.directorICTSignatureFileName = ''\n        if (this.$refs.directorICTSignatureInput) {\n          this.$refs.directorICTSignatureInput.value = ''\n        }\n      },\n\n      // Head IT Signature methods\n      triggerHeadITSignatureUpload() {\n        this.$refs.headITSignatureInput.click()\n      },\n\n      onHeadITSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.implementation.headIT.signature = file || null\n\n        if (!file) {\n          this.headITSignaturePreview = ''\n          this.headITSignatureFileName = ''\n          return\n        }\n\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearHeadITSignature()\n          return\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearHeadITSignature()\n          return\n        }\n\n        this.headITSignatureFileName = file.name\n        // Auto-capture approval date on signature selection\n        this.form.implementation.headIT.date = new Date().toISOString().slice(0, 10)\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.headITSignaturePreview = reader.result\n            this.showSignatureUploadSuccess('Head of IT')\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.headITSignaturePreview = 'pdf'\n          this.showSignatureUploadSuccess('Head of IT')\n        }\n      },\n\n      clearHeadITSignature() {\n        this.form.implementation.headIT.signature = null\n        this.headITSignaturePreview = ''\n        this.headITSignatureFileName = ''\n        if (this.$refs.headITSignatureInput) {\n          this.$refs.headITSignatureInput.value = ''\n        }\n      },\n\n      // ICT Officer Signature methods\n      triggerIctOfficerSignatureUpload() {\n        this.$refs.ictOfficerSignatureInput.click()\n      },\n\n      onIctOfficerSignatureChange(e) {\n        const file = e.target.files[0]\n        this.form.implementation.ictOfficer.signature = file || null\n\n        if (!file) {\n          this.ictOfficerSignaturePreview = ''\n          this.ictOfficerSignatureFileName = ''\n          return\n        }\n\n        const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'application/pdf']\n        if (!allowedTypes.includes(file.type)) {\n          this.showNotification('Please select a valid file (PNG, JPG, or PDF)')\n          this.clearIctOfficerSignature()\n          return\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          this.showNotification('File size must be less than 5MB')\n          this.clearIctOfficerSignature()\n          return\n        }\n\n        this.ictOfficerSignatureFileName = file.name\n        // Auto-capture date on signature selection\n        this.form.implementation.ictOfficer.date = new Date().toISOString().slice(0, 10)\n\n        if (file.type.startsWith('image/')) {\n          const reader = new FileReader()\n          reader.onload = () => {\n            this.ictOfficerSignaturePreview = reader.result\n          }\n          reader.readAsDataURL(file)\n        } else {\n          this.ictOfficerSignaturePreview = 'pdf'\n        }\n      },\n\n      clearIctOfficerSignature() {\n        this.form.implementation.ictOfficer.signature = null\n        this.ictOfficerSignaturePreview = ''\n        this.ictOfficerSignatureFileName = ''\n        if (this.$refs.ictOfficerSignatureInput) {\n          this.$refs.ictOfficerSignatureInput.value = ''\n        }\n      },\n      // Manual debug method to trigger auto-population (for testing)\n      debugAutoPopulation() {\n        console.log('=== DEBUG AUTO-POPULATION =====')\n        console.log('Current user:', this.currentUser)\n        console.log('Is review mode:', this.isReviewMode)\n        console.log('Current approval stage:', this.currentApprovalStage)\n        console.log('HOD editable:', this.isHodApprovalEditable)\n        console.log('HOD current name:', this.form.approvals.hod.name)\n        console.log('Request data status:', this.requestData?.status)\n\n        console.log('\\n=== TRIGGERING ROLE-BASED AUTO-POPULATION ===')\n\n        // Use role-based population for debugging\n        if (this.currentUser?.name) {\n          console.log(\n            'User role from database:',\n            this.currentUser.role || this.currentUser.user_role\n          )\n          this.populateBasedOnUserRole(this.currentUser)\n        } else {\n          console.error('No current user data available!')\n        }\n\n        console.log('=== DEBUG COMPLETE ===')\n      },\n\n      // Helper to format dates for date inputs (YYYY-MM-DD)\n      formatDateForInput(dateValue) {\n        if (!dateValue) return ''\n        try {\n          const date = new Date(dateValue)\n          if (isNaN(date.getTime())) return ''\n          const year = date.getFullYear()\n          const month = String(date.getMonth() + 1).padStart(2, '0')\n          const day = String(date.getDate()).padStart(2, '0')\n          return `${year}-${month}-${day}`\n        } catch (error) {\n          console.warn('Error formatting date for input:', dateValue, error)\n          return ''\n        }\n      },\n\n      // Helper to format dates for comment display\n      formatCommentDate(dateValue) {\n        if (!dateValue) return 'Date not available'\n        try {\n          const date = new Date(dateValue)\n          if (isNaN(date.getTime())) {\n            // Try to parse it as a different format if the first attempt failed\n            const parsedDate = Date.parse(dateValue)\n            if (isNaN(parsedDate)) return 'Invalid date format'\n            return new Date(parsedDate).toLocaleDateString('en-US', {\n              year: 'numeric',\n              month: 'short',\n              day: 'numeric',\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          }\n          return date.toLocaleDateString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n          })\n        } catch (error) {\n          console.warn('Error formatting comment date:', dateValue, error)\n          return 'Date format error'\n        }\n      },\n\n      // Trigger Head IT name population if the current user is Head IT\n      triggerHeadItNamePopulationIfNeeded() {\n        if (!this.currentUser || !this.currentUser.name || !this.isReviewMode) {\n          return\n        }\n\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const isHeadIt = ['head_it', 'head_of_it', 'ict_head', 'it_head'].includes(userRole)\n        const isHeadItStage = this.currentApprovalStage === 'head_it'\n        const isHeadItEditable = this.isHeadItApprovalEditable\n\n        console.log(' Head IT name population check:', {\n          userRole,\n          isHeadIt,\n          isHeadItStage,\n          isHeadItEditable,\n          currentApprovalStage: this.currentApprovalStage,\n          currentHeadItName: this.form.implementation.headIT.name,\n          userName: this.currentUser.name\n        })\n\n        if (isHeadIt && isHeadItStage && isHeadItEditable) {\n          console.log(' All conditions met for Head IT name population')\n\n          // Only populate if the field is currently empty\n          if (!this.form.implementation.headIT.name) {\n            console.log(' Populating Head IT name field with:', this.currentUser.name)\n            this.populateApproverName('head_it')\n          } else {\n            console.log(' Head IT name already populated:', this.form.implementation.headIT.name)\n          }\n        } else {\n          console.log(' Conditions not met for Head IT name population')\n        }\n      },\n\n      // Debug method to check Head IT status\n      debugHeadItStatus() {\n        console.log('\\n=== HEAD IT DEBUG STATUS ===')\n        console.log('User Info:', {\n          currentUser: this.currentUser,\n          userName: this.currentUser?.name,\n          userRole: this.getUserRole(),\n          allRoles: this.currentUser?.roles\n        })\n        console.log('Request Info:', {\n          requestId: this.getRequestId,\n          requestStatus: this.requestData?.status,\n          currentApprovalStage: this.currentApprovalStage\n        })\n        console.log('Form State:', {\n          headItName: this.form.implementation.headIT.name,\n          headItDate: this.form.implementation.headIT.date,\n          headItSignature: this.form.implementation.headIT.signature,\n          hasSignaturePreview: !!this.headITSignaturePreview\n        })\n        console.log('Computed Properties:', {\n          isReviewMode: this.isReviewMode,\n          isHeadItApprovalEditable: this.isHeadItApprovalEditable,\n          currentApprovalStage: this.currentApprovalStage\n        })\n        console.log('Button Conditions:', {\n          condition1_isReviewMode: this.isReviewMode,\n          condition2_isHeadItApprovalEditable: this.isHeadItApprovalEditable,\n          condition3_hasHeadItSignature: !!this.form.implementation.headIT.signature,\n          allConditionsMet:\n            this.isReviewMode &&\n            this.isHeadItApprovalEditable &&\n            this.form.implementation.headIT.signature\n        })\n        console.log('=== END HEAD IT DEBUG ===\\n')\n      },\n\n      // Determine viewer stage and rank helpers\n      viewerStage() {\n        const userRole = (this.getUserRole() || '').toLowerCase()\n        const roleToStageMap = {\n          head_of_department: 'hod',\n          hod: 'hod',\n          head_department: 'hod',\n          divisional_director: 'divisional',\n          director_divisional: 'divisional',\n          ict_director: 'ict_director',\n          director_ict: 'ict_director',\n          head_it: 'head_it',\n          head_of_it: 'head_it',\n          ict_head: 'head_it',\n          it_head: 'head_it',\n          ict_officer: 'ict_officer',\n          officer_ict: 'ict_officer'\n        }\n        const stage = roleToStageMap[userRole] || ''\n        console.log(' viewerStage debug:', {\n          userRole,\n          mappedStage: stage,\n          availableRoles: Object.keys(roleToStageMap)\n        })\n        return stage\n      },\n      viewerRank() {\n        return this.rankForStage(this.viewerStage())\n      },\n      rankForStage(stage) {\n        const ranks = { hod: 1, divisional: 2, ict_director: 3, head_it: 4, ict_officer: 5 }\n        return ranks[stage] || 0\n      },\n      viewerAfter(stage) {\n        const targetRank = this.rankForStage(stage)\n        const myRank = this.viewerRank()\n        // Viewers strictly AFTER the target stage should see status indicators\n        const result = targetRank > 0 && myRank > targetRank\n        console.log(` viewerAfter(${stage}):`, {\n          targetRank,\n          myRank,\n          viewerStage: this.viewerStage(),\n          result,\n          note: 'Using strict > comparison so same-stage approvers see upload controls instead of read-only status'\n        })\n        return result\n      },\n\n      // Get current authenticated user\n      async getCurrentUser() {\n        try {\n          console.log(' Attempting to fetch current user...')\n          const response = await authService.getCurrentUser()\n          console.log(' Raw API response:', response)\n\n          if (response && response.success) {\n            console.log(' API call successful, response.data:', response.data)\n\n            // Handle different possible response structures\n            let userData = null\n\n            if (response.data && response.data.data && response.data.data.name) {\n              // Case: {success: true, data: {data: {name: 'John', ...}}}\n              userData = response.data.data\n              console.log(' Current user loaded from response.data.data:', userData)\n            } else if (response.data && response.data.user && response.data.user.name) {\n              // Case: {success: true, data: {user: {name: 'John', ...}}}\n              userData = response.data.user\n              console.log(' Current user loaded from response.data.user:', userData)\n            } else if (response.data && response.data.name) {\n              // Case: {success: true, data: {name: 'John', ...}}\n              userData = response.data\n              console.log(' Current user loaded from response.data directly:', userData)\n            } else {\n              console.error(\n                ' User data structure not recognized. Full response:',\n                JSON.stringify(response, null, 2)\n              )\n              console.error(' response.data content:', response.data)\n            }\n\n            if (userData && userData.name) {\n              this.currentUser = userData\n              console.log(' User name from database:', userData.name)\n              console.log(' User ID:', userData.id)\n              console.log(' User email:', userData.email)\n              console.log(' User role:', userData.role || userData.user_role)\n            } else {\n              console.error(' No valid user data found:', userData)\n            }\n          } else {\n            console.warn(' Failed to get current user:', response?.message || 'Unknown error')\n            console.log(' Response status:', response?.status)\n          }\n        } catch (error) {\n          console.error(' Error fetching current user:', error)\n          console.error(' Error details:', {\n            message: error.message,\n            response: error.response,\n            status: error.response?.status,\n            data: error.response?.data\n          })\n        }\n      },\n\n      // Fallback method to get user from localStorage\n      tryGetUserFromLocalStorage() {\n        try {\n          const storedUser = localStorage.getItem('user_data')\n          if (storedUser) {\n            const userData = JSON.parse(storedUser)\n            console.log(' Found user in localStorage:', userData)\n\n            if (userData && userData.name) {\n              this.currentUser = userData\n              console.log(' Using localStorage user data:', this.currentUser.name)\n            } else if (userData && userData.user && userData.user.name) {\n              this.currentUser = userData.user\n              console.log(' Using localStorage user.user data:', this.currentUser.name)\n            }\n          } else {\n            console.log(' No user_data found in localStorage')\n          }\n        } catch (error) {\n          console.error(' Error parsing localStorage user_data:', error)\n        }\n      },\n\n      // Fallback method to get user from Pinia store\n      tryGetUserFromStore() {\n        try {\n          // Use the injected auth store\n          const storeUser = this.authStore.user || this.authStore.currentUser\n          console.log(' Checking Pinia store for user:', {\n            hasAuthStore: !!this.authStore,\n            storeUser: storeUser,\n            storeUserName: storeUser?.name,\n            storeProperties: this.authStore ? Object.keys(this.authStore) : []\n          })\n\n          if (storeUser && storeUser.name) {\n            this.currentUser = storeUser\n            console.log(' Using Pinia store user data:', this.currentUser.name)\n            console.log(' User role from store:', storeUser.role || storeUser.user_role)\n          } else {\n            console.log(' No user found in Pinia store')\n          }\n        } catch (error) {\n          console.error(' Error accessing Pinia store:', error)\n          console.log(' Pinia store not available, skipping store access')\n        }\n      },\n\n      // Role-based auto-population - only populate field matching user's role\n      populateBasedOnUserRole(user) {\n        if (!user || !user.name) {\n          console.log(' No valid user data for role-based population')\n          return\n        }\n\n        const userRole = user.role || user.user_role || ''\n        const userName = user.name\n\n        console.log(` Role-based population for role: \"${userRole}\" with name: \"${userName}\"`)\n\n        // First, clear ALL approval name fields to ensure clean state\n        console.log(' Clearing all approval name fields before role-based population')\n        this.form.approvals.hod.name = ''\n        this.form.approvals.divisionalDirector.name = ''\n        this.form.approvals.directorICT.name = ''\n        this.form.implementation.headIT.name = ''\n        this.form.implementation.ictOfficer.name = ''\n        console.log(' All fields cleared')\n\n        // Map roles to approval stages\n        const roleToStageMap = {\n          head_of_department: 'hod',\n          hod: 'hod',\n          head_department: 'hod',\n          divisional_director: 'divisional',\n          director_divisional: 'divisional',\n          ict_director: 'ict_director',\n          director_ict: 'ict_director',\n          head_it: 'head_it',\n          head_of_it: 'head_it',\n          ict_officer: 'ict_officer',\n          officer_ict: 'ict_officer'\n        }\n\n        // Normalize role string for matching\n        const normalizedRole = userRole.toLowerCase().replace(/[\\s_-]+/g, '_')\n        const mappedStage = roleToStageMap[normalizedRole]\n\n        if (mappedStage) {\n          console.log(`\\u2705 Found role mapping: \"${userRole}\" \\u2192 \"${mappedStage}\"`)\n\n          // Check if the mapped stage is currently editable (active)\n          const isStageEditable = this.isApprovalStageEditable(mappedStage)\n          console.log(`\\ud83d\\udd0d Is ${mappedStage} stage editable?`, isStageEditable)\n\n          if (isStageEditable) {\n            console.log(\n              `\\ud83d\\udd04 About to populate ONLY the ${mappedStage} field with: ${userName}`\n            )\n            this.populateApproverName(mappedStage)\n          } else {\n            console.log(\n              `\\u26a0\\ufe0f Skipping ${mappedStage} field - not currently active/editable`\n            )\n          }\n\n          // Verify the population worked correctly\n          console.log('\\ud83d\\udd0d Post-population verification:')\n          console.log('HOD name:', this.form.approvals.hod.name)\n          console.log('Divisional Director name:', this.form.approvals.divisionalDirector.name)\n          console.log('ICT Director name:', this.form.approvals.directorICT.name)\n          console.log('Head IT name:', this.form.implementation.headIT.name)\n          console.log('ICT Officer name:', this.form.implementation.ictOfficer.name)\n        } else {\n          console.log(\n            ` No role mapping found for: \"${userRole}\". Available mappings:`,\n            Object.keys(roleToStageMap)\n          )\n\n          // Fallback: if user is in review mode and has edit permissions for a specific stage\n          if (this.isReviewMode) {\n            if (this.isHodApprovalEditable) {\n              console.log(' Fallback: Using HOD field based on edit permissions')\n              this.populateApproverName('hod')\n            } else if (this.isDivisionalApprovalEditable) {\n              console.log(' Fallback: Using Divisional field based on edit permissions')\n              this.populateApproverName('divisional')\n            } else if (this.isIctDirectorApprovalEditable) {\n              console.log(' Fallback: Using ICT Director field based on edit permissions')\n              this.populateApproverName('ict_director')\n            } else if (this.isHeadItApprovalEditable) {\n              console.log(' Fallback: Using Head IT field based on edit permissions')\n              this.populateApproverName('head_it')\n            } else if (this.isIctOfficerApprovalEditable) {\n              console.log(' Fallback: Using ICT Officer field based on edit permissions')\n              this.populateApproverName('ict_officer')\n            }\n          }\n        }\n      },\n\n      // Helper method to check if a specific approval stage is currently editable\n      isApprovalStageEditable(stage) {\n        const editableMap = {\n          hod: this.isHodApprovalEditable,\n          divisional: this.isDivisionalApprovalEditable,\n          ict_director: this.isIctDirectorApprovalEditable,\n          head_it: this.isHeadItApprovalEditable,\n          ict_officer: this.isIctOfficerApprovalEditable\n        }\n\n        return editableMap[stage] || false\n      },\n\n      // Auto-populate approver name based on current user and approval stage\n      populateApproverName(stage) {\n        if (!this.currentUser || !this.currentUser.name) {\n          console.log('No current user data available for auto-population', {\n            hasCurrentUser: !!this.currentUser,\n            currentUser: this.currentUser,\n            userName: this.currentUser?.name\n          })\n          return\n        }\n\n        const userName = this.currentUser.name\n        console.log(`Auto-populating ${stage} approver name with user from database:`, {\n          stage,\n          userName,\n          userId: this.currentUser.id,\n          userEmail: this.currentUser.email,\n          userPfNumber: this.currentUser.pf_number\n        })\n\n        // Always populate the appropriate name field with authenticated user's name\n        switch (stage) {\n          case 'hod':\n            this.form.approvals.hod.name = userName\n            console.log(` HOD name populated: ${userName}`)\n            break\n          case 'divisional':\n            this.form.approvals.divisionalDirector.name = userName\n            console.log(` Divisional Director name populated: ${userName}`)\n            break\n          case 'ict_director':\n            this.form.approvals.directorICT.name = userName\n            // Auto-populate current date if not already set\n            if (!this.form.approvals.directorICT.date) {\n              this.form.approvals.directorICT.date = new Date().toISOString().slice(0, 10)\n            }\n            console.log(\n              ` ICT Director name and date populated: ${userName}, ${this.form.approvals.directorICT.date}`\n            )\n            break\n          case 'head_it':\n            this.form.implementation.headIT.name = userName\n            // Auto-populate current date if not already set\n            if (!this.form.implementation.headIT.date) {\n              this.form.implementation.headIT.date = new Date().toISOString().slice(0, 10)\n            }\n            console.log(\n              ` Head of IT name and date populated: ${userName}, ${this.form.implementation.headIT.date}`\n            )\n            break\n          case 'ict_officer':\n            this.form.implementation.ictOfficer.name = userName\n            console.log(` ICT Officer name populated: ${userName}`)\n            break\n          default:\n            console.warn(`Unknown approval stage: ${stage}`)\n        }\n      },\n      // Injected: call after successful Head of IT approval\n      onHeadItApproveSuccess() {\n        this.showHeadItApproveSuccessModal = true\n      },\n      redirectToAssignIctOfficer() {\n        this.showHeadItApproveSuccessModal = false\n        const id = this.getRequestId || this.requestData?.id || this.$route.params.id\n        if (id) this.$router.push(`/head_of_it-dashboard/select-ict-officer/${id}`)\n      },\n\n      getLoadingTitle() {\n        if (this.isReviewMode) {\n          return 'Loading Request Details'\n        }\n        return 'Loading Access Request'\n      },\n\n      getLoadingSubtitle() {\n        if (this.isReviewMode) {\n          return 'Retrieving request data for review...'\n        }\n        return 'Please wait...'\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /* Role comment textarea: lock resizing */\n  .role-comment-textarea {\n    resize: none;\n  }\n\n  /* Medical Background Animations */\n  @keyframes float {\n    0%,\n    100% {\n      transform: translateY(0px);\n    }\n    50% {\n      transform: translateY(-20px);\n    }\n  }\n\n  .animate-float {\n    animation: float 6s ease-in-out infinite;\n  }\n\n  /* Define primary color */\n  .bg-primary {\n    background-color: #1e40af; /* Blue-700 */\n  }\n\n  .text-primary {\n    color: #1e40af; /* Blue-700 */\n  }\n\n  .border-primary {\n    border-color: #1e40af; /* Blue-700 */\n  }\n\n  .focus\\:border-primary:focus {\n    border-color: #1e40af;\n  }\n\n  /* Custom checkbox and radio styling */\n  input[type='checkbox']:checked,\n  input[type='radio']:checked {\n    background-color: #1e40af;\n    border-color: #1e40af;\n  }\n\n  input[type='checkbox']:focus,\n  input[type='radio']:focus {\n    box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);\n  }\n\n  /* Smooth transitions */\n  .transition-all {\n    transition: all 0.3s ease;\n  }\n\n  /* Glass morphism effect */\n  .backdrop-blur-sm {\n    backdrop-filter: blur(8px);\n  }\n\n  /* Enhanced form sections */\n  .border-l-2 {\n    position: relative;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));\n    border-radius: 12px;\n    padding: 1.5rem;\n    margin-bottom: 1.5rem;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s ease;\n  }\n\n  .border-l-2:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);\n  }\n\n  /* Full width responsive container */\n  .label {\n    @apply block text-base font-medium text-gray-700 mb-1;\n  }\n  .input {\n    @apply w-full rounded-lg border border-gray-300 px-4 py-3 text-base focus:outline-none focus:ring-2 focus:ring-primary/40 focus:border-primary;\n  }\n  .btn-primary {\n    @apply inline-flex items-center px-6 py-3 rounded-lg bg-primary text-white text-base font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition shadow-md hover:shadow-lg;\n  }\n  .btn-secondary {\n    @apply inline-flex items-center px-6 py-3 rounded-lg bg-gray-100 text-gray-800 text-base font-semibold hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300 transition shadow-md hover:shadow-lg;\n  }\n  .btn-danger {\n    @apply inline-flex items-center px-4 py-2 rounded-md bg-red-600 text-white text-sm font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition;\n  }\n  .btn-sm {\n    @apply px-2 py-1 text-xs;\n  }\n  .card {\n    @apply bg-white rounded-lg shadow-md border border-gray-200 p-4 mb-3;\n  }\n  .error {\n    @apply text-xs text-red-600 mt-1;\n  }\n  .tab {\n    @apply inline-flex items-center px-3 py-2 rounded-md bg-white border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition;\n  }\n  .tab-active {\n    @apply bg-blue-50 border-blue-300 text-blue-800;\n  }\n  .fade-enter-active,\n  .fade-leave-active {\n    transition:\n      opacity 0.2s,\n      transform 0.2s;\n  }\n  .fade-enter-from,\n  .fade-leave-to {\n    opacity: 0;\n    transform: translateY(4px);\n  }\n  .focus\\:ring-primary {\n    --tw-ring-color: #1e40af;\n  }\n  .option-tile {\n    @apply flex items-center gap-2 px-2 py-2 rounded-md border border-gray-200 bg-white hover:bg-gray-50 hover:border-gray-300 text-left text-sm;\n  }\n  .option-tile-active {\n    @apply border-blue-300 bg-blue-50;\n  }\n\n  /* Print styles */\n  @media print {\n    .min-h-screen {\n      min-height: auto;\n    }\n\n    button {\n      display: none;\n    }\n\n    .shadow-xl {\n      box-shadow: none;\n    }\n\n    .bg-gradient-to-br {\n      background: white;\n    }\n  }\n\n  /* Responsive adjustments */\n  @media (max-width: 768px) {\n    .grid-cols-4 {\n      grid-template-columns: repeat(2, minmax(0, 1fr));\n    }\n\n    .grid-cols-3 {\n      grid-template-columns: repeat(1, minmax(0, 1fr));\n    }\n\n    .grid-cols-2 {\n      grid-template-columns: repeat(1, minmax(0, 1fr));\n    }\n  }\n\n  @media (max-width: 640px) {\n    .lg\\:grid-cols-4 {\n      grid-template-columns: repeat(1, minmax(0, 1fr));\n    }\n\n    .md\\:grid-cols-3 {\n      grid-template-columns: repeat(1, minmax(0, 1fr));\n    }\n  }\n\n  /* Radio button specific styles */\n  input[type='radio'] {\n    appearance: auto;\n    -webkit-appearance: auto;\n    -moz-appearance: radio;\n    opacity: 1 !important;\n    position: relative !important;\n    z-index: 10;\n    pointer-events: auto !important;\n  }\n\n  /* Ensure radio buttons are always visible and clickable */\n  input[type='radio']:checked {\n    background-color: #3b82f6 !important;\n    border-color: #3b82f6 !important;\n  }\n\n  /* Radio button labels */\n  label.cursor-pointer {\n    cursor: pointer !important;\n    user-select: none;\n  }\n\n  label.cursor-pointer:hover {\n    background-color: rgba(59, 130, 246, 0.1) !important;\n  }\n\n  /* Active state for radio button containers */\n  label.cursor-pointer.bg-blue-500\\/10 {\n    background-color: rgba(59, 130, 246, 0.15) !important;\n    border-color: rgba(59, 130, 246, 0.5) !important;\n  }\n\n  /* Improve card spacing on smaller screens */\n  @media (max-width: 768px) {\n    .card {\n      padding: 0.75rem;\n    }\n  }\n\n  /* Ensure full width utilization */\n  .max-w-full {\n    max-width: 100%;\n  }\n\n  .max-w-8xl {\n    max-width: 88rem; /* 1408px */\n  }\n\n  /* Personal Information Input Styling */\n  .personal-info-input.font-bold {\n    font-weight: 700 !important;\n    letter-spacing: 0.025em;\n    text-shadow: 0 0 1px rgba(255, 255, 255, 0.3);\n  }\n\n  /* Enhanced bold styling for populated personal info fields */\n  .personal-info-input:not(:placeholder-shown) {\n    font-weight: 600;\n  }\n\n  .personal-info-input.font-bold:not(:placeholder-shown) {\n    font-weight: 800 !important;\n    color: #fde047 !important; /* Yellow-300 for better contrast on dark background */\n    background-color: rgba(\n      59,\n      130,\n      246,\n      0.25\n    ) !important; /* Slightly more opaque blue background */\n    border-color: rgba(251, 191, 36, 0.5) !important; /* Amber border for emphasis */\n  }\n\n  /* Custom scrollbar for Previous Comments section */\n  .custom-scrollbar {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(251, 191, 36, 0.6) rgba(59, 130, 246, 0.2);\n  }\n\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background: rgba(59, 130, 246, 0.1);\n    border-radius: 10px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background: linear-gradient(180deg, rgba(251, 191, 36, 0.7), rgba(245, 158, 11, 0.8));\n    border-radius: 10px;\n    border: 2px solid rgba(59, 130, 246, 0.2);\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n    background: linear-gradient(180deg, rgba(251, 191, 36, 0.9), rgba(245, 158, 11, 1));\n  }\n\n  /* Timeline connector animation */\n  .timeline-connector {\n    position: relative;\n    overflow: hidden;\n  }\n\n  .timeline-connector::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 50%;\n    width: 4px;\n    height: 100%;\n    background: linear-gradient(\n      to bottom,\n      transparent 0%,\n      rgba(251, 191, 36, 0.6) 20%,\n      rgba(251, 191, 36, 0.8) 50%,\n      rgba(251, 191, 36, 0.6) 80%,\n      transparent 100%\n    );\n    transform: translateX(-50%);\n    animation: timeline-glow 2s ease-in-out infinite alternate;\n  }\n\n  @keyframes timeline-glow {\n    0% {\n      opacity: 0.6;\n      box-shadow: 0 0 5px rgba(251, 191, 36, 0.3);\n    }\n    100% {\n      opacity: 1;\n      box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);\n    }\n  }\n\n  /* Previous Comments section animations */\n  .previous-comments-enter-active,\n  .previous-comments-leave-active {\n    transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);\n  }\n\n  .previous-comments-enter-from {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n\n  .previous-comments-leave-to {\n    opacity: 0;\n    transform: translateY(-20px);\n  }\n\n  /* Comment item hover effects */\n  .comment-item:hover .comment-icon {\n    transform: scale(1.1) rotate(5deg);\n  }\n\n  .comment-item:hover .comment-content {\n    background-color: rgba(59, 130, 246, 0.05);\n  }\n\n  /* Responsive grid adjustments */\n  @media (max-width: 1024px) {\n    .lg\\:col-span-3 {\n      grid-column: span 1;\n    }\n  }\n</style>\n","<template>\n  <div class=\"orbiting-dots\">\n    <div class=\"dot dot-1\"></div>\n    <div class=\"dot dot-2\"></div>\n    <div class=\"dot dot-3\"></div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'OrbitingDots'\n  }\n</script>\n\n<style scoped>\n  .orbiting-dots {\n    position: relative;\n    display: inline-block;\n    width: 40px;\n    height: 40px;\n  }\n\n  .dot {\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background-color: #3b82f6;\n    animation: orbit 2s linear infinite;\n  }\n\n  .dot-1 {\n    top: 0;\n    left: 50%;\n    transform: translateX(-50%);\n    animation-delay: 0s;\n  }\n\n  .dot-2 {\n    top: 50%;\n    right: 0;\n    transform: translateY(-50%);\n    animation-delay: -0.67s;\n  }\n\n  .dot-3 {\n    bottom: 0;\n    left: 50%;\n    transform: translateX(-50%);\n    animation-delay: -1.33s;\n  }\n\n  @keyframes orbit {\n    0% {\n      transform: rotate(0deg) translate(16px) rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg) translate(16px) rotate(-360deg);\n    }\n  }\n</style>\n","import { render } from \"./OrbitingDots.vue?vue&type=template&id=58ff81c4&scoped=true\"\nimport script from \"./OrbitingDots.vue?vue&type=script&lang=js\"\nexport * from \"./OrbitingDots.vue?vue&type=script&lang=js\"\n\nimport \"./OrbitingDots.vue?vue&type=style&index=0&id=58ff81c4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-58ff81c4\"]])\n\nexport default __exports__","import apiClient from '../utils/apiClient'\nimport { devLog } from '../utils/devLogger'\n\n/**\n * Both Service Form Service for combined access requests\n * Handles submission and management of combined Jeeva, Wellsoft, and Internet access requests\n */\nclass BothServiceFormService {\n  /**\n   * Submit a new combined access request\n   * @param {Object} formData - Form data including modules, signatures, and user info\n   * @returns {Promise<Object>} Response with submission result\n   */\n  async submitCombinedRequest(formData) {\n    try {\n      devLog.debug(' Submitting combined access request...', formData)\n\n      // Create FormData for multipart/form-data submission\n      const submitData = new FormData()\n\n      // Add personal information\n      if (formData.shared) {\n        submitData.append('pf_number', formData.shared.pfNumber || '')\n        submitData.append('staff_name', formData.shared.staffName || '')\n        submitData.append('department', formData.shared.department || '')\n        submitData.append('phone_number', formData.shared.phone || '')\n      }\n\n      // Add signature file if provided\n      if (formData.signature) {\n        submitData.append('signature', formData.signature)\n      }\n\n      // Add module selections with explicit debugging\n      devLog.debug(' MODULE SELECTION DEBUG:')\n      devLog.debug(\n        'selectedWellsoft:',\n        formData.selectedWellsoft,\n        'length:',\n        formData.selectedWellsoft?.length\n      )\n      devLog.debug(\n        'selectedJeeva:',\n        formData.selectedJeeva,\n        'length:',\n        formData.selectedJeeva?.length\n      )\n      devLog.debug('selectedWellsoft type:', typeof formData.selectedWellsoft)\n      devLog.debug('selectedJeeva type:', typeof formData.selectedJeeva)\n      devLog.debug('selectedWellsoft isArray:', Array.isArray(formData.selectedWellsoft))\n      devLog.debug('selectedJeeva isArray:', Array.isArray(formData.selectedJeeva))\n\n      if (formData.selectedWellsoft && formData.selectedWellsoft.length > 0) {\n        devLog.debug(' Adding Wellsoft modules to FormData:', formData.selectedWellsoft)\n        formData.selectedWellsoft.forEach((module, index) => {\n          submitData.append(`selectedWellsoft[${index}]`, module)\n          devLog.debug(`  Added selectedWellsoft[${index}]:`, module)\n        })\n      } else {\n        devLog.debug(' No Wellsoft modules to add - array is empty or undefined')\n      }\n\n      if (formData.selectedJeeva && formData.selectedJeeva.length > 0) {\n        devLog.debug(' Adding Jeeva modules to FormData:', formData.selectedJeeva)\n        formData.selectedJeeva.forEach((module, index) => {\n          submitData.append(`selectedJeeva[${index}]`, module)\n          devLog.debug(`  Added selectedJeeva[${index}]:`, module)\n        })\n      } else {\n        devLog.debug(' No Jeeva modules to add - array is empty or undefined')\n      }\n\n      // Add request type (use/revoke)\n      if (formData.wellsoftRequestType) {\n        submitData.append('wellsoftRequestType', formData.wellsoftRequestType)\n      }\n\n      // Add internet purposes\n      if (formData.internetPurposes && formData.internetPurposes.length > 0) {\n        formData.internetPurposes.forEach((purpose, index) => {\n          if (purpose && purpose.trim()) {\n            submitData.append(`internetPurposes[${index}]`, purpose.trim())\n          }\n        })\n      }\n\n      // Determine which services are being requested\n      const requestTypes = []\n      if (formData.selectedWellsoft && formData.selectedWellsoft.length > 0) {\n        requestTypes.push('wellsoft')\n      } else if (formData.selectedWellsoft !== undefined) {\n        console.warn(' Wellsoft array exists but is empty - user may not have selected modules')\n      }\n      if (formData.selectedJeeva && formData.selectedJeeva.length > 0) {\n        requestTypes.push('jeeva_access')\n      } else if (formData.selectedJeeva !== undefined) {\n        console.warn(' Jeeva array exists but is empty - user may not have selected modules')\n      }\n      if (\n        formData.internetPurposes &&\n        formData.internetPurposes.some((purpose) => purpose && purpose.trim())\n      ) {\n        requestTypes.push('internet_access_request')\n      }\n\n      // Add request types - ensure proper format expected by backend\n      if (requestTypes.length > 0) {\n        requestTypes.forEach((type, index) => {\n          submitData.append(`request_types[${index}]`, type)\n        })\n      } else {\n        // If no modules or purposes selected, this should be caught by validation\n        console.warn('No request types determined from form data')\n      }\n\n      // Add approval data if provided\n      if (formData.approvals) {\n        // HOD data\n        if (formData.approvals.hod) {\n          if (formData.approvals.hod.name) {\n            submitData.append('hodName', formData.approvals.hod.name)\n          }\n          if (formData.approvals.hod.signature) {\n            submitData.append('hodSignature', formData.approvals.hod.signature)\n          }\n          if (formData.approvals.hod.date) {\n            submitData.append('hodDate', formData.approvals.hod.date)\n          }\n        }\n\n        // Divisional Director data\n        if (formData.approvals.divisionalDirector) {\n          if (formData.approvals.divisionalDirector.name) {\n            submitData.append('divisionalDirectorName', formData.approvals.divisionalDirector.name)\n          }\n          if (formData.approvals.divisionalDirector.signature) {\n            submitData.append(\n              'divisionalDirectorSignature',\n              formData.approvals.divisionalDirector.signature\n            )\n          }\n          if (formData.approvals.divisionalDirector.date) {\n            submitData.append('divisionalDirectorDate', formData.approvals.divisionalDirector.date)\n          }\n        }\n\n        // ICT Director data\n        if (formData.approvals.directorICT) {\n          if (formData.approvals.directorICT.name) {\n            submitData.append('ictDirectorName', formData.approvals.directorICT.name)\n          }\n          if (formData.approvals.directorICT.signature) {\n            submitData.append('ictDirectorSignature', formData.approvals.directorICT.signature)\n          }\n          if (formData.approvals.directorICT.date) {\n            submitData.append('ictDirectorDate', formData.approvals.directorICT.date)\n          }\n        }\n      }\n\n      // Add implementation data if provided\n      if (formData.implementation) {\n        // Head IT data\n        if (formData.implementation.headIT) {\n          if (formData.implementation.headIT.name) {\n            submitData.append('headITName', formData.implementation.headIT.name)\n          }\n          if (formData.implementation.headIT.signature) {\n            submitData.append('headITSignature', formData.implementation.headIT.signature)\n          }\n          if (formData.implementation.headIT.date) {\n            submitData.append('headITDate', formData.implementation.headIT.date)\n          }\n        }\n\n        // ICT Officer data\n        if (formData.implementation.ictOfficer) {\n          if (formData.implementation.ictOfficer.name) {\n            submitData.append('ictOfficerName', formData.implementation.ictOfficer.name)\n          }\n          if (formData.implementation.ictOfficer.signature) {\n            submitData.append('ictOfficerSignature', formData.implementation.ictOfficer.signature)\n          }\n          if (formData.implementation.ictOfficer.date) {\n            submitData.append('ictOfficerDate', formData.implementation.ictOfficer.date)\n          }\n        }\n      }\n\n      // Add implementation comments if provided\n      if (formData.comments) {\n        submitData.append('implementationComments', formData.comments)\n      }\n\n      // Debug: Log FormData contents\n      devLog.debug('FormData contents:')\n      for (let [key, value] of submitData.entries()) {\n        devLog.debug(`${key}:`, value)\n      }\n\n      const response = await apiClient.post('/both-service-form', submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n\n      if (response.data && response.data.success) {\n        devLog.debug(' Combined access request submitted successfully:', response.data.data?.id)\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message,\n          details: response.data.details\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to submit combined access request')\n      }\n    } catch (error) {\n      devLog.error(' Error submitting combined access request:', error)\n\n      // Handle validation errors\n      if (error.response?.status === 422) {\n        return {\n          success: false,\n          error: 'Validation failed',\n          errors: error.response.data.errors || {},\n          message: error.response.data.message || 'Please check the form and try again'\n        }\n      }\n\n      return {\n        success: false,\n        error:\n          error.response?.data?.message ||\n          error.message ||\n          'Failed to submit combined access request',\n        message: error.response?.data?.message || 'An error occurred while submitting your request'\n      }\n    }\n  }\n\n  /**\n   * Get user information for form pre-population\n   * @returns {Promise<Object>} Response with user data\n   */\n  async getUserInfo() {\n    try {\n      devLog.debug(' Fetching user info for form pre-population...')\n\n      const response = await apiClient.get('/both-service-form/user/info')\n\n      if (response.data && response.data.success) {\n        devLog.debug(' User info retrieved successfully')\n        return {\n          success: true,\n          data: response.data.data\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to retrieve user information')\n      }\n    } catch (error) {\n      devLog.error(' Error fetching user info:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message || error.message || 'Failed to retrieve user information',\n        data: null\n      }\n    }\n  }\n\n  /**\n   * Get available departments\n   * @returns {Promise<Object>} Response with departments list\n   */\n  async getDepartments() {\n    try {\n      devLog.debug(' Fetching departments...')\n\n      const response = await apiClient.get('/both-service-form/departments/list')\n\n      if (response.data && response.data.success) {\n        devLog.debug(' Departments retrieved successfully:', response.data.data?.length || 0)\n        return {\n          success: true,\n          data: response.data.data\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to retrieve departments')\n      }\n    } catch (error) {\n      devLog.error(' Error fetching departments:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to retrieve departments',\n        data: []\n      }\n    }\n  }\n\n  /**\n   * Get a specific combined access request by ID\n   * @param {number} requestId - ID of the request to retrieve\n   * @returns {Promise<Object>} Response with request data\n   */\n  async getRequest(requestId) {\n    try {\n      devLog.debug(' Fetching combined access request:', requestId)\n\n      const response = await apiClient.get(`/both-service-form/${requestId}`)\n\n      if (response.data && response.data.success) {\n        devLog.debug(' Combined access request retrieved successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          meta: response.data.meta\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to retrieve request')\n      }\n    } catch (error) {\n      devLog.error(' Error fetching combined access request:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to retrieve request',\n        message: error.response?.data?.message || 'Could not load request details'\n      }\n    }\n  }\n\n  /**\n   * Update comments/fields for an existing request (simple JSON PUT)\n   */\n  async updateComments(requestId, payload) {\n    try {\n      // Legacy endpoint (may not exist). Kept for backwards compatibility.\n      const res = await apiClient.post(`/both-service-form/${requestId}/update`, payload, {\n        headers: { 'Content-Type': 'application/json' }\n      })\n      if (res.data?.success) {\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to update request comments')\n    } catch (error) {\n      return {\n        success: false,\n        error:\n          error.response?.data?.message || error.message || 'Failed to update request comments',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Best-practice, role-aware comment save using existing role endpoints where possible,\n   * with graceful fallback to a generic comment route if available.\n   */\n  async saveRoleCommentSmart(requestId, { role, comment, name }) {\n    const r = (role || '').toLowerCase().replace(/[\\s-]+/g, '_')\n\n    // Build prioritized attempts per role\n    const attempts = []\n\n    if (r === 'divisional_director') {\n      attempts.push(\n        // Divisional responds to ICT Director recommendations\n        {\n          url: `/divisional/ict-director-recommendations/${requestId}/respond`,\n          data: { divisional_comments: comment, comments: comment, divisional_name: name }\n        },\n        // Divisional combined access approval endpoint (accept comments only)\n        {\n          url: `/divisional/combined-access-requests/${requestId}/approve`,\n          data: { divisional_comments: comment, comments: comment, divisional_name: name }\n        }\n      )\n    } else if (r === 'ict_director' || r === 'dict') {\n      attempts.push({\n        // ICT Director combined access approval endpoint\n        url: `/ict-director/combined-access-requests/${requestId}/approve`,\n        data: {\n          dict_comments: comment,\n          ict_director_comments: comment,\n          comments: comment,\n          dict_name: name\n        }\n      })\n    } else if (r === 'head_of_department' || r === 'hod' || r === 'head_department') {\n      attempts.push({\n        url: `/hod/combined-access-requests/${requestId}/approve`,\n        data: { hod_comments: comment, comments: comment, hod_name: name }\n      })\n    } else if (r === 'head_it' || r === 'head_of_it' || r === 'it_head' || r === 'ict_head') {\n      attempts.push({\n        url: `/head-of-it/requests/${requestId}/approve`,\n        data: { head_it_comments: comment, comments: comment, head_it_name: name }\n      })\n    }\n\n    // Note: No generic fallback to /both-service-form/:id/update because the controller lacks an update method in some deployments.\n    // We intentionally avoid that route to prevent 500 errors.\n\n    // Try each attempt until one succeeds (HTTP 200 with success true or missing flag)\n    for (const attempt of attempts) {\n      try {\n        const res = await apiClient.post(attempt.url, attempt.data, {\n          headers: { 'Content-Type': 'application/json' }\n        })\n        const ok = res?.data?.success !== false // treat truthy or missing as success\n        if (ok) {\n          return { success: true, data: res.data?.data, message: res.data?.message }\n        }\n      } catch (e) {\n        // Continue to next attempt\n      }\n    }\n\n    return {\n      success: false,\n      error: 'No available endpoint accepted the comment payload for this role'\n    }\n  }\n\n  /**\n   * Update an existing combined access request (for rejected requests)\n   * @param {number} requestId - ID of the request to update\n   * @param {Object} formData - Updated form data\n   * @returns {Promise<Object>} Response with update result\n   */\n  async updateRequest(requestId, formData) {\n    try {\n      devLog.debug(' Updating combined access request:', requestId, formData)\n\n      // Create FormData for multipart/form-data submission (same as submitCombinedRequest)\n      const submitData = new FormData()\n\n      // Add personal information\n      if (formData.shared) {\n        submitData.append('pf_number', formData.shared.pfNumber || '')\n        submitData.append('staff_name', formData.shared.staffName || '')\n        submitData.append('department', formData.shared.department || '')\n        submitData.append('phone_number', formData.shared.phone || '')\n      }\n\n      // Add signature file if provided (optional for updates)\n      if (formData.signature) {\n        submitData.append('signature', formData.signature)\n      }\n\n      // Add module selections\n      if (formData.selectedWellsoft && formData.selectedWellsoft.length > 0) {\n        formData.selectedWellsoft.forEach((module, index) => {\n          submitData.append(`selectedWellsoft[${index}]`, module)\n        })\n      }\n\n      if (formData.selectedJeeva && formData.selectedJeeva.length > 0) {\n        formData.selectedJeeva.forEach((module, index) => {\n          submitData.append(`selectedJeeva[${index}]`, module)\n        })\n      }\n\n      // Add request type (use/revoke)\n      if (formData.wellsoftRequestType) {\n        submitData.append('wellsoftRequestType', formData.wellsoftRequestType)\n      }\n\n      // Add internet purposes\n      if (formData.internetPurposes && formData.internetPurposes.length > 0) {\n        formData.internetPurposes.forEach((purpose, index) => {\n          if (purpose && purpose.trim()) {\n            submitData.append(`internetPurposes[${index}]`, purpose.trim())\n          }\n        })\n      }\n\n      // Determine which services are being requested\n      const requestTypes = []\n      if (formData.selectedWellsoft && formData.selectedWellsoft.length > 0) {\n        requestTypes.push('wellsoft')\n      }\n      if (formData.selectedJeeva && formData.selectedJeeva.length > 0) {\n        requestTypes.push('jeeva_access')\n      }\n      if (\n        formData.internetPurposes &&\n        formData.internetPurposes.some((purpose) => purpose && purpose.trim())\n      ) {\n        requestTypes.push('internet_access_request')\n      }\n\n      // Add request types\n      requestTypes.forEach((type, index) => {\n        submitData.append(`request_types[${index}]`, type)\n      })\n\n      // Debug: Log FormData contents\n      devLog.debug('Update FormData contents:')\n      for (let [key, value] of submitData.entries()) {\n        devLog.debug(`${key}:`, value)\n      }\n\n      // Use POST with method spoofing for multipart/form-data\n      const response = await apiClient.post(`/both-service-form/${requestId}/update`, submitData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n\n      if (response.data && response.data.success) {\n        devLog.debug(' Combined access request updated successfully:', requestId)\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message,\n          details: response.data.details\n        }\n      } else {\n        throw new Error(response.data?.message || 'Failed to update combined access request')\n      }\n    } catch (error) {\n      devLog.error(' Error updating combined access request:', error)\n\n      // Handle validation errors\n      if (error.response?.status === 422) {\n        return {\n          success: false,\n          error: 'Validation failed',\n          errors: error.response.data.errors || {},\n          message: error.response.data.message || 'Please check the form and try again'\n        }\n      }\n\n      return {\n        success: false,\n        error:\n          error.response?.data?.message ||\n          error.message ||\n          'Failed to update combined access request',\n        message: error.response?.data?.message || 'An error occurred while updating your request'\n      }\n    }\n  }\n\n  /**\n   * HOD approves a module request for an existing user_access record\n   * Sends HOD signature, selected modules, and request intent (use/revoke)\n   */\n  async hodApproveModuleRequest(requestId, payload) {\n    try {\n      devLog.debug(\n        ' HOD approving module request via BothServiceFormController:',\n        requestId,\n        payload\n      )\n\n      // Build JSON payload (digital signature only)\n      const hodComments = payload.hodComments || payload.comments || ''\n      const wellsoft = Array.isArray(payload.selectedWellsoft) ? payload.selectedWellsoft : []\n      const jeeva = Array.isArray(payload.selectedJeeva) ? payload.selectedJeeva : []\n\n      const data = {\n        hod_name: payload.hodName || '',\n        approved_date: payload.approvedDate || new Date().toISOString().slice(0, 10),\n        comments: hodComments,\n        access_type: payload.accessType || 'permanent',\n        temporary_until:\n          payload.accessType === 'temporary' && payload.temporaryUntil\n            ? payload.temporaryUntil\n            : null,\n        wellsoft_modules_selected: wellsoft,\n        jeeva_modules_selected: jeeva,\n        module_requested_for: payload.moduleRequestedFor || undefined\n      }\n\n      // POST to HOD approve endpoint under both-service-form\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/hod-approve`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' HOD approval saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save HOD approval')\n    } catch (error) {\n      devLog.error(' Error in hodApproveModuleRequest:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to save HOD approval',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Divisional Director approves a user access request\n   * @param {number} requestId - ID of the request to approve\n   * @param {Object} payload - Approval data including signature and details\n   * @returns {Promise<Object>} Response with approval result\n   */\n  async divisionalDirectorApprove(requestId, payload) {\n    try {\n      devLog.debug(' Divisional Director approving request:', requestId, payload)\n\n      // Build JSON payload (digital signature only)\n      const data = {\n        divisional_director_name: payload.divisionalDirectorName || '',\n        approved_date: payload.approvedDate || new Date().toISOString().slice(0, 10),\n        comments: payload.comments || ''\n      }\n\n      // POST to Divisional Director approve endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/divisional-approve`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' Divisional Director approval saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save Divisional Director approval')\n    } catch (error) {\n      devLog.error(' Error in divisionalDirectorApprove:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message ||\n          error.message ||\n          'Failed to save Divisional Director approval',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Divisional Director rejects a user access request\n   * @param {number} requestId - ID of the request to reject\n   * @param {Object} payload - Rejection data including reason\n   * @returns {Promise<Object>} Response with rejection result\n   */\n  async divisionalDirectorReject(requestId, payload) {\n    try {\n      devLog.debug(' Divisional Director rejecting request:', requestId, payload)\n\n      const data = {\n        divisional_director_name: payload.divisionalDirectorName || '',\n        rejection_reason: payload.rejectionReason || '',\n        rejection_date: payload.rejectionDate || new Date().toISOString().slice(0, 10)\n      }\n\n      // POST to Divisional Director reject endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/divisional-reject`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' Divisional Director rejection saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save Divisional Director rejection')\n    } catch (error) {\n      devLog.error(' Error in divisionalDirectorReject:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message ||\n          error.message ||\n          'Failed to save Divisional Director rejection',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * ICT Director approves a user access request\n   * @param {number} requestId - ID of the request to approve\n   * @param {Object} payload - Approval data including signature and details\n   * @returns {Promise<Object>} Response with approval result\n   */\n  async ictDirectorApprove(requestId, payload) {\n    try {\n      devLog.debug(' ICT Director approving request:', requestId, payload)\n\n      // Build JSON payload (digital signature only)\n      const data = {\n        ict_director_name: payload.ictDirectorName || '',\n        approved_date: payload.approvedDate || new Date().toISOString().slice(0, 10),\n        comments: payload.comments || ''\n      }\n\n      // POST to ICT Director approve endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/ict-director-approve`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' ICT Director approval saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save ICT Director approval')\n    } catch (error) {\n      devLog.error(' Error in ictDirectorApprove:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message || error.message || 'Failed to save ICT Director approval',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * ICT Director rejects a user access request\n   * @param {number} requestId - ID of the request to reject\n   * @param {Object} payload - Rejection data including reason\n   * @returns {Promise<Object>} Response with rejection result\n   */\n  async ictDirectorReject(requestId, payload) {\n    try {\n      devLog.debug(' ICT Director rejecting request:', requestId, payload)\n\n      const data = {\n        ict_director_name: payload.ictDirectorName || '',\n        rejection_reason: payload.rejectionReason || '',\n        rejection_date: payload.rejectionDate || new Date().toISOString().slice(0, 10)\n      }\n\n      // POST to ICT Director reject endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/ict-director-reject`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' ICT Director rejection saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save ICT Director rejection')\n    } catch (error) {\n      devLog.error(' Error in ictDirectorReject:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message || error.message || 'Failed to save ICT Director rejection',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Head IT approves a user access request\n   * @param {number} requestId - ID of the request to approve\n   * @param {Object} payload - Approval data including signature and details\n   * @returns {Promise<Object>} Response with approval result\n   */\n  async headItApprove(requestId, payload) {\n    try {\n      devLog.debug(' Head IT approving request:', requestId, payload)\n\n      // Build JSON payload (digital signature only)\n      const data = {\n        head_it_name: payload.headItName || '',\n        approved_date: payload.approvedDate || new Date().toISOString().slice(0, 10),\n        comments: payload.comments || ''\n      }\n\n      // POST to Head IT approve endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/head-of-it-approve`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' Head IT approval saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save Head IT approval')\n    } catch (error) {\n      devLog.error(' Error in headItApprove:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to save Head IT approval',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Head IT rejects a user access request\n   * @param {number} requestId - ID of the request to reject\n   * @param {Object} payload - Rejection data including reason\n   * @returns {Promise<Object>} Response with rejection result\n   */\n  async headItReject(requestId, payload) {\n    try {\n      devLog.debug(' Head IT rejecting request:', requestId, payload)\n\n      const data = {\n        head_it_name: payload.headItName || '',\n        rejection_reason: payload.rejectionReason || '',\n        rejection_date: payload.rejectionDate || new Date().toISOString().slice(0, 10)\n      }\n\n      // POST to Head IT reject endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/head-it-reject`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' Head IT rejection saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save Head IT rejection')\n    } catch (error) {\n      devLog.error(' Error in headItReject:', error)\n      return {\n        success: false,\n        error: error.response?.data?.message || error.message || 'Failed to save Head IT rejection',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * ICT Officer approves/implements a user access request\n   * @param {number} requestId - ID of the request to implement\n   * @param {Object} payload - Implementation data including signature and details\n   * @returns {Promise<Object>} Response with implementation result\n   */\n  async ictOfficerApprove(requestId, payload) {\n    try {\n      devLog.debug(' ICT Officer implementing request:', requestId, payload)\n\n      // Build JSON payload (digital signature only)\n      const data = {\n        ict_officer_name: payload.ict_officer_name || '',\n        approved_date:\n          payload.approved_date ||\n          payload.ict_officer_date ||\n          new Date().toISOString().slice(0, 10),\n        comments: payload.comments || payload.ict_officer_comments || '',\n        status: payload.status || payload.ict_officer_status || 'implemented'\n      }\n\n      // POST to ICT Officer approve endpoint\n      const res = await apiClient.post(\n        `/both-service-form/module-requests/${requestId}/ict-officer-approve`,\n        data\n      )\n\n      if (res.data?.success) {\n        devLog.debug(' ICT Officer implementation saved successfully:', res.data)\n        return { success: true, data: res.data.data, message: res.data.message }\n      }\n      throw new Error(res.data?.message || 'Failed to save ICT Officer implementation')\n    } catch (error) {\n      devLog.error(' Error in ictOfficerApprove:', error)\n      return {\n        success: false,\n        error:\n          error.response?.data?.message ||\n          error.message ||\n          'Failed to save ICT Officer implementation',\n        errors: error.response?.data?.errors || null\n      }\n    }\n  }\n\n  /**\n   * Validate form data before submission\n   * @param {Object} formData - Form data to validate\n   * @returns {Object} Validation result\n   */\n  validateFormData(formData) {\n    const errors = []\n\n    // Check required personal information\n    if (!formData.shared?.pfNumber || formData.shared.pfNumber.trim() === '') {\n      errors.push('PF Number is required')\n    }\n\n    if (!formData.shared?.staffName || formData.shared.staffName.trim() === '') {\n      errors.push('Staff Name is required')\n    }\n\n    if (!formData.shared?.department || formData.shared.department.trim() === '') {\n      errors.push('Department is required')\n    }\n\n    if (!formData.shared?.phone || formData.shared.phone.trim() === '') {\n      errors.push('Phone number is required')\n    }\n\n    // Check if signature is provided\n    if (!formData.signature) {\n      errors.push('Digital signature is required')\n    }\n\n    // Check service-specific validations\n    const hasWellsoft = formData.selectedWellsoft && formData.selectedWellsoft.length > 0\n    const hasJeeva = formData.selectedJeeva && formData.selectedJeeva.length > 0\n    const hasInternet =\n      formData.internetPurposes &&\n      formData.internetPurposes.some((purpose) => purpose && purpose.trim())\n\n    if (!hasWellsoft && !hasJeeva && !hasInternet) {\n      errors.push(\n        'Please select at least one service (Wellsoft modules, Jeeva modules, or Internet access)'\n      )\n    }\n\n    // If Wellsoft is being requested (based on having Wellsoft modules selected), ensure at least 1 module\n    if (hasWellsoft && formData.selectedWellsoft.length === 0) {\n      errors.push('Please select at least 1 Wellsoft module')\n    }\n\n    // If Jeeva is being requested (based on having Jeeva modules selected), ensure at least 1 module\n    if (hasJeeva && formData.selectedJeeva.length === 0) {\n      errors.push('Please select at least 1 Jeeva module')\n    }\n\n    // Check module requested for if modules are selected\n    if ((hasWellsoft || hasJeeva) && !formData.wellsoftRequestType) {\n      errors.push('Please select whether you want to Use or Revoke access')\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors: errors\n    }\n  }\n}\n\nexport default new BothServiceFormService()\n","import { render } from \"./both-service-form.vue?vue&type=template&id=5bf52c48&scoped=true\"\nimport script from \"./both-service-form.vue?vue&type=script&lang=js\"\nexport * from \"./both-service-form.vue?vue&type=script&lang=js\"\n\nimport \"./both-service-form.vue?vue&type=style&index=0&id=5bf52c48&scoped=true&lang=css\"\nimport \"./both-service-form.vue?vue&type=style&index=1&id=5bf52c48&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bf52c48\"]])\n\nexport default __exports__","<template>\n  <footer\n    class=\"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative\"\n    style=\"position: relative; z-index: 1; margin-top: auto\"\n  >\n    <div class=\"flex flex-col md:flex-row justify-between items-center\">\n      <div class=\"text-base text-blue-100 flex items-center space-x-2\">\n        <div\n          class=\"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40\"\n        >\n          <i class=\"fas fa-hospital text-blue-300 text-sm\"></i>\n        </div>\n        <p class=\"font-medium\">\n          &copy; {{ currentYear }} Muhimbili National Hospital. All rights reserved.\n        </p>\n      </div>\n    </div>\n  </footer>\n</template>\n\n<script>\n  export default {\n    name: 'AppFooter',\n    computed: {\n      currentYear() {\n        return new Date().getFullYear()\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /* Footer specific styles */\n  footer {\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n  }\n\n  /* Icon hover effects */\n  .w-6.h-6:hover {\n    transform: scale(1.1);\n    transition: transform 0.2s ease;\n  }\n\n  /* Text hover effects */\n  p:hover {\n    color: rgba(219, 234, 254, 1);\n    transition: color 0.2s ease;\n  }\n\n  /* Responsive adjustments */\n  @media (max-width: 768px) {\n    .flex.flex-col {\n      text-align: center;\n    }\n\n    .space-x-2 {\n      justify-content: center;\n    }\n  }\n\n  /* Animation for icons */\n  @keyframes pulse {\n    0%,\n    100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.7;\n    }\n  }\n\n  .fas {\n    animation: pulse 3s ease-in-out infinite;\n  }\n</style>\n","import { render } from \"./footer.vue?vue&type=template&id=2f68623d&scoped=true\"\nimport script from \"./footer.vue?vue&type=script&lang=js\"\nexport * from \"./footer.vue?vue&type=script&lang=js\"\n\nimport \"./footer.vue?vue&type=style&index=0&id=2f68623d&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2f68623d\"]])\n\nexport default __exports__"],"names":["API_BASE_URL","process","apiClient","axios","create","baseURL","timeout","parseInt","headers","Accept","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","status","method","toString","toLowerCase","url","isLoginRequest","includes","removeItem","window","location","href","authService","login","credentials","post","success","data","message","errors","logout","logoutAll","getCurrentUser","get","getRoleBasedRedirect","getActiveSessions","revokeSession","tokenId","token_id","changePassword","payload","current_password","current","password","new","password_confirmation","confirm","requestPasswordResetByPhone","phone","verifyPasswordResetOtp","otp","resetPasswordWithOtp","SignatureService","constructor","this","api","sign","documentId","res","document_id","list","verify","signatureId","class","$props","show","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","src","alt","_hoisted_6","_hoisted_7","_normalizeClass","forceSpin","style","_hoisted_8","_hoisted_9","_toDisplayString","loadingTitle","_hoisted_10","loadingSubtitle","_hoisted_11","_hoisted_12","departmentTitle","name","props","type","Boolean","default","String","__exports__","render","axiosInstance","URL","searchParams","set","Date","now","pathname","search","e","sep","path","ictOfficerService","getAccessRequests","devLog","debug","getAccessRequestById","requestId","assignTaskToSelf","notes","updateProgress","put","updateImplementationProgress","comments","implementation_status","implementation_comments","ict_officer_started_at","toISOString","ict_officer_implemented_at","cancelTask","reason","completeImplementation","signatureFile","formData","FormData","append","getRequestTimeline","Error","getAccessRequestTimeline","grantAccess","implementation_completed_at","getStatistics","getPendingRequestsCount","resendRequesterSms","requesterPhone","normalizePhone","p","s","trim","keepPlus","startsWith","digits","replace","rawPhone","normalized","request_id","role","notification_type","resend_only","force","force_resend","resend_sms","send_sms","send_sms_to_requester","notification_channel","requester_phone","undefined","requester_phone_number","requester_msisdn","staff_phone","staff_phone_number","recipient_phone","destination_phone","phone_number","msisdn","contact_phone","endpoints","lastError","i","length","console","warn","title","_createVNode","_component_Header","_component_ModernSidebar","$options","isReviewMode","isDivisionalDirectorUser","isHodApprovalEditable","_Fragment","_renderList","key","_normalizeStyle","animationDelay","Math","random","floor","$data","toast","_component_UnifiedLoadingBanner","isLoading","getLoadingTitle","getLoadingSubtitle","isHeadItUser","isIctDirectorUser","displayRequestId","_hoisted_13","_hoisted_14","onSubmit","_cache","_withModifiers","args","_hoisted_15","form","shared","pfNumber","$event","readonly","isFormSectionReadOnly","placeholder","required","_hoisted_17","_hoisted_18","staffName","_hoisted_20","_hoisted_21","department","_hoisted_23","onBlur","normalizePhoneNumber","_hoisted_25","_hoisted_26","hasWellsoftRequest","hasJeevaRequest","_hoisted_27","_hoisted_28","_hoisted_29","wellsoftRequestType","value","disabled","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","hodAccessType","_hoisted_36","hodTemporaryUntil","min","tomorrow","_hoisted_38","_hoisted_39","requestData","access_type","_hoisted_40","_hoisted_41","_hoisted_42","formatDateForInput","temporary_until","_hoisted_43","_hoisted_44","hasSignature","hasUserSigned","loading","_hoisted_45","_component_OrbitingDots","size","_hoisted_46","_hoisted_47","_hoisted_48","signatureDisplay","_hoisted_49","at","_hoisted_50","formatDateTime","_hoisted_51","onClick","signCurrentDocument","isSigning","getUserRole","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","selectedJeeva","_hoisted_60","jeevaModules","module","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","selectedWellsoft","_hoisted_68","wellsoftModules","_hoisted_70","isStrictViewMode","_hoisted_71","_hoisted_72","hasInternetRequest","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_77","filteredInternetPurposes","slice","_hoisted_78","_hoisted_79","_hoisted_76","_hoisted_80","_hoisted_81","hodComments","rows","_hoisted_82","_hoisted_83","_hoisted_84","previousComments","_hoisted_85","isRequestFullyCompleted","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_95","_hoisted_99","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_100","_hoisted_104","_hoisted_107","purpose","index","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_106","_hoisted_105","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","visibleComments","comment","stage","rowClass","_hoisted_116","_hoisted_117","isApproved","isRejected","_hoisted_118","_hoisted_119","_hoisted_120","stageName","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","hasSpecificDate","date","formatCommentDate","_hoisted_125","_hoisted_126","maxVisibleComments","_hoisted_127","_hoisted_128","_hoisted_129","_hoisted_130","roleCommentsDraft","isRoleCommentEditable","roleCommentLabel","showGrantAccessPopup","_hoisted_132","_hoisted_133","_hoisted_134","grantAccessComment","_hoisted_135","_hoisted_136","max","_hoisted_137","grantAccessError","_hoisted_138","_hoisted_139","_hoisted_140","getSmsPreviewText","_hoisted_141","_hoisted_142","_hoisted_143","staff_name","_hoisted_144","cancelGrantAccess","confirmGrantAccess","processing","showHeadItApproveSuccessModal","_hoisted_146","_hoisted_147","_hoisted_148","_hoisted_149","redirectToAssignIctOfficer","_hoisted_150","_hoisted_151","showApprovalSections","id","_hoisted_153","isStageCompleted","_hoisted_154","isHodSkipped","_hoisted_155","_hoisted_156","_hoisted_157","_hoisted_158","approvals","hod","getApprovalNamePlaceholder","getApprovalNameTitle","_hoisted_160","shouldShowHodSignedIndicator","isIctDirectorApprovalActive","getSignedByYouTooltip","_hoisted_162","_hoisted_163","getApprovalDateFormatted","_hoisted_164","shouldShowHodNoSignatureIndicator","_hoisted_165","hodSignaturePreview","_hoisted_166","isImage","_hoisted_167","_hoisted_169","hodSignatureFileName","_hoisted_170","_hoisted_171","_hoisted_172","triggerHodSignatureUpload","clearHodSignature","_hoisted_173","signature_status","_hoisted_174","_hoisted_175","signature_display","_hoisted_176","currentUser","historyHasSigner","_hoisted_177","canUploadHodSignature","_hoisted_179","_hoisted_180","_hoisted_181","_hoisted_182","_hoisted_183","_hoisted_184","_hoisted_185","_hoisted_186","divisional_signature_path","_hoisted_187","_hoisted_188","_hoisted_189","isDivisionalSkipped","_hoisted_190","isDivisionalApprovalEditable","_hoisted_191","_hoisted_192","_hoisted_193","divisionalDirector","_hoisted_195","shouldShowDivisionalSignedIndicator","_hoisted_197","_hoisted_198","_hoisted_199","shouldShowDivisionalNoSignatureIndicator","_hoisted_200","divDirectorSignaturePreview","_hoisted_201","_hoisted_202","_hoisted_203","_hoisted_204","_hoisted_205","_hoisted_207","_hoisted_208","_hoisted_209","_hoisted_210","_hoisted_211","_hoisted_212","_hoisted_213","_hoisted_214","ict_director_signature_path","_hoisted_215","_hoisted_216","_hoisted_217","isIctDirectorApprovalEditable","_hoisted_218","_hoisted_219","_hoisted_220","directorICT","_hoisted_222","shouldShowIctDirectorSignedIndicator","_hoisted_224","_hoisted_225","shouldShowIctDirectorNoSignatureIndicator","_hoisted_226","directorICTSignaturePreview","_hoisted_227","_hoisted_228","_hoisted_229","_hoisted_230","_hoisted_231","_hoisted_233","_hoisted_234","_hoisted_236","_hoisted_237","_hoisted_238","implementationCardClass","implementationHeaderClass","showImplementationSections","implementationGridClass","headItSectionClass","_hoisted_241","head_it_signature_path","_hoisted_242","_hoisted_243","_hoisted_244","isHeadItApprovalEditable","_hoisted_245","_hoisted_246","_hoisted_247","implementation","headIT","_hoisted_249","_hoisted_251","shouldShowHeadITSignedIndicator","_hoisted_253","_hoisted_254","shouldShowHeadITNoSignatureIndicator","_hoisted_255","headITSignaturePreview","_hoisted_256","_hoisted_257","_hoisted_259","_hoisted_260","_hoisted_262","_hoisted_263","_hoisted_264","_hoisted_265","ictOfficerSectionClass","_hoisted_266","ict_officer_signature_path","_hoisted_267","_hoisted_268","_hoisted_269","isIctOfficerApprovalEditable","_hoisted_270","_hoisted_271","_hoisted_272","ictOfficer","_hoisted_274","ictOfficerSignaturePreview","isImplementationAlreadyCompleted","shouldShowIctOfficerSignedIndicator","viewerStage","_hoisted_280","_hoisted_281","shouldShowIctOfficerNoSignatureIndicator","_hoisted_282","_hoisted_275","_hoisted_276","_hoisted_278","_hoisted_283","_hoisted_284","onIctOfficerApproveClick","isImplementationApprovalDisabled","_hoisted_286","_hoisted_287","shouldShowSelectIctOfficerButton","_hoisted_288","_hoisted_289","_hoisted_290","navigateToSelectIctOfficer","canApproveAtStage","showApprovalSuccessCard","actionButtonsClass","_hoisted_291","approveRequest","areApprovalButtonsDisabled","approvalButtonTooltip","_hoisted_293","_hoisted_294","rejectRequest","isSignatureRequiredForApproval","_hoisted_296","_hoisted_297","onReset","fill","viewBox","d","_hoisted_298","isDevelopment","_hoisted_299","_hoisted_300","tabs","map","t","label","join","_hoisted_301","_hoisted_302","activeTab","tryCloseTab","_hoisted_306","toggleAccordion","_hoisted_308","openAccordions","has","_Transition","_hoisted_310","_component_AppFooter","_hoisted_311","_hoisted_312","_hoisted_313","_hoisted_314","closeTab","showRejectionModal","_hoisted_315","_hoisted_316","_hoisted_317","rejectionReason","_hoisted_318","cancelRejectRequest","confirmRejectRequest","_hoisted_320","_hoisted_321","_hoisted_322","_hoisted_323","_hoisted_324","_hoisted_325","getRequesterName","_hoisted_326","closeSuccessModal","showIctOfficerConfirmation","_hoisted_327","_hoisted_328","_hoisted_329","_hoisted_330","_hoisted_331","_hoisted_332","proceedToUserSecurityAccess","BothServiceFormService","submitCombinedRequest","submitData","signature","Array","isArray","forEach","internetPurposes","requestTypes","push","some","entries","details","getUserInfo","getDepartments","getRequest","meta","updateComments","saveRoleCommentSmart","r","attempts","divisional_comments","divisional_name","dict_comments","ict_director_comments","dict_name","hod_comments","hod_name","head_it_comments","head_it_name","attempt","ok","updateRequest","hodApproveModuleRequest","wellsoft","jeeva","hodName","approved_date","approvedDate","accessType","temporaryUntil","wellsoft_modules_selected","jeeva_modules_selected","module_requested_for","moduleRequestedFor","divisionalDirectorApprove","divisional_director_name","divisionalDirectorName","divisionalDirectorReject","rejection_reason","rejection_date","rejectionDate","ictDirectorApprove","ict_director_name","ictDirectorName","ictDirectorReject","headItApprove","headItName","headItReject","ictOfficerApprove","ict_officer_name","ict_officer_date","ict_officer_comments","ict_officer_status","validateFormData","hasWellsoft","hasJeeva","hasInternet","isValid","components","Header","ModernSidebar","OrbitingDots","AppFooter","UnifiedLoadingBanner","inject","authStore","from","useAuthStore","Number","lastAddedCommentMeta","signaturePreview","signatureFileName","hodTemporaryUntilError","divDirectorSignatureFileName","directorICTSignatureFileName","headITSignatureFileName","ictOfficerSignatureFileName","jeevaItemOpen","jeevaItemFocusIndex","jeevaItemOptions","jeevaItemSelections","jeevaRequestType","wellsoftQuery","jeevaQuery","Set","moduleData","lastSignedAt","signatureHistory","loadingRequestData","editableDivisionalDirectorComments","maxVisibleModules","computed","hostname","getRequestId","propId","paramId","$route","params","queryId","query","norm","v","loadedId","backendRef","raw","num","padStart","currentTab","find","filteredWellsoft","q","filter","m","filteredJeeva","setDate","getDate","yyyy","getFullYear","mm","getMonth","dd","staff","requesterName","getTs","signed_at","created_at","timestamp","staffEntry","user_name","sortedAsc","sort","a","b","first","full_name","summaryErrors","rd","hasData","hasPath","signature_path","pathNotEmpty","digitalFlag","digitalSignature","digital_signature","signatureCounts","signatures_count","signature_count","historyHasAny","staffMatch","result","types","request_types","request_type","isWellsoftReadonly","isJeevaReadonly","isInternetReadonly","currentApprovalStage","stageMap","pending","pending_hod","hod_approved","pending_divisional","divisional_approved","pending_ict_director","pending_dict","ict_director_approved","dict_approved","pending_head_it","head_it_approved","pending_ict_officer","implementation_in_progress","implemented","approved","completed","hod_rejected","divisional_rejected","ict_director_rejected","head_it_rejected","ict_officer_rejected","cancelled","stageFromStatus","hod_status","div","divisional_status","dict","ict_director_status","dict_status","head","head_it_status","impl","stageFromStages","rank","divisional","ict_director","head_it","ict_officer","pick","finalStage","queryMode","mode","queryRole","queryReadonly","userRole","hodRoles","hodEditableStatuses","canEdit","isRejectedBackToHod","rejectedStatuses","rejectionDetails","rejectionMap","divisional_rejection_reason","divisional_rejection_date","dict_rejection_reason","dict_rejection_date","head_it_rejection_reason","head_it_rejection_date","ict_officer_rejection_reason","ict_officer_rejection_date","roleCommentOriginal","getExistingRoleComment","roleCommentKey","divisionalRoles","isDivisionalDirectorReadOnly","isIctDirectorReadOnly","ictDirectorRoles","hodStatus","postHodStatuses","readOnlyResult","isHeadItApproved","noIctOfficerAssigned","notCompleted","shouldShow","isPreDictDone","isDictPending","headItRoles","currentStage","ictOfficerRoles","isIctOfficer","currentUserId","isAssignedOfficer","ict_officer_user_id","canImplement","notYetImplemented","getValidIctOfficerDate","approved_at","isNaN","getTime","completedStages","statusBasedCompletion","dateBasedCompletion","hod_approved_at","divisional_approved_at","ict_director_approved_at","dict_approved_at","head_it_approved_at","Object","keys","roleMap","requiresSignature","currentUserName","hasDigital","displayedHodComments","divisionalDirectorComments","divisionalComments","ictDirectorComments","headItComments","ictOfficerComments","stages","icon","color","getComments","hod_date","updated_at","getName","isCompleted","getStatus","divisional_date","dict_date","ict_director_date","head_it_date","ict_officer_approved_at","stageComments","shouldInclude","substring","stageDate","fallbackDate","sortedComments","dateA","dateB","hasPreviousComments","getCalculatedOverallStatus","completedStatuses","hasIctOfficerImplementation","validationErrors","isHodUser","isHodStage","hasModules","hasStageSigned","sig","hod_signature_path","dict_signature_path","hasSig","hasDate","hasName","viewerRole","afterStage","viewerAfter","isHodViewer","hodSelf","isDivisionalDirector","hodSignatureExists","fallbackResult","shouldShowSigned","baseResult","baseClass","paddingClass","hasImplementationDate","hasImplementedStatus","hasSignaturePath","mounted","all","loadModulesWithCaching","tryGetUserFromLocalStorage","tryGetUserFromStore","loadRequestData","setTimeout","viewerRank","watch","handler","syncTabs","deep","isEditable","immediate","populateDivisionalDirectorDateFromHod","isHeadIt","$forceUpdate","newUser","populateBasedOnUserRole","newValue","newRequestData","isHeadItStage","populateApproverName","requestDataLoadForComments","loadRoleCommentDraft","methods","ts","toLocaleString","input","showToast","signatureService","signer","fetchSignatureHistory","catch","today","err","ensureIctDirectorDateAutoFill","$nextTick","atDictStage","empty","n","userName","entry","time","toLocaleTimeString","hour","minute","aliases","divisional_director_comments","tryKeys","k","nested","fdPayload","bothServiceFormService","$router","ref","accessTypes","jeeva_access_request","wellsoft_access_request","internet_access_request","internet_purposes","accessText","base","isLast","highlight","isHighlightedComment","text","CACHE_KEY_WELLSOFT","CACHE_KEY_JEEVA","CACHE_TTL","loadFromCacheOrAPI","async","cacheKey","apiCall","fallbackData","cached","JSON","parse","modules","setItem","stringify","combinedAccessService","getWellsoftModules","getJeevaModules","loadWellsoftModules","loadJeevaModules","isJeevaItemSelected","toggleJeevaItem","sel","firstJeeva","cur","selections","onJeevaItemsKeydown","preventDefault","values","prefix","internet","newTabs","newData","val","component","componentFor","isSelected","approvalType","roleMapping","divisional_director","getExistingApprovalName","user","storeUser","storeRole","user_role","primary_role","roles","rolePriority","userRoleNames","roleObj","priorityRole","firstRole","toggleWellsoft","x","toggleJeeva","selectAll","clearAll","delete","add","split","onAccessTypeChange","hasWellsoftSelected","hasJeevaSelected","hasInternetPurposes","validation","errorMessage","field","clear","timeoutPromise","_","race","getRequestById","ap","pf_number","department_name","triggerHeadItNamePopulationIfNeeded","getSignatureFileName","wellsoftSelected","selected_wellsoft","wellsoft_modules","parsedWellsoft","wellsoftReqType","wellsoft_request_type","wellsoft_type","jeevaSelected","selected_jeeva","jeeva_modules","parsedJeeva","jeevaReqType","jeeva_request_type","jeeva_type","purposes","shouldShowWellsoft","shouldShowJeeva","shouldShowInternet","essentialOk","getApprovalStatus","hod_approval_status","divisional_approval_status","dict_approval_status","head_it_approval_status","ict_approval_status","signaturePath","pop","isDictUser","dictStagePending","errs","approveAsHod","approveAsDivisionalDirector","approveAsIctDirector","approveAsHeadIt","hodDate","setHours","tmp","approvalPromise","flat","updateRoleCommentsLocally","idStr","keepRaw","keepArr","goBackToRequests","divisionalDate","roleComment","goBackToDivisionalRequests","approveDictRequest","rejectDictRequest","isIctDirector","ictDirectorDate","goBackToDictRequests","approveHeadItRequest","rejectHeadItRequest","headItDate","onHeadItApproveSuccess","goBackToHeadItRequests","updateHodApproval","cmt","nowIso","approveIctOfficerImplementation","goToRequestDetails","triggerFileUpload","$refs","signatureInput","click","onSignatureChange","file","target","files","allowedTypes","showNotification","clearSignature","reader","FileReader","onload","readAsDataURL","preview","alert","showSignatureUploadSuccess","roleType","dateMap","approverNameMap","approver","viewerIsStage","viewerName","toLocaleDateString","year","month","day","hodApprovedAt","formattedDate","hodSignatureInput","onHodSignatureChange","triggerDivDirectorSignatureUpload","divDirectorSignatureInput","onDivDirectorSignatureChange","clearDivDirectorSignature","triggerDirectorICTSignatureUpload","directorICTSignatureInput","onDirectorICTSignatureChange","clearDirectorICTSignature","triggerHeadITSignatureUpload","headITSignatureInput","onHeadITSignatureChange","clearHeadITSignature","triggerIctOfficerSignatureUpload","ictOfficerSignatureInput","onIctOfficerSignatureChange","clearIctOfficerSignature","debugAutoPopulation","dateValue","parsedDate","isHeadItEditable","debugHeadItStatus","roleToStageMap","head_of_department","head_department","director_divisional","director_ict","head_of_it","ict_head","it_head","officer_ict","rankForStage","ranks","targetRank","myRank","userData","email","storedUser","normalizedRole","mappedStage","isStageEditable","isApprovalStageEditable","editableMap","currentYear"],"sourceRoot":""}