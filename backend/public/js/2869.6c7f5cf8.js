"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[1075,2869],{1075:function(e,t,a){a.r(t);var r=a(4373);const i="http://127.0.0.1:8000/api";class s{constructor(){this.api=r.A.create({baseURL:i,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.api.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e))}async sign(e){const t=await this.api.post("/documents/sign",{document_id:e});return{success:!0,data:t.data}}async list(e){const t=await this.api.get(`/documents/${e}/signatures`);return{success:!0,data:t.data.data}}async verify(e){const t=await this.api.get(`/signatures/${e}/verify`);return{success:t.data.success,data:t.data}}}t["default"]=new s},8762:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ht}});var r=a(5796);const i={class:"flex flex-col h-screen"},s={class:"flex flex-1 overflow-hidden"},o={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},l={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},u={class:"absolute inset-0"},c={class:"max-w-12xl mx-auto relative z-10"},p={class:"medical-glass-card rounded-t-3xl p-8 mb-0 border-b border-blue-300/30"},m={class:"flex justify-between items-center"},f={class:"text-center flex-1"},g={class:"text-2xl font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay"},h={class:"medical-glass-card rounded-b-3xl overflow-hidden"},b={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-3 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},v={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},x={class:"relative"},w={class:"relative"},k={class:"md:col-span-2"},y={class:"relative"},L=["disabled"],S={value:"",disabled:"",class:"bg-gray-800 text-gray-300"},D=["value"],I={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},C={key:0,class:"fas fa-spinner fa-spin text-blue-300"},T={key:1,class:"fas fa-chevron-down text-blue-300"},N={key:0,class:"mt-2 text-red-400 text-sm flex items-center"},A={class:"md:col-span-2"},R={class:"relative"},E={key:0,class:"w-full px-3 py-3 border-2 border-dashed border-teal-300/40 rounded-lg focus-within:border-teal-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-teal-500/20 min-h-[80px] flex items-center justify-center hover:bg-white/20"},j={class:"text-center"},P=["disabled"],F={key:0,class:"text-xs text-blue-200 mt-1"},O={key:1,class:"w-full px-3 py-3 border-2 border-teal-300/40 rounded-lg bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl min-h-[80px] flex items-center justify-center relative"},q={key:0,class:"text-center"},U=["src"],M={class:"text-xs text-blue-100"},_={key:1,class:"text-center"},H={class:"text-xs text-blue-100"},X={class:"absolute top-1 right-1 flex gap-1"},$={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},V={class:"mb-4"},W={class:"flex justify-center gap-4 mb-3"},z={class:"flex items-center cursor-pointer p-3 border-2 border-blue-300/30 rounded-lg hover:border-blue-400 hover:bg-white/10 transition-all backdrop-blur-sm"},J={class:"flex items-center cursor-pointer p-3 border-2 border-blue-300/30 rounded-lg hover:border-blue-400 hover:bg-white/10 transition-all backdrop-blur-sm"},B={class:"bg-white/15 rounded-lg p-3 max-h-80 border-2 border-blue-300/30 backdrop-blur-sm overflow-y-auto"},G={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1"},Y=["value"],K={class:"text-xs font-medium text-white"},Q={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},Z={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},ee={class:"bg-white/15 rounded-xl p-4 border border-emerald-300/30 backdrop-blur-sm"},te={class:"space-y-3"},ae={class:"relative"},re={key:0,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg focus-within:border-emerald-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center backdrop-blur-sm"},ie={class:"text-center"},se={key:1,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center relative backdrop-blur-sm"},oe={key:0,class:"text-center"},le=["src"],ne={class:"text-xs text-blue-100"},de={key:1,class:"text-center"},ue={class:"text-xs text-blue-100"},ce={class:"absolute top-1 right-1 flex gap-1"},pe={class:"bg-white/15 rounded-xl p-4 border border-emerald-300/30 backdrop-blur-sm"},me={class:"space-y-3"},fe={key:0,class:"mb-4"},ge={class:"flex gap-3 mb-3"},he={class:"flex items-center cursor-pointer p-3 border-2 border-blue-300/30 rounded-lg hover:border-emerald-400 hover:bg-white/10 transition-all backdrop-blur-sm"},be={class:"flex items-center cursor-pointer p-3 border-2 border-blue-300/30 rounded-lg hover:border-red-400 hover:bg-white/10 transition-all backdrop-blur-sm"},ve={key:0,class:"mb-3"},xe={class:"relative"},we={key:0,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg focus-within:border-emerald-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center backdrop-blur-sm"},ke={class:"text-center"},ye={key:1,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center relative backdrop-blur-sm"},Le={key:0,class:"text-center"},Se=["src"],De={class:"text-xs text-blue-100"},Ie={key:1,class:"text-center"},Ce={class:"text-xs text-blue-100"},Te={class:"absolute top-1 right-1 flex gap-1"},Ne={class:"bg-white/15 rounded-xl p-4 border border-emerald-300/30 backdrop-blur-sm"},Ae={class:"space-y-3"},Re={class:"relative"},Ee={key:0,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg focus-within:border-emerald-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center backdrop-blur-sm"},je={class:"text-center"},Pe={key:1,class:"w-full px-2 py-2 border border-emerald-300/30 rounded-lg bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center relative backdrop-blur-sm"},Fe={key:0,class:"text-center"},Oe=["src"],qe={class:"text-xs text-blue-100"},Ue={key:1,class:"text-center"},Me={class:"text-xs text-blue-100"},_e={class:"absolute top-1 right-1 flex gap-1"},He={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},Xe={class:"relative"},$e={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm hover:shadow-xl hover:shadow-blue-500/20 transition-all duration-500 group"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},We={class:"bg-white/15 rounded-xl p-4 border border-purple-300/30 backdrop-blur-sm"},ze={class:"space-y-3"},Je={class:"relative"},Be={key:0,class:"w-full px-2 py-2 border border-purple-300/30 rounded-lg focus-within:border-purple-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center backdrop-blur-sm"},Ge={class:"text-center"},Ye={key:1,class:"w-full px-2 py-2 border border-purple-300/30 rounded-lg bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center relative backdrop-blur-sm"},Ke={key:0,class:"text-center"},Qe=["src"],Ze={class:"text-xs text-blue-100"},et={key:1,class:"text-center"},tt={class:"text-xs text-blue-100"},at={class:"absolute top-1 right-1 flex gap-1"},rt={class:"bg-white/15 rounded-xl p-4 border border-purple-300/30 backdrop-blur-sm"},it={class:"space-y-3"},st={class:"relative"},ot={key:0,class:"w-full px-2 py-2 border border-purple-300/30 rounded-lg focus-within:border-purple-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center backdrop-blur-sm"},lt={class:"text-center"},nt={key:1,class:"w-full px-2 py-2 border border-purple-300/30 rounded-lg bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[50px] flex items-center justify-center relative backdrop-blur-sm"},dt={key:0,class:"text-center"},ut=["src"],ct={class:"text-xs text-blue-100"},pt={key:1,class:"text-center"},mt={class:"text-xs text-blue-100"},ft={class:"absolute top-1 right-1 flex gap-1"},gt={key:0,class:"medical-card bg-gradient-to-r from-emerald-600/25 to-green-600/25 border-2 border-emerald-400/40 p-8 rounded-2xl backdrop-blur-sm hover:shadow-2xl hover:shadow-emerald-500/20 transition-all duration-500 group"},ht={class:"mb-6 p-4 bg-white/10 rounded-xl border border-emerald-300/30"},bt={class:"grid grid-cols-1 md:grid-cols-5 gap-3"},vt={class:"text-center"},xt={class:"text-center"},wt={class:"text-center"},kt={class:"text-center"},yt={class:"text-center"},Lt={class:"flex flex-col sm:flex-row gap-4 justify-center"},St={key:1,class:"border-t-3 border-gray-200 pt-1"},Dt={class:"flex justify-between items-center"};function It(e,t,a,It,Ct,Tt){const Nt=(0,r.g2)("Header"),At=(0,r.g2)("ModernSidebar"),Rt=(0,r.g2)("AppFooter");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(Nt),(0,r.Lk)("div",s,[(0,r.bF)(At),(0,r.Lk)("main",o,[(0,r.Lk)("div",l,[(0,r.Lk)("div",n,[(0,r.Lk)("div",d,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(48,e=>(0,r.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,r.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,r.Lk)("div",u,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(15,e=>(0,r.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,r.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,r.Lk)("i",{class:(0,r.C4)(["fas",["fa-heartbeat","fa-user-md","fa-hospital","fa-stethoscope","fa-plus"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),(0,r.Lk)("div",c,[(0,r.Lk)("div",p,[(0,r.Lk)("div",m,[t[51]||(t[51]=(0,r.Lk)("div",{class:"w-28 h-28 mr-6 transform hover:scale-110 transition-transform duration-300"},[(0,r.Lk)("div",{class:"w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25"},[(0,r.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-18 max-h-18 object-contain"})])],-1)),(0,r.Lk)("div",f,[t[50]||(t[50]=(0,r.Fv)('<h1 class="text-4xl font-bold text-white mb-4 tracking-wide drop-shadow-lg animate-fade-in" data-v-82321898> MUHIMBILI NATIONAL HOSPITAL </h1><div class="relative inline-block mb-4" data-v-82321898><div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-10 py-4 rounded-full text-xl font-bold shadow-2xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-400/60" data-v-82321898><span class="relative z-10 flex items-center gap-2" data-v-82321898><i class="fas fa-database" data-v-82321898></i> JEEVA ACCESS REQUEST </span><div class="absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300" data-v-82321898></div></div></div>',2)),(0,r.Lk)("h2",g,(0,r.v_)(It.isReviewMode?"REQUEST REVIEW - "+(It.requestId||e.$route.params.id||"N/A"):"SYSTEM ACCESS FORM"),1)]),t[52]||(t[52]=(0,r.Lk)("div",{class:"w-28 h-28 ml-6 transform hover:scale-110 transition-transform duration-300"},[(0,r.Lk)("div",{class:"w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25"},[(0,r.Lk)("img",{src:"/assets/images/logo2.png",alt:"Muhimbili Logo",class:"max-w-18 max-h-18 object-contain"})])],-1))])]),(0,r.Lk)("div",h,[(0,r.Lk)("form",{onSubmit:t[49]||(t[49]=(0,r.D$)((...e)=>Tt.submitForm&&Tt.submitForm(...e),["prevent"])),class:(0,r.C4)(["p-6 space-y-4",{"review-mode":It.isReviewMode}])},[(0,r.Lk)("div",b,[t[66]||(t[66]=(0,r.Fv)('<div class="flex items-center space-x-3 mb-4" data-v-82321898><div class="w-10 h-10 bg-gradient-to-br from-teal-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-teal-300/50" data-v-82321898><i class="fas fa-user-md text-white text-lg" data-v-82321898></i></div><h3 class="text-lg font-bold text-white flex items-center" data-v-82321898><i class="fas fa-id-card mr-2 text-teal-300" data-v-82321898></i> Personal Information </h3></div>',1)),(0,r.Lk)("div",v,[(0,r.Lk)("div",null,[t[54]||(t[54]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-1"},[(0,r.eW)(" PF Number "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",x,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Ct.formData.pfNumber=e),type:"text",class:"medical-input w-full px-3 py-3 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-teal-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-teal-500/20",placeholder:"Enter PF Number",required:""},null,512),[[r.Jo,Ct.formData.pfNumber]]),t[53]||(t[53]=(0,r.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-teal-500/10 to-blue-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])]),(0,r.Lk)("div",null,[t[56]||(t[56]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-1"},[(0,r.eW)(" Staff Name "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",w,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>Ct.formData.staffName=e),type:"text",class:"medical-input w-full px-3 py-3 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-teal-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-teal-500/20",placeholder:"Enter full name",required:""},null,512),[[r.Jo,Ct.formData.staffName]]),t[55]||(t[55]=(0,r.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-teal-500/10 to-blue-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])]),(0,r.Lk)("div",k,[t[59]||(t[59]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-1"},[(0,r.eW)(" Department "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",y,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>Ct.formData.department_id=e),class:"medical-input w-full px-3 py-3 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-teal-400 focus:outline-none text-white backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-teal-500/20 appearance-none cursor-pointer",required:"",disabled:It.departmentsLoading},[(0,r.Lk)("option",S,(0,r.v_)(It.departmentsLoading?"Loading departments...":"Select your department"),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(It.departments,e=>((0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id,class:"bg-gray-800 text-white"},(0,r.v_)(e.name)+" "+(0,r.v_)(e.code?`(${e.code})`:""),9,D))),128))],8,L),[[r.u1,Ct.formData.department_id]]),(0,r.Lk)("div",I,[It.departmentsLoading?((0,r.uX)(),(0,r.CE)("i",C)):((0,r.uX)(),(0,r.CE)("i",T))]),t[57]||(t[57]=(0,r.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-teal-500/10 to-blue-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))]),It.departmentsError?((0,r.uX)(),(0,r.CE)("div",N,[t[58]||(t[58]=(0,r.Lk)("i",{class:"fas fa-exclamation-triangle mr-2"},null,-1)),(0,r.eW)(" "+(0,r.v_)(It.departmentsError)+" ",1),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>It.fetchDepartments&&It.fetchDepartments(...e)),class:"ml-2 text-blue-400 hover:text-blue-300 underline",type:"button"}," Retry ")])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",A,[t[65]||(t[65]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-1"},[(0,r.eW)(" Digital Signature "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",R,[Ct.signaturePreview?((0,r.uX)(),(0,r.CE)("div",O,[Tt.isImage(Ct.signaturePreview)?((0,r.uX)(),(0,r.CE)("div",q,[(0,r.Lk)("img",{src:Ct.signaturePreview,alt:"Digital Signature",class:"max-h-[50px] max-w-full object-contain mx-auto mb-1"},null,8,U),(0,r.Lk)("p",M,(0,r.v_)(Ct.signatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",_,[t[62]||(t[62]=(0,r.Lk)("div",{class:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-lg"})],-1)),(0,r.Lk)("p",H,(0,r.v_)(Ct.signatureFileName),1)])),(0,r.Lk)("div",X,[(0,r.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>Tt.triggerFileUpload&&Tt.triggerFileUpload(...e)),class:"w-6 h-6 bg-teal-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-teal-600 transition-colors duration-200 shadow-lg",title:"Change signature"},[...t[63]||(t[63]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[6]||(t[6]=(...e)=>Tt.clearSignature&&Tt.clearSignature(...e)),class:"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200 shadow-lg",title:"Remove signature"},[...t[64]||(t[64]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",E,[(0,r.Lk)("div",j,[t[61]||(t[61]=(0,r.Lk)("div",{class:"mb-2"},[(0,r.Lk)("i",{class:"fas fa-signature text-teal-300 text-2xl mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature on file")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>Tt.signCurrentDocument&&Tt.signCurrentDocument(...e)),disabled:Ct.isSigning||!It.isReviewMode,class:"px-3 py-1.5 bg-gradient-to-r from-teal-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-teal-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-teal-400/50"},[...t[60]||(t[60]=[(0,r.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,r.eW)(" Sign Document ",-1)])],8,P),It.isReviewMode?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("p",F," Available after submitting the request "))])])),(0,r.Lk)("input",{ref:"signatureInput",type:"file",accept:"image/png,image/jpeg,image/jpg,application/pdf",onChange:t[7]||(t[7]=(...e)=>Tt.onSignatureChange&&Tt.onSignatureChange(...e)),class:"hidden"},null,544)])])])]),(0,r.Lk)("div",$,[t[71]||(t[71]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-4" data-v-82321898><div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50" data-v-82321898><i class="fas fa-database text-white text-xl" data-v-82321898></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-82321898><i class="fas fa-list-alt mr-2 text-blue-300" data-v-82321898></i> Module Request </h3></div>',1)),(0,r.Lk)("div",V,[t[69]||(t[69]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2 text-center"},[(0,r.eW)(" Module Requested for "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",W,[(0,r.Lk)("label",z,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>Ct.formData.requestType=e),type:"radio",value:"use",class:"w-4 h-4 text-blue-600 border-blue-300 focus:ring-blue-500 mr-2 module-request-editable"},null,512),[[r.XL,Ct.formData.requestType]]),t[67]||(t[67]=(0,r.Lk)("span",{class:"font-medium text-white"},"Use",-1))]),(0,r.Lk)("label",J,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>Ct.formData.requestType=e),type:"radio",value:"revoke",class:"w-4 h-4 text-red-600 border-blue-300 focus:ring-red-500 mr-2 module-request-editable"},null,512),[[r.XL,Ct.formData.requestType]]),t[68]||(t[68]=(0,r.Lk)("span",{class:"font-medium text-white"},"Revoke",-1))])])]),(0,r.Lk)("div",null,[t[70]||(t[70]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2"},[(0,r.eW)(" Select Modules "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",B,[(0,r.Lk)("div",G,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(Ct.modules,e=>((0,r.uX)(),(0,r.CE)("label",{key:e.id,class:"flex items-center p-1.5 hover:bg-white/20 rounded-md cursor-pointer transition-all duration-300 border border-blue-300/20 hover:border-blue-400/40"},[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>Ct.formData.selectedModules=e),type:"checkbox",value:e.id,class:"w-3 h-3 text-blue-600 border-blue-300 rounded focus:ring-blue-500 mr-1.5 module-request-editable"},null,8,Y),[[r.lH,Ct.formData.selectedModules]]),(0,r.Lk)("span",K,(0,r.v_)(e.name),1)]))),128))])])])]),(0,r.Lk)("div",Q,[t[94]||(t[94]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-4" data-v-82321898><div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50" data-v-82321898><i class="fas fa-check-circle text-white text-xl" data-v-82321898></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-82321898><i class="fas fa-stamp mr-2 text-blue-300" data-v-82321898></i> Approval </h3></div>',1)),(0,r.Lk)("div",Z,[(0,r.Lk)("div",ee,[t[77]||(t[77]=(0,r.Lk)("h5",{class:"font-bold text-white mb-3 text-center text-sm"},"HoD/BM",-1)),(0,r.Lk)("div",te,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>Ct.formData.approvals.hod.name=e),type:"text",placeholder:"Name",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm hod-approval-editable"},null,512),[[r.Jo,Ct.formData.approvals.hod.name]]),(0,r.Lk)("div",ae,[Ct.hodSignaturePreview?((0,r.uX)(),(0,r.CE)("div",se,[Tt.isImage(Ct.hodSignaturePreview)?((0,r.uX)(),(0,r.CE)("div",oe,[(0,r.Lk)("img",{src:Ct.hodSignaturePreview,alt:"HOD Signature",class:"max-h-[35px] max-w-full object-contain mx-auto mb-1"},null,8,le),(0,r.Lk)("p",ne,(0,r.v_)(Ct.hodSignatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",de,[t[74]||(t[74]=(0,r.Lk)("div",{class:"w-8 h-8 bg-red-500/20 rounded flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-sm"})],-1)),(0,r.Lk)("p",ue,(0,r.v_)(Ct.hodSignatureFileName),1)])),(0,r.Lk)("div",ce,[(0,r.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>Tt.triggerHodSignatureUpload&&Tt.triggerHodSignatureUpload(...e)),class:"w-5 h-5 bg-emerald-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-emerald-600 transition-colors duration-200",title:"Change signature"},[...t[75]||(t[75]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[14]||(t[14]=(...e)=>Tt.clearHodSignature&&Tt.clearHodSignature(...e)),class:"w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200",title:"Remove signature"},[...t[76]||(t[76]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",re,[(0,r.Lk)("div",ie,[t[73]||(t[73]=(0,r.Lk)("div",{class:"mb-1"},[(0,r.Lk)("i",{class:"fas fa-signature text-emerald-300 text-sm mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>Tt.triggerHodSignatureUpload&&Tt.triggerHodSignatureUpload(...e)),class:"px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[72]||(t[72]=[(0,r.Lk)("i",{class:"fas fa-upload"},null,-1),(0,r.eW)(" Press to load your signature ",-1)])])])])),(0,r.Lk)("input",{ref:"hodSignatureInput",type:"file",accept:"image/png,image/jpeg,application/pdf",onChange:t[15]||(t[15]=(...e)=>Tt.onHodSignatureChange&&Tt.onHodSignatureChange(...e)),class:"hidden"},null,544)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>Ct.formData.approvals.hod.date=e),type:"date",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white backdrop-blur-sm hod-approval-editable"},null,512),[[r.Jo,Ct.formData.approvals.hod.date]])])]),(0,r.Lk)("div",pe,[t[87]||(t[87]=(0,r.Lk)("h5",{class:"font-bold text-white mb-3 text-center text-sm"}," Divisional Director ",-1)),(0,r.Lk)("div",me,[It.userRole===It.ROLES.DIVISIONAL_DIRECTOR&&Tt.canApproveAtStage()?((0,r.uX)(),(0,r.CE)("div",fe,[t[81]||(t[81]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2"},[(0,r.eW)(" Decision "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.Lk)("div",ge,[(0,r.Lk)("label",he,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>Ct.formData.approvals.divisionalDirector.decision=e),type:"radio",value:"approve",class:"w-4 h-4 text-emerald-600 border-blue-300 focus:ring-emerald-500 mr-2 divisional-approval-editable"},null,512),[[r.XL,Ct.formData.approvals.divisionalDirector.decision]]),t[78]||(t[78]=(0,r.Lk)("span",{class:"font-medium text-white text-sm"},"Approve",-1))]),(0,r.Lk)("label",be,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>Ct.formData.approvals.divisionalDirector.decision=e),type:"radio",value:"reject",class:"w-4 h-4 text-red-600 border-blue-300 focus:ring-red-500 mr-2 divisional-approval-editable"},null,512),[[r.XL,Ct.formData.approvals.divisionalDirector.decision]]),t[79]||(t[79]=(0,r.Lk)("span",{class:"font-medium text-white text-sm"},"Reject",-1))])]),"reject"===Ct.formData.approvals.divisionalDirector.decision?((0,r.uX)(),(0,r.CE)("div",ve,[t[80]||(t[80]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-2"},[(0,r.eW)(" Reason for Rejection "),(0,r.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[19]||(t[19]=e=>Ct.formData.approvals.divisionalDirector.rejectionComments=e),rows:"3",class:"w-full px-3 py-2 border border-red-300/30 rounded-lg focus:border-red-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm resize-y divisional-comments-editable",placeholder:"Please provide a detailed reason for rejecting this request...",required:""},null,512),[[r.Jo,Ct.formData.approvals.divisionalDirector.rejectionComments]])])):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>Ct.formData.approvals.divisionalDirector.name=e),type:"text",placeholder:"Name",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm divisional-approval-editable"},null,512),[[r.Jo,Ct.formData.approvals.divisionalDirector.name]]),(0,r.Lk)("div",xe,[Ct.divDirectorSignaturePreview?((0,r.uX)(),(0,r.CE)("div",ye,[Tt.isImage(Ct.divDirectorSignaturePreview)?((0,r.uX)(),(0,r.CE)("div",Le,[(0,r.Lk)("img",{src:Ct.divDirectorSignaturePreview,alt:"Divisional Director Signature",class:"max-h-[35px] max-w-full object-contain mx-auto mb-1"},null,8,Se),(0,r.Lk)("p",De,(0,r.v_)(Ct.divDirectorSignatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",Ie,[t[84]||(t[84]=(0,r.Lk)("div",{class:"w-8 h-8 bg-red-500/20 rounded flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-sm"})],-1)),(0,r.Lk)("p",Ce,(0,r.v_)(Ct.divDirectorSignatureFileName),1)])),(0,r.Lk)("div",Te,[(0,r.Lk)("button",{type:"button",onClick:t[22]||(t[22]=(...e)=>Tt.triggerDivDirectorSignatureUpload&&Tt.triggerDivDirectorSignatureUpload(...e)),class:"w-5 h-5 bg-emerald-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-emerald-600 transition-colors duration-200",title:"Change signature"},[...t[85]||(t[85]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[23]||(t[23]=(...e)=>Tt.clearDivDirectorSignature&&Tt.clearDivDirectorSignature(...e)),class:"w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200",title:"Remove signature"},[...t[86]||(t[86]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",we,[(0,r.Lk)("div",ke,[t[83]||(t[83]=(0,r.Lk)("div",{class:"mb-1"},[(0,r.Lk)("i",{class:"fas fa-signature text-emerald-300 text-sm mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[21]||(t[21]=(...e)=>Tt.triggerDivDirectorSignatureUpload&&Tt.triggerDivDirectorSignatureUpload(...e)),class:"px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[82]||(t[82]=[(0,r.Lk)("i",{class:"fas fa-upload"},null,-1),(0,r.eW)(" Press to load your signature ",-1)])])])])),(0,r.Lk)("input",{ref:"divDirectorSignatureInput",type:"file",accept:"image/png,image/jpeg,application/pdf",onChange:t[24]||(t[24]=(...e)=>Tt.onDivDirectorSignatureChange&&Tt.onDivDirectorSignatureChange(...e)),class:"hidden"},null,544)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>Ct.formData.approvals.divisionalDirector.date=e),type:"date",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white backdrop-blur-sm divisional-approval-editable"},null,512),[[r.Jo,Ct.formData.approvals.divisionalDirector.date]])])]),(0,r.Lk)("div",Ne,[t[93]||(t[93]=(0,r.Lk)("h5",{class:"font-bold text-white mb-3 text-center text-sm"},"Director of ICT",-1)),(0,r.Lk)("div",Ae,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>Ct.formData.approvals.directorICT.name=e),type:"text",placeholder:"Name",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.approvals.directorICT.name]]),(0,r.Lk)("div",Re,[Ct.directorICTSignaturePreview?((0,r.uX)(),(0,r.CE)("div",Pe,[Tt.isImage(Ct.directorICTSignaturePreview)?((0,r.uX)(),(0,r.CE)("div",Fe,[(0,r.Lk)("img",{src:Ct.directorICTSignaturePreview,alt:"Director ICT Signature",class:"max-h-[35px] max-w-full object-contain mx-auto mb-1"},null,8,Oe),(0,r.Lk)("p",qe,(0,r.v_)(Ct.directorICTSignatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",Ue,[t[90]||(t[90]=(0,r.Lk)("div",{class:"w-8 h-8 bg-red-500/20 rounded flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-sm"})],-1)),(0,r.Lk)("p",Me,(0,r.v_)(Ct.directorICTSignatureFileName),1)])),(0,r.Lk)("div",_e,[(0,r.Lk)("button",{type:"button",onClick:t[28]||(t[28]=(...e)=>Tt.triggerDirectorICTSignatureUpload&&Tt.triggerDirectorICTSignatureUpload(...e)),class:"w-5 h-5 bg-emerald-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-emerald-600 transition-colors duration-200",title:"Change signature"},[...t[91]||(t[91]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[29]||(t[29]=(...e)=>Tt.clearDirectorICTSignature&&Tt.clearDirectorICTSignature(...e)),class:"w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200",title:"Remove signature"},[...t[92]||(t[92]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",Ee,[(0,r.Lk)("div",je,[t[89]||(t[89]=(0,r.Lk)("div",{class:"mb-1"},[(0,r.Lk)("i",{class:"fas fa-signature text-emerald-300 text-sm mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[27]||(t[27]=(...e)=>Tt.triggerDirectorICTSignatureUpload&&Tt.triggerDirectorICTSignatureUpload(...e)),class:"px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[88]||(t[88]=[(0,r.Lk)("i",{class:"fas fa-upload"},null,-1),(0,r.eW)(" Press to load your signature ",-1)])])])])),(0,r.Lk)("input",{ref:"directorICTSignatureInput",type:"file",accept:"image/png,image/jpeg,application/pdf",onChange:t[30]||(t[30]=(...e)=>Tt.onDirectorICTSignatureChange&&Tt.onDirectorICTSignatureChange(...e)),class:"hidden"},null,544)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>Ct.formData.approvals.directorICT.date=e),type:"date",class:"w-full px-3 py-2 border border-emerald-300/30 rounded-lg focus:border-emerald-400 focus:outline-none text-sm bg-white/15 text-white backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.approvals.directorICT.date]])])])])]),(0,r.Lk)("div",He,[t[96]||(t[96]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-4" data-v-82321898><div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50" data-v-82321898><i class="fas fa-comments text-white text-xl" data-v-82321898></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-82321898><i class="fas fa-comment-alt mr-2 text-blue-300" data-v-82321898></i> Comments </h3></div>',1)),(0,r.Lk)("div",Xe,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[32]||(t[32]=e=>Ct.formData.comments=e),rows:"4",class:"medical-input w-full px-4 py-4 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-indigo-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-indigo-500/20 resize-y comments-editable",placeholder:"HOD: specify access Category here..."},null,512),[[r.Jo,Ct.formData.comments]]),t[95]||(t[95]=(0,r.Lk)("div",{class:"absolute inset-0 rounded-xl bg-gradient-to-r from-indigo-500/10 to-blue-500/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])]),(0,r.Lk)("div",$e,[t[109]||(t[109]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-4" data-v-82321898><div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50" data-v-82321898><i class="fas fa-cogs text-white text-xl" data-v-82321898></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-82321898><i class="fas fa-tools mr-2 text-blue-300" data-v-82321898></i> For Implementation </h3></div>',1)),(0,r.Lk)("div",Ve,[(0,r.Lk)("div",We,[t[102]||(t[102]=(0,r.Lk)("h5",{class:"font-bold text-white mb-3 text-center text-sm"},"Head of IT",-1)),(0,r.Lk)("div",ze,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>Ct.formData.implementation.headIT.name=e),type:"text",placeholder:"Name",class:"w-full px-3 py-2 border border-purple-300/30 rounded-lg focus:border-purple-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.implementation.headIT.name]]),(0,r.Lk)("div",Je,[Ct.headITSignaturePreview?((0,r.uX)(),(0,r.CE)("div",Ye,[Tt.isImage(Ct.headITSignaturePreview)?((0,r.uX)(),(0,r.CE)("div",Ke,[(0,r.Lk)("img",{src:Ct.headITSignaturePreview,alt:"Head IT Signature",class:"max-h-[35px] max-w-full object-contain mx-auto mb-1"},null,8,Qe),(0,r.Lk)("p",Ze,(0,r.v_)(Ct.headITSignatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",et,[t[99]||(t[99]=(0,r.Lk)("div",{class:"w-8 h-8 bg-red-500/20 rounded flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-sm"})],-1)),(0,r.Lk)("p",tt,(0,r.v_)(Ct.headITSignatureFileName),1)])),(0,r.Lk)("div",at,[(0,r.Lk)("button",{type:"button",onClick:t[35]||(t[35]=(...e)=>Tt.triggerHeadITSignatureUpload&&Tt.triggerHeadITSignatureUpload(...e)),class:"w-5 h-5 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-purple-600 transition-colors duration-200",title:"Change signature"},[...t[100]||(t[100]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[36]||(t[36]=(...e)=>Tt.clearHeadITSignature&&Tt.clearHeadITSignature(...e)),class:"w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200",title:"Remove signature"},[...t[101]||(t[101]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",Be,[(0,r.Lk)("div",Ge,[t[98]||(t[98]=(0,r.Lk)("div",{class:"mb-1"},[(0,r.Lk)("i",{class:"fas fa-signature text-purple-300 text-sm mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[34]||(t[34]=(...e)=>Tt.triggerHeadITSignatureUpload&&Tt.triggerHeadITSignatureUpload(...e)),class:"px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[97]||(t[97]=[(0,r.Lk)("i",{class:"fas fa-upload"},null,-1),(0,r.eW)(" Press to load your signature ",-1)])])])])),(0,r.Lk)("input",{ref:"headITSignatureInput",type:"file",accept:"image/png,image/jpeg,application/pdf",onChange:t[37]||(t[37]=(...e)=>Tt.onHeadITSignatureChange&&Tt.onHeadITSignatureChange(...e)),class:"hidden"},null,544)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[38]||(t[38]=e=>Ct.formData.implementation.headIT.Date=e),type:"date",class:"w-full px-3 py-2 border border-purple-300/30 rounded-lg focus:border-purple-400 focus:outline-none text-sm bg-white/15 text-white backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.implementation.headIT.Date]])])]),(0,r.Lk)("div",rt,[t[108]||(t[108]=(0,r.Lk)("h5",{class:"font-bold text-white mb-3 text-center text-sm"}," ICT Officer granting access ",-1)),(0,r.Lk)("div",it,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[39]||(t[39]=e=>Ct.formData.implementation.ictOfficer.name=e),type:"text",placeholder:"Name",class:"w-full px-3 py-2 border border-purple-300/30 rounded-lg focus:border-purple-400 focus:outline-none text-sm bg-white/15 text-white placeholder-blue-200/60 backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.implementation.ictOfficer.name]]),(0,r.Lk)("div",st,[Ct.ictOfficerSignaturePreview?((0,r.uX)(),(0,r.CE)("div",nt,[Tt.isImage(Ct.ictOfficerSignaturePreview)?((0,r.uX)(),(0,r.CE)("div",dt,[(0,r.Lk)("img",{src:Ct.ictOfficerSignaturePreview,alt:"ICT Officer Signature",class:"max-h-[35px] max-w-full object-contain mx-auto mb-1"},null,8,ut),(0,r.Lk)("p",ct,(0,r.v_)(Ct.ictOfficerSignatureFileName),1)])):((0,r.uX)(),(0,r.CE)("div",pt,[t[105]||(t[105]=(0,r.Lk)("div",{class:"w-8 h-8 bg-red-500/20 rounded flex items-center justify-center mx-auto mb-1"},[(0,r.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-sm"})],-1)),(0,r.Lk)("p",mt,(0,r.v_)(Ct.ictOfficerSignatureFileName),1)])),(0,r.Lk)("div",ft,[(0,r.Lk)("button",{type:"button",onClick:t[41]||(t[41]=(...e)=>Tt.triggerIctOfficerSignatureUpload&&Tt.triggerIctOfficerSignatureUpload(...e)),class:"w-5 h-5 bg-purple-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-purple-600 transition-colors duration-200",title:"Change signature"},[...t[106]||(t[106]=[(0,r.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,r.Lk)("button",{type:"button",onClick:t[42]||(t[42]=(...e)=>Tt.clearIctOfficerSignature&&Tt.clearIctOfficerSignature(...e)),class:"w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200",title:"Remove signature"},[...t[107]||(t[107]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])])])):((0,r.uX)(),(0,r.CE)("div",ot,[(0,r.Lk)("div",lt,[t[104]||(t[104]=(0,r.Lk)("div",{class:"mb-1"},[(0,r.Lk)("i",{class:"fas fa-signature text-purple-300 text-sm mb-1"}),(0,r.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),(0,r.Lk)("button",{type:"button",onClick:t[40]||(t[40]=(...e)=>Tt.triggerIctOfficerSignatureUpload&&Tt.triggerIctOfficerSignatureUpload(...e)),class:"px-2 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[103]||(t[103]=[(0,r.Lk)("i",{class:"fas fa-upload"},null,-1),(0,r.eW)(" Press to load your signature ",-1)])])])])),(0,r.Lk)("input",{ref:"ictOfficerSignatureInput",type:"file",accept:"image/png,image/jpeg,application/pdf",onChange:t[43]||(t[43]=(...e)=>Tt.onIctOfficerSignatureChange&&Tt.onIctOfficerSignatureChange(...e)),class:"hidden"},null,544)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[44]||(t[44]=e=>Ct.formData.implementation.ictOfficer.Date=e),type:"date",class:"w-full px-3 py-2 border border-purple-300/30 rounded-lg focus:border-purple-400 focus:outline-none text-sm bg-white/15 text-white backdrop-blur-sm"},null,512),[[r.Jo,Ct.formData.implementation.ictOfficer.Date]])])])])]),It.isReviewMode?((0,r.uX)(),(0,r.CE)("div",gt,[t[119]||(t[119]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-6" data-v-82321898><div class="w-14 h-14 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-emerald-300/50" data-v-82321898><i class="fas fa-gavel text-white text-xl" data-v-82321898></i></div><h3 class="text-xl font-bold text-white flex items-center" data-v-82321898><i class="fas fa-check-double mr-2 text-emerald-300" data-v-82321898></i> Review Actions </h3></div>',1)),(0,r.Lk)("div",ht,[t[115]||(t[115]=(0,r.Lk)("h4",{class:"text-sm font-bold text-blue-100 mb-3"},"Request Status",-1)),(0,r.Lk)("div",bt,[(0,r.Lk)("div",vt,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("hod")?"bg-green-500":"rejected"===Tt.getApprovalStatus("hod")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("hod")?"fas fa-check":"rejected"===Tt.getApprovalStatus("hod")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[110]||(t[110]=(0,r.Lk)("p",{class:"text-xs text-white"},"HOD",-1))]),(0,r.Lk)("div",xt,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("divisional")?"bg-green-500":"rejected"===Tt.getApprovalStatus("divisional")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("divisional")?"fas fa-check":"rejected"===Tt.getApprovalStatus("divisional")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[111]||(t[111]=(0,r.Lk)("p",{class:"text-xs text-white"},"Divisional",-1))]),(0,r.Lk)("div",wt,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("dict")?"bg-green-500":"rejected"===Tt.getApprovalStatus("dict")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("dict")?"fas fa-check":"rejected"===Tt.getApprovalStatus("dict")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[112]||(t[112]=(0,r.Lk)("p",{class:"text-xs text-white"},"DICT",-1))]),(0,r.Lk)("div",kt,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("headOfIt")?"bg-green-500":"rejected"===Tt.getApprovalStatus("headOfIt")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("headOfIt")?"fas fa-check":"rejected"===Tt.getApprovalStatus("headOfIt")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[113]||(t[113]=(0,r.Lk)("p",{class:"text-xs text-white"},"Head IT",-1))]),(0,r.Lk)("div",yt,[(0,r.Lk)("div",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("ict")?"bg-green-500":"rejected"===Tt.getApprovalStatus("ict")?"bg-red-500":"bg-yellow-500","w-8 h-8 rounded-full flex items-center justify-center mx-auto mb-1"])},[(0,r.Lk)("i",{class:(0,r.C4)(["approved"===Tt.getApprovalStatus("ict")?"fas fa-check":"rejected"===Tt.getApprovalStatus("ict")?"fas fa-times":"fas fa-clock","text-white text-sm"])},null,2)],2),t[114]||(t[114]=(0,r.Lk)("p",{class:"text-xs text-white"},"ICT Officer",-1))])])]),(0,r.Lk)("div",Lt,[(0,r.Lk)("button",{type:"button",onClick:t[45]||(t[45]=(...e)=>Tt.goBackToRequests&&Tt.goBackToRequests(...e)),class:"px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[116]||(t[116]=[(0,r.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,r.eW)(" Back to Requests ",-1)])]),Tt.canApproveAtStage()?((0,r.uX)(),(0,r.CE)("button",{key:0,type:"button",onClick:t[46]||(t[46]=(...e)=>Tt.approveRequest&&Tt.approveRequest(...e)),class:"px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[117]||(t[117]=[(0,r.Lk)("i",{class:"fas fa-check mr-2"},null,-1),(0,r.eW)(" Approve Request ",-1)])])):(0,r.Q3)("",!0),Tt.canApproveAtStage()?((0,r.uX)(),(0,r.CE)("button",{key:1,type:"button",onClick:t[47]||(t[47]=(...e)=>Tt.rejectRequest&&Tt.rejectRequest(...e)),class:"px-6 py-3 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:from-red-700 hover:to-pink-700 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[118]||(t[118]=[(0,r.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,r.eW)(" Reject Request ",-1)])])):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0),It.isReviewMode?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",St,[t[122]||(t[122]=(0,r.Lk)("div",{class:"text-center mb-3"},[(0,r.Lk)("div",{class:"inline-block text-black px-4 py-2 rounded-lg"},[(0,r.Lk)("p",{class:"font-bold"},"Directorate of ICT"),(0,r.Lk)("p",{class:"text-sm opacity-90"},"IT and Telephone Department")])],-1)),(0,r.Lk)("div",Dt,[(0,r.Lk)("button",{type:"button",onClick:t[48]||(t[48]=(...e)=>Tt.resetForm&&Tt.resetForm(...e)),class:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl"},[...t[120]||(t[120]=[(0,r.Lk)("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),(0,r.eW)(" Reset Form ",-1)])]),t[121]||(t[121]=(0,r.Lk)("button",{type:"submit",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl"},[(0,r.Lk)("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[(0,r.Lk)("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),(0,r.eW)(" Submit Request ")],-1))])]))],34),(0,r.bF)(Rt)])])])])])}a(4114),a(8111),a(7588);var Ct=a(1387),Tt=a(5498),Nt=a(8966),At=a(9101),Rt=a(1127),Et=a(4373);const jt="http://127.0.0.1:8000/api",Pt=Et.A.create({baseURL:jt,headers:{Accept:"application/json","Content-Type":"application/json"}});function Ft(){const e=(0,r.KR)(!1),t=(0,r.KR)(""),a=async(a,r,i=null,s={})=>{e.value=!0,t.value="";try{const e=await Pt({method:a,url:r,data:i,...s});return e.data}catch(o){if(console.error(`API Error [${a.toUpperCase()} ${r}]:`,o),o.response){const e=o.response.status,a=o.response.data?.message||"An error occurred";t.value=401===e?"Authentication failed. Please log in again.":403===e?"Access denied. You do not have permission for this action.":e>=500?"Server error. Please try again later.":a}else o.request?t.value="Network error. Please check your connection and try again.":t.value=o.message||"An unexpected error occurred";throw o}finally{e.value=!1}},i=(e,t={})=>a("get",e,null,t),s=(e,t,r={})=>a("post",e,t,r),o=(e,t,r={})=>a("put",e,t,r),l=(e,t,r={})=>a("patch",e,t,r),n=(e,t={})=>a("delete",e,null,t);return{loading:e,error:t,apiCall:a,get:i,post:s,put:o,patch:l,delete:n,apiClient:Pt}}function Ot(){const e=(0,r.KR)([]),t=(0,r.KR)(!1),a=(0,r.KR)(""),{get:i}=Ft(),s=async()=>{t.value=!0,a.value="";try{const t=await i("/v1/departments");if(!t.success)throw new Error(t.message||"Failed to fetch departments");e.value=t.data||[],e.value.length}catch(r){console.error("Error fetching departments:",r),a.value=r.message||"Failed to load departments",e.value=[{id:1,name:"Administration",code:"ADMIN"},{id:2,name:"Anesthesiology",code:"ANESTH"},{id:3,name:"Cardiology",code:"CARDIO"},{id:4,name:"Dermatology",code:"DERMA"},{id:5,name:"Emergency Medicine",code:"EMERG"},{id:6,name:"ICT Department",code:"ICT"},{id:7,name:"Internal Medicine",code:"INTMED"},{id:8,name:"Laboratory",code:"LAB"},{id:9,name:"Nursing",code:"NURS"},{id:10,name:"Pharmacy",code:"PHARM"},{id:11,name:"Radiology",code:"RADIO"},{id:12,name:"Other",code:"OTHER"}]}finally{t.value=!1}};return{departments:e,loading:t,error:a,fetchDepartments:s}}Pt.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),Pt.interceptors.response.use(e=>e,e=>(401===e.response?.status&&console.warn("Unauthorized access - token may be expired"),Promise.reject(e)));var qt=a(1075),Ut={name:"JeevaAccessForm",components:{Header:Tt.A,ModernSidebar:Nt.A,AppFooter:At.A},setup(){const e=(0,Ct.lq)(),t=(0,Ct.rd)(),{userRole:a,ROLES:i}=(0,Rt.h)(),s=(0,r.KR)(!1),o=(0,r.KR)(""),{departments:l,loading:n,error:d,fetchDepartments:u}=Ot();return(0,r.sV)(()=>{u()}),{isReviewMode:s,requestId:o,route:e,router:t,userRole:a,ROLES:i,departments:l,departmentsLoading:n,departmentsError:d,fetchDepartments:u}},mounted(){this.checkReviewMode()},data(){return{signaturePreview:"",signatureFileName:"",isSigning:!1,hasUserSigned:!1,lastSignedAt:null,hodSignaturePreview:"",hodSignatureFileName:"",divDirectorSignaturePreview:"",divDirectorSignatureFileName:"",directorICTSignaturePreview:"",directorICTSignatureFileName:"",headITSignaturePreview:"",headITSignatureFileName:"",ictOfficerSignaturePreview:"",ictOfficerSignatureFileName:"",formData:{pfNumber:"",staffName:"",department_id:"",signature:null,requestType:"",selectedModules:[],accessType:"",tempDate:{day:"",month:"",year:""},approvals:{hod:{name:"",signature:"",date:""},divisionalDirector:{name:"",signature:"",date:"",decision:"",rejectionComments:""},directorICT:{name:"",signatureDate:""}},comments:"",implementation:{headIT:{name:"",signatureDate:""},ictOfficer:{name:"",signatureDate:""}}},modules:[{id:"financial_accounting",name:"FINANCIAL ACCOUNTING"},{id:"doctor_consultation",name:"DOCTOR CONSULTATION"},{id:"medical_records",name:"MEDICAL RECORDS"},{id:"outpatient",name:"OUTPATIENT"},{id:"nursing_station",name:"NURSING STATION"},{id:"inpatient",name:"INPATIENT"},{id:"ip_cashier",name:"IP CASHIER"},{id:"hiv",name:"HIV"},{id:"linen_laundry",name:"LINEN & LAUNDRY"},{id:"fixed_assets",name:"FIXED ASSETS"},{id:"pmtct",name:"PMTCT"},{id:"pharmacy",name:"PHARMACY"},{id:"bill_note",name:"BILL NOTE"},{id:"blood_bank",name:"BLOOD BANK"},{id:"order_management",name:"ORDER MANAGEMENT"},{id:"private_credit",name:"PRIVATE CREDIT"},{id:"laboratory",name:"LABORATORY"},{id:"general_store",name:"GENERAL STORE"},{id:"ip_billing",name:"IP BILLING"},{id:"radiology",name:"RADIOLOGY"},{id:"purchase",name:"PURCHASE"},{id:"scrolling",name:"SCROLLING"},{id:"operation_theatre",name:"OPERATION THEATRE"},{id:"cssd",name:"CSSD"},{id:"web_indent",name:"WEB INDENT"},{id:"mortuary",name:"MORTUARY"},{id:"general_maintenance",name:"GENERAL MAINTENANCE"},{id:"personnel",name:"PERSONNEL"},{id:"maintenance",name:"MAINTENANCE"},{id:"payroll",name:"PAYROLL"},{id:"cms",name:"CMS"},{id:"mis_statistics",name:"MIS STATISTICS"}]}},methods:{async signCurrentDocument(){try{if(this.isSigning)return;const e=this.requestId||this.$route.params.id;if(!e)return void this.showNotification("Cannot sign until the request is created. Please submit first.");this.isSigning=!0;const t=await qt["default"].sign(e);t&&(t.success||t.data)?(this.hasUserSigned=!0,this.lastSignedAt=t?.data?.signed_at||t?.signed_at||(new Date).toISOString(),this.showNotification(`Document signed on ${new Date(this.lastSignedAt).toLocaleString()}`)):this.showNotification(t?.message||"Failed to sign document")}catch(e){console.error("Sign error:",e),this.showNotification(e.message||"Failed to sign document")}finally{this.isSigning=!1}},submitForm(){this.formData.pfNumber&&this.formData.staffName&&this.formData.department_id?this.formData.requestType?0!==this.formData.selectedModules.length?(this.formData,this.showNotification("Jeeva Access Request submitted successfully!")):this.showNotification("Please select at least one module"):this.showNotification("Please select whether this is for Use or Revoke"):this.showNotification("Please fill in all required fields (PF Number, Staff Name, and Department)")},triggerFileUpload(){this.$refs.signatureInput.click()},onSignatureChange(e){const t=e.target.files[0];if(this.formData.signature=t||null,!t)return this.signaturePreview="",void(this.signatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearSignature();if(this.signatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.signaturePreview=e.result},e.readAsDataURL(t)}else this.signaturePreview="pdf"},isImage(e){return"string"===typeof e&&"pdf"!==e},clearSignature(){this.formData.signature=null,this.signaturePreview="",this.signatureFileName="",this.$refs.signatureInput&&(this.$refs.signatureInput.value="")},triggerHodSignatureUpload(){this.$refs.hodSignatureInput.click()},onHodSignatureChange(e){const t=e.target.files[0];if(this.formData.approvals.hod.signature=t||null,!t)return this.hodSignaturePreview="",void(this.hodSignatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearHodSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearHodSignature();if(this.hodSignatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.hodSignaturePreview=e.result},e.readAsDataURL(t)}else this.hodSignaturePreview="pdf"},clearHodSignature(){this.formData.approvals.hod.signature=null,this.hodSignaturePreview="",this.hodSignatureFileName="",this.$refs.hodSignatureInput&&(this.$refs.hodSignatureInput.value="")},triggerDivDirectorSignatureUpload(){this.$refs.divDirectorSignatureInput.click()},onDivDirectorSignatureChange(e){const t=e.target.files[0];if(this.formData.approvals.divisionalDirector.signature=t||null,!t)return this.divDirectorSignaturePreview="",void(this.divDirectorSignatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearDivDirectorSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearDivDirectorSignature();if(this.divDirectorSignatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.divDirectorSignaturePreview=e.result},e.readAsDataURL(t)}else this.divDirectorSignaturePreview="pdf"},clearDivDirectorSignature(){this.formData.approvals.divisionalDirector.signature=null,this.divDirectorSignaturePreview="",this.divDirectorSignatureFileName="",this.$refs.divDirectorSignatureInput&&(this.$refs.divDirectorSignatureInput.value="")},triggerDirectorICTSignatureUpload(){this.$refs.directorICTSignatureInput.click()},onDirectorICTSignatureChange(e){const t=e.target.files[0];if(this.formData.approvals.directorICT.signatureDate=t||null,!t)return this.directorICTSignaturePreview="",void(this.directorICTSignatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearDirectorICTSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearDirectorICTSignature();if(this.directorICTSignatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.directorICTSignaturePreview=e.result},e.readAsDataURL(t)}else this.directorICTSignaturePreview="pdf"},clearDirectorICTSignature(){this.formData.approvals.directorICT.signatureDate=null,this.directorICTSignaturePreview="",this.directorICTSignatureFileName="",this.$refs.directorICTSignatureInput&&(this.$refs.directorICTSignatureInput.value="")},triggerHeadITSignatureUpload(){this.$refs.headITSignatureInput.click()},onHeadITSignatureChange(e){const t=e.target.files[0];if(this.formData.implementation.headIT.signature=t||null,!t)return this.headITSignaturePreview="",void(this.headITSignatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearHeadITSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearHeadITSignature();if(this.headITSignatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.headITSignaturePreview=e.result},e.readAsDataURL(t)}else this.headITSignaturePreview="pdf"},clearHeadITSignature(){this.formData.implementation.headIT.signature=null,this.headITSignaturePreview="",this.headITSignatureFileName="",this.$refs.headITSignatureInput&&(this.$refs.headITSignatureInput.value="")},triggerIctOfficerSignatureUpload(){this.$refs.ictOfficerSignatureInput.click()},onIctOfficerSignatureChange(e){const t=e.target.files[0];if(this.formData.implementation.ictOfficer.signature=t||null,!t)return this.ictOfficerSignaturePreview="",void(this.ictOfficerSignatureFileName="");const a=["image/png","image/jpeg","image/jpg","application/pdf"];if(!a.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearIctOfficerSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearIctOfficerSignature();if(this.ictOfficerSignatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.ictOfficerSignaturePreview=e.result},e.readAsDataURL(t)}else this.ictOfficerSignaturePreview="pdf"},clearIctOfficerSignature(){this.formData.implementation.ictOfficer.signature=null,this.ictOfficerSignaturePreview="",this.ictOfficerSignatureFileName="",this.$refs.ictOfficerSignatureInput&&(this.$refs.ictOfficerSignatureInput.value="")},resetForm(){this.formData={pfNumber:"",staffName:"",department_id:"",signature:null,requestType:"",selectedModules:[],accessType:"",tempDate:{day:"",month:"",year:""},approvals:{hod:{name:"",signature:"",date:""},divisionalDirector:{name:"",signature:"",date:"",decision:"",rejectionComments:""},directorICT:{name:"",signatureDate:""}},comments:"",implementation:{headIT:{name:"",signatureDate:""},ictOfficer:{name:"",signatureDate:""}}},this.signaturePreview="",this.signatureFileName="",this.hodSignaturePreview="",this.hodSignatureFileName="",this.divDirectorSignaturePreview="",this.divDirectorSignatureFileName="",this.directorICTSignaturePreview="",this.directorICTSignatureFileName="",this.headITSignaturePreview="",this.headITSignatureFileName="",this.ictOfficerSignaturePreview="",this.ictOfficerSignatureFileName="",this.showNotification("Form has been reset")},showNotification(e,t="info"){t.toUpperCase(),"error"===t?alert(`Error: ${e}`):alert(e)},checkReviewMode(){"review"===this.route.query.mode&&this.route.query.requestId&&(this.isReviewMode=!0,this.requestId=this.route.query.requestId,this.populateFormFromQuery(),this.makeFormReadOnlyForReview())},populateFormFromQuery(){const e=this.route.query;if(this.formData.pfNumber=e.pfNumber||"",this.formData.staffName=e.staffName||"",this.formData.department_id=e.department_id||e.department||"",this.formData.requestType=e.moduleRequestedFor?.toLowerCase()||"",this.formData.accessType="Permanent (until retirement)"===e.accessType?"permanent":"temporary",e.temporaryUntil){const t=new Date(e.temporaryUntil);this.formData.tempDate={day:t.getDate().toString().padStart(2,"0"),month:(t.getMonth()+1).toString().padStart(2,"0"),year:t.getFullYear().toString()}}if(e.selectedModules)try{const t=JSON.parse(e.selectedModules);this.formData.selectedModules=t}catch(t){console.error("Error parsing selected modules:",t)}this.formData.comments=e.comments||"","true"===e.digitalSignature&&(this.signaturePreview="review-mode-signature",this.signatureFileName="Digital Signature (Submitted)")},makeFormReadOnlyForReview(){this.$nextTick(()=>{const e=this.$el.querySelectorAll("input, select, textarea");e.forEach(e=>{this.canHodEdit(e)||e.classList.contains("approval-input")||(e.setAttribute("readonly",!0),e.setAttribute("disabled",!0))});const t=this.$el.querySelectorAll('input[type="checkbox"], input[type="radio"]');t.forEach(e=>{this.canHodEdit(e)||e.classList.contains("approval-input")||e.setAttribute("disabled",!0)})})},canHodEdit(e){if(this.userRole===this.ROLES.HEAD_OF_DEPARTMENT&&this.canApproveAtStage()){const t=["hod-editable","module-request-editable","access-rights-editable","comments-editable","hod-approval-editable"];if(t.some(t=>e.classList.contains(t)))return!0}if(this.userRole===this.ROLES.DIVISIONAL_DIRECTOR&&this.canApproveAtStage()){const t=["divisional-director-editable","divisional-approval-editable","divisional-comments-editable"];if(t.some(t=>e.classList.contains(t)))return!0}return!1},getApprovalStatus(e){const t=this.route.query,a={hod:t.hodApprovalStatus,divisional:t.divisionalStatus,dict:t.dictStatus,headOfIt:t.headOfItStatus,ict:t.ictStatus};return a[e]||"pending"},canApproveAtStage(){if(!this.isReviewMode)return!1;const e=this.route.query;switch(this.userRole){case this.ROLES.HEAD_OF_DEPARTMENT:return"pending"===e.hodApprovalStatus;case this.ROLES.DIVISIONAL_DIRECTOR:return"approved"===e.hodApprovalStatus&&"pending"===e.divisionalStatus;case this.ROLES.ICT_DIRECTOR:return"approved"===e.divisionalStatus&&"pending"===e.dictStatus;case this.ROLES.HOD_IT:return"approved"===e.dictStatus&&"pending"===e.headOfItStatus;case this.ROLES.ICT_OFFICER:return"approved"===e.headOfItStatus&&"pending"===e.ictStatus;default:return!1}},approveRequest(){if(this.canApproveAtStage()){if(this.userRole===this.ROLES.DIVISIONAL_DIRECTOR){if(!this.formData.approvals.divisionalDirector.decision)return void this.showNotification("Please select Approve or Reject before submitting.");if("reject"===this.formData.approvals.divisionalDirector.decision)return this.formData.approvals.divisionalDirector.rejectionComments?.trim()?void(confirm(`Are you sure you want to reject request ${this.requestId}? This will send it back to the Head of Department.`)&&this.rejectRequestAsDivisionalDirector()):void this.showNotification("Please provide a reason for rejection.");if("approve"===this.formData.approvals.divisionalDirector.decision)return void(confirm(`Are you sure you want to approve request ${this.requestId}?`)&&this.approveRequestAsDivisionalDirector())}confirm(`Are you sure you want to approve request ${this.requestId}?`)&&(this.requestId,this.showNotification("Request approved successfully!"),setTimeout(()=>{this.router.push("/hod-dashboard/request-list")},2e3))}else this.showNotification("You cannot approve this request at this stage.")},approveRequestAsDivisionalDirector(){this.formData.approvals.divisionalDirector.name?.trim()?(this.requestId,this.formData.approvals.divisionalDirector.name,this.formData.approvals.divisionalDirector.date,this.showNotification("Request approved successfully! Moving to next approval stage."),setTimeout(()=>{this.router.push("/hod-dashboard/request-list")},2e3)):this.showNotification("Please enter your name before approving.")},rejectRequestAsDivisionalDirector(){this.formData.approvals.divisionalDirector.name?.trim()?this.formData.approvals.divisionalDirector.rejectionComments?.trim()?(this.requestId,this.formData.approvals.divisionalDirector.name,this.formData.approvals.divisionalDirector.date,this.formData.approvals.divisionalDirector.rejectionComments,this.showNotification("Request rejected and sent back to Head of Department with comments."),setTimeout(()=>{this.router.push("/internal-access/list")},2e3)):this.showNotification("Please provide a reason for rejection."):this.showNotification("Please enter your name before rejecting.")},rejectRequest(){if(!this.canApproveAtStage())return void this.showNotification("You cannot reject this request at this stage.");if(this.userRole===this.ROLES.DIVISIONAL_DIRECTOR)return this.formData.approvals.divisionalDirector.decision="reject",void this.showNotification("Please provide a reason for rejection in the comments field below.");const e=prompt("Please provide a reason for rejection:");e&&confirm(`Are you sure you want to reject request ${this.requestId}?`)&&(this.requestId,this.showNotification("Request rejected successfully!"),setTimeout(()=>{this.router.push("/internal-access/list")},2e3))},goBackToRequests(){this.router.push("/internal-access/list")}}},Mt=a(1241);const _t=(0,Mt.A)(Ut,[["render",It],["__scopeId","data-v-82321898"]]);var Ht=_t},9101:function(e,t,a){a.d(t,{A:function(){return p}});var r=a(5796);const i={class:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative",style:{position:"relative","z-index":"1","margin-top":"auto"}},s={class:"flex flex-col md:flex-row justify-between items-center"},o={class:"text-base text-blue-100 flex items-center space-x-2"},l={class:"font-medium"};function n(e,t,a,n,d,u){return(0,r.uX)(),(0,r.CE)("footer",i,[(0,r.Lk)("div",s,[(0,r.Lk)("div",o,[t[0]||(t[0]=(0,r.Lk)("div",{class:"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40"},[(0,r.Lk)("i",{class:"fas fa-hospital text-blue-300 text-sm"})],-1)),(0,r.Lk)("p",l,"  "+(0,r.v_)(u.currentYear)+" Muhimbili National Hospital. All rights reserved. ",1)])])])}var d={name:"AppFooter",computed:{currentYear(){return(new Date).getFullYear()}}},u=a(1241);const c=(0,u.A)(d,[["render",n],["__scopeId","data-v-2f68623d"]]);var p=c}}]);
//# sourceMappingURL=2869.6c7f5cf8.js.map