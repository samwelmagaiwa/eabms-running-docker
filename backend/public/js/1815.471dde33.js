"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[1815],{1445:function(e,t,a){a.d(t,{A:function(){return w}});var s=a(5796);const r={key:0,class:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none animate-fade-in"},o={class:"pointer-events-auto w-full max-w-lg mx-auto"},l={class:"relative bg-gradient-to-br from-white/20 via-blue-50/30 to-white/10 border-2 border-blue-300/50 backdrop-blur-xl rounded-3xl p-8 shadow-2xl overflow-hidden"},d={class:"relative z-10"},n={class:"flex items-center justify-center gap-6 mb-6"},i={class:"relative flex flex-col items-center"},c={class:"relative mb-3"},u={class:"text-center"},m={class:"text-white text-2xl font-bold tracking-wide mb-1 drop-shadow-md"},g={class:"text-blue-100 text-lg animate-pulse"},b={class:"text-center border-t border-blue-300/30 pt-4"},f={class:"text-teal-200 text-base font-semibold tracking-wider"};function v(e,t,a,v,p,h){return a.show?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[t[5]||(t[5]=(0,s.Fv)('<div class="absolute inset-0 opacity-10" data-v-94539b4a><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-slide-across" data-v-94539b4a></div><div class="absolute top-4 left-4 w-16 h-16 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.2);" data-v-94539b4a></div><div class="absolute bottom-4 right-4 w-20 h-20 bg-blue-400/20 rounded-full animate-float" style="animation-delay:1s;" data-v-94539b4a></div><div class="absolute top-1/2 left-8 w-12 h-12 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.15);animation-delay:2s;" data-v-94539b4a></div></div>',1)),(0,s.Lk)("div",d,[(0,s.Lk)("div",n,[t[1]||(t[1]=(0,s.Lk)("div",{class:"relative"},[(0,s.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-teal-500/30 rounded-2xl backdrop-blur-sm border-2 border-blue-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,s.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,s.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-teal-400 rounded-2xl opacity-20 blur-sm animate-pulse"})],-1)),(0,s.Lk)("div",i,[(0,s.Lk)("div",c,[t[0]||(t[0]=(0,s.Lk)("div",{class:"rounded-full h-12 w-12 border-2 border-gray-300/20"},null,-1)),(0,s.Lk)("div",{class:(0,s.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",a.forceSpin?"always-spin":"animate-spin"]),style:{"border-top-color":"#ff0000","animation-duration":"2s"}},null,2),(0,s.Lk)("div",{class:(0,s.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",a.forceSpin?"always-spin":"animate-spin"]),style:{"border-bottom-color":"#0000d1","animation-direction":"reverse","animation-duration":"1.5s"}},null,2),(0,s.Lk)("div",{class:(0,s.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",a.forceSpin?"always-spin":"animate-spin"]),style:{"border-right-color":"rgba(255, 0, 0, 0.7)","animation-duration":"2.5s"}},null,2),(0,s.Lk)("div",{class:(0,s.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",a.forceSpin?"always-spin":"animate-spin"]),style:{"border-left-color":"rgba(0, 0, 209, 0.7)","animation-direction":"reverse","animation-duration":"1.8s"}},null,2)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",m,(0,s.v_)(a.loadingTitle),1),(0,s.Lk)("div",g,(0,s.v_)(a.loadingSubtitle),1)])]),t[2]||(t[2]=(0,s.Lk)("div",{class:"relative"},[(0,s.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-teal-500/30 to-blue-500/30 rounded-2xl backdrop-blur-sm border-2 border-teal-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,s.Lk)("img",{src:"/assets/images/logo2.png",alt:"MNH Logo",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,s.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-teal-400 to-blue-400 rounded-2xl opacity-20 blur-sm animate-pulse",style:{"animation-delay":"0.5s"}})],-1))]),(0,s.Lk)("div",b,[t[3]||(t[3]=(0,s.Lk)("div",{class:"text-lg font-black tracking-widest mb-1 drop-shadow-sm",style:{color:"#ff0000"}}," MUHIMBILI NATIONAL HOSPITAL ",-1)),(0,s.Lk)("div",f,(0,s.v_)(a.departmentTitle),1)]),t[4]||(t[4]=(0,s.Fv)('<div class="flex justify-center gap-2 mt-4" data-v-94539b4a><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.1s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;animation-delay:0.2s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.3s;" data-v-94539b4a></div></div>',1))])])])])):(0,s.Q3)("",!0)}var p={name:"UnifiedLoadingBanner",props:{show:{type:Boolean,default:!0},loadingTitle:{type:String,default:"Loading Requests"},loadingSubtitle:{type:String,default:"Please wait..."},departmentTitle:{type:String,default:"SYSTEM MANAGEMENT"},forceSpin:{type:Boolean,default:!1}}},h=a(1241);const k=(0,h.A)(p,[["render",v],["__scopeId","data-v-94539b4a"]]);var w=k},2100:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var s=a(5796);const r={class:"flex flex-col h-screen"},o={class:"flex flex-1 overflow-hidden"},l={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},d={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},i={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"absolute inset-0"},u={class:"max-w-full mx-auto relative z-10"},m={class:"medical-glass-card rounded-3xl overflow-hidden"},g={class:"p-4"},b={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6"},f={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-2 rounded-xl backdrop-blur-sm hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-500 group flex items-center"},v={class:"text-xl font-bold text-white drop-shadow-lg leading-none"},p={class:"medical-card bg-gradient-to-r from-green-600/25 to-emerald-600/25 border-2 border-green-400/40 p-2 rounded-xl backdrop-blur-sm hover:shadow-2xl hover:shadow-green-500/20 transition-all duration-500 group flex items-center"},h={class:"text-xl font-bold text-white drop-shadow-lg leading-none"},k={class:"medical-card bg-gradient-to-r from-yellow-600/25 to-orange-600/25 border-2 border-yellow-400/40 p-2 rounded-xl backdrop-blur-sm hover:shadow-2xl hover:shadow-yellow-500/20 transition-all duration-500 group"},w={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},x={class:"flex items-center flex-1"},L={class:"text-xl font-bold text-white drop-shadow-lg leading-none"},y={class:"flex-1 md:pl-2"},S={class:"flex items-center justify-between mb-1"},R={class:"text-lg font-bold text-white drop-shadow-lg leading-none"},D={class:"grid grid-cols-2 gap-2"},_={class:"mb-6"},A={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-3 gap-y-1.5"},q={class:"flex flex-col items-center"},C={class:"text-white font-medium text-sm mb-1"},F={class:"text-blue-200 text-sm"},M={class:"grid grid-cols-1 lg:grid-cols-2 gap-5 mb-6"},T={class:"medical-card bg-gradient-to-r from-teal-600/25 to-cyan-600/25 border-2 border-teal-400/40 p-2 rounded-xl backdrop-blur-sm"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},E={class:"flex-1 min-w-0"},P={class:"text-white font-medium text-sm truncate"},I={class:"text-blue-200 text-xs truncate"},j={class:"medical-card bg-gradient-to-r from-purple-600/25 to-indigo-600/25 border-2 border-purple-400/40 p-2 rounded-xl backdrop-blur-sm"},N={class:"space-y-2"},K={class:"text-white text-base"};function O(e,t,a,O,B,W){const X=(0,s.g2)("Header"),$=(0,s.g2)("ModernSidebar"),H=(0,s.g2)("UnifiedLoadingBanner"),Q=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(X),(0,s.Lk)("div",o,[(0,s.bF)($),(0,s.Lk)("main",l,[(0,s.bF)(H,{show:O.isLoadingStats,loadingTitle:"Loading Admin Dashboard",loadingSubtitle:"Fetching latest system statistics and summary...",departmentTitle:"ADMIN DASHBOARD",forceSpin:!0},null,8,["show"]),(0,s.Lk)("div",d,[(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(48,e=>(0,s.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,s.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,s.Lk)("div",c,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(15,e=>(0,s.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,s.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,s.Lk)("i",{class:(0,s.C4)(["fas",["fa-shield-alt","fa-users-cog","fa-cogs","fa-database","fa-chart-line"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),(0,s.Lk)("div",u,[(0,s.Lk)("div",m,[(0,s.Lk)("div",g,[(0,s.Lk)("div",b,[(0,s.Lk)("div",f,[t[5]||(t[5]=(0,s.Lk)("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50 mr-3 shrink-0"},[(0,s.Lk)("i",{class:"fas fa-users text-white text-lg"})],-1)),(0,s.Lk)("div",null,[t[4]||(t[4]=(0,s.Lk)("h3",{class:"text-xs font-bold text-blue-200 uppercase tracking-wider mb-0.5"}," TOTAL USERS ",-1)),(0,s.Lk)("p",v,(0,s.v_)(O.stats.totalUsers),1)])]),(0,s.Lk)("div",p,[t[7]||(t[7]=(0,s.Lk)("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50 mr-3 shrink-0"},[(0,s.Lk)("i",{class:"fas fa-file-alt text-white text-lg"})],-1)),(0,s.Lk)("div",null,[t[6]||(t[6]=(0,s.Lk)("h3",{class:"text-xs font-bold text-green-200 uppercase tracking-wider mb-0.5"}," TOTAL REQUESTS ",-1)),(0,s.Lk)("p",h,(0,s.v_)(O.stats.totalRequests),1)])]),(0,s.Lk)("div",k,[(0,s.Lk)("div",w,[(0,s.Lk)("div",x,[t[9]||(t[9]=(0,s.Lk)("div",{class:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50 mr-3 shrink-0"},[(0,s.Lk)("i",{class:"fas fa-clock text-white text-lg"})],-1)),(0,s.Lk)("div",null,[t[8]||(t[8]=(0,s.Lk)("h3",{class:"text-xs font-bold text-yellow-200 uppercase tracking-wider mb-0.5"}," PENDING ",-1)),(0,s.Lk)("p",L,(0,s.v_)(O.stats.pendingRequests),1)])]),t[11]||(t[11]=(0,s.Lk)("div",{class:"hidden md:block w-px h-8 bg-yellow-400/40 self-center"},null,-1)),t[12]||(t[12]=(0,s.Lk)("div",{class:"block md:hidden h-px w-full bg-yellow-400/40 opacity-60"},null,-1)),(0,s.Lk)("div",y,[(0,s.Lk)("div",S,[t[10]||(t[10]=(0,s.Lk)("div",{class:"flex items-center space-x-2"},[(0,s.Lk)("i",{class:"fas fa-sms text-yellow-200 text-sm"}),(0,s.Lk)("h4",{class:"text-xs font-bold text-white uppercase tracking-wider"}," SMS Sent ")],-1)),(0,s.Lk)("p",R,(0,s.v_)(O.stats.totalSmsSent),1)]),(0,s.Lk)("div",D,[(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>O.smsFromDate=e),onChange:t[1]||(t[1]=(...e)=>O.onSmsDateChange&&O.onSmsDateChange(...e)),class:"w-full rounded bg-black/20 border border-yellow-300/30 text-yellow-50 text-xs px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-yellow-300/70"},null,544),[[s.Jo,O.smsFromDate]]),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>O.smsToDate=e),onChange:t[3]||(t[3]=(...e)=>O.onSmsDateChange&&O.onSmsDateChange(...e)),class:"w-full rounded bg-black/20 border border-yellow-300/30 text-yellow-50 text-xs px-1 py-0.5 focus:outline-none focus:ring-1 focus:ring-yellow-300/70"},null,544),[[s.Jo,O.smsToDate]])])])])])]),(0,s.Lk)("div",_,[t[13]||(t[13]=(0,s.Lk)("h3",{class:"text-2xl font-bold text-white mb-3 flex items-center"},[(0,s.Lk)("i",{class:"fas fa-bolt mr-2 text-yellow-400"}),(0,s.eW)(" Quick Actions ")],-1)),(0,s.Lk)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.quickActions,e=>((0,s.uX)(),(0,s.Wv)(Q,{key:e.title,to:e.route,onClick:t=>O.handleQuickActionClick(e),class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-2 rounded-xl backdrop-blur-sm hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 group text-center cursor-pointer"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",q,[(0,s.Lk)("div",{class:(0,s.C4)(`w-10 h-10 bg-gradient-to-br ${e.gradient} rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border ${e.border} mb-2`)},[(0,s.Lk)("i",{class:(0,s.C4)(`${e.icon} text-white text-lg`)},null,2)],2),(0,s.Lk)("span",C,(0,s.v_)(e.title),1),(0,s.Lk)("span",F,(0,s.v_)(e.description),1)])]),_:2},1032,["to","onClick"]))),128))])]),(0,s.Lk)("div",M,[(0,s.Lk)("div",T,[t[15]||(t[15]=(0,s.Lk)("h3",{class:"text-lg font-bold text-white mb-2 flex items-center"},[(0,s.Lk)("i",{class:"fas fa-users-cog mr-2 text-teal-300"}),(0,s.eW)(" User Management ")],-1)),(0,s.Lk)("div",U,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.userManagementActions,e=>((0,s.uX)(),(0,s.Wv)(Q,{key:e.title,to:e.route,class:"flex items-center p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-all duration-300 group"},{default:(0,s.k6)(()=>[(0,s.Lk)("div",{class:(0,s.C4)(`w-8 h-8 bg-gradient-to-br ${e.gradient} rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border ${e.border} mr-2 shrink-0`)},[(0,s.Lk)("i",{class:(0,s.C4)(`${e.icon} text-white text-xs`)},null,2)],2),(0,s.Lk)("div",E,[(0,s.Lk)("div",P,(0,s.v_)(e.title),1),(0,s.Lk)("div",I,(0,s.v_)(e.description),1)]),t[14]||(t[14]=(0,s.Lk)("i",{class:"fas fa-chevron-right text-blue-300 text-xs ml-1"},null,-1))]),_:2},1032,["to"]))),128))])]),(0,s.Lk)("div",j,[t[18]||(t[18]=(0,s.Lk)("h3",{class:"text-lg font-bold text-white mb-2 flex items-center"},[(0,s.Lk)("i",{class:"fas fa-info-circle mr-2 text-purple-300"}),(0,s.eW)(" System Information ")],-1)),(0,s.Lk)("div",N,[t[17]||(t[17]=(0,s.Lk)("div",{class:"text-white text-base"},[(0,s.Lk)("span",{class:"text-purple-200"},"Version:"),(0,s.eW)(" 1.0.0 ")],-1)),(0,s.Lk)("div",K,[t[16]||(t[16]=(0,s.Lk)("span",{class:"text-purple-200"},"Last Updated:",-1)),(0,s.eW)(" "+(0,s.v_)((new Date).toLocaleDateString()),1)])])])])])])])])])])}var B=a(5498),W=a(8966),X=a(1445),$=a(1127),H=a(3417),Q={name:"AdminDashboard",components:{Header:B.A,ModernSidebar:W.A,UnifiedLoadingBanner:X.A},setup(){const{userName:e,ROLES:t,requireRole:a}=(0,$.h)(),r=(0,s.KR)({totalUsers:0,totalRequests:0,pendingRequests:0,totalSmsSent:0}),o=(0,s.KR)(""),l=(0,s.KR)(""),d=(0,s.KR)(!1),n=(0,s.KR)([{title:"User Roles",description:"Assign roles to users",icon:"fas fa-users",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/admin/user-roles"},{title:"Departments",description:"Manage departments & assignments",icon:"fas fa-building",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/admin/departments"},{title:"Borrowed Device Monitoring",description:"Manage device inventory & tracking",icon:"fas fa-laptop",gradient:"from-orange-500 to-red-600",border:"border-orange-300/50",route:"/admin/device-inventory"}]),i=(0,s.KR)([{title:"Onboarding Reset",description:"Reset user onboarding status",icon:"fas fa-undo-alt",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/admin/onboarding-reset"},{title:"Jeeva Users",description:"Manage Jeeva system users",icon:"fas fa-heartbeat",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/jeeva-users"},{title:"Wellsoft Users",description:"Manage Wellsoft system users",icon:"fas fa-laptop-medical",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/wellsoft-users"},{title:"Internet Users",description:"Manage internet access users",icon:"fas fa-wifi",gradient:"from-blue-500 to-blue-600",border:"border-blue-300/50",route:"/internet-users"}]);(0,s.sV)(()=>{a([t.ADMIN]),c()});const c=async()=>{try{d.value=!0,o.value,l.value;const e={};o.value&&(e.sms_from_date=o.value),l.value&&(e.sms_to_date=l.value);const t=await H.A.getAdminDashboardStats(e);t.success?(r.value={totalUsers:t.data.totalUsers,totalRequests:t.data.totalRequests,pendingRequests:t.data.pendingRequests,totalSmsSent:t.data.totalSmsSent},t.data.smsFromDate?o.value=t.data.smsFromDate:!o.value&&t.data.smsFirstDate&&(o.value=t.data.smsFirstDate),t.data.smsToDate&&(l.value=t.data.smsToDate),r.value):(console.warn("⚠️ Failed to load stats, using fallback data:",t.error),r.value={totalUsers:t.data.totalUsers,totalRequests:t.data.totalRequests,pendingRequests:t.data.pendingRequests,totalSmsSent:t.data.totalSmsSent},t.data.smsFromDate?o.value=t.data.smsFromDate:!o.value&&t.data.smsFirstDate&&(o.value=t.data.smsFirstDate),t.data.smsToDate&&(l.value=t.data.smsToDate))}catch(e){console.error("❌ Error loading admin dashboard stats:",e),r.value={totalUsers:156,totalRequests:1247,pendingRequests:23,totalSmsSent:0}}finally{d.value=!1}},u=()=>{if(o.value&&l.value&&o.value>l.value){const e=o.value;o.value=l.value,l.value=e}c()},m=e=>{e.route};return{userName:e,stats:r,smsFromDate:o,smsToDate:l,isLoadingStats:d,quickActions:n,userManagementActions:i,handleQuickActionClick:m,onSmsDateChange:u}}},z=a(1241);const J=(0,z.A)(Q,[["render",O],["__scopeId","data-v-30c956db"]]);var V=J},3417:function(e,t,a){var s=a(274);class r{async getUserDashboardStats(){try{const e=await s.A.get("/user/dashboard-stats");if(e.data&&e.data.success)return e.data.data,{success:!0,data:{processing:e.data.data.processing||0,underReview:e.data.data.under_review||e.data.data.processing||0,completed:e.data.data.completed||0,grantedAccess:e.data.data.granted_access||e.data.data.completed||0,revision:e.data.data.revision||e.data.data.needs_revision||0,needsRevision:e.data.data.needs_revision||e.data.data.revision||0,total:e.data.data.total||0,processingPercentage:this.calculatePercentage(e.data.data.processing||0,e.data.data.total||1),completedPercentage:this.calculatePercentage(e.data.data.completed||0,e.data.data.total||1),revisionPercentage:this.calculatePercentage(e.data.data.revision||e.data.data.needs_revision||0,e.data.data.total||1)}};throw new Error(e.data?.message||"Failed to fetch dashboard statistics")}catch(e){console.error("❌ Error fetching user dashboard stats, trying ICT Officer stats as fallback...",e);try{const e=await s.A.get("/ict-officer/statistics");if(e.data&&e.data.success){const t=e.data.data||{},a=(t.all_time?.total??0)||0,s=t.all_time?.assigned??0,r=t.all_time?.in_progress??0,o=t.all_time?.completed??0,l=s+r;return{success:!0,data:{processing:l,underReview:l,completed:o,grantedAccess:o,revision:0,needsRevision:0,total:a||l+o,processingPercentage:this.calculatePercentage(l,a||l+o||1),completedPercentage:this.calculatePercentage(o,a||l+o||1),revisionPercentage:0}}}throw new Error(e.data?.message||"ICT Officer stats unavailable")}catch(t){console.error("❌ ICT Officer stats fallback failed:",t);const a={processing:0,underReview:0,completed:0,grantedAccess:0,revision:0,needsRevision:0,total:0,processingPercentage:0,completedPercentage:0,revisionPercentage:0};return{success:!1,error:t.message||e.message,data:a}}}}async getRequestStatusBreakdown(){try{const e=await s.A.get("/user/request-status-breakdown");if(e.data&&e.data.success)return{success:!0,data:e.data.data};throw new Error(e.data?.message||"Failed to fetch request status breakdown")}catch(e){return console.error("❌ Error fetching request status breakdown:",e),{success:!1,error:e.message,data:{}}}}calculatePercentage(e,t){return t&&0!==t?Math.round(e/t*100):0}getMockStats(){return{processing:12,underReview:12,completed:47,grantedAccess:47,revision:3,needsRevision:3,total:62,processingPercentage:19,completedPercentage:76,revisionPercentage:5}}getAdminMockStats(){return{totalUsers:156,totalRequests:1247,pendingRequests:23,activeUsers:5,todaysRequests:45,completedRequests:1224,completionRate:98,totalSmsSent:0,smsFromDate:null,smsToDate:null,smsFirstDate:null}}async getAdminDashboardStats(e={}){try{const t=await s.A.get("/admin/dashboard-stats",{params:e});if(t.data&&t.data.success)return t.data.data,{success:!0,data:{totalUsers:t.data.data.total_users||0,totalRequests:t.data.data.total_requests||0,pendingRequests:t.data.data.pending_requests||0,activeUsers:t.data.data.active_users||0,todaysRequests:t.data.data.todays_requests||0,completedRequests:t.data.data.completed_requests||0,completionRate:t.data.data.completion_rate||0,totalSmsSent:t.data.data.total_sms_sent||0,smsFromDate:t.data.data.sms_from_date||null,smsToDate:t.data.data.sms_to_date||null,smsFirstDate:t.data.data.sms_first_date||null}};throw new Error(t.data?.message||"Failed to fetch admin dashboard statistics")}catch(t){return console.error("❌ Error fetching admin dashboard stats:",t),{success:!1,error:t.message||"Failed to fetch admin dashboard statistics",data:this.getAdminMockStats()}}}async refreshStats(){return await this.getUserDashboardStats()}async getRecentActivity(e=10){try{const t=await s.A.get(`/user/recent-activity?limit=${e}`);if(t.data&&t.data.success)return{success:!0,data:t.data.data};throw new Error(t.data?.message||"Failed to fetch recent activity")}catch(t){return console.error("❌ Error fetching recent activity:",t),{success:!1,error:t.message,data:[]}}}}t.A=new r}}]);
//# sourceMappingURL=1815.471dde33.js.map