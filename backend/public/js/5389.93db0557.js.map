{"version":3,"file":"js/5389.93db0557.js","mappings":"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","sources":["webpack://frontend/./src/services/ictOfficerService.js"],"sourcesContent":["import axios from 'axios'\nimport { devLog } from '../utils/devLogger'\n\nconst API_BASE_URL = process.env.VUE_APP_API_URL || 'http://127.0.0.1:8000/api'\n\n// Create axios instance with default config\nconst axiosInstance = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 0, // No timeout - let backend take as long as needed\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json'\n  }\n})\n\n// Add auth token to requests and append cache-busting param for GETs\naxiosInstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    if (config.method && config.method.toLowerCase() === 'get') {\n      try {\n        const url = new URL(config.url, config.baseURL)\n        url.searchParams.set('_cb', String(Date.now()))\n        config.url = url.pathname + url.search\n      } catch (e) {\n        const sep = (config.url || '').includes('?') ? '&' : '?'\n        config.url = `${config.url}${sep}_cb=${Date.now()}`\n      }\n    }\n    return config\n  },\n  (error) => {\n    return Promise.reject(error)\n  }\n)\n\n// Centralized response handling so locked / unauthenticated users are\n// sent back to login instead of leaving the ICT dashboard in a broken state.\naxiosInstance.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    const status = error.response?.status\n\n    // Only force-logout on 401 (invalid/expired token).\n    // 403 is a normal \"role doesn't have access\" case in this app and should not clear auth.\n    if (status === 401) {\n      // Clear any stale auth data\n      localStorage.removeItem('auth_token')\n      localStorage.removeItem('user_data')\n      localStorage.removeItem('session_data')\n\n      // Redirect to login/root if not already there\n      if (typeof window !== 'undefined') {\n        const path = window.location.pathname || ''\n        if (path !== '/' && path !== '/login') {\n          window.location.href = '/'\n        }\n      }\n    }\n\n    return Promise.reject(error)\n  }\n)\n\nconst ictOfficerService = {\n  /**\n   * Get all access requests approved by Head of IT and available for ICT Officer implementation\n   */\n  async getAccessRequests() {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching access requests...')\n      const response = await axiosInstance.get('/ict-officer/access-requests')\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Access requests loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to load access requests:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access requests'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching access requests:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading access requests'\n      }\n    }\n  },\n\n  /**\n   * Get a specific access request by ID\n   */\n  async getAccessRequestById(requestId) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching access request by ID:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}`)\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Access request loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to load access request:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access request'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching access request:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading access request'\n      }\n    }\n  },\n\n  /**\n   * Assign a task to self (ICT Officer takes ownership of implementation)\n   */\n  async assignTaskToSelf(requestId, notes = '') {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Assigning task to self:', requestId)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/assign`,\n        {\n          notes: notes\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Task assigned successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to assign task:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to assign task'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error assigning task:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while assigning task'\n      }\n    }\n  },\n\n  /**\n   * Update progress on an assigned task\n   */\n  async updateProgress(requestId, status, notes = '') {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Updating progress:', requestId, status)\n\n      const response = await axiosInstance.put(\n        `/ict-officer/access-requests/${requestId}/progress`,\n        {\n          status: status,\n          notes: notes\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Progress updated successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to update progress:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to update progress'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error updating progress:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while updating progress'\n      }\n    }\n  },\n\n  /**\n   * Update implementation progress with detailed comments and status\n   */\n  async updateImplementationProgress(requestId, status, comments = '') {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Updating implementation progress:', requestId, status)\n\n      const payload = {\n        implementation_status: status,\n        implementation_comments: comments\n      }\n\n      // Add timestamp based on status\n      if (status === 'implementation_in_progress') {\n        payload.ict_officer_started_at = new Date().toISOString()\n      } else if (status === 'implemented') {\n        payload.ict_officer_implemented_at = new Date().toISOString()\n      }\n\n      const response = await axiosInstance.put(\n        `/ict-officer/access-requests/${requestId}/implementation`,\n        payload\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Implementation progress updated successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message || 'Implementation progress updated successfully'\n        }\n      } else {\n        devLog.error(\n          'âŒ IctOfficerService: Failed to update implementation progress:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to update implementation progress'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error updating implementation progress:', error)\n      return {\n        success: false,\n        message:\n          error.response?.data?.message || 'Network error while updating implementation progress'\n      }\n    }\n  },\n\n  /**\n   * Cancel an assigned task (unassign from self)\n   */\n  async cancelTask(requestId, reason) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Canceling task:', requestId)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/cancel`,\n        {\n          reason: reason\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Task canceled successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to cancel task:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to cancel task'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error canceling task:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while canceling task'\n      }\n    }\n  },\n\n  /**\n   * Complete implementation of access request\n   */\n  async completeImplementation(requestId, notes = '', signatureFile = null) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Completing implementation:', requestId)\n\n      const formData = new FormData()\n      formData.append('notes', notes)\n      if (signatureFile) {\n        formData.append('signature', signatureFile)\n      }\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/complete`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Implementation completed successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(\n          'âŒ IctOfficerService: Failed to complete implementation:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to complete implementation'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error completing implementation:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while completing implementation'\n      }\n    }\n  },\n\n  /**\n   * Get detailed timeline for a specific access request\n   */\n  async getRequestTimeline(requestId) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching request timeline:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}/timeline`)\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Request timeline loaded successfully')\n        return response.data.data\n      } else {\n        devLog.error(\n          'âŒ IctOfficerService: Failed to load request timeline:',\n          response.data.message\n        )\n        throw new Error(response.data.message || 'Failed to load request timeline')\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching request timeline:', error)\n      if (error.response) {\n        throw new Error(error.response.data?.message || 'Failed to load timeline data')\n      } else {\n        throw new Error('Network error while loading timeline')\n      }\n    }\n  },\n\n  /**\n   * Get access request timeline (alias for getRequestTimeline)\n   */\n  async getAccessRequestTimeline(requestId) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching access request timeline:', requestId)\n      const response = await axiosInstance.get(`/ict-officer/access-requests/${requestId}/timeline`)\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Access request timeline loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error(\n          'âŒ IctOfficerService: Failed to load access request timeline:',\n          response.data.message\n        )\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load access request timeline'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching access request timeline:', error)\n      return {\n        success: false,\n        message:\n          error.response?.data?.message || 'Network error while loading access request timeline'\n      }\n    }\n  },\n\n  /**\n   * Grant access to a request (final step with timeline logging)\n   */\n  async grantAccess(requestId, data) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Granting access for request:', requestId)\n      devLog.debug('Grant access data:', data)\n\n      const response = await axiosInstance.post(\n        `/ict-officer/access-requests/${requestId}/grant-access`,\n        {\n          comments: data.comments || '',\n          implementation_status: 'implemented',\n          implementation_completed_at: new Date().toISOString()\n        }\n      )\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Access granted successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message || 'Access granted successfully'\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to grant access:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to grant access'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error granting access:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while granting access'\n      }\n    }\n  },\n\n  /**\n   * Get statistics for ICT Officer dashboard\n   */\n  async getStatistics() {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching statistics...')\n      const response = await axiosInstance.get('/ict-officer/statistics')\n\n      if (response.data.success) {\n        devLog.debug('âœ… IctOfficerService: Statistics loaded successfully')\n        return {\n          success: true,\n          data: response.data.data,\n          message: response.data.message\n        }\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to load statistics:', response.data.message)\n        return {\n          success: false,\n          message: response.data.message || 'Failed to load statistics'\n        }\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching statistics:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while loading statistics'\n      }\n    }\n  },\n\n  /**\n   * Get count of pending access requests for notification badge\n   */\n  async getPendingRequestsCount() {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Fetching pending requests count...')\n      const response = await axiosInstance.get('/ict-officer/pending-count')\n\n      if (response.data.success) {\n        // Success logged only in development mode\n        if (process.env.NODE_ENV === 'development') {\n          devLog.debug('âœ… IctOfficerService: Pending count loaded successfully')\n        }\n        return response.data.data\n      } else {\n        devLog.error('âŒ IctOfficerService: Failed to load pending count:', response.data.message)\n        throw new Error(response.data.message || 'Failed to load pending requests count')\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error fetching pending count:', error)\n      if (error.response) {\n        throw new Error(error.response.data?.message || 'Failed to load pending count')\n      } else {\n        throw new Error('Network error while loading pending count')\n      }\n    }\n  },\n\n  /**\n   * Retry or (re)send SMS notification to the requester for a given access request\n   * Backend-agnostic: sends multiple compatible phone keys and hint flags.\n   */\n  async resendRequesterSms(requestId, requesterPhone = null) {\n    try {\n      devLog.debug('ðŸ”„ IctOfficerService: Retrying requester SMS for:', {\n        requestId,\n        requesterPhone\n      })\n\n      const normalizePhone = (p) => {\n        if (!p) return null\n        const s = String(p).trim()\n        const keepPlus = s.startsWith('+')\n        const digits = s.replace(/[^\\d]/g, '')\n        return keepPlus ? `+${digits}` : digits\n      }\n\n      const rawPhone = requesterPhone || null\n      const normalized = normalizePhone(rawPhone)\n\n      const payload = {\n        request_id: requestId,\n        role: 'ict_officer',\n        notification_type: 'requester_access_granted',\n        resend_only: true,\n        force: true,\n        force_resend: true,\n        resend_sms: true,\n        send_sms: true,\n        send_sms_to_requester: true,\n        notification_channel: 'sms',\n        // Phone compatibility keys (ignored if not recognized)\n        requester_phone: rawPhone || undefined,\n        requester_phone_number: rawPhone || undefined,\n        requester_msisdn: normalized || undefined,\n        staff_phone: rawPhone || undefined,\n        staff_phone_number: rawPhone || undefined,\n        recipient_phone: normalized || undefined,\n        destination_phone: normalized || undefined,\n        phone_number: normalized || undefined,\n        msisdn: normalized || undefined,\n        contact_phone: normalized || undefined\n      }\n\n      // Try multiple endpoints in order of preference\n      let response\n      const endpoints = [\n        `/ict-officer/access-requests/${requestId}/notify`,\n        `/ict-officer/access-requests/${requestId}/resend-sms`,\n        `/ict-officer/access-requests/${requestId}/send-notification`,\n        `/ict-officer/access-requests/${requestId}/grant-access`,\n        `/ict-officer/notify`,\n        `/ict-officer/resend-sms`\n      ]\n\n      let lastError\n      for (let i = 0; i < endpoints.length; i++) {\n        try {\n          devLog.debug(`ðŸ”„ Trying endpoint ${i + 1}/${endpoints.length}: ${endpoints[i]}`)\n          response = await axiosInstance.post(endpoints[i], payload)\n          devLog.debug(`âœ… Success with endpoint: ${endpoints[i]}`)\n          break\n        } catch (e) {\n          console.warn(\n            `âŒ Endpoint ${endpoints[i]} failed:`,\n            e.response?.status,\n            e.response?.data?.message || e.message\n          )\n          lastError = e\n          if (i === endpoints.length - 1) {\n            devLog.error('ðŸš« All endpoints failed for SMS retry')\n            throw lastError\n          }\n        }\n      }\n\n      if (response.data?.success) {\n        devLog.debug('âœ… IctOfficerService: Requester SMS retry triggered successfully')\n        return { success: true, data: response.data.data, message: response.data.message }\n      }\n\n      return {\n        success: false,\n        message: response.data?.message || 'Failed to trigger SMS retry'\n      }\n    } catch (error) {\n      devLog.error('âŒ IctOfficerService: Error retrying requester SMS:', error)\n      return {\n        success: false,\n        message: error.response?.data?.message || 'Network error while retrying SMS'\n      }\n    }\n  }\n}\n\nexport default ictOfficerService\n"],"names":["API_BASE_URL","process","axiosInstance","axios","create","baseURL","timeout","headers","Accept","interceptors","request","use","config","token","localStorage","getItem","Authorization","method","toLowerCase","url","URL","searchParams","set","String","Date","now","pathname","search","e","sep","includes","error","Promise","reject","response","status","removeItem","window","path","location","href","ictOfficerService","getAccessRequests","devLog","debug","get","data","success","message","getAccessRequestById","requestId","assignTaskToSelf","notes","post","updateProgress","put","updateImplementationProgress","comments","payload","implementation_status","implementation_comments","ict_officer_started_at","toISOString","ict_officer_implemented_at","cancelTask","reason","completeImplementation","signatureFile","formData","FormData","append","getRequestTimeline","Error","getAccessRequestTimeline","grantAccess","implementation_completed_at","getStatistics","getPendingRequestsCount","resendRequesterSms","requesterPhone","normalizePhone","p","s","trim","keepPlus","startsWith","digits","replace","rawPhone","normalized","request_id","role","notification_type","resend_only","force","force_resend","resend_sms","send_sms","send_sms_to_requester","notification_channel","requester_phone","undefined","requester_phone_number","requester_msisdn","staff_phone","staff_phone_number","recipient_phone","destination_phone","phone_number","msisdn","contact_phone","endpoints","lastError","i","length","console","warn"],"ignoreList":[],"sourceRoot":""}