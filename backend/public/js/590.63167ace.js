"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[590],{971:function(e,a,t){t.r(a),t.d(a,{default:function(){return ne}});var r=t(5796);const s={class:"flex flex-col h-screen"},l={class:"flex flex-1 overflow-hidden"},o={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},u={class:"absolute inset-0"},c={class:"max-w-13xl mx-auto relative z-10"},f={class:"medical-glass-card rounded-t-3xl p-8 mb-0 border-b border-blue-300/30 bg-gradient-to-r from-blue-600/30 to-blue-700/30"},p={class:"flex items-center justify-between"},b={class:"text-3xl font-bold text-white mb-2 flex items-center"},m={class:"flex items-center space-x-6"},v={class:"flex items-center space-x-3"},h=["disabled"],g={class:"relative"},w=["src"],x={key:1,class:"fas fa-user text-white text-3xl relative z-10 drop-shadow-lg"},k={key:2,class:"absolute inset-0 bg-black/30 flex items-center justify-center z-20"},y={class:"medical-glass-card rounded-b-3xl overflow-hidden"},L={class:"p-8 space-y-8"},C={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-500 group relative overflow-hidden"},P={class:"relative z-10"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M={class:"group"},_={class:"relative"},D=["readonly"],S={class:"group"},A={class:"relative"},j=["readonly"],W={class:"group"},F={class:"relative"},U=["readonly"],R={class:"group"},N={class:"relative"},X={class:"flex items-center justify-between p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-teal-300/20"},z={class:"flex justify-between items-center pt-6"},K={class:"flex space-x-3"},I={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},B={class:"bg-white rounded-xl shadow-2xl max-w-md w-full transform transition-all duration-300 scale-100"},J={class:"p-6"},O={class:"flex items-center justify-between mb-4"},T={key:0,class:"mt-1 text-xs text-red-600 flex items-center"},V={key:0,class:"mt-1 text-xs text-red-600 flex items-center"},Q={key:0,class:"mt-1 text-xs text-red-600 flex items-center"},q={class:"flex space-x-3 pt-4"},Y=["disabled"],G={key:0},H={key:1},$={class:"flex items-center"};function Z(e,a,t,Z,ee,ae){const te=(0,r.g2)("Header"),re=(0,r.g2)("ModernSidebar"),se=(0,r.g2)("AppFooter");return(0,r.uX)(),(0,r.CE)("div",s,[(0,r.bF)(te),(0,r.Lk)("div",l,[(0,r.bF)(re),(0,r.Lk)("main",o,[(0,r.Lk)("div",i,[(0,r.Lk)("div",n,[(0,r.Lk)("div",d,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(48,e=>(0,r.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,r.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,r.Lk)("div",u,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(15,e=>(0,r.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,r.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,r.Lk)("i",{class:(0,r.C4)(["fas",["fa-heartbeat","fa-user-md","fa-hospital","fa-stethoscope","fa-plus"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),(0,r.Lk)("div",c,[(0,r.Lk)("div",f,[(0,r.Lk)("div",p,[(0,r.Lk)("div",null,[(0,r.Lk)("h1",b,[a[18]||(a[18]=(0,r.Lk)("i",{class:"fas fa-user-circle mr-3 text-blue-300"},null,-1)),(0,r.eW)(" "+(0,r.v_)(Z.user?.name||"User Profile"),1)]),a[19]||(a[19]=(0,r.Lk)("div",{class:"flex items-center space-x-4"},[(0,r.Lk)("span",{class:"bg-green-500/20 text-green-200 px-3 py-1 rounded-full text-sm font-medium border border-green-400/30"},[(0,r.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,r.eW)(" Active ")])],-1))]),(0,r.Lk)("div",m,[(0,r.Lk)("div",v,[(0,r.Lk)("button",{onClick:a[0]||(a[0]=e=>Z.editMode=!Z.editMode),class:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-300 font-medium flex items-center shadow-lg hover:shadow-xl transform hover:scale-105"},[(0,r.Lk)("i",{class:(0,r.C4)([Z.editMode?"fas fa-times":"fas fa-edit","mr-2"])},null,2),(0,r.eW)(" "+(0,r.v_)(Z.editMode?"Cancel":"Edit Profile"),1)]),Z.editMode?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:a[1]||(a[1]=(...e)=>Z.saveProfile&&Z.saveProfile(...e)),disabled:Z.isSaving,class:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all duration-300 font-medium flex items-center shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50"},[(0,r.Lk)("i",{class:(0,r.C4)([Z.isSaving?"fas fa-spinner fa-spin":"fas fa-save","mr-2"])},null,2),(0,r.eW)(" "+(0,r.v_)(Z.isSaving?"Saving...":"Save Changes"),1)],8,h)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",g,[(0,r.Lk)("button",{type:"button",onClick:a[2]||(a[2]=e=>Z.editMode&&Z.triggerAvatarUpload()),class:(0,r.C4)(["w-24 h-24 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-xl border-4 border-white/20 relative overflow-hidden focus:outline-none focus:ring-2 focus:ring-blue-300",Z.editMode?"cursor-pointer hover:scale-105 transition-transform duration-200":"cursor-default"])},[a[21]||(a[21]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-full"},null,-1)),Z.user?.profile_photo_url?((0,r.uX)(),(0,r.CE)("img",{key:0,src:Z.user.profile_photo_url,alt:"Profile avatar",class:"w-full h-full object-cover rounded-full relative z-10"},null,8,w)):((0,r.uX)(),(0,r.CE)("i",x)),a[22]||(a[22]=(0,r.Lk)("div",{class:"absolute top-2 right-2 w-2 h-2 bg-green-400 rounded-full animate-pulse border border-white"},null,-1)),Z.editMode?((0,r.uX)(),(0,r.CE)("div",k,[...a[20]||(a[20]=[(0,r.Lk)("i",{class:"fas fa-camera text-white text-lg"},null,-1)])])):(0,r.Q3)("",!0)],2),(0,r.Lk)("input",{ref:"avatarInput",type:"file",accept:"image/*",class:"hidden",onChange:a[3]||(a[3]=(...e)=>Z.handleAvatarSelected&&Z.handleAvatarSelected(...e))},null,544),a[23]||(a[23]=(0,r.Lk)("div",{class:"absolute -bottom-1 -right-1 bg-green-500 text-white text-sm px-2 py-1 rounded-full font-bold shadow-lg"}," Online ",-1))])])])]),(0,r.Lk)("div",y,[(0,r.Lk)("div",L,[(0,r.Lk)("div",C,[a[35]||(a[35]=(0,r.Lk)("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-blue-500/5 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-700"},null,-1)),a[36]||(a[36]=(0,r.Lk)("div",{class:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-400/20 to-transparent rounded-full blur-2xl group-hover:scale-150 transition-transform duration-1000"},null,-1)),(0,r.Lk)("div",P,[a[34]||(a[34]=(0,r.Fv)('<div class="flex items-center space-x-4 mb-6" data-v-9d345f8c><div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50 relative overflow-hidden" data-v-9d345f8c><div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl" data-v-9d345f8c></div><i class="fas fa-user-edit text-white text-xl relative z-10 drop-shadow-lg" data-v-9d345f8c></i></div><div data-v-9d345f8c><h3 class="text-2xl font-bold text-white flex items-center" data-v-9d345f8c><i class="fas fa-info-circle mr-3 text-blue-300" data-v-9d345f8c></i> Personal Information </h3><p class="text-sm text-blue-100/80" data-v-9d345f8c> Manage your personal details and contact information </p></div></div>',1)),(0,r.Lk)("div",E,[(0,r.Lk)("div",M,[a[25]||(a[25]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-3 flex items-center"},[(0,r.Lk)("i",{class:"fas fa-user mr-2 text-blue-300"}),(0,r.eW)(" Full Name ")],-1)),(0,r.Lk)("div",_,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>Z.profileData.name=e),type:"text",readonly:!Z.editMode,class:(0,r.C4)(["medical-input w-full px-4 py-4 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",{"cursor-not-allowed":!Z.editMode}]),placeholder:"Enter your full name"},null,10,D),[[r.Jo,Z.profileData.name]]),a[24]||(a[24]=(0,r.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50"},[(0,r.Lk)("i",{class:"fas fa-user-circle"})],-1))])]),(0,r.Lk)("div",S,[a[27]||(a[27]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-3 flex items-center"},[(0,r.Lk)("i",{class:"fas fa-envelope mr-2 text-blue-300"}),(0,r.eW)(" Email Address ")],-1)),(0,r.Lk)("div",A,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>Z.profileData.email=e),type:"email",readonly:!Z.editMode,class:(0,r.C4)(["medical-input w-full px-4 py-4 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",{"cursor-not-allowed":!Z.editMode}]),placeholder:"Enter your email address"},null,10,j),[[r.Jo,Z.profileData.email]]),a[26]||(a[26]=(0,r.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50"},[(0,r.Lk)("i",{class:"fas fa-at"})],-1))])]),(0,r.Lk)("div",W,[a[29]||(a[29]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-3 flex items-center"},[(0,r.Lk)("i",{class:"fas fa-phone mr-2 text-blue-300"}),(0,r.eW)(" Phone Number ")],-1)),(0,r.Lk)("div",F,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>Z.profileData.phone=e),type:"tel",readonly:!Z.editMode,class:(0,r.C4)(["medical-input w-full px-4 py-4 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 group-hover:border-blue-400/50",{"cursor-not-allowed":!Z.editMode}]),placeholder:"Enter your phone number",onBlur:a[7]||(a[7]=e=>Z.profileData.phone=Z.normalizePhoneNumber(Z.profileData.phone))},null,42,U),[[r.Jo,Z.profileData.phone]]),a[28]||(a[28]=(0,r.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/50"},[(0,r.Lk)("i",{class:"fas fa-mobile-alt"})],-1))])]),(0,r.Lk)("div",R,[a[31]||(a[31]=(0,r.Lk)("label",{class:"block text-base font-bold text-blue-100 mb-3 flex items-center"},[(0,r.Lk)("i",{class:"fas fa-building mr-2 text-blue-300"}),(0,r.eW)(" Department ")],-1)),(0,r.Lk)("div",N,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>Z.profileData.department=e),type:"text",readonly:"",class:"medical-input w-full px-4 py-4 bg-white/10 border-2 border-blue-300/20 rounded-xl text-white/70 backdrop-blur-sm cursor-not-allowed",placeholder:"Department information"},null,512),[[r.Jo,Z.profileData.department]]),a[30]||(a[30]=(0,r.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-blue-300/30"},[(0,r.Lk)("i",{class:"fas fa-lock"})],-1))]),a[32]||(a[32]=(0,r.Lk)("p",{class:"text-xs text-blue-200/60 mt-1 italic"},[(0,r.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,r.eW)(" Department information is managed by administrators ")],-1))]),(0,r.Lk)("div",X,[a[33]||(a[33]=(0,r.Fv)('<div class="flex items-center space-x-3" data-v-9d345f8c><div class="w-10 h-10 bg-teal-500/30 rounded-lg flex items-center justify-center" data-v-9d345f8c><i class="fas fa-key text-teal-300" data-v-9d345f8c></i></div><div data-v-9d345f8c><h4 class="font-semibold text-white" data-v-9d345f8c>Password</h4><p class="text-sm text-teal-200/70" data-v-9d345f8c>Last changed 30 days ago</p></div></div>',1)),(0,r.Lk)("button",{onClick:a[9]||(a[9]=e=>Z.showPasswordModal=!0),class:"px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium"}," Change Password ")])])])]),(0,r.Lk)("div",z,[(0,r.Lk)("button",{onClick:a[10]||(a[10]=(...e)=>Z.goBack&&Z.goBack(...e)),class:"px-6 py-3 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl text-sm transform hover:scale-105"},[...a[37]||(a[37]=[(0,r.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,r.eW)(" Back to Dashboard ",-1)])]),(0,r.Lk)("div",K,[(0,r.Lk)("button",{onClick:a[11]||(a[11]=(...e)=>Z.exportProfile&&Z.exportProfile(...e)),class:"px-6 py-3 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all duration-300 font-semibold flex items-center shadow-lg hover:shadow-xl text-sm transform hover:scale-105"},[...a[38]||(a[38]=[(0,r.Lk)("i",{class:"fas fa-download mr-2"},null,-1),(0,r.eW)(" Export Profile ",-1)])])])]),(0,r.bF)(se)])])])])]),Z.showPasswordModal?((0,r.uX)(),(0,r.CE)("div",I,[(0,r.Lk)("div",B,[(0,r.Lk)("div",J,[(0,r.Lk)("div",O,[a[40]||(a[40]=(0,r.Lk)("h3",{class:"text-xl font-bold text-gray-800"},"Change Password",-1)),(0,r.Lk)("button",{onClick:a[12]||(a[12]=e=>Z.showPasswordModal=!1),class:"text-gray-400 hover:text-gray-600"},[...a[39]||(a[39]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)])])]),(0,r.Lk)("form",{onSubmit:a[17]||(a[17]=(0,r.D$)((...e)=>Z.changePassword&&Z.changePassword(...e),["prevent"])),class:"space-y-4"},[(0,r.Lk)("div",null,[a[42]||(a[42]=(0,r.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"}," Current Password ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>Z.passwordData.current=e),type:"password",required:"",class:(0,r.C4)(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",Z.passwordErrors.current?"border-red-500":"border-gray-300"]),placeholder:"Enter current password"},null,2),[[r.Jo,Z.passwordData.current]]),Z.passwordErrors.current?((0,r.uX)(),(0,r.CE)("p",T,[a[41]||(a[41]=(0,r.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,r.eW)(" "+(0,r.v_)(Z.passwordErrors.current),1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",null,[a[44]||(a[44]=(0,r.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"}," New Password ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[14]||(a[14]=e=>Z.passwordData.new=e),type:"password",required:"",class:(0,r.C4)(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",Z.passwordErrors.new?"border-red-500":"border-gray-300"]),placeholder:"Enter new password"},null,2),[[r.Jo,Z.passwordData.new]]),Z.passwordErrors.new?((0,r.uX)(),(0,r.CE)("p",V,[a[43]||(a[43]=(0,r.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,r.eW)(" "+(0,r.v_)(Z.passwordErrors.new),1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",null,[a[46]||(a[46]=(0,r.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":a[15]||(a[15]=e=>Z.passwordData.confirm=e),type:"password",required:"",class:(0,r.C4)(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",Z.passwordErrors.confirm?"border-red-500":"border-gray-300"]),placeholder:"Confirm new password"},null,2),[[r.Jo,Z.passwordData.confirm]]),Z.passwordErrors.confirm?((0,r.uX)(),(0,r.CE)("p",Q,[a[45]||(a[45]=(0,r.Lk)("i",{class:"fas fa-exclamation-circle mr-1"},null,-1)),(0,r.eW)(" "+(0,r.v_)(Z.passwordErrors.confirm),1)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",q,[(0,r.Lk)("button",{type:"button",onClick:a[16]||(a[16]=e=>Z.showPasswordModal=!1),class:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors"}," Cancel "),(0,r.Lk)("button",{type:"submit",disabled:Z.isChangingPassword,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},[Z.isChangingPassword?((0,r.uX)(),(0,r.CE)("span",G,"Changing...")):((0,r.uX)(),(0,r.CE)("span",H,"Change Password"))],8,Y)])],32)])])])):(0,r.Q3)("",!0),Z.showMessage?((0,r.uX)(),(0,r.CE)("div",{key:1,class:(0,r.C4)(["fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300","success"===Z.messageType?"bg-green-600 text-white":"bg-red-600 text-white"])},[(0,r.Lk)("div",$,[(0,r.Lk)("i",{class:(0,r.C4)(["success"===Z.messageType?"fas fa-check-circle":"fas fa-exclamation-circle","mr-2"])},null,2),(0,r.eW)(" "+(0,r.v_)(Z.message),1)])],2)):(0,r.Q3)("",!0)])}t(4114),t(4603),t(7566),t(8721);var ee=t(1387),ae=t(1127),te=t(8966),re=t(5498),se=t(9101),le={name:"UserProfile",components:{Header:re.A,ModernSidebar:te.A,AppFooter:se.A},setup(){const e=(0,ee.rd)(),{user:a,updateUser:s}=(0,ae.h)(),l=(0,r.KR)(!1),o=(0,r.KR)(!1),i=(0,r.KR)(!1),n=(0,r.KR)(!1),d=(0,r.KR)(!1),u=(0,r.KR)(""),c=(0,r.KR)("success"),f=(0,r.KR)(null),p=(0,r.KR)(!1),b=(0,r.KR)({name:"",email:"",phone:"",department:"",emailNotifications:!0}),m=(0,r.KR)({current:"",new:"",confirm:""}),v=(0,r.KR)({current:"",new:"",confirm:""}),h=()=>{v.value={current:v.value.current,new:"",confirm:""},m.value.new?m.value.new.length<8&&(v.value.new="New password must be at least 8 characters."):v.value.new="New password is required.",m.value.confirm?m.value.new!==m.value.confirm&&(v.value.confirm="Passwords do not match."):v.value.confirm="Please confirm your new password."};(0,r.wB)(()=>({...m.value}),()=>{h()}),(0,r.sV)(()=>{if(a.value){const e=a.value.department,t=e&&(e.display_name||e.full_name||e.name||e.code||e.abbreviation)||a.value.department_display_name||a.value.department_full_name||a.value.department_name||a.value.department_code||"Not specified";b.value={name:a.value.name||"",email:a.value.email||"",phone:g(a.value.phone||""),department:t,emailNotifications:a.value.email_notifications??!0}}});const g=e=>{if(!e)return"";let a=String(e).trim().replace(/\s|-/g,"");return a.startsWith("+255")?a:a.startsWith("255")?"+"+a:a.startsWith("0")?"+255"+a.slice(1):a},w=()=>{f.value&&l.value&&!p.value&&f.value.click()},x=async e=>{const a=e.target.files?.[0];if(!a)return;const r=["image/jpeg","image/png","image/gif","image/webp"];if(!r.includes(a.type))return P("Please upload a valid image (JPEG, PNG, GIF, WEBP).","error"),void(e.target.value="");const l=2097152;if(a.size>l)return P("Image is too large. Maximum size is 2MB.","error"),void(e.target.value="");p.value=!0;try{const{default:e}=await t.e(6094).then(t.bind(t,6094)),r=await e.uploadAvatar(a);if(r.success){const e=r.data?.data||{},a=e.profile_photo_url;a&&s({profile_photo_url:a}),P("Profile picture updated successfully!","success")}else{const e=Object.keys(r.errors||{})[0],a=e?r.errors[e][0]:r.message;P(a||"Failed to upload profile picture.","error")}}catch(o){P("Failed to upload profile picture. Please try again.","error")}finally{p.value=!1,e.target&&(e.target.value="")}},k=async()=>{o.value=!0;try{b.value.phone=g(b.value.phone),await new Promise(e=>setTimeout(e,1e3)),P("Profile updated successfully!","success"),l.value=!1}catch(e){P("Failed to update profile. Please try again.","error")}finally{o.value=!1}},y=async()=>{if(v.value={current:"",new:"",confirm:""},m.value.current||(v.value.current="Current password is required."),h(),!(v.value.current||v.value.new||v.value.confirm)){n.value=!0;try{const{authService:r}=await t.e(981).then(t.bind(t,981)),s=await r.changePassword({current:m.value.current,new:m.value.new,confirm:m.value.confirm});if(s.success){P("Password changed successfully! You will be logged out.","success"),i.value=!1,m.value={current:"",new:"",confirm:""};try{const{authService:e}=await t.e(981).then(t.bind(t,981));await e.logout()}catch(a){}const{useAuthStore:r}=await Promise.resolve().then(t.bind(t,14)),s=r();s.clearAuth(),e.push("/login")}else{const e=s.errors||{};e.current_password&&e.current_password[0]&&(v.value.current=e.current_password[0]),e.password&&e.password[0]&&(v.value.new=e.password[0],v.value.confirm=e.password[0]);const a=Object.keys(e)[0],t=a?e[a][0]:s.message;P(t||"Failed to change password. Please try again.","error")}}catch(r){P("Failed to change password. Please try again.","error")}finally{n.value=!1}}},L=()=>{const e={name:b.value.name,email:b.value.email,phone:b.value.phone,department:b.value.department,role:a.value?.role,exportDate:(new Date).toISOString()},t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.download=`profile_${b.value.name.replace(/\s+/g,"_")}_${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(s),P("Profile exported successfully!","success")},C=()=>{e.push("/user-dashboard")},P=(e,a="success")=>{u.value=e,c.value=a,d.value=!0,setTimeout(()=>{d.value=!1},3e3)};return{user:a,editMode:l,isSaving:o,showPasswordModal:i,isChangingPassword:n,showMessage:d,message:u,messageType:c,profileData:b,passwordData:m,passwordErrors:v,saveProfile:k,changePassword:y,exportProfile:L,goBack:C,showNotification:P,normalizePhoneNumber:g,triggerAvatarUpload:w,handleAvatarSelected:x,avatarInput:f,isUploadingAvatar:p}}},oe=t(1241);const ie=(0,oe.A)(le,[["render",Z],["__scopeId","data-v-9d345f8c"]]);var ne=ie},9101:function(e,a,t){t.d(a,{A:function(){return f}});var r=t(5796);const s={class:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative",style:{position:"relative","z-index":"1","margin-top":"auto"}},l={class:"flex flex-col md:flex-row justify-between items-center"},o={class:"text-base text-blue-100 flex items-center space-x-2"},i={class:"font-medium"};function n(e,a,t,n,d,u){return(0,r.uX)(),(0,r.CE)("footer",s,[(0,r.Lk)("div",l,[(0,r.Lk)("div",o,[a[0]||(a[0]=(0,r.Lk)("div",{class:"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40"},[(0,r.Lk)("i",{class:"fas fa-hospital text-blue-300 text-sm"})],-1)),(0,r.Lk)("p",i," Â© "+(0,r.v_)(u.currentYear)+" Muhimbili National Hospital. All rights reserved. ",1)])])])}var d={name:"AppFooter",computed:{currentYear(){return(new Date).getFullYear()}}},u=t(1241);const c=(0,u.A)(d,[["render",n],["__scopeId","data-v-2f68623d"]]);var f=c}}]);
//# sourceMappingURL=590.63167ace.js.map