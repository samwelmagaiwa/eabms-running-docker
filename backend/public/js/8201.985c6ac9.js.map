{"version":3,"file":"js/8201.985c6ac9.js","mappings":"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","sources":["webpack://frontend/./src/components/views/ict-approval/RequestsListSimple.vue","webpack://frontend/./src/components/views/ict-approval/RequestsListSimple.vue?b605"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-100\">\n    <Header />\n    <div class=\"flex\">\n      <ModernSidebar />\n      <main class=\"flex-1 p-8\">\n        <div class=\"max-w-6xl mx-auto\">\n          <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">ICT Device Requests</h1>\n\n          <!-- Loading State -->\n          <div v-if=\"isLoading\" class=\"text-center py-8\">\n            <div\n              class=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"\n            ></div>\n            <p class=\"mt-2 text-gray-600\">Loading requests...</p>\n          </div>\n\n          <!-- Error State -->\n          <div\n            v-else-if=\"error\"\n            class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\"\n          >\n            <h3 class=\"font-bold\">Error Loading Requests</h3>\n            <p>{{ error }}</p>\n            <button\n              @click=\"fetchRequests\"\n              class=\"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n            >\n              Retry\n            </button>\n          </div>\n\n          <!-- Requests Table -->\n          <div v-else class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n              <h2 class=\"text-xl font-semibold text-gray-800\">\n                Device Borrowing Requests ({{ requests.length }})\n              </h2>\n            </div>\n\n            <div v-if=\"requests.length === 0\" class=\"text-center py-12\">\n              <p class=\"text-gray-500\">No requests found</p>\n            </div>\n\n            <div v-else class=\"overflow-x-auto\">\n              <table class=\"min-w-full divide-y divide-gray-200\">\n                <thead class=\"bg-gray-50\">\n                  <tr>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      ID\n                    </th>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      Borrower\n                    </th>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      Device\n                    </th>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      Status\n                    </th>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      Date\n                    </th>\n                    <th\n                      class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\n                    >\n                      Actions\n                    </th>\n                  </tr>\n                </thead>\n                <tbody class=\"bg-white divide-y divide-gray-200\">\n                  <tr v-for=\"request in requests\" :key=\"request.id\" class=\"hover:bg-gray-50\">\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      {{ request.id }}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {{ request.borrower_name || 'Unknown' }}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {{ request.device_name || request.device_type || 'Unknown' }}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                      <span\n                        :class=\"getStatusClass(request.ict_approve)\"\n                        class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full\"\n                      >\n                        {{ request.ict_approve || 'pending' }}\n                      </span>\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {{ formatDate(request.booking_date) }}\n                    </td>\n                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <router-link\n                        :to=\"`/ict-approval/request/${request.id}`\"\n                        class=\"text-blue-600 hover:text-blue-900 mr-3\"\n                      >\n                        View\n                      </router-link>\n                      <button\n                        v-if=\"request.ict_approve === 'pending'\"\n                        @click=\"approveRequest(request.id)\"\n                        class=\"text-green-600 hover:text-green-900 mr-3\"\n                      >\n                        Approve\n                      </button>\n                      <button\n                        v-if=\"request.ict_approve === 'pending'\"\n                        @click=\"rejectRequest(request.id)\"\n                        class=\"text-red-600 hover:text-red-900\"\n                      >\n                        Reject\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Header from '@/components/header.vue'\n  import ModernSidebar from '@/components/ModernSidebar.vue'\n  import { deviceBorrowingService } from '@/services/deviceBorrowingService'\n\n  export default {\n    name: 'RequestsListSimple',\n    components: {\n      Header,\n      ModernSidebar\n    },\n    data() {\n      return {\n        requests: [],\n        isLoading: false,\n        error: null\n      }\n    },\n    async mounted() {\n      await this.fetchRequests()\n    },\n    methods: {\n      async fetchRequests() {\n        this.isLoading = true\n        this.error = null\n\n        try {\n          console.log('Fetching requests...')\n          const response = await deviceBorrowingService.getAllRequests({\n            per_page: 50\n          })\n\n          console.log('Service response:', response)\n\n          if (response.success) {\n            this.requests = response.data.data || []\n            console.log('Requests loaded:', this.requests.length)\n          } else {\n            throw new Error(response.message || 'Failed to fetch requests')\n          }\n        } catch (error) {\n          console.error('Error fetching requests:', error)\n          this.error = error.message\n        } finally {\n          this.isLoading = false\n        }\n      },\n\n      async approveRequest(requestId) {\n        try {\n          const notes = prompt('Add approval notes (optional):') || ''\n          const response = await deviceBorrowingService.approveRequest(requestId, notes)\n\n          if (response.success) {\n            alert('Request approved successfully!')\n            await this.fetchRequests() // Refresh the list\n          } else {\n            throw new Error(response.message || 'Failed to approve request')\n          }\n        } catch (error) {\n          console.error('Error approving request:', error)\n          alert('Error approving request: ' + error.message)\n        }\n      },\n\n      async rejectRequest(requestId) {\n        try {\n          const reason = prompt('Please provide a rejection reason (required):')\n          if (!reason || reason.trim() === '') {\n            alert('Rejection reason is required')\n            return\n          }\n\n          const response = await deviceBorrowingService.rejectRequest(requestId, reason)\n\n          if (response.success) {\n            alert('Request rejected successfully!')\n            await this.fetchRequests() // Refresh the list\n          } else {\n            throw new Error(response.message || 'Failed to reject request')\n          }\n        } catch (error) {\n          console.error('Error rejecting request:', error)\n          alert('Error rejecting request: ' + error.message)\n        }\n      },\n\n      getStatusClass(status) {\n        const classes = {\n          pending: 'bg-yellow-100 text-yellow-800',\n          approved: 'bg-green-100 text-green-800',\n          rejected: 'bg-red-100 text-red-800'\n        }\n        return classes[status] || classes.pending\n      },\n\n      formatDate(dateString) {\n        if (!dateString) return 'N/A'\n        try {\n          return new Date(dateString).toLocaleDateString()\n        } catch {\n          return dateString\n        }\n      }\n    }\n  }\n</script>\n","import { render } from \"./RequestsListSimple.vue?vue&type=template&id=1e1da274\"\nimport script from \"./RequestsListSimple.vue?vue&type=script&lang=js\"\nexport * from \"./RequestsListSimple.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_Header","_createElementVNode","_hoisted_2","_component_ModernSidebar","_hoisted_3","_hoisted_4","$data","isLoading","_hoisted_5","_cache","error","_hoisted_6","_toDisplayString","onClick","args","$options","fetchRequests","_hoisted_7","_hoisted_8","_hoisted_9","requests","length","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_Fragment","_renderList","request","key","id","_hoisted_14","_hoisted_15","borrower_name","_hoisted_16","device_name","device_type","_hoisted_17","_normalizeClass","getStatusClass","ict_approve","_hoisted_18","formatDate","booking_date","_hoisted_19","_component_router_link","to","$event","approveRequest","_hoisted_20","rejectRequest","_hoisted_21","name","components","Header","ModernSidebar","data","mounted","this","methods","response","deviceBorrowingService","getAllRequests","per_page","success","Error","message","console","requestId","notes","prompt","alert","reason","trim","status","classes","pending","approved","rejected","dateString","Date","toLocaleDateString","__exports__","render"],"ignoreList":[],"sourceRoot":""}