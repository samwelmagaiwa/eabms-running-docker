"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[981,1075,3679,5389],{981:function(e,t,s){s.d(t,{authService:function(){return o}});var a=s(4373);const r="/api",i=a.A.create({baseURL:r,timeout:parseInt("30000")||1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});i.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{const t=e.response?.status,s=(e.config?.method||"").toString().toLowerCase(),a=(e.config?.url||"").toString();if(401===t){const e="post"===s&&a.includes("/login");e||(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("session_data"),window.location.href="/login")}return Promise.reject(e)});const o={async login(e){try{const t=await i.post("/login",e);return{success:!0,data:t.data}}catch(t){return{success:!1,message:t.response?.data?.message||"Login failed",errors:t.response?.data?.errors||{}}}},async logout(){try{const e=await i.post("/logout");return{success:!0,data:e.data}}catch(e){return{success:!0,message:"Logged out locally (API call failed)"}}},async logoutAll(){try{const e=await i.post("/logout-all");return{success:!0,data:e.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Logout all failed"}}},async getCurrentUser(){try{const e=await i.get("/current-user");return{success:!0,data:e.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to get user data",status:e.response?.status}}},async getRoleBasedRedirect(){try{const e=await i.get("/role-redirect");return{success:!0,data:e.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to get redirect URL",status:e.response?.status}}},async getActiveSessions(){try{const e=await i.get("/active-sessions");return{success:!0,data:e.data}}catch(e){return{success:!1,message:e.response?.data?.message||"Failed to get active sessions"}}},async revokeSession(e){try{const t=await i.post("/revoke-session",{token_id:e});return{success:!0,data:t.data}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to revoke session"}}},async changePassword(e){try{const t=await i.post("/change-password",{current_password:e.current,password:e.new,password_confirmation:e.confirm});return{success:!0,data:t.data,message:t.data?.message||"Password changed successfully."}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to change password.",errors:t.response?.data?.errors||{}}}},async requestPasswordResetByPhone(e){try{const t=await i.post("/password-reset/request-by-phone",{phone:e});return{success:!0,data:t.data,message:t.data?.message}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to send OTP.",errors:t.response?.data?.errors||{}}}},async verifyPasswordResetOtp(e){try{const t=await i.post("/password-reset/verify-otp",{phone:e.phone,otp:e.otp});return{success:!0,data:t.data,message:t.data?.message}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to verify OTP.",errors:t.response?.data?.errors||{}}}},async resetPasswordWithOtp(e){try{const t=await i.post("/password-reset/reset-with-otp",{phone:e.phone,otp:e.otp,password:e.password,password_confirmation:e.password_confirmation});return{success:!0,data:t.data?.data,message:t.data?.message}}catch(t){return{success:!1,message:t.response?.data?.message||"Failed to reset password.",errors:t.response?.data?.errors||{}}}}};t["default"]=o},1075:function(e,t,s){s.r(t);var a=s(4373);const r="/api";class i{constructor(){this.api=a.A.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.api.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e))}async sign(e){const t=await this.api.post("/documents/sign",{document_id:e});return{success:!0,data:t.data}}async list(e){const t=await this.api.get(`/documents/${e}/signatures`);return{success:!0,data:t.data.data}}async verify(e){const t=await this.api.get(`/signatures/${e}/verify`);return{success:t.data.success,data:t.data}}}t["default"]=new i},1445:function(e,t,s){s.d(t,{A:function(){return x}});var a=s(5796);const r={key:0,class:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none animate-fade-in"},i={class:"pointer-events-auto w-full max-w-lg mx-auto"},o={class:"relative bg-gradient-to-br from-white/20 via-blue-50/30 to-white/10 border-2 border-blue-300/50 backdrop-blur-xl rounded-3xl p-8 shadow-2xl overflow-hidden"},n={class:"relative z-10"},l={class:"flex items-center justify-center gap-6 mb-6"},d={class:"relative flex flex-col items-center"},c={class:"relative mb-3"},u={class:"text-center"},p={class:"text-white text-2xl font-bold tracking-wide mb-1 drop-shadow-md"},h={class:"text-blue-100 text-lg animate-pulse"},m={class:"text-center border-t border-blue-300/30 pt-4"},f={class:"text-teal-200 text-base font-semibold tracking-wider"};function g(e,t,s,g,v,b){return s.show?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[t[5]||(t[5]=(0,a.Fv)('<div class="absolute inset-0 opacity-10" data-v-94539b4a><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-slide-across" data-v-94539b4a></div><div class="absolute top-4 left-4 w-16 h-16 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.2);" data-v-94539b4a></div><div class="absolute bottom-4 right-4 w-20 h-20 bg-blue-400/20 rounded-full animate-float" style="animation-delay:1s;" data-v-94539b4a></div><div class="absolute top-1/2 left-8 w-12 h-12 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.15);animation-delay:2s;" data-v-94539b4a></div></div>',1)),(0,a.Lk)("div",n,[(0,a.Lk)("div",l,[t[1]||(t[1]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-teal-500/30 rounded-2xl backdrop-blur-sm border-2 border-blue-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-teal-400 rounded-2xl opacity-20 blur-sm animate-pulse"})],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[t[0]||(t[0]=(0,a.Lk)("div",{class:"rounded-full h-12 w-12 border-2 border-gray-300/20"},null,-1)),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-top-color":"#ff0000","animation-duration":"2s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-bottom-color":"#0000d1","animation-direction":"reverse","animation-duration":"1.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-right-color":"rgba(255, 0, 0, 0.7)","animation-duration":"2.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-left-color":"rgba(0, 0, 209, 0.7)","animation-direction":"reverse","animation-duration":"1.8s"}},null,2)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",p,(0,a.v_)(s.loadingTitle),1),(0,a.Lk)("div",h,(0,a.v_)(s.loadingSubtitle),1)])]),t[2]||(t[2]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-teal-500/30 to-blue-500/30 rounded-2xl backdrop-blur-sm border-2 border-teal-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/logo2.png",alt:"MNH Logo",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-teal-400 to-blue-400 rounded-2xl opacity-20 blur-sm animate-pulse",style:{"animation-delay":"0.5s"}})],-1))]),(0,a.Lk)("div",m,[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-lg font-black tracking-widest mb-1 drop-shadow-sm",style:{color:"#ff0000"}}," MUHIMBILI NATIONAL HOSPITAL ",-1)),(0,a.Lk)("div",f,(0,a.v_)(s.departmentTitle),1)]),t[4]||(t[4]=(0,a.Fv)('<div class="flex justify-center gap-2 mt-4" data-v-94539b4a><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.1s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;animation-delay:0.2s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.3s;" data-v-94539b4a></div></div>',1))])])])])):(0,a.Q3)("",!0)}var v={name:"UnifiedLoadingBanner",props:{show:{type:Boolean,default:!0},loadingTitle:{type:String,default:"Loading Requests"},loadingSubtitle:{type:String,default:"Please wait..."},departmentTitle:{type:String,default:"SYSTEM MANAGEMENT"},forceSpin:{type:Boolean,default:!1}}},b=s(1241);const w=(0,b.A)(v,[["render",g],["__scopeId","data-v-94539b4a"]]);var x=w},5389:function(e,t,s){s.r(t);s(4603),s(7566),s(8721);var a=s(4373),r=s(8998);const i="/api",o=a.A.create({baseURL:i,timeout:0,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");if(t&&(e.headers.Authorization=`Bearer ${t}`),e.method&&"get"===e.method.toLowerCase())try{const t=new URL(e.url,e.baseURL);t.searchParams.set("_cb",String(Date.now())),e.url=t.pathname+t.search}catch(s){const t=(e.url||"").includes("?")?"&":"?";e.url=`${e.url}${t}_cb=${Date.now()}`}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{const t=e.response?.status;if(401===t&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("session_data"),"undefined"!==typeof window)){const e=window.location.pathname||"";"/"!==e&&"/login"!==e&&(window.location.href="/")}return Promise.reject(e)});const n={async getAccessRequests(){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching access requests...");const e=await o.get("/ict-officer/access-requests");return e.data.success?(r.gg.debug("âœ… IctOfficerService: Access requests loaded successfully"),{success:!0,data:e.data.data,message:e.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to load access requests:",e.data.message),{success:!1,message:e.data.message||"Failed to load access requests"})}catch(e){return r.gg.error("âŒ IctOfficerService: Error fetching access requests:",e),{success:!1,message:e.response?.data?.message||"Network error while loading access requests"}}},async getAccessRequestById(e){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching access request by ID:",e);const t=await o.get(`/ict-officer/access-requests/${e}`);return t.data.success?(r.gg.debug("âœ… IctOfficerService: Access request loaded successfully"),{success:!0,data:t.data.data,message:t.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to load access request:",t.data.message),{success:!1,message:t.data.message||"Failed to load access request"})}catch(t){return r.gg.error("âŒ IctOfficerService: Error fetching access request:",t),{success:!1,message:t.response?.data?.message||"Network error while loading access request"}}},async assignTaskToSelf(e,t=""){try{r.gg.debug("ðŸ”„ IctOfficerService: Assigning task to self:",e);const s=await o.post(`/ict-officer/access-requests/${e}/assign`,{notes:t});return s.data.success?(r.gg.debug("âœ… IctOfficerService: Task assigned successfully"),{success:!0,data:s.data.data,message:s.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to assign task:",s.data.message),{success:!1,message:s.data.message||"Failed to assign task"})}catch(s){return r.gg.error("âŒ IctOfficerService: Error assigning task:",s),{success:!1,message:s.response?.data?.message||"Network error while assigning task"}}},async updateProgress(e,t,s=""){try{r.gg.debug("ðŸ”„ IctOfficerService: Updating progress:",e,t);const a=await o.put(`/ict-officer/access-requests/${e}/progress`,{status:t,notes:s});return a.data.success?(r.gg.debug("âœ… IctOfficerService: Progress updated successfully"),{success:!0,data:a.data.data,message:a.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to update progress:",a.data.message),{success:!1,message:a.data.message||"Failed to update progress"})}catch(a){return r.gg.error("âŒ IctOfficerService: Error updating progress:",a),{success:!1,message:a.response?.data?.message||"Network error while updating progress"}}},async updateImplementationProgress(e,t,s=""){try{r.gg.debug("ðŸ”„ IctOfficerService: Updating implementation progress:",e,t);const a={implementation_status:t,implementation_comments:s};"implementation_in_progress"===t?a.ict_officer_started_at=(new Date).toISOString():"implemented"===t&&(a.ict_officer_implemented_at=(new Date).toISOString());const i=await o.put(`/ict-officer/access-requests/${e}/implementation`,a);return i.data.success?(r.gg.debug("âœ… IctOfficerService: Implementation progress updated successfully"),{success:!0,data:i.data.data,message:i.data.message||"Implementation progress updated successfully"}):(r.gg.error("âŒ IctOfficerService: Failed to update implementation progress:",i.data.message),{success:!1,message:i.data.message||"Failed to update implementation progress"})}catch(a){return r.gg.error("âŒ IctOfficerService: Error updating implementation progress:",a),{success:!1,message:a.response?.data?.message||"Network error while updating implementation progress"}}},async cancelTask(e,t){try{r.gg.debug("ðŸ”„ IctOfficerService: Canceling task:",e);const s=await o.post(`/ict-officer/access-requests/${e}/cancel`,{reason:t});return s.data.success?(r.gg.debug("âœ… IctOfficerService: Task canceled successfully"),{success:!0,data:s.data.data,message:s.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to cancel task:",s.data.message),{success:!1,message:s.data.message||"Failed to cancel task"})}catch(s){return r.gg.error("âŒ IctOfficerService: Error canceling task:",s),{success:!1,message:s.response?.data?.message||"Network error while canceling task"}}},async completeImplementation(e,t="",s=null){try{r.gg.debug("ðŸ”„ IctOfficerService: Completing implementation:",e);const a=new FormData;a.append("notes",t),s&&a.append("signature",s);const i=await o.post(`/ict-officer/access-requests/${e}/complete`,a,{headers:{"Content-Type":"multipart/form-data"}});return i.data.success?(r.gg.debug("âœ… IctOfficerService: Implementation completed successfully"),{success:!0,data:i.data.data,message:i.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to complete implementation:",i.data.message),{success:!1,message:i.data.message||"Failed to complete implementation"})}catch(a){return r.gg.error("âŒ IctOfficerService: Error completing implementation:",a),{success:!1,message:a.response?.data?.message||"Network error while completing implementation"}}},async getRequestTimeline(e){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching request timeline:",e);const t=await o.get(`/ict-officer/access-requests/${e}/timeline`);if(t.data.success)return r.gg.debug("âœ… IctOfficerService: Request timeline loaded successfully"),t.data.data;throw r.gg.error("âŒ IctOfficerService: Failed to load request timeline:",t.data.message),new Error(t.data.message||"Failed to load request timeline")}catch(t){throw r.gg.error("âŒ IctOfficerService: Error fetching request timeline:",t),t.response?new Error(t.response.data?.message||"Failed to load timeline data"):new Error("Network error while loading timeline")}},async getAccessRequestTimeline(e){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching access request timeline:",e);const t=await o.get(`/ict-officer/access-requests/${e}/timeline`);return t.data.success?(r.gg.debug("âœ… IctOfficerService: Access request timeline loaded successfully"),{success:!0,data:t.data.data,message:t.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to load access request timeline:",t.data.message),{success:!1,message:t.data.message||"Failed to load access request timeline"})}catch(t){return r.gg.error("âŒ IctOfficerService: Error fetching access request timeline:",t),{success:!1,message:t.response?.data?.message||"Network error while loading access request timeline"}}},async grantAccess(e,t){try{r.gg.debug("ðŸ”„ IctOfficerService: Granting access for request:",e),r.gg.debug("Grant access data:",t);const s=await o.post(`/ict-officer/access-requests/${e}/grant-access`,{comments:t.comments||"",implementation_status:"implemented",implementation_completed_at:(new Date).toISOString()});return s.data.success?(r.gg.debug("âœ… IctOfficerService: Access granted successfully"),{success:!0,data:s.data.data,message:s.data.message||"Access granted successfully"}):(r.gg.error("âŒ IctOfficerService: Failed to grant access:",s.data.message),{success:!1,message:s.data.message||"Failed to grant access"})}catch(s){return r.gg.error("âŒ IctOfficerService: Error granting access:",s),{success:!1,message:s.response?.data?.message||"Network error while granting access"}}},async getStatistics(){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching statistics...");const e=await o.get("/ict-officer/statistics");return e.data.success?(r.gg.debug("âœ… IctOfficerService: Statistics loaded successfully"),{success:!0,data:e.data.data,message:e.data.message}):(r.gg.error("âŒ IctOfficerService: Failed to load statistics:",e.data.message),{success:!1,message:e.data.message||"Failed to load statistics"})}catch(e){return r.gg.error("âŒ IctOfficerService: Error fetching statistics:",e),{success:!1,message:e.response?.data?.message||"Network error while loading statistics"}}},async getPendingRequestsCount(){try{r.gg.debug("ðŸ”„ IctOfficerService: Fetching pending requests count...");const e=await o.get("/ict-officer/pending-count");if(e.data.success)return e.data.data;throw r.gg.error("âŒ IctOfficerService: Failed to load pending count:",e.data.message),new Error(e.data.message||"Failed to load pending requests count")}catch(e){throw r.gg.error("âŒ IctOfficerService: Error fetching pending count:",e),e.response?new Error(e.response.data?.message||"Failed to load pending count"):new Error("Network error while loading pending count")}},async resendRequesterSms(e,t=null){try{r.gg.debug("ðŸ”„ IctOfficerService: Retrying requester SMS for:",{requestId:e,requesterPhone:t});const a=e=>{if(!e)return null;const t=String(e).trim(),s=t.startsWith("+"),a=t.replace(/[^\d]/g,"");return s?`+${a}`:a},i=t||null,n=a(i),l={request_id:e,role:"ict_officer",notification_type:"requester_access_granted",resend_only:!0,force:!0,force_resend:!0,resend_sms:!0,send_sms:!0,send_sms_to_requester:!0,notification_channel:"sms",requester_phone:i||void 0,requester_phone_number:i||void 0,requester_msisdn:n||void 0,staff_phone:i||void 0,staff_phone_number:i||void 0,recipient_phone:n||void 0,destination_phone:n||void 0,phone_number:n||void 0,msisdn:n||void 0,contact_phone:n||void 0};let d;const c=[`/ict-officer/access-requests/${e}/notify`,`/ict-officer/access-requests/${e}/resend-sms`,`/ict-officer/access-requests/${e}/send-notification`,`/ict-officer/access-requests/${e}/grant-access`,"/ict-officer/notify","/ict-officer/resend-sms"];let u;for(let e=0;e<c.length;e++)try{r.gg.debug(`ðŸ”„ Trying endpoint ${e+1}/${c.length}: ${c[e]}`),d=await o.post(c[e],l),r.gg.debug(`âœ… Success with endpoint: ${c[e]}`);break}catch(s){if(console.warn(`âŒ Endpoint ${c[e]} failed:`,s.response?.status,s.response?.data?.message||s.message),u=s,e===c.length-1)throw r.gg.error("ðŸš« All endpoints failed for SMS retry"),u}return d.data?.success?(r.gg.debug("âœ… IctOfficerService: Requester SMS retry triggered successfully"),{success:!0,data:d.data.data,message:d.data.message}):{success:!1,message:d.data?.message||"Failed to trigger SMS retry"}}catch(a){return r.gg.error("âŒ IctOfficerService: Error retrying requester SMS:",a),{success:!1,message:a.response?.data?.message||"Network error while retrying SMS"}}}};t["default"]=n},5692:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ai}});s(8111),s(1701);var a=s(5796);const r={class:"flex flex-col h-screen"},i={class:"flex flex-1 overflow-hidden"},o={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},l={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},d={class:"absolute inset-0"},c={key:0,class:"fixed top-4 left-1/2 -translate-x-1/2 z-[9999]"},u={class:"text-xs font-semibold"},p={class:"flex justify-between items-center"},h={class:"w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25"},m={class:"text-center flex-1"},f={class:"text-sm font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay"},g={class:"w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25"},v={class:"medical-glass-card rounded-b-3xl overflow-hidden"},b={class:"relative"},w=["readonly"],x={key:0,class:"error text-red-400 text-sm mt-1"},y={class:"relative"},_=["readonly"],D={key:0,class:"error text-red-400 text-sm mt-1"},k={class:"relative"},q=["readonly"],S={class:"relative"},I=["readonly"],C={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-4 items-stretch"},L={class:"flex flex-col h-full"},R={class:"block text-xs font-bold text-blue-100 mb-1 text-center uppercase"},T={key:0,class:"text-xs px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},A={class:"flex items-center gap-3 justify-center"},E=["disabled"],U=["disabled"],j={class:"flex flex-col h-full"},O={key:0,class:"bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center"},N={class:"space-y-0.5 text-left"},F={class:"flex items-center cursor-pointer text-xs"},H={class:"flex items-center cursor-pointer text-xs"},M=["min"],P={key:1,class:"bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center"},W={class:"flex items-center justify-center gap-3"},$={key:0,class:"inline-flex items-center px-3 py-2 rounded-lg text-xs font-bold bg-red-500/30 text-white border-2 border-red-400/50 shadow-lg ring-2 ring-red-400/40"},X={key:1,class:"inline-flex items-center px-3 py-2 rounded-lg text-xs font-bold bg-red-500/30 text-white border-2 border-red-400/50 shadow-lg ring-2 ring-red-400/40"},J={class:"ml-1 font-bold"},B={class:"flex flex-col h-full"},Q={class:"relative bg-white/10 rounded-lg border border-blue-300/30 p-2 w-full min-h-[85px] flex flex-col justify-center"},V={key:0,class:"text-center"},z={key:1,class:"text-center"},G={key:0,class:"flex flex-col items-center gap-0.5"},Y={class:"text-green-300 text-xs font-bold"},K={key:0},Z={key:0,class:"text-green-200 text-[10px]"},ee={key:1,class:"flex flex-col items-center"},te=["disabled"],se={key:0,class:"mt-2"},ae={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 relative"},re={class:"lg:col-span-2"},ie={class:"bg-white/10 rounded-lg border border-purple-300/30 p-4 w-full h-auto"},oe={class:"mb-1"},ne={class:"block text-sm font-semibold text-purple-200 mb-1 flex items-center justify-between"},le={class:"text-xs text-purple-300/70"},de={class:"grid grid-cols-4 gap-1 border border-purple-300/20 rounded p-2"},ce=["value","disabled"],ue={key:0,class:"fas fa-check-circle text-red-400 text-xs ml-auto",title:"Selected by staff"},pe={class:"lg:col-span-1"},he={class:"bg-white/10 rounded-lg border border-amber-300/30 p-4 w-full h-auto"},me={class:"mb-3"},fe={class:"block text-sm font-semibold text-amber-200 mb-3 flex items-center justify-between"},ge={class:"text-xs text-amber-300/70"},ve={class:"grid grid-cols-2 gap-2 border border-amber-300/20 rounded p-3"},be=["value","disabled"],we={key:0,class:"fas fa-check-circle text-red-400 text-xs ml-auto",title:"Selected by staff"},xe={key:1,class:"mt-4 mb-2"},ye={class:"medical-card bg-gradient-to-r from-blue-600/15 to-indigo-600/15 border-2 border-blue-400/40 rounded-lg p-3"},_e={key:0,class:"h-full"},De={class:"bg-white/5 rounded-lg border border-blue-300/20 p-3 h-full"},ke={class:"text-xs text-blue-100"},qe={key:0},Se={key:1,class:"space-y-1 mt-1"},Ie={class:"w-5 h-5 inline-flex items-center justify-center rounded-full bg-white/10 border border-blue-300/30 text-blue-200 text-xs font-semibold flex-shrink-0"},Ce={class:"truncate"},Le={class:"h-full"},Re={class:"bg-white/5 rounded-lg border border-blue-300/20 p-3 h-full"},Te={class:"flex items-center justify-between mb-1"},Ae={class:"flex items-center space-x-2"},Ee={class:"text-xs px-2 py-0.5 bg-amber-500/30 rounded-full text-amber-200 font-medium"},Ue={class:"text-xs font-bold text-white flex items-center"},je={key:0,class:"ml-2 text-xs px-2 py-0.5 bg-green-500/30 rounded-full text-green-300 border border-green-400/30"},Oe={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-2"},Ne={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-2 mb-1"},Fe={class:"lg:col-span-1"},He={class:"bg-blue-700/20 rounded-lg border border-amber-300/30 backdrop-blur-sm overflow-hidden"},Me={class:"p-1"},Pe={class:"w-full"},We={class:"align-top"},$e={class:"py-2 px-2 border-r border-amber-300/20 vertical-align-top"},Xe={key:0,class:"text-xs text-gray-400 italic"},Je={key:1,class:"text-xs text-gray-400 italic"},Be={key:2,class:"space-y-0.5"},Qe={class:"text-xs text-blue-100 font-normal"},Ve={class:"py-2 px-2 border-r border-amber-300/20 vertical-align-top"},ze={key:0,class:"text-xs text-gray-400 italic"},Ge={key:1,class:"text-xs text-gray-400 italic"},Ye={key:2,class:"space-y-0.5"},Ke={class:"text-xs text-cyan-100 font-medium"},Ze={class:"py-2 px-2 vertical-align-top"},et={key:0,class:"text-xs text-gray-400 italic"},tt={key:1,class:"text-xs text-gray-400 italic"},st={key:2,class:"space-y-0.5"},at={class:"w-3 h-3 bg-green-500/30 rounded-full flex items-center justify-center flex-shrink-0"},rt={class:"text-xs text-green-300 font-bold"},it={class:"text-xs text-green-100 font-medium leading-tight"},ot={key:0,class:"text-xs text-green-200/70 italic"},nt={class:"lg:col-span-1"},lt={class:"bg-white/10 rounded-lg border border-amber-300/30 backdrop-blur-sm overflow-hidden"},dt={class:"overflow-visible"},ct={key:0,class:"p-4 text-center"},ut={class:"col-span-2"},pt={class:"flex items-center space-x-0.5"},ht={class:"text-[9px] leading-[1.05] text-white font-normal truncate"},mt={class:"col-span-2"},ft={class:"text-[9px] leading-[1.05] text-amber-200 font-normal"},gt={class:"col-span-4"},vt={class:"col-span-2"},bt={class:"col-span-2"},wt={class:"flex items-center text-[9px] leading-[1.05] text-gray-400"},xt={key:0,class:"opacity-70 text-xs"},yt={key:1,class:"text-yellow-300"},_t={key:1,class:"p-2 text-center border-t border-amber-300/20"},Dt={class:"text-xs text-amber-300/70 italic"},kt={class:"mt-3"},qt={key:0,class:"rounded-lg p-2 border border-blue-300/30",style:{"background-color":"#0047ab"}},St=["readonly","placeholder"],It={key:3,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4"},Ct={class:"bg-white/10 rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden border border-blue-300/40 backdrop-blur-md"},Lt={class:"px-5 py-4 bg-blue-900/20"},Rt={class:"flex justify-between mt-1"},Tt={class:"text-xs text-blue-200/70"},At={class:"text-xs text-blue-200/80"},Et={key:0,class:"text-red-300 text-xs mt-1"},Ut={class:"mt-4 p-3 bg-blue-800/40 border border-blue-300/30 rounded-lg"},jt={class:"bg-blue-900/50 rounded p-2 text-base text-blue-100 font-mono leading-relaxed"},Ot={class:"flex justify-between mt-1"},Nt={class:"text-xs text-blue-200/70"},Ft={class:"text-blue-300/70 text-base mt-2 italic"},Ht={class:"px-5 py-3 flex gap-2 justify-end bg-blue-900/30 border-t border-blue-300/30"},Mt=["disabled"],Pt={key:4,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 p-4"},Wt={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden"},$t={class:"px-6 py-6 text-center"},Xt={class:"flex gap-3"},Jt={class:"flex items-center mb-1"},Bt={class:"flex items-center space-x-2"},Qt=["aria-expanded","title"],Vt={class:"font-bold text-white mb-1 text-center text-base flex items-center justify-center gap-2"},zt={key:0,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},Gt={key:1,class:"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300"},Yt={key:2,class:"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},Kt={class:"space-y-3"},Zt={class:"relative"},es=["placeholder","title"],ts={class:"relative"},ss=["title"],as={class:"text-center"},rs={class:"flex items-center justify-center space-x-2 mb-1"},is={key:1,class:"w-full px-3 py-2 border-2 border-red-400/60 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center",title:"HOD approval skipped"},os={key:2,class:"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center"},ns={key:3,class:"w-full px-2 py-2 border-2 border-blue-300/40 rounded-lg bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[35px] flex items-center justify-center relative"},ls={key:0,class:"text-center"},ds=["src"],cs={class:"text-xs text-blue-100"},us={key:1,class:"text-center"},ps={class:"text-xs text-blue-100"},hs={key:2,class:"absolute top-2 right-2 flex gap-1"},ms={key:4,class:"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20"},fs={class:"text-center"},gs={class:"flex items-center justify-center space-x-2 mb-1"},vs={key:0,class:"absolute top-2 right-2"},bs={key:0,class:"text-center mt-2"},ws=["disabled"],xs={key:1,class:"text-xs text-blue-200 mt-1"},ys={class:"relative"},_s={class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Ds={key:0,class:"fas fa-ban text-red-400 text-xs",title:"HOD approval skipped"},ks={key:1,class:"fas fa-check text-green-400 text-xs",title:"HOD has signed - date populated from approval"},qs={key:2,class:"fas fa-clock text-red-400 text-xs",title:"Pending HOD approval"},Ss={key:3,class:"fas fa-calendar text-blue-300 text-xs",title:"Date will be populated when HOD approves"},Is={class:"font-bold text-white mb-1 text-center text-base flex items-center justify-center gap-2"},Cs={key:0,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},Ls={key:1,class:"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300"},Rs={key:2,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},Ts={key:3,class:"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300"},As={key:4,class:"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},Es={class:"space-y-3"},Us={class:"relative"},js=["placeholder","title"],Os={class:"relative"},Ns=["title"],Fs={class:"text-center"},Hs={class:"flex items-center justify-center space-x-2 mb-1"},Ms={key:1,class:"w-full px-3 py-2 border-2 border-red-400/60 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center",title:"Divisional Director approval skipped"},Ps={key:2,class:"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center"},Ws={key:3,class:"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20"},$s={class:"text-center"},Xs={class:"flex items-center justify-center space-x-2 mb-1"},Js={key:0,class:"absolute top-2 right-2"},Bs={class:"text-center mt-2"},Qs=["disabled"],Vs={key:1,class:"text-xs text-blue-200 mt-1"},zs={class:"relative"},Gs={class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Ys={key:0,class:"fas fa-ban text-red-400 text-xs",title:"Divisional Director approval skipped"},Ks={key:1,class:"fas fa-check text-green-400 text-xs",title:"Divisional Director has signed - date populated from approval"},Zs={key:2,class:"fas fa-clock text-red-400 text-xs",title:"Pending Divisional Director approval"},ea={key:3,class:"fas fa-calendar text-blue-300 text-xs",title:"Date will be populated when Divisional Director approves"},ta={class:"font-bold text-white mb-1 text-center text-sm flex items-center justify-center gap-2"},sa={key:0,class:"text-xs px-2 py-1 bg-green-500/30 rounded-full text-green-300"},aa={key:1,class:"text-xs px-2 py-1 bg-red-500/30 rounded-full text-red-300"},ra={key:2,class:"text-xs px-2 py-1 bg-green-500/30 rounded-full text-green-300"},ia={key:3,class:"text-xs px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},oa={class:"space-y-3"},na={class:"relative"},la=["placeholder","title"],da={class:"relative"},ca=["title"],ua={class:"text-center"},pa={class:"text-green-300/80 text-base"},ha={key:1,class:"w-full px-3 py-2 border-2 border-red-400/50 rounded-xl bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center"},ma={key:2,class:"w-full px-3 py-2 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[30px] flex items-center justify-center hover:bg-white/20"},fa={class:"text-center"},ga={class:"flex items-center justify-center space-x-2 mb-1"},va={key:0,class:"absolute top-2 right-2"},ba={class:"text-center mt-2"},wa=["disabled"],xa={key:1,class:"text-xs text-blue-200 mt-1"},ya={class:"relative"},_a=["readonly"],Da={class:"absolute right-3 top-1/2 transform -translate-y-1/2"},ka={key:0,class:"fas fa-check text-green-400 text-xs",title:"ICT Director has signed - date populated from approval"},qa={key:1,class:"fas fa-clock text-red-400 text-xs",title:"Pending ICT Director approval"},Sa=["title"],Ia=["aria-expanded","title"],Ca={class:"font-bold text-white mb-0.5 text-center text-base flex items-center justify-center gap-1"},La={key:0,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},Ra={key:1,class:"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300"},Ta={key:2,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},Aa={key:3,class:"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},Ea={class:"space-y-0.5"},Ua={class:"relative"},ja=["readonly","placeholder","title"],Oa={class:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-2"},Na=["title"],Fa={class:"relative"},Ha=["title"],Ma={class:"text-center"},Pa={class:"text-green-300/80 text-base"},Wa={key:1,class:"w-full px-2 py-1 border-2 border-red-400/50 rounded-lg bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[25px] flex items-center justify-center"},$a={key:2,class:"w-full px-2 py-1 border border-blue-300/30 rounded-lg focus-within:border-blue-400 bg-white/15 transition-all duration-300 shadow-sm hover:shadow-md min-h-[20px] flex items-center justify-center backdrop-blur-sm"},Xa={class:"text-center"},Ja=["disabled"],Ba={key:1,class:"text-[10px] text-blue-200 mt-0.5"},Qa={class:"relative"},Va=["readonly"],za={class:"absolute right-3 top-1/2 transform -translate-y-1/2"},Ga={key:0,class:"fas fa-check text-green-400 text-xs",title:"Head IT has signed - date populated from approval"},Ya={key:1,class:"fas fa-clock text-red-400 text-xs",title:"Pending Head IT approval"},Ka={key:2,class:"fas fa-calendar text-blue-300 text-xs",title:"Date will be populated when Head IT approves"},Za={class:"font-bold text-white mb-0.5 text-center text-base flex items-center justify-center gap-1"},er={key:0,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},tr={key:1,class:"text-base px-2 py-1 bg-red-500/30 rounded-full text-red-300"},sr={key:2,class:"text-base px-2 py-1 bg-green-500/30 rounded-full text-green-300"},ar={key:3,class:"text-base px-2 py-1 bg-gray-500/30 rounded-full text-gray-300"},rr={class:"space-y-0.5"},ir={class:"relative"},or=["placeholder","title"],nr={class:"relative"},lr={key:0,class:"w-full px-2 py-1 border-2 border-dashed border-blue-300/40 rounded-lg focus-within:border-blue-400 bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-blue-500/20 min-h-[20px] flex items-center justify-center hover:bg-white/20"},dr={class:"text-center"},cr=["disabled"],ur={key:1,class:"text-[10px] text-blue-200 mt-0.5"},pr=["title"],hr={class:"text-center"},mr={class:"text-green-200 font-semibold text-sm"},fr={key:2,class:"w-full px-2 py-1 border-2 border-dashed border-red-300/40 rounded-lg bg-red-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[20px] flex items-center justify-center"},gr={class:"relative"},vr={key:0,class:"mt-3"},br=["disabled"],wr={key:0,class:"fas fa-spinner fa-spin mr-2"},xr={key:1,class:"fas fa-check mr-2"},yr={key:1,class:"mt-2"},_r={class:"bg-yellow-500/10 border-2 border-yellow-400/30 rounded-lg p-2 backdrop-blur-sm"},Dr={class:"flex items-center justify-between"},kr={class:"flex justify-between gap-4"},qr=["disabled","title"],Sr={key:0,class:"fas fa-spinner fa-spin mr-2"},Ir={key:1,class:"fas fa-check mr-2"},Cr=["disabled","title"],Lr={key:6,class:"border-t-2 border-gray-200 pt-3"},Rr={class:"flex flex-col sm:flex-row justify-between gap-3"},Tr={key:0,"aria-labelledby":"module-tabs",class:"lg:col-span-1 space-y-4"},Ar={key:0,class:"bg-yellow-500/20 border-2 border-yellow-400/60 rounded-lg p-2 mb-4"},Er={class:"text-xs text-yellow-100 space-y-1"},Ur={class:"hidden md:block"},jr={class:"flex items-center gap-2 overflow-x-auto pb-1"},Or=["onClick","aria-selected"],Nr=["onClick"],Fr={class:"md:hidden space-y-2"},Hr=["onClick"],Mr={class:"font-semibold"},Pr={class:"mt-6"},Wr={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},$r={class:"bg-white rounded-lg shadow-xl max-w-md w-full p-4"},Xr={class:"text-lg font-semibold text-gray-800"},Jr={class:"mt-4 flex justify-end gap-2"},Br={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Qr={class:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6"},Vr={class:"mb-4"},zr={class:"flex justify-end space-x-3"},Gr=["disabled"],Yr={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4"},Kr={class:"bg-white rounded-2xl shadow-2xl max-w-lg w-full transform transition-all duration-500 scale-100"},Zr={class:"px-6 py-6 text-center"},ei={class:"mb-6"},ti={class:"text-gray-700 text-lg leading-relaxed"},si={class:"font-semibold text-blue-600"},ai={class:"flex gap-3"},ri={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4"},ii={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-500 scale-100"},oi={class:"px-6 py-6 text-center"},ni={class:"text-gray-700 text-base leading-relaxed mb-6"},li={class:"font-semibold text-blue-600"},di={class:"flex gap-3"};function ci(e,t,s,ci,ui,pi){const hi=(0,a.g2)("Header"),mi=(0,a.g2)("ModernSidebar"),fi=(0,a.g2)("UnifiedLoadingBanner"),gi=(0,a.g2)("OrbitingDots"),vi=(0,a.g2)("AppFooter");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(hi),(0,a.Lk)("div",i,[(0,a.bF)(mi),(0,a.Lk)("main",{class:(0,a.C4)(["flex-1 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative",(pi.isReviewMode||pi.isDivisionalDirectorUser||pi.isHodApprovalEditable,"p-1")])},[(0,a.Lk)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("div",l,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(48,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(15,e=>(0,a.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,a.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,a.Lk)("i",{class:(0,a.C4)(["fas",["fa-heartbeat","fa-user-md","fa-hospital","fa-stethoscope","fa-plus"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),ui.toast&&ui.toast.show?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",{class:(0,a.C4)(["px-4 py-2 rounded-lg shadow-xl border border-white/20 text-white bg-green-600/90","error"===ui.toast.type?"bg-red-600/90":"bg-green-600/90"])},[(0,a.Lk)("span",u,(0,a.v_)(ui.toast.message),1)],2)])):(0,a.Q3)("",!0),(0,a.bF)(fi,{show:ui.isLoading,loadingTitle:pi.getLoadingTitle(),loadingSubtitle:pi.getLoadingSubtitle(),departmentTitle:"ACCESS REQUEST APPROVAL SYSTEM"},null,8,["show","loadingTitle","loadingSubtitle"]),(0,a.Lk)("div",{class:(0,a.C4)([pi.isReviewMode?"max-w-full mx-1":"max-w-7xl mx-auto","relative z-10",pi.isReviewMode?"review-mode-compact":"",pi.isReviewMode&&pi.isHeadItUser?"head-it-compact":"",!pi.isReviewMode&&pi.isDivisionalDirectorUser?"divisional-director-compact":"",!pi.isReviewMode&&pi.isIctDirectorUser?"ict-director-compact":"",!pi.isReviewMode&&pi.isHodApprovalEditable?"hod-compact":""])},[(0,a.Lk)("div",{class:(0,a.C4)(["medical-glass-card rounded-t-3xl border-b border-blue-300/30",pi.isReviewMode?"p-1 mb-0":pi.isDivisionalDirectorUser?"p-0.5 mb-0":pi.isIctDirectorUser?"p-1.5 mb-0":(pi.isHodApprovalEditable,"p-1 mb-0")])},[(0,a.Lk)("div",p,[(0,a.Lk)("div",{class:(0,a.C4)(["mr-2 transform hover:scale-110 transition-transform duration-300",pi.isReviewMode||pi.isDivisionalDirectorUser?"w-14 h-14":pi.isIctDirectorUser||pi.isHodApprovalEditable?"w-16 h-16":"w-18 h-18"])},[(0,a.Lk)("div",h,[(0,a.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:(0,a.C4)([pi.isReviewMode||pi.isDivisionalDirectorUser?"max-w-12 max-h-12":pi.isIctDirectorUser||pi.isHodApprovalEditable?"max-w-14 max-h-14":"max-w-16 max-h-16","object-contain"])},null,2)])],2),(0,a.Lk)("div",m,[(0,a.Lk)("h1",{class:(0,a.C4)(["text-lg font-bold text-white tracking-wide drop-shadow-lg animate-fade-in",pi.isReviewMode||pi.isDivisionalDirectorUser?"mb-0":pi.isIctDirectorUser||pi.isHodApprovalEditable?"mb-0.5":"mb-1"])}," MUHIMBILI NATIONAL HOSPITAL ",2),(0,a.Lk)("div",{class:(0,a.C4)(["relative inline-block",pi.isReviewMode||pi.isDivisionalDirectorUser?"mb-0":(pi.isIctDirectorUser||pi.isHodApprovalEditable,"mb-1")])},[(0,a.Lk)("div",{class:(0,a.C4)(["bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full text-sm font-bold shadow-xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-400/60",pi.isReviewMode||pi.isDivisionalDirectorUser?"px-2 py-0":pi.isIctDirectorUser?"px-3 py-0.5":(pi.isHodApprovalEditable,"px-4 py-1")])},[...t[54]||(t[54]=[(0,a.Lk)("span",{class:"relative z-10 flex items-center gap-2"},[(0,a.Lk)("i",{class:"fas fa-layer-group"}),(0,a.eW)(" COMBINED ACCESS REQUEST ")],-1),(0,a.Lk)("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-700 to-blue-800 rounded-full opacity-0 hover:opacity-100 transition-opacity duration-300"},null,-1)])],2)],2),(0,a.Lk)("h2",f,(0,a.v_)(pi.isReviewMode?"REQUEST REVIEW - "+pi.displayRequestId:"UNIFIED SERVICES FORM"),1)]),(0,a.Lk)("div",{class:(0,a.C4)(["ml-2 transform hover:scale-110 transition-transform duration-300",pi.isReviewMode||pi.isDivisionalDirectorUser?"w-14 h-14":pi.isIctDirectorUser||pi.isHodApprovalEditable?"w-16 h-16":"w-18 h-18"])},[(0,a.Lk)("div",g,[(0,a.Lk)("img",{src:"/assets/images/logo2.png",alt:"Muhimbili Logo",class:(0,a.C4)([pi.isReviewMode||pi.isDivisionalDirectorUser?"max-w-12 max-h-12":pi.isIctDirectorUser||pi.isHodApprovalEditable?"max-w-14 max-h-14":"max-w-16 max-h-16","object-contain"])},null,2)])],2)])],2),(0,a.Lk)("div",v,[(0,a.Lk)("form",{onSubmit:t[44]||(t[44]=(0,a.D$)((...e)=>pi.onSubmit&&pi.onSubmit(...e),["prevent"])),class:(0,a.C4)([pi.isReviewMode||pi.isDivisionalDirectorUser?"p-1 space-y-1":pi.isIctDirectorUser||pi.isHodApprovalEditable?"p-1.5 space-y-1.5":"p-0.5 space-y-0.5",{"review-mode":pi.isReviewMode}])},[(0,a.Lk)("div",{class:(0,a.C4)(["flex-1 grid grid-cols-1 min-h-0",pi.isReviewMode||pi.isDivisionalDirectorUser?"gap-1":pi.isIctDirectorUser||pi.isHodApprovalEditable?"gap-2":"gap-1"])},[(0,a.Lk)("div",{"aria-labelledby":"applicant-details",class:(0,a.C4)(["xl:col-span-4",pi.isReviewMode||pi.isDivisionalDirectorUser?"space-y-0.5":pi.isIctDirectorUser||pi.isHodApprovalEditable?"space-y-1":"space-y-0.5"])},[(0,a.Lk)("div",{class:(0,a.C4)(["medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group",pi.isReviewMode||pi.isDivisionalDirectorUser?"p-0.5":pi.isIctDirectorUser||pi.isHodApprovalEditable?"p-1":"p-0.5"])},[(0,a.Lk)("div",{class:(0,a.C4)(["flex items-center space-x-2",pi.isReviewMode?"mb-0.5":pi.isDivisionalDirectorUser||pi.isHodApprovalEditable?"mb-1":"mb-0.5"])},[...t[55]||(t[55]=[(0,a.Lk)("div",{class:"w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50"},[(0,a.Lk)("i",{class:"fas fa-user-md text-white text-sm"})],-1),(0,a.Lk)("h3",{class:"text-xs font-bold text-white flex items-center"},[(0,a.Lk)("i",{class:"fas fa-id-card mr-1 text-blue-300 text-xs"}),(0,a.eW)(" Personal Information ")],-1)])],2),(0,a.Lk)("div",{class:(0,a.C4)(["grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4",pi.isDivisionalDirectorUser?"gap-2":pi.isHodApprovalEditable?"gap-3":"gap-1"])},[(0,a.Lk)("div",null,[t[57]||(t[57]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-1"},[(0,a.eW)(" PF Number "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",b,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ui.form.shared.pfNumber=e),type:"text",readonly:pi.isReviewMode||pi.isFormSectionReadOnly,class:(0,a.C4)(["medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs",{"font-bold":ui.form.shared.pfNumber}]),placeholder:"PF Number",required:""},null,10,w),[[a.Jo,ui.form.shared.pfNumber,void 0,{trim:!0}]]),t[56]||(t[56]=(0,a.Lk)("div",{class:"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))]),ui.errors.pfNumber?((0,a.uX)(),(0,a.CE)("p",x,(0,a.v_)(ui.errors.pfNumber),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[59]||(t[59]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-1"},[(0,a.eW)(" Staff Name "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",y,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>ui.form.shared.staffName=e),type:"text",readonly:pi.isReviewMode||pi.isFormSectionReadOnly,class:(0,a.C4)(["medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs",{"font-bold":ui.form.shared.staffName}]),placeholder:"Full name",required:""},null,10,_),[[a.Jo,ui.form.shared.staffName,void 0,{trim:!0}]]),t[58]||(t[58]=(0,a.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))]),ui.errors.staffName?((0,a.uX)(),(0,a.CE)("p",D,(0,a.v_)(ui.errors.staffName),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[61]||(t[61]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-1"},[(0,a.eW)(" Department "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",k,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>ui.form.shared.department=e),type:"text",readonly:pi.isReviewMode||pi.isFormSectionReadOnly,class:(0,a.C4)(["medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs",{"font-bold":ui.form.shared.department}]),placeholder:"Department",required:""},null,10,q),[[a.Jo,ui.form.shared.department,void 0,{trim:!0}]]),t[60]||(t[60]=(0,a.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-1"},[(0,a.eW)(" Contact Number "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",S,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>ui.form.shared.phone=e),type:"tel",readonly:pi.isReviewMode||pi.isFormSectionReadOnly,class:(0,a.C4)(["medical-input personal-info-input w-full px-2 py-1 bg-white/15 border-2 border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xs",{"font-bold":ui.form.shared.phone}]),placeholder:"e.g. 0712 000 000",onBlur:t[4]||(t[4]=e=>ui.form.shared.phone=pi.normalizePhoneNumber(ui.form.shared.phone)),required:""},null,42,I),[[a.Jo,ui.form.shared.phone,void 0,{trim:!0}]]),t[62]||(t[62]=(0,a.Lk)("div",{class:"absolute inset-0 rounded-lg bg-gradient-to-r from-blue-500/10 to-blue-600/10 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none"},null,-1))])])],2),(0,a.Lk)("div",C,[(0,a.Lk)("div",L,[(0,a.Lk)("div",{class:(0,a.C4)(["bg-white/10 rounded-lg p-2 border border-blue-300/30 backdrop-blur-sm w-full min-h-[85px] flex flex-col justify-center",{"opacity-50":pi.isReviewMode&&!pi.hasWellsoftRequest&&!pi.hasJeevaRequest}])},[(0,a.Lk)("label",R,[t[65]||(t[65]=(0,a.Lk)("i",{class:"fas fa-toggle-on mr-1 text-blue-300 text-xs"},null,-1)),t[66]||(t[66]=(0,a.eW)(" Module Requested for ",-1)),t[67]||(t[67]=(0,a.Lk)("span",{class:"text-red-400"},"*",-1)),!pi.isReviewMode||pi.hasWellsoftRequest||pi.hasJeevaRequest||pi.isHodApprovalEditable?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",T,[...t[64]||(t[64]=[(0,a.Lk)("i",{class:"fas fa-lock text-xs mr-1"},null,-1),(0,a.eW)(" Not Applicable ",-1)])]))]),(0,a.Lk)("div",A,[(0,a.Lk)("label",{class:(0,a.C4)(["flex items-center cursor-pointer px-2 py-1 rounded-lg transition-all border min-w-12",{"hover:bg-blue-500/20":!pi.isFormSectionReadOnly,"bg-red-500/30 border-2 border-red-400/50 text-white shadow-lg ring-2 ring-red-400/40":pi.isFormSectionReadOnly&&"use"===ui.wellsoftRequestType,"bg-white/5 border-white/10 text-blue-200/80":pi.isFormSectionReadOnly&&"use"!==ui.wellsoftRequestType,"pointer-events-none":pi.isReviewMode&&!pi.hasWellsoftRequest&&!pi.hasJeevaRequest}])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>ui.wellsoftRequestType=e),type:"radio",value:"use",disabled:pi.isReviewMode&&!pi.hasWellsoftRequest&&!pi.hasJeevaRequest&&!pi.isHodApprovalEditable||pi.isFormSectionReadOnly,class:(0,a.C4)(["w-3 h-3 border-blue-300 focus:ring-blue-500 mr-1",pi.isFormSectionReadOnly?"use"===ui.wellsoftRequestType?"text-amber-500 accent-amber-500":"text-blue-400 accent-blue-400":"text-blue-600"])},null,10,E),[[a.XL,ui.wellsoftRequestType]]),(0,a.Lk)("span",{class:(0,a.C4)(["text-xs font-semibold flex items-center",{"text-white":pi.isFormSectionReadOnly&&"use"===ui.wellsoftRequestType,"text-blue-100":!pi.isFormSectionReadOnly||"use"!==ui.wellsoftRequestType}])},[(0,a.Lk)("i",{class:(0,a.C4)(["fas fa-plus-circle mr-1 text-xs",{"text-white":pi.isFormSectionReadOnly&&"use"===ui.wellsoftRequestType,"text-green-400":!pi.isFormSectionReadOnly||"use"!==ui.wellsoftRequestType}])},null,2),t[68]||(t[68]=(0,a.eW)(" Use ",-1))],2)],2),(0,a.Lk)("label",{class:(0,a.C4)(["flex items-center cursor-pointer px-2 py-1 rounded-lg transition-all border min-w-12",{"hover:bg-red-500/20":!pi.isFormSectionReadOnly,"bg-red-500/30 border-2 border-red-400/50 text-white shadow-lg ring-2 ring-red-400/40":pi.isFormSectionReadOnly&&"revoke"===ui.wellsoftRequestType,"bg-white/5 border-white/10 text-blue-200/80":pi.isFormSectionReadOnly&&"revoke"!==ui.wellsoftRequestType,"pointer-events-none":pi.isReviewMode&&!pi.hasWellsoftRequest&&!pi.hasJeevaRequest}])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>ui.wellsoftRequestType=e),type:"radio",value:"revoke",disabled:pi.isReviewMode&&!pi.hasWellsoftRequest&&!pi.hasJeevaRequest&&!pi.isHodApprovalEditable||pi.isFormSectionReadOnly,class:(0,a.C4)(["w-3 h-3 border-blue-300 focus:ring-blue-500 mr-1",pi.isFormSectionReadOnly?"revoke"===ui.wellsoftRequestType?"text-amber-500 accent-amber-500":"text-blue-400 accent-blue-400":"text-blue-600"])},null,10,U),[[a.XL,ui.wellsoftRequestType]]),(0,a.Lk)("span",{class:(0,a.C4)(["text-xs font-semibold flex items-center",{"text-white":pi.isFormSectionReadOnly&&"revoke"===ui.wellsoftRequestType,"text-blue-100":!pi.isFormSectionReadOnly||"revoke"!==ui.wellsoftRequestType}])},[(0,a.Lk)("i",{class:(0,a.C4)(["fas fa-minus-circle mr-1 text-xs",{"text-white":pi.isFormSectionReadOnly&&"revoke"===ui.wellsoftRequestType,"text-red-400":!pi.isFormSectionReadOnly||"revoke"!==ui.wellsoftRequestType}])},null,2),t[69]||(t[69]=(0,a.eW)(" Revoke ",-1))],2)],2)])],2)]),(0,a.Lk)("div",j,[pi.isHodApprovalEditable?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("div",null,[t[72]||(t[72]=(0,a.Lk)("label",{class:"block text-xs font-bold text-blue-100 mb-1 text-center"},[(0,a.Lk)("i",{class:"fas fa-clock mr-1"}),(0,a.eW)(" Please Specify Access Rights: ")],-1)),(0,a.Lk)("div",N,[(0,a.Lk)("label",F,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>ui.hodAccessType=e),type:"radio",value:"permanent",class:"w-3 h-3 text-blue-600 mr-2"},null,512),[[a.XL,ui.hodAccessType]]),t[70]||(t[70]=(0,a.Lk)("span",{class:"text-blue-200"},"Permanent (until retirement)",-1))]),(0,a.Lk)("label",H,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>ui.hodAccessType=e),type:"radio",value:"temporary",class:"w-3 h-3 text-blue-600 mr-2"},null,512),[[a.XL,ui.hodAccessType]]),t[71]||(t[71]=(0,a.Lk)("span",{class:"text-blue-200"},"Temporary Until:",-1)),"temporary"===ui.hodAccessType?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":t[9]||(t[9]=e=>ui.hodTemporaryUntil=e),type:"date",min:pi.tomorrow,class:"ml-2 px-1 py-0.5 bg-white/10 border border-blue-300/40 rounded text-xs text-white focus:ring-1 focus:ring-blue-400"},null,8,M)),[[a.Jo,ui.hodTemporaryUntil]]):(0,a.Q3)("",!0)])])])])):((0,a.uX)(),(0,a.CE)("div",P,[t[76]||(t[76]=(0,a.Lk)("label",{class:"block text-xs font-bold text-blue-100 mb-1 text-center"},[(0,a.Lk)("i",{class:"fas fa-user-shield mr-1"}),(0,a.eW)(" Access Rights ")],-1)),(0,a.Lk)("div",W,["permanent"===(ui.requestData?.access_type||ui.hodAccessType)?((0,a.uX)(),(0,a.CE)("span",$,[...t[73]||(t[73]=[(0,a.Lk)("i",{class:"fas fa-infinity mr-1 text-white"},null,-1),(0,a.eW)(" Permanent (until retirement) ",-1)])])):((0,a.uX)(),(0,a.CE)("span",X,[t[74]||(t[74]=(0,a.Lk)("i",{class:"fas fa-hourglass-half mr-1 text-white"},null,-1)),t[75]||(t[75]=(0,a.eW)(" Temporary Until: ",-1)),(0,a.Lk)("span",J,(0,a.v_)(ui.hodTemporaryUntil||pi.formatDateForInput(ui.requestData?.temporary_until)||"N/A"),1)]))])]))]),(0,a.Lk)("div",B,[(0,a.Lk)("div",Q,[t[83]||(t[83]=(0,a.Lk)("label",{class:"block text-xs font-bold text-blue-100 mb-1 text-center"},[(0,a.eW)(" Signature "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",{class:(0,a.C4)(["w-full px-1 py-0.5 border-2 rounded-lg backdrop-blur-sm transition-all duration-300 shadow-lg flex items-center justify-center min-h-[28px]",pi.hasSignature||ui.hasUserSigned?"border-green-400/50 bg-green-500/10":"border-blue-300/40 bg-white/15 hover:shadow-xl hover:shadow-blue-500/20"])},[ui.loading?((0,a.uX)(),(0,a.CE)("div",V,[(0,a.bF)(gi,{size:"sm"}),t[77]||(t[77]=(0,a.Lk)("p",{class:"text-blue-100 text-xs mt-0.5"},"Loading signature...",-1))])):((0,a.uX)(),(0,a.CE)("div",z,[pi.hasSignature||ui.hasUserSigned?((0,a.uX)(),(0,a.CE)("div",G,[t[79]||(t[79]=(0,a.Lk)("i",{class:"fas fa-check-circle text-green-400 text-sm"},null,-1)),(0,a.Lk)("p",Y,[t[78]||(t[78]=(0,a.eW)(" Digitally signed ",-1)),pi.signatureDisplay?.name?((0,a.uX)(),(0,a.CE)("span",K," by "+(0,a.v_)(pi.signatureDisplay.name),1)):(0,a.Q3)("",!0)]),pi.signatureDisplay?.at?((0,a.uX)(),(0,a.CE)("p",Z," on "+(0,a.v_)(pi.formatDateTime(pi.signatureDisplay.at)),1)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",ee,[t[81]||(t[81]=(0,a.Lk)("i",{class:"fas fa-signature text-blue-300 text-sm"},null,-1)),t[82]||(t[82]=(0,a.Lk)("p",{class:"text-blue-100 text-xs mt-0.5"},"No signature yet",-1)),(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning,class:"px-2 py-0.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50 mt-1"},[...t[80]||(t[80]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,te)]))]))],2)])])]),pi.isHodApprovalEditable||pi.isReviewMode&&"head_of_department"===pi.getUserRole()?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",se,[(0,a.Lk)("div",ae,[t[86]||(t[86]=(0,a.Lk)("div",{class:"hidden lg:block absolute left-2/3 top-0 bottom-0 w-px bg-gradient-to-b from-blue-300/30 via-blue-400/50 to-blue-300/30 transform -translate-x-px"},null,-1)),(0,a.Lk)("div",re,[(0,a.Lk)("div",ie,[(0,a.Lk)("div",oe,[(0,a.Lk)("label",ne,[t[84]||(t[84]=(0,a.Lk)("span",null,[(0,a.Lk)("i",{class:"fas fa-database mr-2"}),(0,a.eW)(" Jeeva Modules ")],-1)),(0,a.Lk)("span",le," Selected: "+(0,a.v_)(ui.selectedJeeva?.length||0)+" modules ",1)])]),(0,a.Lk)("div",de,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.jeevaModules,e=>((0,a.uX)(),(0,a.CE)("label",{key:"jeeva-"+e,class:(0,a.C4)(["flex items-center text-xs p-0.5 rounded transition-colors leading-none",pi.isFormSectionReadOnly?"cursor-default":"cursor-pointer hover:bg-white/10",ui.selectedJeeva.includes(e)&&pi.isFormSectionReadOnly?"bg-red-500/30 border-2 border-red-400/50 shadow-md ring-1 ring-red-400/40":ui.selectedJeeva.includes(e)?"bg-purple-500/20 border border-purple-400/30":"border border-transparent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>ui.selectedJeeva=e),value:e,type:"checkbox",disabled:pi.isFormSectionReadOnly,class:"w-3 h-3 text-red-600 accent-red-600 mr-1 flex-shrink-0"},null,8,ce),[[a.lH,ui.selectedJeeva]]),(0,a.Lk)("span",{class:(0,a.C4)(["text-xs leading-none",ui.selectedJeeva.includes(e)&&pi.isFormSectionReadOnly?"text-red-100 font-semibold":"text-purple-100"])},(0,a.v_)(e),3),ui.selectedJeeva.includes(e)&&pi.isFormSectionReadOnly?((0,a.uX)(),(0,a.CE)("i",ue)):(0,a.Q3)("",!0)],2))),128))])])]),(0,a.Lk)("div",pe,[(0,a.Lk)("div",he,[(0,a.Lk)("div",me,[(0,a.Lk)("label",fe,[t[85]||(t[85]=(0,a.Lk)("span",null,[(0,a.Lk)("i",{class:"fas fa-hospital mr-2"}),(0,a.eW)(" Wellsoft Modules ")],-1)),(0,a.Lk)("span",ge," Selected: "+(0,a.v_)(ui.selectedWellsoft?.length||0)+" modules ",1)])]),(0,a.Lk)("div",ve,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.wellsoftModules,e=>((0,a.uX)(),(0,a.CE)("label",{key:"wellsoft-"+e,class:(0,a.C4)(["flex items-center text-xs p-1.5 rounded transition-colors",pi.isFormSectionReadOnly?"cursor-default":"cursor-pointer hover:bg-white/10",ui.selectedWellsoft.includes(e)&&pi.isFormSectionReadOnly?"bg-red-500/30 border-2 border-red-400/50 shadow-md ring-1 ring-red-400/40":ui.selectedWellsoft.includes(e)?"bg-amber-500/20 border border-amber-400/30":"border border-transparent"])},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>ui.selectedWellsoft=e),value:e,type:"checkbox",disabled:pi.isFormSectionReadOnly,class:"w-3 h-3 text-red-600 accent-red-600 mr-2 flex-shrink-0"},null,8,be),[[a.lH,ui.selectedWellsoft]]),(0,a.Lk)("span",{class:(0,a.C4)(["text-xs leading-tight",ui.selectedWellsoft.includes(e)&&pi.isFormSectionReadOnly?"text-red-100 font-semibold":"text-amber-100"])},(0,a.v_)(e),3),ui.selectedWellsoft.includes(e)&&pi.isFormSectionReadOnly?((0,a.uX)(),(0,a.CE)("i",we)):(0,a.Q3)("",!0)],2))),128))])])])])])):(0,a.Q3)("",!0),ui.loading||pi.isStrictViewMode||!(!pi.isReviewMode||pi.isHodApprovalEditable||pi.isReviewMode&&"head_of_department"===pi.getUserRole()?.toLowerCase())?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",xe,[(0,a.Lk)("div",ye,[(0,a.Lk)("div",{class:(0,a.C4)(["grid items-start",pi.hasInternetRequest?"grid-cols-1 lg:grid-cols-2 gap-6":"grid-cols-1 gap-3"])},[pi.hasInternetRequest?((0,a.uX)(),(0,a.CE)("div",_e,[(0,a.Lk)("div",De,[(0,a.Lk)("div",ke,[t[87]||(t[87]=(0,a.Lk)("strong",{class:"mr-2"},"Internet Purposes",-1)),pi.hasInternetRequest?((0,a.uX)(),(0,a.CE)("ul",Se,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(pi.filteredInternetPurposes.slice(0,4),(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:"ip-"+t,class:"flex items-start gap-2"},[(0,a.Lk)("span",Ie,(0,a.v_)(t+1),1),(0,a.Lk)("span",Ce,(0,a.v_)(e),1)]))),128))])):((0,a.uX)(),(0,a.CE)("span",qe,"Not Requested"))])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Le,[(0,a.Lk)("div",Re,[t[88]||(t[88]=(0,a.Lk)("label",{class:"block text-blue-100 text-sm mb-1"},[(0,a.eW)(" HOD Comments "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>ui.hodComments=e),disabled:!1,required:"",class:"w-full h-20 bg-white/10 border border-blue-300/30 rounded-lg p-2 text-white placeholder-blue-300/60 text-sm resize-none overflow-hidden",placeholder:"HOD specify access category here...",rows:"3"},null,512),[[a.Jo,ui.hodComments]])])])],2)])])),ui.requestData&&!ui.loading?(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,a.C4)(["medical-card bg-gradient-to-r from-amber-600/15 to-orange-600/15 border-2 border-amber-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-amber-500/20 transition-all duration-300 group mb-4",pi.isReviewMode&&pi.isIctDirectorUser?"p-0.5":pi.isDivisionalDirectorUser||pi.isIctDirectorUser?"p-1":pi.isHodApprovalEditable?"p-1.5":"p-1"])},[(0,a.Lk)("div",Te,[(0,a.Lk)("div",Ae,[t[89]||(t[89]=(0,a.Lk)("div",{class:"w-5 h-5 bg-gradient-to-br from-amber-500 to-orange-600 rounded flex items-center justify-center shadow group-hover:scale-105 transition-transform duration-200 border border-amber-300/50"},[(0,a.Lk)("i",{class:"fas fa-comments text-white text-xs"})],-1)),(0,a.Lk)("span",Ee,(0,a.v_)(pi.previousComments&&pi.previousComments.length||0),1)]),(0,a.Lk)("h3",Ue,[t[91]||(t[91]=(0,a.Lk)("i",{class:"fas fa-history mr-1 text-amber-300 text-xs"},null,-1)),t[92]||(t[92]=(0,a.eW)(" Review Summary ",-1)),pi.isRequestFullyCompleted?((0,a.uX)(),(0,a.CE)("span",je,[...t[90]||(t[90]=[(0,a.Lk)("i",{class:"fas fa-check-circle mr-1 text-xs"},null,-1),(0,a.eW)(" Completed ",-1)])])):(0,a.Q3)("",!0)])]),ui.loading?((0,a.uX)(),(0,a.CE)("div",Oe,[...t[93]||(t[93]=[(0,a.Fv)('<div class="bg-white/5 rounded-lg border border-amber-300/20 animate-pulse" data-v-5bf52c48><div class="h-12 bg-amber-600/20 rounded-t-lg" data-v-5bf52c48></div><div class="p-4 space-y-3" data-v-5bf52c48><div class="h-4 bg-white/10 rounded w-3/4" data-v-5bf52c48></div><div class="h-4 bg-white/10 rounded w-1/2" data-v-5bf52c48></div><div class="h-4 bg-white/10 rounded w-2/3" data-v-5bf52c48></div></div></div><div class="bg-white/5 rounded-lg border border-amber-300/20 animate-pulse" data-v-5bf52c48><div class="h-12 bg-amber-600/20 rounded-t-lg" data-v-5bf52c48></div><div class="p-4 space-y-2" data-v-5bf52c48><div class="h-3 bg-white/10 rounded w-full" data-v-5bf52c48></div><div class="h-3 bg-white/10 rounded w-5/6" data-v-5bf52c48></div><div class="h-3 bg-white/10 rounded w-4/5" data-v-5bf52c48></div></div></div>',2)])])):((0,a.uX)(),(0,a.CE)("div",Ne,[(0,a.Lk)("div",Fe,[(0,a.Lk)("div",He,[t[97]||(t[97]=(0,a.Lk)("div",{class:"border-b border-amber-300/30 p-1",style:{"background-color":"#0047ab"}},[(0,a.Lk)("h4",{class:"text-xs font-medium text-white flex items-center leading-none"},[(0,a.Lk)("i",{class:"fas fa-list-check mr-1 text-white text-xs"}),(0,a.eW)(" Selected Modules Summary ")])],-1)),(0,a.Lk)("div",Me,[(0,a.Lk)("table",Pe,[t[96]||(t[96]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"border-b border-amber-300/20"},[(0,a.Lk)("th",{class:"text-left py-0.5 px-1.5 text-xs font-medium text-blue-200 uppercase tracking-wide"},[(0,a.Lk)("i",{class:"fas fa-laptop mr-1 text-xs"}),(0,a.eW)("Wellsoft ")]),(0,a.Lk)("th",{class:"text-left py-0.5 px-1.5 text-xs font-medium text-cyan-200 uppercase tracking-wide"},[(0,a.Lk)("i",{class:"fas fa-box mr-1 text-xs"}),(0,a.eW)("Jeeva ")]),(0,a.Lk)("th",{class:"text-left py-0.5 px-1.5 text-xs font-medium text-green-200 uppercase tracking-wide"},[(0,a.Lk)("i",{class:"fas fa-globe mr-1 text-xs"}),(0,a.eW)("Internet ")])])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",We,[(0,a.Lk)("td",$e,[pi.hasWellsoftRequest?0===ui.selectedWellsoft.length?((0,a.uX)(),(0,a.CE)("div",Je," No modules selected ")):((0,a.uX)(),(0,a.CE)("div",Be,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.selectedWellsoft,e=>((0,a.uX)(),(0,a.CE)("div",{key:"well-"+e,class:"flex items-center space-x-1.5"},[t[94]||(t[94]=(0,a.Lk)("i",{class:"fas fa-check-circle text-red-400 text-xs"},null,-1)),(0,a.Lk)("span",Qe,(0,a.v_)(e),1)]))),128))])):((0,a.uX)(),(0,a.CE)("div",Xe," Not Requested "))]),(0,a.Lk)("td",Ve,[pi.hasJeevaRequest?0===ui.selectedJeeva.length?((0,a.uX)(),(0,a.CE)("div",Ge," No modules selected ")):((0,a.uX)(),(0,a.CE)("div",Ye,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.selectedJeeva,e=>((0,a.uX)(),(0,a.CE)("div",{key:"jeeva-"+e,class:"flex items-center space-x-1.5"},[t[95]||(t[95]=(0,a.Lk)("i",{class:"fas fa-check-circle text-red-400 text-xs"},null,-1)),(0,a.Lk)("span",Ke,(0,a.v_)(e),1)]))),128))])):((0,a.uX)(),(0,a.CE)("div",ze," Not Requested "))]),(0,a.Lk)("td",Ze,[pi.hasInternetRequest?pi.filteredInternetPurposes.length?((0,a.uX)(),(0,a.CE)("div",st,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(pi.filteredInternetPurposes.slice(0,4),(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:"purpose-"+t,class:"flex items-start space-x-1.5"},[(0,a.Lk)("div",at,[(0,a.Lk)("span",rt,(0,a.v_)(t+1),1)]),(0,a.Lk)("span",it,(0,a.v_)(e),1)]))),128)),pi.filteredInternetPurposes.length>4?((0,a.uX)(),(0,a.CE)("div",ot," +"+(0,a.v_)(pi.filteredInternetPurposes.length-4)+" more ",1)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",tt," No purposes specified ")):((0,a.uX)(),(0,a.CE)("div",et," Not Requested "))])])])])])])]),(0,a.Lk)("div",nt,[(0,a.Lk)("div",lt,[t[100]||(t[100]=(0,a.Fv)('<div class="border-b border-amber-300/30 p-1" style="background-color:#0047ab;" data-v-5bf52c48><div class="grid grid-cols-12 gap-0 text-[10px] leading-none font-medium text-white uppercase tracking-wide" data-v-5bf52c48><div class="col-span-2" data-v-5bf52c48>Name</div><div class="col-span-2" data-v-5bf52c48>Role</div><div class="col-span-4" data-v-5bf52c48>Comments</div><div class="col-span-2" data-v-5bf52c48>Status</div><div class="col-span-2" data-v-5bf52c48>Date</div></div></div>',1)),(0,a.Lk)("div",dt,[pi.previousComments&&0!==pi.previousComments.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",ct,[...t[98]||(t[98]=[(0,a.Lk)("div",{class:"text-amber-300/70 text-xs italic"},[(0,a.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,a.eW)(" No previous comments available ")],-1)])])),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(pi.visibleComments,(e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:e.stage+"-"+s,class:(0,a.C4)(pi.rowClass(e,s))},[(0,a.Lk)("div",ut,[(0,a.Lk)("div",pt,[(0,a.Lk)("div",{class:(0,a.C4)(["w-4 h-4 rounded-full flex items-center justify-center text-xs flex-shrink-0",e.isApproved?"bg-green-500/30 text-green-300":e.isRejected?"bg-red-500/30 text-red-300":"bg-blue-500/30 text-blue-300"])},[(0,a.Lk)("i",{class:(0,a.C4)(["text-xs",e.isApproved?"fas fa-check":e.isRejected?"fas fa-times":"fas fa-clock"])},null,2)],2),(0,a.Lk)("div",ht,(0,a.v_)(e.name||"Name not available"),1)])]),(0,a.Lk)("div",mt,[(0,a.Lk)("div",ft,(0,a.v_)(e.stageName),1)]),(0,a.Lk)("div",gt,[(0,a.Lk)("div",{class:(0,a.C4)(["p-0 rounded text-[8px] leading-[1.05] border",e.isApproved?"bg-green-900/20 border-green-400/30 text-green-100":e.isRejected?"bg-red-900/20 border-red-400/30 text-red-100":"bg-blue-900/20 border-blue-400/30 text-blue-100"])},(0,a.v_)(e.comments),3)]),(0,a.Lk)("div",vt,[(0,a.Lk)("span",{class:(0,a.C4)(["inline-flex items-center px-1 py-0 rounded text-[9px] font-normal",e.isApproved?"bg-green-600/30 text-green-200 border border-green-400/30":e.isRejected?"bg-red-600/30 text-red-200 border border-red-400/30":"bg-blue-600/30 text-blue-200 border border-blue-400/30"])},[(0,a.Lk)("i",{class:(0,a.C4)(["mr-1 text-xs",e.isApproved?"fas fa-check-circle":e.isRejected?"fas fa-times-circle":"fas fa-clock"])},null,2),(0,a.eW)(" "+(0,a.v_)(e.isApproved?"OK":e.isRejected?"X":"Rev"),1)],2)]),(0,a.Lk)("div",bt,[(0,a.Lk)("div",wt,[(0,a.Lk)("i",{class:(0,a.C4)(["fas mr-1",e.hasSpecificDate?"fa-calendar text-gray-400":"fa-clock text-yellow-400"])},null,2),e.date?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(e.hasSpecificDate?"":"text-yellow-300")},[(0,a.eW)((0,a.v_)(pi.formatCommentDate(e.date))+" ",1),e.hasSpecificDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",xt," (approx.) "))],2)):((0,a.uX)(),(0,a.CE)("div",yt,[...t[99]||(t[99]=[(0,a.Lk)("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),(0,a.Lk)("div",{class:"text-xs"},"Date unavailable",-1)])]))])])],2))),128)),pi.previousComments&&pi.previousComments.length>ui.maxVisibleComments?((0,a.uX)(),(0,a.CE)("div",_t,[(0,a.Lk)("span",Dt," Showing "+(0,a.v_)(ui.maxVisibleComments)+" of "+(0,a.v_)(pi.previousComments.length)+" comments ",1)])):(0,a.Q3)("",!0)]),t[101]||(t[101]=(0,a.Lk)("div",{class:"border-t border-amber-300/30 p-1",style:{"background-color":"#0047ab"}},[(0,a.Lk)("div",{class:"flex items-center justify-center text-xs text-white"},[(0,a.Lk)("i",{class:"fas fa-lock mr-1 text-xs"}),(0,a.Lk)("span",null,"Read-only")])],-1)),(0,a.Lk)("div",kt,["ict_officer"!==(pi.getUserRole()||"").toLowerCase()&&"officer_ict"!==(pi.getUserRole()||"").toLowerCase()?((0,a.uX)(),(0,a.CE)("div",qt,[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>ui.roleCommentsDraft=e),readonly:!pi.isRoleCommentEditable,placeholder:pi.roleCommentLabel,class:"w-full h-20 border border-blue-300/20 text-blue-100 placeholder-blue-200/70 rounded p-2 text-base focus:outline-none focus:ring-1 focus:ring-blue-400 resize-none role-comment-textarea",style:{"background-color":"#0047ab"}},null,8,St),[[a.Jo,ui.roleCommentsDraft]])])):(0,a.Q3)("",!0)])])])]))],2)),[[a.aG,!ui.loading]]):(0,a.Q3)("",!0),ui.showGrantAccessPopup?((0,a.uX)(),(0,a.CE)("div",It,[(0,a.Lk)("div",Ct,[t[107]||(t[107]=(0,a.Lk)("div",{class:"px-5 py-3",style:{"background-color":"red"}},[(0,a.Lk)("h3",{class:"text-white text-2xl font-bold flex items-center gap-2"},[(0,a.Lk)("i",{class:"fas fa-user-shield"}),(0,a.eW)(" Grant Access ")]),(0,a.Lk)("p",{class:"text-blue-100 text-base mt-1"},"Provide your implementation note before granting access.")],-1)),(0,a.Lk)("div",Lt,[t[105]||(t[105]=(0,a.Lk)("label",{class:"block text-blue-100 text-lg mb-1"},[(0,a.eW)("ICT Officer Comment "),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[15]||(t[15]=e=>ui.grantAccessComment=e),class:"w-full h-28 bg-white/10 border border-blue-300/30 rounded-lg p-2 text-white placeholder-blue-300/60 text-sm resize-none focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Enter implementation details (max 1000 characters)...",rows:"5",required:""},null,512),[[a.Jo,ui.grantAccessComment]]),(0,a.Lk)("div",Rt,[(0,a.Lk)("span",Tt,"Remaining: "+(0,a.v_)(Math.max(0,1e3-(ui.grantAccessComment||"").length)),1),(0,a.Lk)("span",At,(0,a.v_)((ui.grantAccessComment||"").length)+"/1000 ",1)]),ui.grantAccessError?((0,a.uX)(),(0,a.CE)("p",Et,(0,a.v_)(ui.grantAccessError),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Ut,[t[104]||(t[104]=(0,a.Lk)("div",{class:"flex items-center gap-2 mb-2"},[(0,a.Lk)("i",{class:"fas fa-sms text-blue-300 text-lg"}),(0,a.Lk)("label",{class:"text-blue-100 text-base font-semibold"},"SMS Preview (will be sent to requester):")],-1)),(0,a.Lk)("div",jt,(0,a.v_)(pi.getSmsPreviewText()),1),(0,a.Lk)("div",Ot,[(0,a.Lk)("span",Nt,"Length: "+(0,a.v_)(pi.getSmsPreviewText().length)+" chars",1),t[102]||(t[102]=(0,a.Lk)("span",{class:"text-xs text-blue-200/70"},"(Long messages may be split into multiple SMS parts)",-1))]),(0,a.Lk)("p",Ft,[t[103]||(t[103]=(0,a.Lk)("i",{class:"fas fa-info-circle mr-1"},null,-1)),(0,a.eW)(" This message will be sent to "+(0,a.v_)(ui.form.staff_name||"the requester")+" at "+(0,a.v_)(ui.form.phone_number||"their phone number"),1)])])]),(0,a.Lk)("div",Ht,[(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>pi.cancelGrantAccess&&pi.cancelGrantAccess(...e)),type:"button",class:"px-3 py-1.5 rounded-lg text-white bg-gray-600 hover:bg-gray-700 text-sm"},"Cancel"),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>pi.confirmGrantAccess&&pi.confirmGrantAccess(...e)),type:"button",disabled:ui.processing||!ui.grantAccessComment.trim(),class:"px-3 py-1.5 rounded-lg text-white text-sm border border-blue-300/50 shadow disabled:opacity-50",style:{background:"linear-gradient(135deg,#0f52ba 0%,#1e3a8a 100%)"}},[...t[106]||(t[106]=[(0,a.Lk)("i",{class:"fas fa-key mr-1"},null,-1),(0,a.eW)(" Grant Access ",-1)])],8,Mt)])])])):(0,a.Q3)("",!0),ui.showHeadItApproveSuccessModal?((0,a.uX)(),(0,a.CE)("div",Pt,[(0,a.Lk)("div",Wt,[t[109]||(t[109]=(0,a.Fv)('<div class="px-6 py-4 text-center" style="background:linear-gradient(135deg, #0f52ba 0%, #1e3a8a 100%);" data-v-5bf52c48><div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-lg" data-v-5bf52c48><i class="fas fa-check text-2xl" style="color:#0f52ba;" data-v-5bf52c48></i></div><h3 class="text-xl font-bold text-white" data-v-5bf52c48>Request Approved</h3><p class="text-blue-100 text-sm mt-1" data-v-5bf52c48>The request has been approved successfully.</p></div>',1)),(0,a.Lk)("div",$t,[t[108]||(t[108]=(0,a.Lk)("p",{class:"text-gray-700 text-base mb-6"},"Click below to assign this task to an ICT Officer.",-1)),(0,a.Lk)("div",Xt,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>pi.redirectToAssignIctOfficer&&pi.redirectToAssignIctOfficer(...e)),class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-200"}," Assign to ICT Officer "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>ui.showHeadItApproveSuccessModal=!1),class:"flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg transition duration-200"}," Close ")])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,a.C4)(["medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group",pi.isReviewMode&&pi.isIctDirectorUser?"p-0.5":pi.isDivisionalDirectorUser||pi.isIctDirectorUser?"p-1":pi.isHodApprovalEditable?"p-1.5":"p-1"])},[(0,a.Lk)("div",Jt,[(0,a.Lk)("div",Bt,[t[111]||(t[111]=(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50"},[(0,a.Lk)("i",{class:"fas fa-check-circle text-white text-sm"})],-1)),(0,a.Lk)("h3",{class:(0,a.C4)(["text-sm font-bold text-white flex items-center",pi.isStrictViewMode?"select-none":"cursor-pointer select-none"]),onClick:t[20]||(t[20]=e=>!pi.isStrictViewMode&&(ui.showApprovalSections=!ui.showApprovalSections)),"aria-expanded":ui.showApprovalSections?"true":"false","aria-controls":"approval-sections",title:pi.isStrictViewMode?"Approval information":"Toggle approval sections"},[t[110]||(t[110]=(0,a.Lk)("i",{class:"fas fa-clipboard-check mr-1 text-blue-300"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(pi.isStrictViewMode?"Approvals":"Click here to Approve"),1),pi.isStrictViewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("i",{key:0,class:(0,a.C4)([["fas",ui.showApprovalSections?"fa-chevron-up":"fa-chevron-down"],"ml-1"])},null,2))],10,Qt)])]),(0,a.bo)((0,a.Lk)("div",{id:"approval-sections",class:(0,a.C4)(["grid grid-cols-1 lg:grid-cols-3",pi.isDivisionalDirectorUser?"gap-3":pi.isHodApprovalEditable?"gap-4":"gap-1"])},[(0,a.Lk)("div",{class:(0,a.C4)(["bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm",pi.isDivisionalDirectorUser||pi.isHodApprovalEditable?"p-3":"p-2"])},[(0,a.Lk)("h5",Vt,[t[115]||(t[115]=(0,a.Lk)("i",{class:"fas fa-user-tie mr-2 text-blue-300"},null,-1)),t[116]||(t[116]=(0,a.eW)(" HoD/BM ",-1)),pi.isStageCompleted("hod")?((0,a.uX)(),(0,a.CE)("span",zt,[...t[112]||(t[112]=[(0,a.Lk)("i",{class:"fas fa-check text-base mr-1"},null,-1),(0,a.eW)(" Completed ",-1)])])):pi.isHodSkipped?((0,a.uX)(),(0,a.CE)("span",Gt,[...t[113]||(t[113]=[(0,a.Lk)("i",{class:"fas fa-ban text-base mr-1"},null,-1),(0,a.eW)(" Skipped ",-1)])])):!pi.isHodApprovalEditable&&pi.isReviewMode?((0,a.uX)(),(0,a.CE)("span",Yt,[...t[114]||(t[114]=[(0,a.Lk)("i",{class:"fas fa-clock text-base mr-1"},null,-1),(0,a.eW)(" Pending ",-1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Kt,[(0,a.Lk)("div",null,[t[118]||(t[118]=(0,a.Lk)("label",{class:"block text-base font-semibold text-white mb-1"},[(0,a.eW)("Name"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Zt,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>ui.form.approvals.hod.name=e),type:"text",readonly:"",placeholder:pi.getApprovalNamePlaceholder("hod"),class:"medical-input w-full px-3 py-2 bg-white/30 border-2 border-blue-300/50 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-100/80 backdrop-blur-sm cursor-not-allowed font-medium",title:pi.getApprovalNameTitle("hod")},null,8,es),[[a.Jo,ui.form.approvals.hod.name]]),t[117]||(t[117]=(0,a.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2"},[(0,a.Lk)("i",{class:"fas fa-lock text-blue-300 text-xs",title:"This field is auto-populated from your account"})],-1))])]),(0,a.Lk)("div",null,[t[128]||(t[128]=(0,a.Lk)("label",{class:"block text-base font-semibold text-white mb-1"},[(0,a.eW)("Signature"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",ts,[pi.shouldShowHodSignedIndicator?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative","border-2 border-green-400/50 bg-green-500/10 shadow-lg",pi.isIctDirectorApprovalActive?"ring-1 ring-green-300/40 shadow-xl":""]),title:pi.getSignedByYouTooltip("hod")},[(0,a.Lk)("div",as,[(0,a.Lk)("div",rs,[t[119]||(t[119]=(0,a.Lk)("div",{class:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-check text-green-400 text-sm"})],-1)),(0,a.Lk)("span",{class:(0,a.C4)(["text-base",pi.isIctDirectorApprovalActive?"text-green-300 font-extrabold uppercase tracking-wide":"text-green-400 font-semibold"])},"Signed",2)]),(0,a.Lk)("p",{class:(0,a.C4)([pi.isIctDirectorApprovalActive?"text-green-200 font-semibold text-base":"text-green-300/80 text-base"])}," Approved at: "+(0,a.v_)(pi.getApprovalDateFormatted("hod")),3)]),t[120]||(t[120]=(0,a.Lk)("div",{class:"absolute top-2 right-2"},[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-signature text-green-400 text-xs",title:"Signature on file"})])],-1))],10,ss)):pi.isHodSkipped?((0,a.uX)(),(0,a.CE)("div",is,[...t[121]||(t[121]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-ban text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>Signature skipped</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48>HOD approval skipped</p></div>',1)])])):pi.shouldShowHodNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("div",os,[...t[122]||(t[122]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-times text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>No signature on file</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48>HOD approval pending</p></div>',1)])])):ui.hodSignaturePreview?((0,a.uX)(),(0,a.CE)("div",ns,[pi.isImage(ui.hodSignaturePreview)?((0,a.uX)(),(0,a.CE)("div",ls,[(0,a.Lk)("img",{src:ui.hodSignaturePreview,alt:"HOD Signature",class:"max-h-[50px] max-w-full object-contain mx-auto mb-1"},null,8,ds),(0,a.Lk)("p",cs,(0,a.v_)(ui.hodSignatureFileName),1)])):((0,a.uX)(),(0,a.CE)("div",us,[t[123]||(t[123]=(0,a.Lk)("div",{class:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center mx-auto mb-1"},[(0,a.Lk)("i",{class:"fas fa-file-pdf text-red-400 text-lg"})],-1)),(0,a.Lk)("p",ps,(0,a.v_)(ui.hodSignatureFileName),1)])),pi.isHodApprovalEditable?((0,a.uX)(),(0,a.CE)("div",hs,[(0,a.Lk)("button",{type:"button",onClick:t[22]||(t[22]=(...e)=>pi.triggerHodSignatureUpload&&pi.triggerHodSignatureUpload(...e)),class:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-blue-600 transition-colors duration-200 shadow-lg",title:"Change signature"},[...t[124]||(t[124]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1)])]),(0,a.Lk)("button",{type:"button",onClick:t[23]||(t[23]=(...e)=>pi.clearHodSignature&&pi.clearHodSignature(...e)),class:"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors duration-200 shadow-lg",title:"Remove signature"},[...t[125]||(t[125]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",ms,[(0,a.Lk)("div",{class:(0,a.C4)(["w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative","Signed"===ui.requestData?.approvals?.hod?.signature_status?"border-2 border-green-400/50 bg-green-500/10 shadow-lg":"border-2 border-red-400/50 bg-red-500/10 shadow-lg"])},[(0,a.Lk)("div",fs,[(0,a.Lk)("div",gs,[(0,a.Lk)("div",{class:(0,a.C4)(["w-8 h-8 rounded-full flex items-center justify-center","Signed"===ui.requestData?.approvals?.hod?.signature_status?"bg-green-500/20":"bg-red-500/20"])},[(0,a.Lk)("i",{class:(0,a.C4)(["text-sm","Signed"===ui.requestData?.approvals?.hod?.signature_status?"fas fa-check text-green-400":"fas fa-times text-red-400"])},null,2)],2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold","Signed"===ui.requestData?.approvals?.hod?.signature_status?"text-green-400":"text-red-400"])},(0,a.v_)(ui.requestData?.approvals?.hod?.signature_display||"No signature"),3)]),"Signed"===ui.requestData?.approvals?.hod?.signature_status?((0,a.uX)(),(0,a.CE)("div",vs,[...t[126]||(t[126]=[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-signature text-green-400 text-xs",title:"Signature on file"})],-1)])])):(0,a.Q3)("",!0)])],2),"Signed"===ui.requestData?.approvals?.hod?.signature_status||ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",bs,[pi.canUploadHodSignature?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:t[24]||(t[24]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning||!pi.isReviewMode,class:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50"},[...t[127]||(t[127]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,ws)):(0,a.Q3)("",!0),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",xs,"Available after submitting the request"))]))]))])]),(0,a.Lk)("div",null,[t[129]||(t[129]=(0,a.Lk)("label",{class:"block text-base font-semibold text-white mb-1"},[(0,a.eW)("Date (mm/dd/yyyy)"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",ys,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>ui.form.approvals.hod.date=e),type:"date",readonly:!0,class:(0,a.C4)(["medical-input w-full px-3 py-2 bg-white/30 border-2 rounded-lg focus:outline-none text-white backdrop-blur-sm cursor-not-allowed font-medium",pi.shouldShowHodSignedIndicator?"border-green-400/60 ring-1 ring-green-300/40":"",pi.shouldShowHodNoSignatureIndicator?"border-red-400/40":"",pi.isHodSkipped?"border-red-400/60 bg-red-500/10":"",pi.isIctDirectorApprovalActive&&pi.shouldShowHodSignedIndicator?"font-semibold text-green-200":""])},null,2),[[a.Jo,ui.form.approvals.hod.date]]),(0,a.Lk)("div",_s,[pi.isHodSkipped?((0,a.uX)(),(0,a.CE)("i",Ds)):pi.shouldShowHodSignedIndicator?((0,a.uX)(),(0,a.CE)("i",ks)):pi.shouldShowHodNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("i",qs)):((0,a.uX)(),(0,a.CE)("i",Ss))])])])])],2),(0,a.Lk)("div",{class:(0,a.C4)(["bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm",pi.isDivisionalDirectorUser?"p-3":"p-4"])},[(0,a.Lk)("h5",Is,[t[135]||(t[135]=(0,a.Lk)("i",{class:"fas fa-user-circle mr-2 text-blue-300"},null,-1)),t[136]||(t[136]=(0,a.eW)(" Divisional Director ",-1)),pi.isHodApprovalEditable&&pi.isReviewMode&&ui.requestData?.divisional_signature_path?((0,a.uX)(),(0,a.CE)("span",Cs,[...t[130]||(t[130]=[(0,a.Lk)("i",{class:"fas fa-signature text-base mr-1"},null,-1),(0,a.eW)(" Signed ",-1)])])):pi.isHodApprovalEditable&&pi.isReviewMode&&!ui.requestData?.divisional_signature_path?((0,a.uX)(),(0,a.CE)("span",Ls,[...t[131]||(t[131]=[(0,a.Lk)("i",{class:"fas fa-times text-base mr-1"},null,-1),(0,a.eW)(" No Signature ",-1)])])):pi.isStageCompleted("divisional")?((0,a.uX)(),(0,a.CE)("span",Rs,[...t[132]||(t[132]=[(0,a.Lk)("i",{class:"fas fa-check text-base mr-1"},null,-1),(0,a.eW)(" Completed ",-1)])])):pi.isDivisionalSkipped?((0,a.uX)(),(0,a.CE)("span",Ts,[...t[133]||(t[133]=[(0,a.Lk)("i",{class:"fas fa-ban text-base mr-1"},null,-1),(0,a.eW)(" Skipped ",-1)])])):!pi.isDivisionalApprovalEditable&&pi.isReviewMode?((0,a.uX)(),(0,a.CE)("span",As,[...t[134]||(t[134]=[(0,a.Lk)("i",{class:"fas fa-clock text-base mr-1"},null,-1),(0,a.eW)(" Pending ",-1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Es,[(0,a.Lk)("div",null,[t[138]||(t[138]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-1"},[(0,a.eW)("Name"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Us,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>ui.form.approvals.divisionalDirector.name=e),type:"text",readonly:"",placeholder:pi.getApprovalNamePlaceholder("divisional_director"),class:"medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed",title:pi.getApprovalNameTitle("divisional_director")},null,8,js),[[a.Jo,ui.form.approvals.divisionalDirector.name]]),t[137]||(t[137]=(0,a.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2"},[(0,a.Lk)("i",{class:"fas fa-lock text-blue-300 text-xs",title:"This field is auto-populated from your account"})],-1))])]),(0,a.Lk)("div",null,[t[144]||(t[144]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-1"},[(0,a.eW)("Signature"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Os,[pi.shouldShowDivisionalSignedIndicator?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,a.C4)(["w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center","border-2 border-green-400/50 bg-green-500/10 shadow-lg",pi.isIctDirectorApprovalActive?"ring-1 ring-green-300/40 shadow-xl":""]),title:pi.getSignedByYouTooltip("divisional")},[(0,a.Lk)("div",Fs,[(0,a.Lk)("div",Hs,[t[139]||(t[139]=(0,a.Lk)("div",{class:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-check text-green-400 text-sm"})],-1)),(0,a.Lk)("span",{class:(0,a.C4)(["text-base",pi.isIctDirectorApprovalActive?"text-green-300 font-extrabold uppercase tracking-wide":"text-green-400 font-semibold"])},"Signed",2)]),(0,a.Lk)("p",{class:(0,a.C4)([pi.isIctDirectorApprovalActive?"text-green-200 font-semibold text-base":"text-green-300/80 text-base"])}," Approved at: "+(0,a.v_)(pi.getApprovalDateFormatted("divisional")),3)])],10,Ns)):pi.isDivisionalSkipped?((0,a.uX)(),(0,a.CE)("div",Ms,[...t[140]||(t[140]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-ban text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>Signature skipped</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48> Divisional Director approval skipped </p></div>',1)])])):pi.shouldShowDivisionalNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("div",Ps,[...t[141]||(t[141]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-times text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>No signature on file</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48> Divisional Director approval pending </p></div>',1)])])):ui.divDirectorSignaturePreview?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Ws,[(0,a.Lk)("div",{class:(0,a.C4)(["w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative","Signed"===ui.requestData?.approvals?.divisionalDirector?.signature_status?"border-2 border-green-400/50 bg-green-500/10 shadow-lg":"border-2 border-red-400/50 bg-red-500/10 shadow-lg"])},[(0,a.Lk)("div",$s,[(0,a.Lk)("div",Xs,[(0,a.Lk)("div",{class:(0,a.C4)(["w-8 h-8 rounded-full flex items-center justify-center","Signed"===ui.requestData?.approvals?.divisionalDirector?.signature_status?"bg-green-500/20":"bg-red-500/20"])},[(0,a.Lk)("i",{class:(0,a.C4)(["text-sm","Signed"===ui.requestData?.approvals?.divisionalDirector?.signature_status?"fas fa-check text-green-400":"fas fa-times text-red-400"])},null,2)],2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold","Signed"===ui.requestData?.approvals?.divisionalDirector?.signature_status?"text-green-400":"text-red-400"])},(0,a.v_)(ui.requestData?.approvals?.divisionalDirector?.signature_display||"No signature"),3)]),"Signed"===ui.requestData?.approvals?.divisionalDirector?.signature_status?((0,a.uX)(),(0,a.CE)("div",Js,[...t[142]||(t[142]=[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-signature text-green-400 text-xs",title:"Signature on file"})],-1)])])):(0,a.Q3)("",!0)])],2),(0,a.Lk)("div",Bs,[pi.isDivisionalApprovalEditable&&!(ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name))?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:t[27]||(t[27]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning||!pi.isReviewMode,class:"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-sm font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50"},[...t[143]||(t[143]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,Qs)):(0,a.Q3)("",!0),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",Vs,"Available after submitting the request"))])]))])]),(0,a.Lk)("div",null,[t[145]||(t[145]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-1"},[(0,a.eW)("Date (mm/dd/yyyy)"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",zs,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>ui.form.approvals.divisionalDirector.date=e),type:"date",readonly:!0,class:(0,a.C4)(["medical-input w-full px-3 py-2 bg-white/15 border rounded-lg focus:outline-none text-white backdrop-blur-sm cursor-not-allowed",pi.shouldShowDivisionalSignedIndicator?"border-green-400/60 ring-1 ring-green-300/40":"",pi.shouldShowDivisionalNoSignatureIndicator?"border-red-400/40":"",pi.isDivisionalSkipped?"border-red-400/60 bg-red-500/10":"",pi.isIctDirectorApprovalActive&&pi.shouldShowDivisionalSignedIndicator?"font-semibold text-green-200":""])},null,2),[[a.Jo,ui.form.approvals.divisionalDirector.date]]),(0,a.Lk)("div",Gs,[pi.isDivisionalSkipped?((0,a.uX)(),(0,a.CE)("i",Ys)):pi.shouldShowDivisionalSignedIndicator?((0,a.uX)(),(0,a.CE)("i",Ks)):pi.shouldShowDivisionalNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("i",Zs)):((0,a.uX)(),(0,a.CE)("i",ea))])])])])],2),(0,a.Lk)("div",{class:(0,a.C4)(["bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm",pi.isDivisionalDirectorUser?"p-3":"p-4"])},[(0,a.Lk)("h5",ta,[t[150]||(t[150]=(0,a.Lk)("i",{class:"fas fa-laptop-code mr-2 text-blue-300"},null,-1)),t[151]||(t[151]=(0,a.eW)(" Director of ICT ",-1)),pi.isHodApprovalEditable&&pi.isReviewMode&&ui.requestData?.ict_director_signature_path?((0,a.uX)(),(0,a.CE)("span",sa,[...t[146]||(t[146]=[(0,a.Lk)("i",{class:"fas fa-signature text-xs mr-1"},null,-1),(0,a.eW)(" Signed ",-1)])])):pi.isHodApprovalEditable&&pi.isReviewMode&&!ui.requestData?.ict_director_signature_path?((0,a.uX)(),(0,a.CE)("span",aa,[...t[147]||(t[147]=[(0,a.Lk)("i",{class:"fas fa-times text-xs mr-1"},null,-1),(0,a.eW)(" No Signature ",-1)])])):pi.isStageCompleted("ict_director")?((0,a.uX)(),(0,a.CE)("span",ra,[...t[148]||(t[148]=[(0,a.Lk)("i",{class:"fas fa-check text-xs mr-1"},null,-1),(0,a.eW)(" Completed ",-1)])])):!pi.isIctDirectorApprovalEditable&&pi.isReviewMode?((0,a.uX)(),(0,a.CE)("span",ia,[...t[149]||(t[149]=[(0,a.Lk)("i",{class:"fas fa-clock text-xs mr-1"},null,-1),(0,a.eW)(" Pending ",-1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",oa,[(0,a.Lk)("div",null,[t[153]||(t[153]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-1"},[(0,a.eW)("Name"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",na,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>ui.form.approvals.directorICT.name=e),type:"text",readonly:"",placeholder:pi.getApprovalNamePlaceholder("ict_director"),class:"medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed",title:pi.getApprovalNameTitle("ict_director")},null,8,la),[[a.Jo,ui.form.approvals.directorICT.name]]),t[152]||(t[152]=(0,a.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2"},[(0,a.Lk)("i",{class:"fas fa-lock text-blue-300 text-xs",title:"This field is auto-populated from your account"})],-1))])]),(0,a.Lk)("div",null,[t[158]||(t[158]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-1"},[(0,a.eW)("Signature"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",da,[pi.shouldShowIctDirectorSignedIndicator?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"w-full px-3 py-2 border-2 border-green-400/50 rounded-xl bg-green-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[35px] flex items-center justify-center",title:pi.getSignedByYouTooltip("ict_director")},[(0,a.Lk)("div",ua,[t[154]||(t[154]=(0,a.Lk)("div",{class:"flex items-center justify-center space-x-2 mb-1"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-check text-green-400 text-sm"})]),(0,a.Lk)("span",{class:"text-green-400 font-semibold text-base"},"Signed")],-1)),(0,a.Lk)("p",pa," Approved at: "+(0,a.v_)(pi.getApprovalDateFormatted("ict_director")),1)])],8,ca)):pi.shouldShowIctDirectorNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("div",ha,[...t[155]||(t[155]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-8 h-8 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-times text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>No signature on file</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48> ICT Director approval pending </p></div>',1)])])):ui.directorICTSignaturePreview?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",ma,[(0,a.Lk)("div",{class:(0,a.C4)(["w-full px-3 py-2 rounded-xl backdrop-blur-sm transition-all duration-300 min-h-[35px] flex items-center justify-center relative","Signed"===ui.requestData?.approvals?.directorICT?.signature_status?"border-2 border-green-400/50 bg-green-500/10 shadow-lg":"border-2 border-red-400/50 bg-red-500/10 shadow-lg"])},[(0,a.Lk)("div",fa,[(0,a.Lk)("div",ga,[(0,a.Lk)("div",{class:(0,a.C4)(["w-8 h-8 rounded-full flex items-center justify-center","Signed"===ui.requestData?.approvals?.directorICT?.signature_status?"bg-green-500/20":"bg-red-500/20"])},[(0,a.Lk)("i",{class:(0,a.C4)(["text-sm","Signed"===ui.requestData?.approvals?.directorICT?.signature_status?"fas fa-check text-green-400":"fas fa-times text-red-400"])},null,2)],2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold","Signed"===ui.requestData?.approvals?.directorICT?.signature_status?"text-green-400":"text-red-400"])},(0,a.v_)(ui.requestData?.approvals?.directorICT?.signature_display||"No signature"),3)]),"Signed"===ui.requestData?.approvals?.directorICT?.signature_status?((0,a.uX)(),(0,a.CE)("div",va,[...t[156]||(t[156]=[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-signature text-green-400 text-xs",title:"Signature on file"})],-1)])])):(0,a.Q3)("",!0)])],2),(0,a.Lk)("div",ba,[pi.isIctDirectorApprovalEditable&&!(ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name))?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:t[30]||(t[30]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning||!pi.isReviewMode,class:"px-3 py-1.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white text-xs font-semibold rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-green-400/50"},[...t[157]||(t[157]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,wa)):(0,a.Q3)("",!0),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",xa,"Available after submitting the request"))])]))])]),(0,a.Lk)("div",null,[t[159]||(t[159]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-1"},[(0,a.eW)("Date (mm/dd/yyyy)"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",ya,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>ui.form.approvals.directorICT.date=e),type:"date",readonly:!pi.isIctDirectorApprovalEditable,class:(0,a.C4)(["medical-input w-full px-3 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm",{"cursor-not-allowed":!pi.isIctDirectorApprovalEditable,"ict-director-approval-editable":pi.isIctDirectorApprovalEditable,"bg-green-100/20 border-green-400/40":pi.shouldShowIctDirectorSignedIndicator,"bg-red-100/20 border-red-400/40":pi.shouldShowIctDirectorNoSignatureIndicator}])},null,10,_a),[[a.Jo,ui.form.approvals.directorICT.date]]),(0,a.Lk)("div",Da,[pi.shouldShowIctDirectorSignedIndicator?((0,a.uX)(),(0,a.CE)("i",ka)):pi.shouldShowIctDirectorNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("i",qa)):((0,a.uX)(),(0,a.CE)("i",{key:2,class:"fas fa-calendar text-blue-300 text-xs",title:pi.isIctDirectorApprovalEditable?"Select ICT Director approval date":"Date will be populated when ICT Director approves"},null,8,Sa))])])])])],2)],2),[[a.aG,pi.isStrictViewMode||ui.showApprovalSections]])],2),(0,a.Lk)("div",{class:(0,a.C4)(pi.implementationCardClass)},[(0,a.Lk)("div",{class:(0,a.C4)(pi.implementationHeaderClass)},[t[162]||(t[162]=(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 border border-blue-300/50"},[(0,a.Lk)("i",{class:"fas fa-cogs text-white text-sm"})],-1)),(0,a.Lk)("h3",{class:(0,a.C4)(["text-base font-bold text-white flex items-center",pi.isStrictViewMode?"select-none":"cursor-pointer select-none"]),onClick:t[32]||(t[32]=e=>!pi.isStrictViewMode&&(ui.showImplementationSections=!ui.showImplementationSections)),"aria-expanded":ui.showImplementationSections?"true":"false","aria-controls":"implementation-sections",title:pi.isStrictViewMode?"Implementation information":"Toggle implementation sections"},[t[160]||(t[160]=(0,a.Lk)("i",{class:"fas fa-tools mr-1 text-blue-300"},null,-1)),t[161]||(t[161]=(0,a.eW)(" For Implementation ",-1)),pi.isStrictViewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("i",{key:0,class:(0,a.C4)([["fas",ui.showImplementationSections?"fa-chevron-up":"fa-chevron-down"],"ml-2"])},null,2))],10,Ia)],2),(0,a.bo)((0,a.Lk)("div",{id:"implementation-sections",class:(0,a.C4)(pi.implementationGridClass)},[(0,a.Lk)("div",{class:(0,a.C4)(pi.headItSectionClass)},[(0,a.Lk)("h5",Ca,[t[167]||(t[167]=(0,a.Lk)("i",{class:"fas fa-user-cog mr-2"},null,-1)),t[168]||(t[168]=(0,a.eW)(" Head of IT ",-1)),pi.isHodApprovalEditable&&pi.isReviewMode&&ui.requestData?.head_it_signature_path?((0,a.uX)(),(0,a.CE)("span",La,[...t[163]||(t[163]=[(0,a.Lk)("i",{class:"fas fa-signature text-base mr-1"},null,-1),(0,a.eW)(" Signed ",-1)])])):pi.isHodApprovalEditable&&pi.isReviewMode&&!ui.requestData?.head_it_signature_path?((0,a.uX)(),(0,a.CE)("span",Ra,[...t[164]||(t[164]=[(0,a.Lk)("i",{class:"fas fa-times text-base mr-1"},null,-1),(0,a.eW)(" No Signature ",-1)])])):pi.isStageCompleted("head_it")?((0,a.uX)(),(0,a.CE)("span",Ta,[...t[165]||(t[165]=[(0,a.Lk)("i",{class:"fas fa-check text-base mr-1"},null,-1),(0,a.eW)(" Completed ",-1)])])):!pi.isHeadItApprovalEditable&&pi.isReviewMode?((0,a.uX)(),(0,a.CE)("span",Aa,[...t[166]||(t[166]=[(0,a.Lk)("i",{class:"fas fa-clock text-base mr-1"},null,-1),(0,a.eW)(" Pending ",-1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ea,[(0,a.Lk)("div",null,[t[169]||(t[169]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-0.5"},[(0,a.eW)("Name"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Ua,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>ui.form.implementation.headIT.name=e),type:"text",readonly:!pi.isHeadItApprovalEditable||pi.isHeadItApprovalEditable&&!!ui.form.implementation.headIT.name,placeholder:pi.getApprovalNamePlaceholder("head_it"),class:(0,a.C4)(["medical-input w-full px-2 py-1 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm text-xs",{"cursor-not-allowed bg-gray-500/20":!pi.isHeadItApprovalEditable||pi.isHeadItApprovalEditable&&!!ui.form.implementation.headIT.name,"bg-white/15":!ui.form.implementation.headIT.name&&pi.isHeadItApprovalEditable,"bg-blue-500/20 border-blue-400/50":pi.isHeadItApprovalEditable&&!!ui.form.implementation.headIT.name,"font-bold text-yellow-300":pi.isHeadItApprovalEditable&&ui.form.implementation.headIT.name}]),title:ui.form.implementation.headIT.name?"Auto-populated from your account - cannot be modified":pi.getApprovalNameTitle("head_it")},null,10,ja),[[a.Jo,ui.form.implementation.headIT.name]]),(0,a.Lk)("div",Oa,[(0,a.Lk)("i",{class:(0,a.C4)(["fas fa-lock text-blue-300 text-xs",{"text-yellow-300":pi.isHeadItApprovalEditable&&ui.form.implementation.headIT.name}]),title:pi.isHeadItApprovalEditable?"This field is auto-populated from your account":"This field will be auto-populated when Head IT reviews the request"},null,10,Na)])])]),(0,a.Lk)("div",null,[t[174]||(t[174]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-0.5"},[(0,a.eW)("Signature"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Fa,[pi.shouldShowHeadITSignedIndicator?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"w-full px-2 py-1 border-2 border-green-400/50 rounded-lg bg-green-500/10 backdrop-blur-sm transition-all duration-300 shadow-lg min-h-[25px] flex items-center justify-center",title:pi.getSignedByYouTooltip("head_it")},[(0,a.Lk)("div",Ma,[t[170]||(t[170]=(0,a.Lk)("div",{class:"flex items-center justify-center space-x-2 mb-1"},[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-check text-green-400 text-sm"})]),(0,a.Lk)("span",{class:"text-green-400 font-semibold text-base"},"Signed")],-1)),(0,a.Lk)("p",Pa," Approved at: "+(0,a.v_)(pi.getApprovalDateFormatted("head_it")),1)])],8,Ha)):pi.shouldShowHeadITNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("div",Wa,[...t[171]||(t[171]=[(0,a.Fv)('<div class="text-center" data-v-5bf52c48><div class="flex items-center justify-center space-x-2 mb-1" data-v-5bf52c48><div class="w-6 h-6 bg-red-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-times text-red-400 text-sm" data-v-5bf52c48></i></div><span class="text-red-400 font-semibold text-base" data-v-5bf52c48>No signature on file</span></div><p class="text-red-300/80 text-base" data-v-5bf52c48>Head IT approval pending</p></div>',1)])])):ui.headITSignaturePreview?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",$a,[(0,a.Lk)("div",Xa,[t[173]||(t[173]=(0,a.Lk)("div",{class:"mb-1"},[(0,a.Lk)("i",{class:"fas fa-signature text-blue-300 text-sm mb-1"}),(0,a.Lk)("p",{class:"text-blue-100 text-xs"},"No signature")],-1)),pi.isHeadItApprovalEditable&&!(ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name))?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:t[34]||(t[34]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning||!pi.isReviewMode,class:"px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors duration-200 flex items-center gap-1 mx-auto"},[...t[172]||(t[172]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,Ja)):(0,a.Q3)("",!0),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",Ba,"Available after submitting the request"))])]))])]),(0,a.Lk)("div",null,[t[175]||(t[175]=(0,a.Lk)("label",{class:"block text-base font-medium text-blue-100 mb-0.5"},[(0,a.eW)("Date (mm/dd/yyyy)"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",Qa,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>ui.form.implementation.headIT.date=e),type:"date",readonly:!pi.isHeadItApprovalEditable,class:(0,a.C4)(["medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm text-xs",{"cursor-not-allowed":!pi.isHeadItApprovalEditable,"font-bold text-yellow-300":pi.isHeadItApprovalEditable&&ui.form.implementation.headIT.date,"bg-green-100/20 border-green-400/40":pi.shouldShowHeadITSignedIndicator,"bg-red-100/20 border-red-400/40":pi.shouldShowHeadITNoSignatureIndicator}])},null,10,Va),[[a.Jo,ui.form.implementation.headIT.date]]),(0,a.Lk)("div",za,[pi.shouldShowHeadITSignedIndicator?((0,a.uX)(),(0,a.CE)("i",Ga)):pi.shouldShowHeadITNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("i",Ya)):((0,a.uX)(),(0,a.CE)("i",Ka))])])])])],2),(0,a.Lk)("div",{class:(0,a.C4)(pi.ictOfficerSectionClass)},[(0,a.Lk)("h5",Za,[t[180]||(t[180]=(0,a.Lk)("i",{class:"fas fa-user-shield mr-2"},null,-1)),t[181]||(t[181]=(0,a.eW)(" ICT Officer granting access ",-1)),pi.isHodApprovalEditable&&pi.isReviewMode&&ui.requestData?.ict_officer_signature_path?((0,a.uX)(),(0,a.CE)("span",er,[...t[176]||(t[176]=[(0,a.Lk)("i",{class:"fas fa-signature text-base mr-1"},null,-1),(0,a.eW)(" Signed ",-1)])])):pi.isHodApprovalEditable&&pi.isReviewMode&&!ui.requestData?.ict_officer_signature_path?((0,a.uX)(),(0,a.CE)("span",tr,[...t[177]||(t[177]=[(0,a.Lk)("i",{class:"fas fa-times text-base mr-1"},null,-1),(0,a.eW)(" No Signature ",-1)])])):pi.isStageCompleted("ict_officer")?((0,a.uX)(),(0,a.CE)("span",sr,[...t[178]||(t[178]=[(0,a.Lk)("i",{class:"fas fa-check text-base mr-1"},null,-1),(0,a.eW)(" Completed ",-1)])])):!pi.isIctOfficerApprovalEditable&&pi.isReviewMode?((0,a.uX)(),(0,a.CE)("span",ar,[...t[179]||(t[179]=[(0,a.Lk)("i",{class:"fas fa-clock text-xs mr-1"},null,-1),(0,a.eW)(" Pending ",-1)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rr,[(0,a.Lk)("div",null,[t[183]||(t[183]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-0"},[(0,a.eW)("Name"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",ir,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[36]||(t[36]=e=>ui.form.implementation.ictOfficer.name=e),type:"text",readonly:"",placeholder:pi.getApprovalNamePlaceholder("ict_officer"),class:"medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm cursor-not-allowed text-xs",title:pi.getApprovalNameTitle("ict_officer")},null,8,or),[[a.Jo,ui.form.implementation.ictOfficer.name]]),t[182]||(t[182]=(0,a.Lk)("div",{class:"absolute right-3 top-1/2 transform -translate-y-1/2"},[(0,a.Lk)("i",{class:"fas fa-lock text-blue-300 text-xs",title:"This field is auto-populated from your account"})],-1))])]),(0,a.Lk)("div",null,[t[189]||(t[189]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-0"},[(0,a.eW)("Signature"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",nr,[ui.ictOfficerSignaturePreview||pi.isImplementationAlreadyCompleted||pi.shouldShowIctOfficerSignedIndicator||"ict_officer"===pi.viewerStage()&&(ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name))?pi.shouldShowIctOfficerSignedIndicator||"ict_officer"===pi.viewerStage()&&(ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name))?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"w-full px-3 py-2 border-2 border-green-300/40 rounded-xl bg-white/15 backdrop-blur-sm transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-green-500/20 min-h-[35px] flex items-center justify-center relative",title:pi.getSignedByYouTooltip("ict_officer")},[(0,a.Lk)("div",hr,[t[186]||(t[186]=(0,a.Lk)("div",{class:"flex items-center justify-center space-x-2 mb-1"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-check text-green-400 text-sm"})]),(0,a.Lk)("span",{class:"text-green-300 font-extrabold text-base uppercase tracking-wide"},"Signed")],-1)),(0,a.Lk)("p",mr," Approved at: "+(0,a.v_)(pi.getApprovalDateFormatted("ict_officer")),1)]),t[187]||(t[187]=(0,a.Lk)("div",{class:"absolute top-2 right-2"},[(0,a.Lk)("div",{class:"w-6 h-6 bg-green-500/30 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-signature text-green-400 text-xs",title:"Signature on file"})])],-1))],8,pr)):pi.shouldShowIctOfficerNoSignatureIndicator?((0,a.uX)(),(0,a.CE)("div",fr,[...t[188]||(t[188]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("i",{class:"fas fa-times text-red-400 text-sm mb-0.5"}),(0,a.Lk)("p",{class:"text-red-300 text-xs"},"No signature")],-1)])])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",lr,[(0,a.Lk)("div",dr,[t[185]||(t[185]=(0,a.Lk)("div",{class:"mb-0.5"},[(0,a.Lk)("i",{class:"fas fa-signature text-blue-300 text-sm mb-0.5"}),(0,a.Lk)("p",{class:"text-blue-100 text-xs"},"No signature yet")],-1)),!pi.isIctOfficerApprovalEditable&&"ict_officer"!==ui.currentUser?.role||pi.isImplementationAlreadyCompleted||ui.hasUserSigned||ui.currentUser?.name&&pi.historyHasSigner(ui.currentUser.name)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",onClick:t[37]||(t[37]=(...e)=>pi.signCurrentDocument&&pi.signCurrentDocument(...e)),disabled:ui.isSigning||!pi.isReviewMode,class:"px-2 py-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs font-semibold rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-1 mx-auto shadow-lg hover:shadow-xl transform hover:scale-105 border border-blue-400/50"},[...t[184]||(t[184]=[(0,a.Lk)("i",{class:"fas fa-pen-alt"},null,-1),(0,a.eW)(" Sign Document ",-1)])],8,cr)),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",ur,"Available after submitting the request"))])]))])]),(0,a.Lk)("div",null,[t[190]||(t[190]=(0,a.Lk)("label",{class:"block text-xs font-medium text-blue-100 mb-0"},[(0,a.eW)("Date"),(0,a.Lk)("span",{class:"text-red-400"},"*")],-1)),(0,a.Lk)("div",gr,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[38]||(t[38]=e=>ui.form.approvals.hod.date=e),type:"date",class:"medical-input w-full px-2 py-1 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm hod-approval-editable text-xs"},null,512),[[a.Jo,ui.form.approvals.hod.date]])])]),pi.isStrictViewMode||!pi.isIctOfficerApprovalEditable&&"ict_officer"!==ui.currentUser?.role||!pi.shouldShowIctOfficerSignedIndicator&&!ui.hasUserSigned||pi.isImplementationAlreadyCompleted?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",vr,[(0,a.Lk)("button",{type:"button",onClick:t[39]||(t[39]=(...e)=>pi.onIctOfficerApproveClick&&pi.onIctOfficerApproveClick(...e)),disabled:pi.isImplementationApprovalDisabled,class:(0,a.C4)(["w-full px-4 py-2 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-xs",pi.isImplementationApprovalDisabled?"bg-gray-500 text-gray-300 cursor-not-allowed opacity-50":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700"])},[ui.processing?((0,a.uX)(),(0,a.CE)("i",wr)):((0,a.uX)(),(0,a.CE)("i",xr)),(0,a.eW)(" "+(0,a.v_)(ui.processing?"Approving...":"Approve Request"),1)],10,br)])),!pi.isStrictViewMode&&pi.shouldShowSelectIctOfficerButton?((0,a.uX)(),(0,a.CE)("div",yr,[(0,a.Lk)("div",_r,[(0,a.Lk)("div",Dr,[t[192]||(t[192]=(0,a.Fv)('<div class="flex items-center space-x-2" data-v-5bf52c48><div class="w-6 h-6 bg-yellow-500/20 rounded-full flex items-center justify-center" data-v-5bf52c48><i class="fas fa-user-shield text-yellow-400 text-sm" data-v-5bf52c48></i></div><div data-v-5bf52c48><h6 class="text-xs font-semibold text-yellow-200 mb-0.5" data-v-5bf52c48> ICT Officer Assignment Required </h6><p class="text-xs text-yellow-300/80" data-v-5bf52c48> Request approved. Please assign an ICT Officer. </p></div></div>',1)),(0,a.Lk)("button",{onClick:t[40]||(t[40]=(...e)=>pi.navigateToSelectIctOfficer&&pi.navigateToSelectIctOfficer(...e)),class:"px-3 py-1.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-xs"},[...t[191]||(t[191]=[(0,a.Lk)("i",{class:"fas fa-user-plus mr-1"},null,-1),(0,a.eW)(" Select ICT Officer ",-1)])])])])])):(0,a.Q3)("",!0)])],2)],2),[[a.aG,pi.isStrictViewMode||ui.showImplementationSections]])],2),pi.isReviewMode&&pi.canApproveAtStage()&&!ui.showApprovalSuccessCard&&!pi.isStrictViewMode?((0,a.uX)(),(0,a.CE)("div",{key:5,class:(0,a.C4)(pi.actionButtonsClass)},[(0,a.Lk)("div",kr,[(0,a.Lk)("button",{type:"button",onClick:t[41]||(t[41]=(...e)=>pi.approveRequest&&pi.approveRequest(...e)),disabled:pi.areApprovalButtonsDisabled,class:(0,a.C4)(["flex-1 px-6 py-3 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg transform",pi.areApprovalButtonsDisabled?"bg-gray-500 text-gray-300 cursor-not-allowed opacity-50":"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 hover:shadow-xl hover:scale-105"]),title:pi.approvalButtonTooltip},[ui.loading||ui.processing?((0,a.uX)(),(0,a.CE)("i",Sr)):((0,a.uX)(),(0,a.CE)("i",Ir)),(0,a.eW)(" "+(0,a.v_)(ui.loading||ui.processing?"Processing...":"Approve Request"),1)],10,qr),(0,a.Lk)("button",{type:"button",onClick:t[42]||(t[42]=(...e)=>pi.rejectRequest&&pi.rejectRequest(...e)),disabled:pi.areApprovalButtonsDisabled,class:(0,a.C4)(["flex-1 px-6 py-3 rounded-lg transition-all duration-300 font-semibold flex items-center justify-center shadow-lg transform",pi.areApprovalButtonsDisabled?"bg-gray-500 text-gray-300 cursor-not-allowed opacity-50":"bg-gradient-to-r from-red-600 to-pink-600 text-white hover:from-red-700 hover:to-pink-700 hover:shadow-xl hover:scale-105"]),title:pi.isSignatureRequiredForApproval?"Please upload your signature first":"Reject this request"},[...t[193]||(t[193]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" Reject Request ",-1)])],10,Cr)])],2)):(0,a.Q3)("",!0),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Lr,[(0,a.Lk)("div",Rr,[(0,a.Lk)("button",{type:"button",onClick:t[43]||(t[43]=(...e)=>pi.onReset&&pi.onReset(...e)),class:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl"},[...t[194]||(t[194]=[(0,a.Lk)("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),(0,a.eW)(" Reset Form ",-1)])]),t[195]||(t[195]=(0,a.Lk)("button",{type:"submit",class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl"},[(0,a.Lk)("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),(0,a.eW)(" Submit Request ")],-1))])]))],2),pi.isReviewMode?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Tr,[pi.isDevelopment&&(pi.getUserRole()||"").toLowerCase().includes("hod")?((0,a.uX)(),(0,a.CE)("div",Ar,[t[196]||(t[196]=(0,a.Lk)("h4",{class:"text-yellow-200 font-bold text-sm mb-2"},"ðŸ”§ HOD Module Debug Info",-1)),(0,a.Lk)("div",Er,[(0,a.Lk)("div",null,"isReviewMode: "+(0,a.v_)(pi.isReviewMode),1),(0,a.Lk)("div",null,"isHodApprovalEditable: "+(0,a.v_)(pi.isHodApprovalEditable),1),(0,a.Lk)("div",null,"User Role: "+(0,a.v_)(pi.getUserRole()),1),(0,a.Lk)("div",null,"Request Status: "+(0,a.v_)(ui.requestData?.status||"none"),1),(0,a.Lk)("div",null,"Show Tabs: "+(0,a.v_)(!pi.isReviewMode||pi.isHodApprovalEditable),1),(0,a.Lk)("div",null,"Module reviewMode: "+(0,a.v_)(pi.isReviewMode&&!pi.isHodApprovalEditable),1),(0,a.Lk)("div",null,"Available Tabs: "+(0,a.v_)(ui.tabs.map(e=>e.label).join(", ")),1)])])):(0,a.Q3)("",!0),t[197]||(t[197]=(0,a.Lk)("h2",{id:"module-tabs",class:"sr-only"},"Module Details",-1)),(0,a.Lk)("div",Ur,[(0,a.Lk)("div",jr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.tabs,e=>((0,a.uX)(),(0,a.CE)("button",{key:e.key,class:(0,a.C4)(["tab",e.key===ui.activeTab?"tab-active":""]),onClick:t=>ui.activeTab=e.key,"aria-selected":e.key===ui.activeTab,role:"tab"},[(0,a.eW)((0,a.v_)(e.label)+" ",1),(0,a.Lk)("i",{class:"fas fa-times ml-2 text-xs opacity-70 hover:opacity-100",onClick:(0,a.D$)(t=>pi.tryCloseTab(e.key),["stop"])},null,8,Nr)],10,Or))),128))]),(0,a.Q3)("",!0)]),(0,a.Lk)("div",Fr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ui.tabs,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.key,class:"card"},[(0,a.Lk)("button",{class:"w-full flex items-center justify-between text-left",onClick:t=>pi.toggleAccordion(e.key)},[(0,a.Lk)("span",Mr,(0,a.v_)(e.label),1),(0,a.Lk)("i",{class:(0,a.C4)(["fas",ui.openAccordions.has(e.key)?"fa-chevron-up":"fa-chevron-down"])},null,2)],8,Hr),(0,a.bF)(a.eB,{name:"fade"},{default:(0,a.k6)(()=>[(0,a.Q3)("",!0)]),_:1})]))),128))])]))],2)],2)],34)]),(0,a.Lk)("div",Pr,[(0,a.bF)(vi)])],2)],2)]),(0,a.bF)(a.eB,{name:"fade"},{default:(0,a.k6)(()=>[ui.confirm.key?((0,a.uX)(),(0,a.CE)("div",Wr,[(0,a.Lk)("div",$r,[(0,a.Lk)("h3",Xr,"Remove "+(0,a.v_)(ui.confirm.label)+"?",1),t[198]||(t[198]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-1"}," You have unsaved data in this module. Are you sure you want to close it? ",-1)),(0,a.Lk)("div",Jr,[(0,a.Lk)("button",{class:"btn-secondary",onClick:t[45]||(t[45]=e=>ui.confirm={key:"",label:""})},"Cancel"),(0,a.Lk)("button",{class:"btn-danger",onClick:t[46]||(t[46]=e=>pi.closeTab(ui.confirm.key))},"Remove")])])])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(a.eB,{name:"fade"},{default:(0,a.k6)(()=>[ui.showRejectionModal?((0,a.uX)(),(0,a.CE)("div",Br,[(0,a.Lk)("div",Qr,[t[201]||(t[201]=(0,a.Lk)("div",{class:"flex items-center space-x-3 mb-4"},[(0,a.Lk)("div",{class:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-times text-red-600"})]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",{class:"text-lg font-semibold text-gray-800"},"Reject Request"),(0,a.Lk)("p",{class:"text-sm text-gray-600"}," Please provide a reason for rejecting this request ")])],-1)),(0,a.Lk)("div",Vr,[t[199]||(t[199]=(0,a.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-1"},"Rejection Reason *",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[47]||(t[47]=e=>ui.rejectionReason=e),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-sm",rows:"4",placeholder:"Enter the reason for rejecting this request...",required:""},null,512),[[a.Jo,ui.rejectionReason]])]),(0,a.Lk)("div",zr,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>pi.cancelRejectRequest&&pi.cancelRejectRequest(...e)),class:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors"}," Cancel "),(0,a.Lk)("button",{onClick:t[49]||(t[49]=(...e)=>pi.confirmRejectRequest&&pi.confirmRejectRequest(...e)),disabled:!ui.rejectionReason?.trim(),class:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-300 text-white rounded-lg font-medium transition-colors flex items-center"},[...t[200]||(t[200]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" Reject Request ",-1)])],8,Gr)])])])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(a.eB,{name:"fade"},{default:(0,a.k6)(()=>[ui.showApprovalSuccessCard&&pi.isHeadItUser?((0,a.uX)(),(0,a.CE)("div",Yr,[(0,a.Lk)("div",Kr,[t[206]||(t[206]=(0,a.Lk)("div",{class:"bg-gradient-to-r from-green-600 to-emerald-700 px-6 py-6 text-center rounded-t-2xl"},[(0,a.Lk)("div",{class:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-check text-green-600 text-3xl"})]),(0,a.Lk)("h3",{class:"text-2xl font-bold text-white mb-2"},"Request Approved Successfully!")],-1)),(0,a.Lk)("div",Zr,[(0,a.Lk)("div",ei,[t[204]||(t[204]=(0,a.Lk)("div",{class:"flex items-center justify-center mb-4"},[(0,a.Lk)("div",{class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-user-shield text-blue-600 text-xl"})])],-1)),(0,a.Lk)("p",ti,[t[202]||(t[202]=(0,a.eW)(" Now you can select the ICT Officer who will be assigned this task of releasing access to ",-1)),(0,a.Lk)("span",si,(0,a.v_)(pi.getRequesterName()),1),t[203]||(t[203]=(0,a.eW)(". ",-1))])]),(0,a.Lk)("div",ai,[(0,a.Lk)("button",{onClick:t[50]||(t[50]=(...e)=>pi.closeSuccessModal&&pi.closeSuccessModal(...e)),class:"flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600 transition duration-200 text-base font-medium"}," Later "),(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>pi.navigateToSelectIctOfficer&&pi.navigateToSelectIctOfficer(...e)),class:"flex-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 font-semibold flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-105 text-base"},[...t[205]||(t[205]=[(0,a.Lk)("i",{class:"fas fa-user-plus mr-2"},null,-1),(0,a.eW)(" Select ICT Officer ",-1)])])])])])])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(a.eB,{name:"fade"},{default:(0,a.k6)(()=>[ui.showIctOfficerConfirmation?((0,a.uX)(),(0,a.CE)("div",ri,[(0,a.Lk)("div",ii,[t[211]||(t[211]=(0,a.Lk)("div",{class:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-6 text-center rounded-t-2xl"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-user-shield text-blue-600 text-2xl"})]),(0,a.Lk)("h3",{class:"text-xl font-bold text-white mb-2"},"Grant Access Confirmation")],-1)),(0,a.Lk)("div",oi,[(0,a.Lk)("p",ni,[t[207]||(t[207]=(0,a.eW)(" You are approaching to grant access to ",-1)),(0,a.Lk)("span",li,(0,a.v_)(pi.getRequesterName()),1),t[208]||(t[208]=(0,a.eW)(". Do you want to continue? ",-1))]),(0,a.Lk)("div",di,[(0,a.Lk)("button",{onClick:t[52]||(t[52]=e=>ui.showIctOfficerConfirmation=!1),class:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 px-6 rounded-lg transition duration-200 text-base font-medium flex items-center justify-center"},[...t[209]||(t[209]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" No ",-1)])]),(0,a.Lk)("button",{onClick:t[53]||(t[53]=(...e)=>pi.proceedToUserSecurityAccess&&pi.proceedToUserSecurityAccess(...e)),class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg transition duration-200 text-base font-medium flex items-center justify-center"},[...t[210]||(t[210]=[(0,a.Lk)("i",{class:"fas fa-check mr-2"},null,-1),(0,a.eW)(" Yes ",-1)])])])])])])):(0,a.Q3)("",!0)]),_:1})])}s(4114),s(2489),s(116),s(7588),s(3579),s(3110),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(8335);var ui=s(5498),pi=s(8966);const hi={class:"orbiting-dots"};function mi(e,t,s,r,i,o){return(0,a.uX)(),(0,a.CE)("div",hi,[...t[0]||(t[0]=[(0,a.Lk)("div",{class:"dot dot-1"},null,-1),(0,a.Lk)("div",{class:"dot dot-2"},null,-1),(0,a.Lk)("div",{class:"dot dot-3"},null,-1)])])}var fi={name:"OrbitingDots"},gi=s(1241);const vi=(0,gi.A)(fi,[["render",mi],["__scopeId","data-v-58ff81c4"]]);var bi=vi,wi=s(9101),xi=s(1445),yi=s(981),_i=s(460),Di=s(5389),ki=s(274),qi=s(8998);class Si{async submitCombinedRequest(e){try{qi.gg.debug("ðŸ”„ Submitting combined access request...",e);const t=new FormData;e.shared&&(t.append("pf_number",e.shared.pfNumber||""),t.append("staff_name",e.shared.staffName||""),t.append("department",e.shared.department||""),t.append("phone_number",e.shared.phone||"")),e.signature&&t.append("signature",e.signature),qi.gg.debug("ðŸ” MODULE SELECTION DEBUG:"),qi.gg.debug("selectedWellsoft:",e.selectedWellsoft,"length:",e.selectedWellsoft?.length),qi.gg.debug("selectedJeeva:",e.selectedJeeva,"length:",e.selectedJeeva?.length),qi.gg.debug("selectedWellsoft type:",typeof e.selectedWellsoft),qi.gg.debug("selectedJeeva type:",typeof e.selectedJeeva),qi.gg.debug("selectedWellsoft isArray:",Array.isArray(e.selectedWellsoft)),qi.gg.debug("selectedJeeva isArray:",Array.isArray(e.selectedJeeva)),e.selectedWellsoft&&e.selectedWellsoft.length>0?(qi.gg.debug("âœ… Adding Wellsoft modules to FormData:",e.selectedWellsoft),e.selectedWellsoft.forEach((e,s)=>{t.append(`selectedWellsoft[${s}]`,e),qi.gg.debug(`  Added selectedWellsoft[${s}]:`,e)})):qi.gg.debug("âš ï¸ No Wellsoft modules to add - array is empty or undefined"),e.selectedJeeva&&e.selectedJeeva.length>0?(qi.gg.debug("âœ… Adding Jeeva modules to FormData:",e.selectedJeeva),e.selectedJeeva.forEach((e,s)=>{t.append(`selectedJeeva[${s}]`,e),qi.gg.debug(`  Added selectedJeeva[${s}]:`,e)})):qi.gg.debug("âš ï¸ No Jeeva modules to add - array is empty or undefined"),e.wellsoftRequestType&&t.append("wellsoftRequestType",e.wellsoftRequestType),e.internetPurposes&&e.internetPurposes.length>0&&e.internetPurposes.forEach((e,s)=>{e&&e.trim()&&t.append(`internetPurposes[${s}]`,e.trim())});const s=[];e.selectedWellsoft&&e.selectedWellsoft.length>0?s.push("wellsoft"):void 0!==e.selectedWellsoft&&console.warn("âš ï¸ Wellsoft array exists but is empty - user may not have selected modules"),e.selectedJeeva&&e.selectedJeeva.length>0?s.push("jeeva_access"):void 0!==e.selectedJeeva&&console.warn("âš ï¸ Jeeva array exists but is empty - user may not have selected modules"),e.internetPurposes&&e.internetPurposes.some(e=>e&&e.trim())&&s.push("internet_access_request"),s.length>0?s.forEach((e,s)=>{t.append(`request_types[${s}]`,e)}):console.warn("No request types determined from form data"),e.approvals&&(e.approvals.hod&&(e.approvals.hod.name&&t.append("hodName",e.approvals.hod.name),e.approvals.hod.signature&&t.append("hodSignature",e.approvals.hod.signature),e.approvals.hod.date&&t.append("hodDate",e.approvals.hod.date)),e.approvals.divisionalDirector&&(e.approvals.divisionalDirector.name&&t.append("divisionalDirectorName",e.approvals.divisionalDirector.name),e.approvals.divisionalDirector.signature&&t.append("divisionalDirectorSignature",e.approvals.divisionalDirector.signature),e.approvals.divisionalDirector.date&&t.append("divisionalDirectorDate",e.approvals.divisionalDirector.date)),e.approvals.directorICT&&(e.approvals.directorICT.name&&t.append("ictDirectorName",e.approvals.directorICT.name),e.approvals.directorICT.signature&&t.append("ictDirectorSignature",e.approvals.directorICT.signature),e.approvals.directorICT.date&&t.append("ictDirectorDate",e.approvals.directorICT.date))),e.implementation&&(e.implementation.headIT&&(e.implementation.headIT.name&&t.append("headITName",e.implementation.headIT.name),e.implementation.headIT.signature&&t.append("headITSignature",e.implementation.headIT.signature),e.implementation.headIT.date&&t.append("headITDate",e.implementation.headIT.date)),e.implementation.ictOfficer&&(e.implementation.ictOfficer.name&&t.append("ictOfficerName",e.implementation.ictOfficer.name),e.implementation.ictOfficer.signature&&t.append("ictOfficerSignature",e.implementation.ictOfficer.signature),e.implementation.ictOfficer.date&&t.append("ictOfficerDate",e.implementation.ictOfficer.date))),e.comments&&t.append("implementationComments",e.comments),qi.gg.debug("FormData contents:");for(let[e,r]of t.entries())qi.gg.debug(`${e}:`,r);const a=await ki.A.post("/both-service-form",t,{headers:{"Content-Type":"multipart/form-data"}});if(a.data&&a.data.success)return qi.gg.debug("âœ… Combined access request submitted successfully:",a.data.data?.id),{success:!0,data:a.data.data,message:a.data.message,details:a.data.details};throw new Error(a.data?.message||"Failed to submit combined access request")}catch(t){return qi.gg.error("âŒ Error submitting combined access request:",t),422===t.response?.status?{success:!1,error:"Validation failed",errors:t.response.data.errors||{},message:t.response.data.message||"Please check the form and try again"}:{success:!1,error:t.response?.data?.message||t.message||"Failed to submit combined access request",message:t.response?.data?.message||"An error occurred while submitting your request"}}}async getUserInfo(){try{qi.gg.debug("ðŸ”„ Fetching user info for form pre-population...");const e=await ki.A.get("/both-service-form/user/info");if(e.data&&e.data.success)return qi.gg.debug("âœ… User info retrieved successfully"),{success:!0,data:e.data.data};throw new Error(e.data?.message||"Failed to retrieve user information")}catch(e){return qi.gg.error("âŒ Error fetching user info:",e),{success:!1,error:e.response?.data?.message||e.message||"Failed to retrieve user information",data:null}}}async getDepartments(){try{qi.gg.debug("ðŸ”„ Fetching departments...");const e=await ki.A.get("/both-service-form/departments/list");if(e.data&&e.data.success)return qi.gg.debug("âœ… Departments retrieved successfully:",e.data.data?.length||0),{success:!0,data:e.data.data};throw new Error(e.data?.message||"Failed to retrieve departments")}catch(e){return qi.gg.error("âŒ Error fetching departments:",e),{success:!1,error:e.response?.data?.message||e.message||"Failed to retrieve departments",data:[]}}}async getRequest(e){try{qi.gg.debug("ðŸ”„ Fetching combined access request:",e);const t=await ki.A.get(`/both-service-form/${e}`);if(t.data&&t.data.success)return qi.gg.debug("âœ… Combined access request retrieved successfully"),{success:!0,data:t.data.data,meta:t.data.meta};throw new Error(t.data?.message||"Failed to retrieve request")}catch(t){return qi.gg.error("âŒ Error fetching combined access request:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to retrieve request",message:t.response?.data?.message||"Could not load request details"}}}async updateComments(e,t){try{const s=await ki.A.post(`/both-service-form/${e}/update`,t,{headers:{"Content-Type":"application/json"}});if(s.data?.success)return{success:!0,data:s.data.data,message:s.data.message};throw new Error(s.data?.message||"Failed to update request comments")}catch(s){return{success:!1,error:s.response?.data?.message||s.message||"Failed to update request comments",errors:s.response?.data?.errors||null}}}async saveRoleCommentSmart(e,{role:t,comment:s,name:a}){const r=(t||"").toLowerCase().replace(/[\s-]+/g,"_"),i=[];"divisional_director"===r?i.push({url:`/divisional/ict-director-recommendations/${e}/respond`,data:{divisional_comments:s,comments:s,divisional_name:a}},{url:`/divisional/combined-access-requests/${e}/approve`,data:{divisional_comments:s,comments:s,divisional_name:a}}):"ict_director"===r||"dict"===r?i.push({url:`/ict-director/combined-access-requests/${e}/approve`,data:{dict_comments:s,ict_director_comments:s,comments:s,dict_name:a}}):"head_of_department"===r||"hod"===r||"head_department"===r?i.push({url:`/hod/combined-access-requests/${e}/approve`,data:{hod_comments:s,comments:s,hod_name:a}}):"head_it"!==r&&"head_of_it"!==r&&"it_head"!==r&&"ict_head"!==r||i.push({url:`/head-of-it/requests/${e}/approve`,data:{head_it_comments:s,comments:s,head_it_name:a}});for(const n of i)try{const e=await ki.A.post(n.url,n.data,{headers:{"Content-Type":"application/json"}}),t=!1!==e?.data?.success;if(t)return{success:!0,data:e.data?.data,message:e.data?.message}}catch(o){}return{success:!1,error:"No available endpoint accepted the comment payload for this role"}}async updateRequest(e,t){try{qi.gg.debug("ðŸ”„ Updating combined access request:",e,t);const s=new FormData;t.shared&&(s.append("pf_number",t.shared.pfNumber||""),s.append("staff_name",t.shared.staffName||""),s.append("department",t.shared.department||""),s.append("phone_number",t.shared.phone||"")),t.signature&&s.append("signature",t.signature),t.selectedWellsoft&&t.selectedWellsoft.length>0&&t.selectedWellsoft.forEach((e,t)=>{s.append(`selectedWellsoft[${t}]`,e)}),t.selectedJeeva&&t.selectedJeeva.length>0&&t.selectedJeeva.forEach((e,t)=>{s.append(`selectedJeeva[${t}]`,e)}),t.wellsoftRequestType&&s.append("wellsoftRequestType",t.wellsoftRequestType),t.internetPurposes&&t.internetPurposes.length>0&&t.internetPurposes.forEach((e,t)=>{e&&e.trim()&&s.append(`internetPurposes[${t}]`,e.trim())});const a=[];t.selectedWellsoft&&t.selectedWellsoft.length>0&&a.push("wellsoft"),t.selectedJeeva&&t.selectedJeeva.length>0&&a.push("jeeva_access"),t.internetPurposes&&t.internetPurposes.some(e=>e&&e.trim())&&a.push("internet_access_request"),a.forEach((e,t)=>{s.append(`request_types[${t}]`,e)}),qi.gg.debug("Update FormData contents:");for(let[e,t]of s.entries())qi.gg.debug(`${e}:`,t);const r=await ki.A.post(`/both-service-form/${e}/update`,s,{headers:{"Content-Type":"multipart/form-data"}});if(r.data&&r.data.success)return qi.gg.debug("âœ… Combined access request updated successfully:",e),{success:!0,data:r.data.data,message:r.data.message,details:r.data.details};throw new Error(r.data?.message||"Failed to update combined access request")}catch(s){return qi.gg.error("âŒ Error updating combined access request:",s),422===s.response?.status?{success:!1,error:"Validation failed",errors:s.response.data.errors||{},message:s.response.data.message||"Please check the form and try again"}:{success:!1,error:s.response?.data?.message||s.message||"Failed to update combined access request",message:s.response?.data?.message||"An error occurred while updating your request"}}}async hodApproveModuleRequest(e,t){try{qi.gg.debug("ðŸ”„ HOD approving module request via BothServiceFormController:",e,t);const s=t.hodComments||t.comments||"",a=Array.isArray(t.selectedWellsoft)?t.selectedWellsoft:[],r=Array.isArray(t.selectedJeeva)?t.selectedJeeva:[],i={hod_name:t.hodName||"",approved_date:t.approvedDate||(new Date).toISOString().slice(0,10),comments:s,access_type:t.accessType||"permanent",temporary_until:"temporary"===t.accessType&&t.temporaryUntil?t.temporaryUntil:null,wellsoft_modules_selected:a,jeeva_modules_selected:r,module_requested_for:t.moduleRequestedFor||void 0},o=await ki.A.post(`/both-service-form/module-requests/${e}/hod-approve`,i);if(o.data?.success)return qi.gg.debug("âœ… HOD approval saved successfully:",o.data),{success:!0,data:o.data.data,message:o.data.message};throw new Error(o.data?.message||"Failed to save HOD approval")}catch(s){return qi.gg.error("âŒ Error in hodApproveModuleRequest:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save HOD approval",errors:s.response?.data?.errors||null}}}async divisionalDirectorApprove(e,t){try{qi.gg.debug("ðŸ”„ Divisional Director approving request:",e,t);const s={divisional_director_name:t.divisionalDirectorName||"",approved_date:t.approvedDate||(new Date).toISOString().slice(0,10),comments:t.comments||""},a=await ki.A.post(`/both-service-form/module-requests/${e}/divisional-approve`,s);if(a.data?.success)return qi.gg.debug("âœ… Divisional Director approval saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save Divisional Director approval")}catch(s){return qi.gg.error("âŒ Error in divisionalDirectorApprove:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save Divisional Director approval",errors:s.response?.data?.errors||null}}}async divisionalDirectorReject(e,t){try{qi.gg.debug("ðŸ”„ Divisional Director rejecting request:",e,t);const s={divisional_director_name:t.divisionalDirectorName||"",rejection_reason:t.rejectionReason||"",rejection_date:t.rejectionDate||(new Date).toISOString().slice(0,10)},a=await ki.A.post(`/both-service-form/module-requests/${e}/divisional-reject`,s);if(a.data?.success)return qi.gg.debug("âœ… Divisional Director rejection saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save Divisional Director rejection")}catch(s){return qi.gg.error("âŒ Error in divisionalDirectorReject:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save Divisional Director rejection",errors:s.response?.data?.errors||null}}}async ictDirectorApprove(e,t){try{qi.gg.debug("ðŸ”„ ICT Director approving request:",e,t);const s={ict_director_name:t.ictDirectorName||"",approved_date:t.approvedDate||(new Date).toISOString().slice(0,10),comments:t.comments||""},a=await ki.A.post(`/both-service-form/module-requests/${e}/ict-director-approve`,s);if(a.data?.success)return qi.gg.debug("âœ… ICT Director approval saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save ICT Director approval")}catch(s){return qi.gg.error("âŒ Error in ictDirectorApprove:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save ICT Director approval",errors:s.response?.data?.errors||null}}}async ictDirectorReject(e,t){try{qi.gg.debug("ðŸ”„ ICT Director rejecting request:",e,t);const s={ict_director_name:t.ictDirectorName||"",rejection_reason:t.rejectionReason||"",rejection_date:t.rejectionDate||(new Date).toISOString().slice(0,10)},a=await ki.A.post(`/both-service-form/module-requests/${e}/ict-director-reject`,s);if(a.data?.success)return qi.gg.debug("âœ… ICT Director rejection saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save ICT Director rejection")}catch(s){return qi.gg.error("âŒ Error in ictDirectorReject:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save ICT Director rejection",errors:s.response?.data?.errors||null}}}async headItApprove(e,t){try{qi.gg.debug("ðŸ”„ Head IT approving request:",e,t);const s={head_it_name:t.headItName||"",approved_date:t.approvedDate||(new Date).toISOString().slice(0,10),comments:t.comments||""},a=await ki.A.post(`/both-service-form/module-requests/${e}/head-of-it-approve`,s);if(a.data?.success)return qi.gg.debug("âœ… Head IT approval saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save Head IT approval")}catch(s){return qi.gg.error("âŒ Error in headItApprove:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save Head IT approval",errors:s.response?.data?.errors||null}}}async headItReject(e,t){try{qi.gg.debug("ðŸ”„ Head IT rejecting request:",e,t);const s={head_it_name:t.headItName||"",rejection_reason:t.rejectionReason||"",rejection_date:t.rejectionDate||(new Date).toISOString().slice(0,10)},a=await ki.A.post(`/both-service-form/module-requests/${e}/head-it-reject`,s);if(a.data?.success)return qi.gg.debug("âœ… Head IT rejection saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save Head IT rejection")}catch(s){return qi.gg.error("âŒ Error in headItReject:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save Head IT rejection",errors:s.response?.data?.errors||null}}}async ictOfficerApprove(e,t){try{qi.gg.debug("ðŸ”„ ICT Officer implementing request:",e,t);const s={ict_officer_name:t.ict_officer_name||"",approved_date:t.approved_date||t.ict_officer_date||(new Date).toISOString().slice(0,10),comments:t.comments||t.ict_officer_comments||"",status:t.status||t.ict_officer_status||"implemented"},a=await ki.A.post(`/both-service-form/module-requests/${e}/ict-officer-approve`,s);if(a.data?.success)return qi.gg.debug("âœ… ICT Officer implementation saved successfully:",a.data),{success:!0,data:a.data.data,message:a.data.message};throw new Error(a.data?.message||"Failed to save ICT Officer implementation")}catch(s){return qi.gg.error("âŒ Error in ictOfficerApprove:",s),{success:!1,error:s.response?.data?.message||s.message||"Failed to save ICT Officer implementation",errors:s.response?.data?.errors||null}}}validateFormData(e){const t=[];e.shared?.pfNumber&&""!==e.shared.pfNumber.trim()||t.push("PF Number is required"),e.shared?.staffName&&""!==e.shared.staffName.trim()||t.push("Staff Name is required"),e.shared?.department&&""!==e.shared.department.trim()||t.push("Department is required"),e.shared?.phone&&""!==e.shared.phone.trim()||t.push("Phone number is required"),e.signature||t.push("Digital signature is required");const s=e.selectedWellsoft&&e.selectedWellsoft.length>0,a=e.selectedJeeva&&e.selectedJeeva.length>0,r=e.internetPurposes&&e.internetPurposes.some(e=>e&&e.trim());return s||a||r||t.push("Please select at least one service (Wellsoft modules, Jeeva modules, or Internet access)"),s&&0===e.selectedWellsoft.length&&t.push("Please select at least 1 Wellsoft module"),a&&0===e.selectedJeeva.length&&t.push("Please select at least 1 Jeeva module"),!s&&!a||e.wellsoftRequestType||t.push("Please select whether you want to Use or Revoke access"),{isValid:0===t.length,errors:t}}}var Ii=new Si,Ci=s(1075),Li=s(14),Ri={name:"BothServiceForm",components:{Header:ui.A,ModernSidebar:pi.A,OrbitingDots:bi,AppFooter:wi.A,UnifiedLoadingBanner:xi.A},inject:{authStore:{from:"authStore",default:()=>(0,Li.useAuthStore)()}},props:{requestId:{type:[String,Number],default:null}},data(){return{showHeadItApproveSuccessModal:!1,showGrantAccessPopup:!1,grantAccessComment:"",grantAccessError:"",lastAddedCommentMeta:null,signaturePreview:"",signatureFileName:"",hodAccessType:"permanent",hodTemporaryUntil:"",hodTemporaryUntilError:"",hodComments:"",hodSignaturePreview:"",hodSignatureFileName:"",divDirectorSignaturePreview:"",divDirectorSignatureFileName:"",directorICTSignaturePreview:"",directorICTSignatureFileName:"",headITSignaturePreview:"",headITSignatureFileName:"",ictOfficerSignaturePreview:"",ictOfficerSignatureFileName:"",roleCommentsDraft:"",jeevaItemOpen:!1,jeevaItemFocusIndex:0,jeevaItemOptions:["Use","Revoke","Access Rights","Approval","Comments","For Implementation"],jeevaItemSelections:[],wellsoftModules:[],jeevaModules:[],form:{shared:{pfNumber:"",staffName:"",department:"",phone:""},approvals:{hod:{name:"",signature:"",date:""},divisionalDirector:{name:"",signature:"",date:""},directorICT:{name:"",signature:"",date:""}},comments:"",implementation:{headIT:{name:"",signature:"",date:""},ictOfficer:{name:"",signature:"",date:""}}},selectedWellsoft:[],selectedJeeva:[],wellsoftRequestType:"use",jeevaRequestType:"use",wellsoftQuery:"",jeevaQuery:"",internetPurposes:["","","",""],tabs:[],activeTab:"",openAccordions:new Set,moduleData:{},confirm:{key:"",label:""},toast:{show:!1,message:""},isSigning:!1,hasUserSigned:!1,lastSignedAt:null,errors:{pfNumber:"",staffName:""},requestData:null,loading:!1,error:null,signatureHistory:[],showRejectionModal:!1,rejectionReason:"",currentUser:null,loadingRequestData:!1,isLoading:!1,processing:!1,editableDivisionalDirectorComments:"",maxVisibleComments:50,maxVisibleModules:10,showApprovalSuccessCard:!1,showIctOfficerConfirmation:!1,showApprovalSections:!1,showImplementationSections:!1}},computed:{isDevelopment(){try{return!1}catch{return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname}},isReviewMode(){return null!=this.getRequestId},getRequestId(){const e=this.requestId,t=this.$route?.params?.id,s=this.$route?.query?.id,a=e=>null==e?null:String(e).trim();let r=a(e)||a(t)||null;const i=a(this.requestData?.id);return!r&&a(s)&&(r=a(s)),(i&&r&&i!==r||!r&&i)&&(r=i),r},displayRequestId(){const e=this.requestData?.request_id||this.requestData?.requestId;if(e)return String(e);const t=this.getRequestId;if(!t)return"";const s=String(t).replace(/\D+/g,"");return"REQ-"+(s?s.padStart(6,"0"):String(t))},currentTab(){return this.tabs.find(e=>e.key===this.activeTab)||null},filteredWellsoft(){const e=(this.wellsoftQuery||"").toLowerCase();return e?this.wellsoftModules.filter(t=>t.toLowerCase().includes(e)):this.wellsoftModules},filteredJeeva(){const e=(this.jeevaQuery||"").toLowerCase();return e?this.jeevaModules.filter(t=>t.toLowerCase().includes(e)):this.jeevaModules},filteredInternetPurposes(){return Array.isArray(this.internetPurposes)?this.internetPurposes.filter(e=>e&&e.trim()):[]},visibleComments(){return Array.isArray(this.previousComments)?this.previousComments.slice(0,this.maxVisibleComments):[]},tomorrow(){const e=new Date;e.setDate(e.getDate()+1);const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${a}`},signatureDisplay(){try{const e=(this.requesterName||"").trim().toLowerCase(),t=Array.isArray(this.signatureHistory)?this.signatureHistory:[],s=e=>e?.signed_at||e?.created_at||e?.timestamp,a=t.find(t=>String(t.user_name||t.name||"").trim().toLowerCase()===e);if(a)return{name:a.user_name||a.name,at:s(a)};if(t.length>0){const e=[...t].filter(e=>!!s(e)).sort((e,t)=>new Date(s(e))-new Date(s(t))),a=e[0]||t[0];return{name:a.user_name||a.name,at:s(a)}}return null}catch(e){return null}},requesterName(){try{return this.form?.shared?.staffName||this.requestData?.shared?.staffName||this.requestData?.staff_name||this.requestData?.full_name||""}catch{return""}},summaryErrors(){const e=[],t=this.form?.shared||{};t.pfNumber||e.push("PF Number is required."),t.staffName||e.push("Staff Name is required.");const s=Array.isArray(this.tabs)?this.tabs:[];return s.forEach(t=>{t&&t.key&&("internet"!==t.type||this.internetPurposes[0].trim()||e.push("Internet Purpose is required."))}),e},hasSignature(){const e=this.requestData||{},t=!!e,s=!!e.signature_path,a=s&&""!==String(e.signature_path).trim(),r=!0===e.digitalSignature||!0===e.digital_signature,i=Number(e.signatures_count||e.signature_count||0)>0,o=Array.isArray(this.signatureHistory)&&this.signatureHistory.length>0,n=this.historyHasSigner(this.requesterName),l=t&&(a||r||i||n||o);return this.isDevelopment&&(e.signature_path,e.signatures_count||e.signature_count,(this.signatureHistory||[]).length,this.requesterName),l},requestTypes(){if(!this.requestData)return[];let e=this.requestData.request_types||this.requestData.request_type||[];return Array.isArray(e)||(e=[e]),this.isDevelopment,e},hasWellsoftRequest(){const e=this.requestTypes;return e.includes("wellsoft")},hasJeevaRequest(){const e=this.requestTypes;return e.includes("jeeva_access")||e.includes("jeeva")},hasInternetRequest(){const e=this.requestTypes;return e.includes("internet_access_request")||e.includes("internet")},isWellsoftReadonly(){return this.isReviewMode&&!this.hasWellsoftRequest||this.isFormSectionReadOnly},isJeevaReadonly(){return this.isReviewMode&&!this.hasJeevaRequest||this.isFormSectionReadOnly},isInternetReadonly(){return this.isReviewMode&&!this.hasInternetRequest||this.isFormSectionReadOnly},currentApprovalStage(){if(!this.requestData)return"pending";const e=(this.requestData.status||"pending").toLowerCase(),t={pending:"hod",pending_hod:"hod",hod_approved:"divisional",pending_divisional:"divisional",divisional_approved:"ict_director",pending_ict_director:"ict_director",pending_dict:"ict_director",ict_director_approved:"head_it",dict_approved:"head_it",pending_head_it:"head_it",head_it_approved:"ict_officer",pending_ict_officer:"ict_officer",implementation_in_progress:"ict_officer",implemented:"completed",approved:"completed",completed:"completed",hod_rejected:"completed",divisional_rejected:"hod",ict_director_rejected:"hod",head_it_rejected:"hod",ict_officer_rejected:"hod",cancelled:"completed"};let s=t[e];const a=(this.requestData.hod_status||"").toLowerCase(),r=(this.requestData.divisional_status||"").toLowerCase(),i=(this.requestData.ict_director_status||this.requestData.dict_status||"").toLowerCase(),o=(this.requestData.head_it_status||"").toLowerCase(),n=(this.requestData.ict_officer_status||"").toLowerCase();let l=null;["implemented","approved","completed"].includes(n)?l="completed":!["approved","rejected"].includes(o)&&["approved","skipped"].includes(i)?l="head_it":!["approved","rejected"].includes(i)&&["approved","skipped"].includes(a)&&["approved","skipped"].includes(r)?l="ict_director":["approved","rejected"].includes(r)||"approved"!==a?["approved","rejected"].includes(a)||(l="hod"):l="divisional";const d={hod:1,divisional:2,ict_director:3,head_it:4,ict_officer:5,completed:6},c=(e,t)=>e?t&&(d[t]||0)>(d[e]||0)?t:e:t,u=c(s,l)||"hod";return u},isHodApprovalEditable(){const e=this.$route?.query?.mode,t=this.$route?.query?.role,s=this.$route?.query?.readonly;if("view"===e&&"true"===s)return!1;if("edit"===e&&"hod"===t){const e=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),t=["head_of_department","hod"];if(t.includes(e))return!0}if("readonly"===e)return!1;if(!this.isReviewMode||!this.requestData)return!1;const a=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),r=["head_of_department","hod"],i=this.requestData.status||"pending",o=["pending","pending_hod","hod_pending","submitted","divisional_rejected","ict_director_rejected","head_it_rejected","ict_officer_rejected"],n=r.includes(a)&&o.includes(i);return this.isDevelopment&&Math.random()<.1&&this.getRequestId,n},canUploadHodSignature(){const e=this.$route?.query?.mode,t=this.$route?.query?.readonly;if("view"===e&&"true"===t)return!1;if(this.isHodApprovalEditable)return!0;if("readonly"===e){const e=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),t=["head_of_department","hod"];if(t.includes(e))return!0}if(!this.isReviewMode)return!1;const s=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),a=["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"];return a.includes(s)&&"hod"===this.currentApprovalStage},isRejectedBackToHod(){if(!this.requestData)return!1;const e=this.requestData.status||"pending",t=["divisional_rejected","ict_director_rejected","head_it_rejected","ict_officer_rejected"];return t.includes(e)},rejectionDetails(){if(!this.isRejectedBackToHod||!this.requestData)return null;const e=this.requestData.status||"pending",t={divisional_rejected:{stage:"Divisional Director",reason:this.requestData.divisional_rejection_reason||this.requestData.rejection_reason,date:this.requestData.divisional_rejection_date||this.requestData.rejection_date},ict_director_rejected:{stage:"ICT Director",reason:this.requestData.dict_rejection_reason||this.requestData.rejection_reason,date:this.requestData.dict_rejection_date||this.requestData.rejection_date},head_it_rejected:{stage:"Head of IT",reason:this.requestData.head_it_rejection_reason||this.requestData.rejection_reason,date:this.requestData.head_it_rejection_date||this.requestData.rejection_date},ict_officer_rejected:{stage:"ICT Officer",reason:this.requestData.ict_officer_rejection_reason||this.requestData.rejection_reason,date:this.requestData.ict_officer_rejection_date||this.requestData.rejection_date}};return t[e]||null},roleCommentOriginal(){return this.getExistingRoleComment()},roleCommentKey(){const e=(this.getUserRole()||"").toLowerCase();return"divisional_director"===e?"divisional_director_comments":"head_it"===e||"head_of_it"===e?"head_it_comments":"ict_officer"===e||"officer_ict"===e?"ict_officer_comments":"ict_director"===e||"dict"===e?"ict_director_comments":""},roleCommentLabel(){const e=(this.getUserRole()||"").toLowerCase();return"divisional_director"===e?"Divisional Director Comment":"head_it"===e||"head_of_it"===e?"Head of IT Comment":"ict_officer"===e||"officer_ict"===e?"ICT Officer Comment":"ict_director"===e||"dict"===e?"ICT Director Comment":"Comment"},isRoleCommentEditable(){const e=(this.getUserRole()||"").toLowerCase();return["divisional_director","head_it","head_of_it","ict_officer","officer_ict","ict_director","dict"].includes(e)},isDivisionalApprovalEditable(){if(!this.isReviewMode||!this.requestData)return!1;const e=(this.getUserRole()||"").toLowerCase(),t=["divisional_director"];return"divisional"===this.currentApprovalStage&&t.includes(e)},isDivisionalDirectorReadOnly(){if(!this.isReviewMode||!this.requestData)return!1;const e=(this.getUserRole()||"").toLowerCase(),t=["divisional_director"];return t.includes(e)},isIctDirectorReadOnly(){if(!this.isReviewMode||!this.requestData)return!1;const e=(this.getUserRole()||"").toLowerCase(),t=["ict_director","dict"];return t.includes(e)},isFormSectionReadOnly(){const e=this.$route?.query?.mode,t=this.$route?.query?.readonly;if("view"===e&&"true"===t)return this.isDevelopment,!0;if("readonly"===e)return this.isDevelopment,!0;if(this.isHodApprovalEditable)return this.isDevelopment,!1;if(this.isReviewMode&&this.requestData){const e=this.requestData.status||"pending",t=this.requestData.hod_status||"pending",s=["hod_approved","pending_divisional","divisional_approved","pending_ict_director","ict_director_approved","pending_head_it","head_it_approved","pending_ict_officer","implemented","approved"];if(s.includes(e)||s.includes(t))return this.isDevelopment,!0}const s=this.isDivisionalDirectorReadOnly||this.isIctDirectorReadOnly;return this.isDevelopment,s},isStrictViewMode(){const e=this.$route?.query?.mode,t=this.$route?.query?.readonly;return"view"===e&&"true"===t},isIctDirectorUser(){const e=(this.getUserRole()||"").toLowerCase();return["ict_director","dict"].includes(e)},isDivisionalDirectorUser(){const e=(this.getUserRole()||"").toLowerCase();return["divisional_director"].includes(e)},isHeadItUser(){const e=(this.getUserRole()||"").toLowerCase();return["head_it","head_of_it"].includes(e)},shouldShowSelectIctOfficerButton(){if(!this.isHeadItUser||!this.isReviewMode||!this.requestData)return!1;const e=this.requestData.status||"pending",t="head_it_approved"===e||"pending_ict_officer"===e,s=!this.requestData.ict_officer_name&&!this.form.implementation.ictOfficer.name,a=!["implemented","approved","completed"].includes(e),r=t&&s&&a;return this.isDevelopment&&this.isHeadItUser&&(this.isHeadItUser,this.isReviewMode,this.requestData.ict_officer_name,this.form.implementation.ictOfficer.name),r},isIctDirectorApprovalActive(){const e=(this.getUserRole()||"").toLowerCase();return["ict_director","dict"].includes(e)&&this.isReviewMode&&"ict_director"===this.currentApprovalStage},isIctDirectorApprovalEditable(){if(!this.isReviewMode)return!0;if("ict_director"===this.currentApprovalStage)return!0;try{const e=(this.requestData?.hod_status||"").toLowerCase(),t=(this.requestData?.divisional_status||"").toLowerCase(),s=(this.requestData?.ict_director_status||this.requestData?.dict_status||"").toLowerCase(),a=["approved","skipped"].includes(e)&&["approved","skipped"].includes(t),r=!["approved","rejected"].includes(s);return a&&r}catch{return!1}},isHeadItApprovalEditable(){if(!this.isReviewMode)return!0;const e=(this.getUserRole()||"").toLowerCase(),t=["head_it","head_of_it"],s=this.currentApprovalStage,a="head_it"===s&&t.includes(e);return this.isDevelopment&&(t.includes(e),this.isReviewMode),a},isIctOfficerApprovalEditable(){if(!this.isReviewMode)return!0;const e=(this.getUserRole()||"").toLowerCase(),t=["ict_officer","officer_ict"],s=t.includes(e),a=this.currentUser?.id,r=this.requestData?.ict_officer_user_id&&this.requestData.ict_officer_user_id===a,i=this.requestData?.status||"",o=["assigned_to_ict","implementation_in_progress","head_it_approved","pending_ict_officer","head_it_pending","ict_director_approved"].includes(i),n=!this.requestData?.ict_officer_implemented_at&&"implemented"!==this.requestData?.ict_officer_status&&"rejected"!==this.requestData?.ict_officer_status&&"implemented"!==this.requestData?.status&&"approved"!==this.requestData?.status&&"completed"!==this.requestData?.status&&!this.getValidIctOfficerDate,l=s&&n&&(r||o);return t.includes(e),this.currentApprovalStage,this.isReviewMode,this.getRequestId,this.currentUser,this.currentUser,this.currentUser,this.currentUser?.role||this.currentUser,this.getUserRole(),this.requestData,this.requestData,this.requestData,this.requestData,this.requestData,this.requestData,this.requestData,this.requestData,l||t.includes(e),l},getValidIctOfficerDate(){if(!this.requestData)return null;const e=this.requestData.ict_officer_implemented_at||this.requestData.implementation?.ictOfficer?.date||this.requestData.implementation?.ictOfficer?.approved_at;if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())||t.getFullYear()<2020||t.getFullYear()>2030?(this.isDevelopment&&console.warn("Invalid ICT Officer implementation timestamp detected:",e),null):e}catch(t){return this.isDevelopment&&console.warn("Error parsing ICT Officer implementation timestamp:",e,t),null}},isStageCompleted(){return e=>{if(!this.requestData)return!1;const t=this.requestData.status||"pending",s={hod:["hod_approved","divisional_approved","pending_divisional","ict_director_approved","pending_ict_director","head_it_approved","pending_head_it","ict_officer_approved","pending_ict_officer","implemented","approved"],divisional:["divisional_approved","ict_director_approved","pending_ict_director","head_it_approved","pending_head_it","ict_officer_approved","pending_ict_officer","implemented","approved"],ict_director:["ict_director_approved","head_it_approved","pending_head_it","ict_officer_approved","pending_ict_officer","implemented","approved"],head_it:["head_it_approved","ict_officer_approved","pending_ict_officer","implemented","approved"],ict_officer:["implemented","approved"]},a=s[e]?.includes(t)||!1,r={hod:!!(this.requestData.hod_approved_at||this.requestData.approvals?.hod?.date||this.requestData.approvals?.hod?.approved_at),divisional:!!(this.requestData.divisional_approved_at||this.requestData.approvals?.divisionalDirector?.date||this.requestData.approvals?.divisionalDirector?.approved_at),ict_director:!!(this.requestData.ict_director_approved_at||this.requestData.dict_approved_at||this.requestData.approvals?.directorICT?.date||this.requestData.approvals?.directorICT?.approved_at),head_it:!!(this.requestData.head_it_approved_at||this.requestData.implementation?.headIT?.date||this.requestData.implementation?.headIT?.approved_at),ict_officer:!("implemented"!==this.requestData.ict_officer_status&&"approved"!==this.requestData.ict_officer_status||!this.getValidIctOfficerDate)},i=a||r[e]||!1;return"hod"!==e&&"divisional"!==e&&"ict_director"!==e||(r[e],"hod"===e?this.requestData.hod_approved_at:"divisional"===e?this.requestData.divisional_approved_at:"ict_director"===e&&this.requestData.ict_director_approved_at,Object.keys(this.requestData).filter(e=>e.includes("approved")||e.includes("implemented")||e.includes("date"))),i}},isSignatureRequiredForApproval(){if(!this.isReviewMode||!this.requestData)return!1;const e=this.currentApprovalStage,t=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),s={hod:["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"],divisional:["divisional_director"],ict_director:["ict_director","dict"],head_it:["head_it","head_of_it"]};let a="ict_director"===e;if(a||(a=!!s[e]&&s[e].includes(t)),!a)return!1;const r=this.currentUser?.name||"",i=!!this.hasUserSigned||this.historyHasSigner(r);return!i},displayedHodComments(){if(!this.requestData)return null;const e=this.requestData.hod_comments||this.requestData.comments||this.requestData.approvals?.hod?.comments||null;return this.isDevelopment&&(Object.keys(this.requestData),this.requestData.hod_comments,this.requestData.comments,this.requestData.approvals),e?.trim()||null},divisionalDirectorComments(){if(!this.requestData)return null;const e=this.requestData.divisional_comments||this.requestData.approvals?.divisionalDirector?.comments||null;return this.isDevelopment&&(Object.keys(this.requestData),this.requestData.divisional_comments,this.requestData.approvals),e?.trim()||null},ictDirectorComments(){if(!this.requestData)return null;const e=this.requestData.ict_director_comments||this.requestData.dict_comments||this.requestData.approvals?.directorICT?.comments||null;return e?.trim()||null},headItComments(){if(!this.requestData)return null;const e=this.requestData.head_it_comments||this.requestData.implementation?.headIT?.comments||null;return e?.trim()||null},ictOfficerComments(){if(!this.requestData)return null;const e=this.requestData.ict_officer_comments||this.requestData.implementation?.ictOfficer?.comments||null;return e?.trim()||null},previousComments(){if(!this.requestData)return[];const e=[],t=(this.getUserRole()?.toLowerCase(),[{key:"hod",name:"Head of Department",icon:"fa-user-tie",color:"blue",getComments:()=>this.displayedHodComments,getDate:()=>{const e=this.requestData.hod_approved_at||this.requestData.approvals?.hod?.approved_at||this.requestData.approvals?.hod?.date||this.requestData.hod_date||this.requestData.updated_at||this.requestData.created_at;return this.isDevelopment&&(this.requestData.hod_approved_at,this.requestData.approvals,this.requestData.approvals,this.requestData.hod_date,this.requestData.updated_at,this.requestData.created_at),e},getName:()=>this.requestData.hod_name||this.requestData.approvals?.hod?.name,isCompleted:()=>this.isStageCompleted("hod"),getStatus:()=>this.requestData.hod_status||(this.isStageCompleted("hod")?"approved":"pending")},{key:"divisional",name:"Divisional Director",icon:"fa-user-shield",color:"purple",getComments:()=>this.divisionalDirectorComments,getDate:()=>this.requestData.divisional_approved_at||this.requestData.approvals?.divisionalDirector?.approved_at||this.requestData.approvals?.divisionalDirector?.date||this.requestData.divisional_date||this.requestData.updated_at||this.requestData.created_at,getName:()=>this.requestData.divisional_director_name||this.requestData.approvals?.divisionalDirector?.name,isCompleted:()=>this.isStageCompleted("divisional"),getStatus:()=>this.requestData.divisional_status||(this.isStageCompleted("divisional")?"approved":"pending")},{key:"ict_director",name:"ICT Director",icon:"fa-user-cog",color:"teal",getComments:()=>this.ictDirectorComments,getDate:()=>this.requestData.dict_approved_at||this.requestData.ict_director_approved_at||this.requestData.approvals?.directorICT?.approved_at||this.requestData.approvals?.directorICT?.date||this.requestData.dict_date||this.requestData.ict_director_date||this.requestData.updated_at||this.requestData.created_at,getName:()=>this.requestData.dict_name||this.requestData.approvals?.directorICT?.name,isCompleted:()=>this.isStageCompleted("ict_director"),getStatus:()=>this.requestData.ict_director_status||this.requestData.dict_status||(this.isStageCompleted("ict_director")?"approved":"pending")},{key:"head_it",name:"Head of IT",icon:"fa-laptop-code",color:"indigo",getComments:()=>this.headItComments,getDate:()=>this.requestData.head_it_approved_at||this.requestData.implementation?.headIT?.approved_at||this.requestData.implementation?.headIT?.date||this.requestData.head_it_date||this.requestData.updated_at||this.requestData.created_at,getName:()=>this.requestData.head_it_name||this.requestData.implementation?.headIT?.name,isCompleted:()=>this.isStageCompleted("head_it"),getStatus:()=>this.requestData.head_it_status||(this.isStageCompleted("head_it")?"approved":"pending")},{key:"ict_officer",name:"ICT Officer",icon:"fa-tools",color:"green",getComments:()=>this.ictOfficerComments,getDate:()=>this.requestData.ict_officer_approved_at||this.requestData.implementation?.ictOfficer?.approved_at||this.requestData.implementation?.ictOfficer?.date||this.requestData.ict_officer_date||this.requestData.updated_at||this.requestData.created_at,getName:()=>this.requestData.ict_officer_name||this.requestData.implementation?.ictOfficer?.name,isCompleted:()=>this.isStageCompleted("ict_officer"),getStatus:()=>this.requestData.ict_officer_status||(this.isStageCompleted("ict_officer")?"approved":"pending")}]);t.forEach(t=>{const s=t.getComments(),a=t.isCompleted()||t.key===this.viewerStage()&&!!s;try{t.key,s&&s.substring(0,30)}catch(r){console.error(`ðŸš¨ Error logging stage ${t.key}:`,r)}if(a&&s){const a=t.getStatus(),r=t.getDate(),i=this.requestData.updated_at||this.requestData.created_at;e.push({stage:t.key,stageName:t.name,icon:t.icon,color:t.color,comments:s,date:r||i,name:t.getName(),status:a,isApproved:"approved"===a,isRejected:"rejected"===a,hasSpecificDate:!!r})}});const s=e.sort((e,t)=>{const s=e.date||this.requestData.updated_at||this.requestData.created_at,a=t.date||this.requestData.updated_at||this.requestData.created_at;return s||a?s?a?new Date(s)-new Date(a):-1:1:0});return s},hasPreviousComments(){return this.previousComments&&this.previousComments.length>0},isRequestFullyCompleted(){if(!this.requestData)return!1;const e=this.requestData.getCalculatedOverallStatus?this.requestData.getCalculatedOverallStatus():this.requestData.status||"pending",t=["implemented","approved","completed"],s=!!this.requestData.ict_officer_implemented_at;return t.includes(e)||s},validationErrors(){const e=[];this.form?.shared?.pfNumber?.trim()||e.push("PF Number is required"),this.form?.shared?.staffName?.trim()||e.push("Staff Name is required"),this.form?.shared?.department?.trim()||e.push("Department is required"),this.form?.shared?.phone?.trim()||e.push("Contact Number is required");const t=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),s=["head_of_department","hod"],a=s.includes(t),r="hod"===this.currentApprovalStage;if(a&&r){this.hodComments?.trim()||e.push("HOD Comments are required");const t=this.selectedWellsoft?.length>0||this.selectedJeeva?.length>0||this.filteredInternetPurposes?.length>0;t||e.push("At least one module or service must be selected")}return this.isSignatureRequiredForApproval&&e.push("Signature is required for approval"),e},areApprovalButtonsDisabled(){return this.loading||this.processing||this.isSignatureRequiredForApproval},approvalButtonTooltip(){const e=this.validationErrors;return e.length>0?e.join("; "):"Approve this request"},hasStageSigned(){return e=>{if(!this.requestData)return!1;const t={hod:{sig:this.requestData.approvals?.hod?.signature||this.requestData.approvals?.hod?.signature_path||this.requestData.hod_signature_path||"",date:this.requestData.approvals?.hod?.date||this.requestData.approvals?.hod?.approved_at||this.requestData.hod_approved_at||"",name:this.requestData.approvals?.hod?.name||this.requestData.hod_name||""},divisional:{sig:this.requestData.approvals?.divisionalDirector?.signature||this.requestData.approvals?.divisionalDirector?.signature_path||this.requestData.divisional_signature_path,date:this.requestData.approvals?.divisionalDirector?.date||this.requestData.approvals?.divisionalDirector?.approved_at||this.requestData.divisional_approved_at,name:this.requestData.approvals?.divisionalDirector?.name||this.requestData.divisional_director_name},ict_director:{sig:this.requestData.approvals?.directorICT?.signature||this.requestData.approvals?.directorICT?.signature_path||this.requestData.dict_signature_path,date:this.requestData.approvals?.directorICT?.date||this.requestData.approvals?.directorICT?.approved_at||this.requestData.dict_approved_at,name:this.requestData.approvals?.directorICT?.name||this.requestData.dict_name},head_it:{sig:this.requestData.implementation?.headIT?.signature||this.requestData.implementation?.headIT?.signature_path||this.requestData.head_it_signature_path,date:this.requestData.implementation?.headIT?.date||this.requestData.implementation?.headIT?.approved_at||this.requestData.head_it_approved_at,name:this.requestData.implementation?.headIT?.name||this.requestData.head_it_name},ict_officer:{sig:this.requestData.implementation?.ictOfficer?.signature||this.requestData.implementation?.ictOfficer?.signature_path||this.requestData.ict_officer_signature_path,date:this.requestData.implementation?.ictOfficer?.date||this.requestData.implementation?.ictOfficer?.approved_at||this.requestData.ict_officer_approved_at,name:this.requestData.implementation?.ictOfficer?.name||this.requestData.ict_officer_name}},s=t[e]||{},a=!!(s.sig&&String(s.sig).length>0),r=!!s.date,i=!!(s.name&&String(s.name).trim().length>0),o=this.isStageCompleted(e);let n=a&&r&&i||o&&i&&r;"hod"===e&&this.requestData?.hod_signature_path&&(n=!0,this.isDevelopment&&this.requestData.hod_signature_path),!n&&i&&this.historyHasSigner(s.name)&&(n=!0);const l={hod:["head_of_department","hod"],divisional:["divisional_director"],ict_director:["ict_director","dict"],head_it:["head_it","head_of_it"],ict_officer:["ict_officer","officer_ict"]},d=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_");return!n&&l[e]&&l[e].includes(d)&&this.currentUser?.name&&this.historyHasSigner(this.currentUser.name)&&(n=!0),this.isDevelopment&&(s.sig,s.date,s.name,"hod"===e&&this.requestData),n}},shouldShowHodSignedIndicator(){const e=this.isReviewMode&&this.viewerAfter("hod")&&this.hasStageSigned("hod"),t="hod"===this.viewerStage(),s=!!this.hasUserSigned||this.currentUser?.name&&this.historyHasSigner(this.currentUser.name),a=this.isReviewMode&&t&&s,r="divisional_director"===(this.getUserRole()||"").toLowerCase(),i=!!this.requestData?.hod_signature_path,o=this.isReviewMode&&r&&i,n=e||a||o;return this.isDevelopment&&(this.isReviewMode,this.viewerAfter("hod"),this.hasStageSigned("hod")),n},shouldShowHodNoSignatureIndicator(){if(this.isHodApprovalEditable||this.canUploadHodSignature)return!1;if(this.hodSignaturePreview||this.form?.approvals?.hod?.signature)return!1;const e=this.shouldShowHodSignedIndicator,t=this.isReviewMode&&this.viewerAfter("hod")&&!this.hasStageSigned("hod"),s=t&&!e;return this.isDevelopment&&(this.isReviewMode,this.viewerAfter("hod"),this.hasStageSigned("hod"),this.isHodApprovalEditable,this.canUploadHodSignature),s},shouldShowDivisionalSignedIndicator(){return this.isReviewMode&&this.hasStageSigned("divisional")},shouldShowDivisionalNoSignatureIndicator(){return this.isReviewMode&&this.viewerAfter("divisional")&&!this.hasStageSigned("divisional")},isHodSkipped(){const e=(this.requestData?.hod_status||"").toString().toLowerCase();return"skipped"===e},isDivisionalSkipped(){const e=(this.requestData?.divisional_status||"").toString().toLowerCase();return"skipped"===e},shouldShowIctDirectorSignedIndicator(){return this.isReviewMode&&this.hasStageSigned("ict_director")},shouldShowIctDirectorNoSignatureIndicator(){return!this.isIctDirectorApprovalEditable&&(this.isReviewMode&&this.viewerAfter("ict_director")&&!this.hasStageSigned("ict_director"))},shouldShowHeadITSignedIndicator(){return this.isReviewMode&&this.hasStageSigned("head_it")},shouldShowHeadITNoSignatureIndicator(){const e=this.shouldShowHeadITSignedIndicator,t=this.isReviewMode&&this.viewerAfter("head_it")&&!this.hasStageSigned("head_it"),s=t&&!e;return this.isDevelopment&&(this.isReviewMode,this.viewerAfter("head_it"),this.hasStageSigned("head_it")),s},shouldShowIctOfficerSignedIndicator(){return this.isReviewMode&&this.hasStageSigned("ict_officer")},shouldShowIctOfficerNoSignatureIndicator(){const e=this.shouldShowIctOfficerSignedIndicator,t=this.isReviewMode&&this.viewerAfter("ict_officer")&&!this.hasStageSigned("ict_officer"),s=t&&!e;return this.isDevelopment&&(this.isReviewMode,this.viewerAfter("ict_officer"),this.hasStageSigned("ict_officer")),s},implementationCardClass(){const e="medical-card bg-gradient-to-r from-blue-600/25 to-blue-700/25 border-2 border-blue-400/40 rounded-lg backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 group";return this.isReviewMode&&this.isIctDirectorUser||this.isDivisionalDirectorUser||this.isIctDirectorUser,`${e} p-0.5`},implementationHeaderClass(){const e="flex items-center space-x-1";return this.isReviewMode&&this.isIctDirectorUser,`${e} mb-0.5`},implementationGridClass(){const e="grid grid-cols-1 lg:grid-cols-2";return this.isReviewMode&&this.isIctDirectorUser?`${e} gap-0.5`:(this.isDivisionalDirectorUser,`${e} gap-1`)},headItSectionClass(){const e="bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm";let t="";return t=this.isReviewMode&&this.isIctDirectorUser?"p-1":this.isDivisionalDirectorUser?"p-1.5":"p-2",[e,t].filter(Boolean).join(" ")},ictOfficerSectionClass(){const e="bg-white/15 rounded-lg border border-blue-300/30 backdrop-blur-sm";let t="";return t=this.isReviewMode&&this.isIctDirectorUser?"p-1":this.isDivisionalDirectorUser?"p-1.5":"p-2",[e,t].filter(Boolean).join(" ")},actionButtonsClass(){const e="flex flex-col";return this.isReviewMode&&this.isIctDirectorUser?`${e} gap-1 mt-1`:this.isDivisionalDirectorUser||this.isIctDirectorUser?`${e} gap-2 mt-2`:`${e} gap-4 mt-4`},isImplementationApprovalDisabled(){const e=!!this.hasUserSigned||this.currentUser?.name&&this.historyHasSigner(this.currentUser.name)||this.shouldShowIctOfficerSignedIndicator;return this.processing||this.loading||!e},isImplementationAlreadyCompleted(){if(!this.requestData)return!1;const e=!!this.getValidIctOfficerDate,t="implemented"===this.requestData?.ict_officer_status||"implemented"===this.requestData?.status||"approved"===this.requestData?.status||"completed"===this.requestData?.status,s=!!this.requestData?.ict_officer_signature_path,a=e||t||s;return this.isDevelopment&&this.isReviewMode&&(this.requestData,this.requestData,this.requestData),a}},async mounted(){this.isLoading=!0;try{const[e]=await Promise.all([this.getCurrentUser(),this.loadModulesWithCaching()]);if(this.currentUser,this.currentUser,this.currentUser?.role||this.currentUser,this.currentUser&&this.currentUser.name||(this.tryGetUserFromLocalStorage(),this.currentUser,this.currentUser),this.currentUser&&this.currentUser.name||(this.tryGetUserFromStore(),this.currentUser,this.currentUser,this.getUserRole()),this.currentUser&&this.currentUser.name){this.currentUser.name,this.getUserRole();const e=(this.getUserRole()||"").toLowerCase(),t=["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"];t.includes(e);this.currentUser.name,this.isReviewMode,this.getRequestId}else console.error("âŒ CRITICAL: Unable to load user from any source!"),console.error("âŒ This will cause role detection to fail");this.isStrictViewMode&&(this.showApprovalSections=!0,this.showImplementationSections=!0),this.isReviewMode&&this.getRequestId?(await this.loadRequestData(),this.isLoading=!1,this.isDevelopment&&setTimeout(()=>{this.shouldShowHodSignedIndicator,this.shouldShowHodNoSignatureIndicator,this.hasStageSigned("hod"),this.viewerAfter("hod"),this.isReviewMode,this.currentUser,this.getUserRole(),this.viewerStage(),this.viewerRank(),this.requestData,this.getRequestId},5e3)):this.isLoading=!1}catch(e){console.error("âŒ Component mount error:",e),this.isLoading=!1,this.error="Failed to fully initialize component, but continuing..."}},watch:{selectedWellsoft:{handler(e){this.syncTabs("wellsoft",e)},deep:!0},selectedJeeva:{handler(e){this.syncTabs("jeeva",e)},deep:!0},isHodApprovalEditable:{handler(e){this.isDevelopment&&(this.form.approvals.hod.name,this.currentUser,this.isReviewMode,this.currentApprovalStage)},immediate:!0},isDivisionalApprovalEditable:{handler(e){this.isDevelopment&&(this.form.approvals.divisionalDirector.name,this.currentUser,this.isReviewMode,this.currentApprovalStage),e&&this.requestData&&this.populateDivisionalDirectorDateFromHod()},immediate:!0},isIctDirectorApprovalEditable:{handler(e){this.isDevelopment&&(this.form.approvals.directorICT.name,this.currentUser,this.isReviewMode,this.currentApprovalStage)},immediate:!0},isHeadItApprovalEditable:{handler(e){if(this.isDevelopment&&(this.form.implementation.headIT.name,this.currentUser,this.isReviewMode,this.currentApprovalStage,this.getUserRole()),e&&this.currentUser&&this.currentUser.name){const e=(this.getUserRole()||"").toLowerCase(),t=["head_it","head_of_it","ict_head","it_head"].includes(e);t&&!this.form.implementation.headIT.name&&(this.currentUser.name,this.form.implementation.headIT.name=this.currentUser.name,this.form.implementation.headIT.date=this.formatDateForInput(new Date),this.$forceUpdate())}},immediate:!0},isIctOfficerApprovalEditable:{handler(e){this.isDevelopment&&(this.form.implementation.ictOfficer.name,this.currentUser,this.isReviewMode,this.currentApprovalStage)},immediate:!0},currentUser:{handler(e){e&&e.name&&(this.isDevelopment&&(e.name,e.id,e.role,this.isReviewMode,this.currentApprovalStage),this.populateBasedOnUserRole(e))},immediate:!0},wellsoftRequestType:{handler(e){this.jeevaRequestType=e,this.isDevelopment},immediate:!0},requestData:{handler(e){if(e&&this.currentUser&&this.currentUser.name){const e=(this.getUserRole()||"").toLowerCase(),t=["head_it","head_of_it"].includes(e),s="head_it"===this.currentApprovalStage;t&&s&&this.isReviewMode&&(this.form.implementation.headIT.name||this.populateApproverName("head_it"))}},immediate:!1},requestDataLoadForComments:{handler(){this.loadRoleCommentDraft()},immediate:!0}},methods:{formatDateTime(e){try{const t="string"===typeof e?new Date(e):e;return isNaN(t?.getTime?.())?"":t.toLocaleString()}catch{return""}},normalizePhoneNumber(e){if(!e)return"";let t=String(e).trim().replace(/\s|-/g,"");return t.startsWith("+255")?t:t.startsWith("255")?"+"+t:t.startsWith("0")?"+255"+t.slice(1):t},async signCurrentDocument(){try{if(this.isSigning)return;const s=this.getRequestId||this.requestData?.id||this.$route.params.id;if(!s)return void this.showToast("Cannot sign until the request is created. Please submit first.","error");this.isSigning=!0;const a=await Ci["default"].sign(s);if(a&&(a.success||a.data)){this.hasUserSigned=!0,this.lastSignedAt=a?.data?.signed_at||a?.signed_at||(new Date).toISOString();const s=this.currentUser?.name||"you";this.toast={show:!0,message:`Document successfully signed by ${s} on ${new Date(this.lastSignedAt).toLocaleString()}`},await this.fetchSignatureHistory().catch(()=>{});try{const t=this.viewerStage();if(this.requestData)if(this.requestData.approvals=this.requestData.approvals||{},"hod"===t)this.requestData.approvals.hod={...this.requestData.approvals.hod||{},signature_status:"Signed",signature_display:"Digitally signed"};else if("divisional"===t)this.requestData.approvals.divisionalDirector={...this.requestData.approvals.divisionalDirector||{},signature_status:"Signed",signature_display:"Digitally signed"};else if("ict_director"===t){this.requestData.approvals.directorICT={...this.requestData.approvals.directorICT||{},signature_status:"Signed",signature_display:"Digitally signed"};try{const e=this.formatDateForInput(new Date);this.form?.approvals?.directorICT?.date||(this.form.approvals.directorICT.date=e),this.requestData.approvals.directorICT.date||(this.requestData.approvals.directorICT.date=e)}catch(e){}}else"head_it"===t&&(this.requestData.implementation=this.requestData.implementation||{},this.requestData.implementation.headIT={...this.requestData.implementation.headIT||{},signature_status:"Signed",signature_display:"Digitally signed"})}catch(t){console.warn("Signature optimistic update failed:",t)}this.$forceUpdate();try{this.ensureIctDirectorDateAutoFill()}catch(e){}setTimeout(()=>this.toast.show=!1,4e3)}else this.showToast(a?.message||"Failed to sign document","error")}catch(e){console.error("Sign error:",e),this.showToast(e.message||"Failed to sign document","error")}finally{this.isSigning=!1}},async fetchSignatureHistory(){try{const e=this.getRequestId||this.requestData?.id||this.$route.params.id;if(!e)return;const t=await Ci["default"].list(e);this.signatureHistory=Array.isArray(t?.data)?t.data:Array.isArray(t)?t:[]}catch(e){console.warn("Failed to load signature history:",e?.message||e),this.signatureHistory=[]}finally{this.$nextTick(()=>{try{this.ensureIctDirectorDateAutoFill()}catch(e){}})}},ensureIctDirectorDateAutoFill(){try{if("ict_director"!==this.viewerStage())return;const e=!!this.hasUserSigned||this.currentUser?.name&&this.historyHasSigner(this.currentUser.name),t="ict_director"===this.currentApprovalStage;if((e||this.shouldShowIctDirectorSignedIndicator)&&t){const e=!this.form?.approvals?.directorICT?.date;e&&(this.form.approvals.directorICT.date=this.formatDateForInput(new Date),this.$forceUpdate())}}catch(e){}},historyHasSigner(e){if(!e)return!1;const t=String(e).trim().toLowerCase();return(this.signatureHistory||[]).some(e=>String(e.user_name||e.name||"").trim().toLowerCase()===t)},getSignedByYouTooltip(e){try{const t=this.currentUser?.name;if(!t)return"";const s={hod:["head_of_department","hod"],divisional:["divisional_director"],ict_director:["ict_director","dict"],head_it:["head_it","head_of_it"],ict_officer:["ict_officer","officer_ict"]},a=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_");if(!s[e]||!s[e].includes(a))return"";const r=(this.signatureHistory||[]).find(e=>String(e.user_name||e.name||"").trim().toLowerCase()===String(t).trim().toLowerCase());if(!r)return"";const i=r.signed_at||r.created_at||r.timestamp;if(!i)return"Signed by You";const o=new Date(i);if(isNaN(o.getTime()))return"Signed by You";const n=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`Signed by You at ${n}`}catch{return""}},getExistingRoleComment(){if(!this.requestData)return"";const e=this.roleCommentKey;if(!e)return"";const t={divisional_director_comments:["divisional_comments"],ict_director_comments:["dict_comments"],head_it_comments:["head_it_comments"],ict_officer_comments:["ict_officer_comments"]},s=[e,...t[e]||[]];for(const r of s)if(this.requestData[r])return this.requestData[r];const a={divisional_director_comments:this.requestData.approvals?.divisionalDirector?.comments,ict_director_comments:this.requestData.approvals?.directorICT?.comments,head_it_comments:this.requestData.implementation?.headIT?.comments,ict_officer_comments:this.requestData.implementation?.ictOfficer?.comments};return a[e]||""},loadRoleCommentDraft(){this.roleCommentsDraft=this.getExistingRoleComment()||""},onIctOfficerApproveClick(){const e=(this.getUserRole()||"").toLowerCase();if(!["ict_officer","officer_ict"].includes(e))return;const t=this.currentUser?.name||"",s=!!this.hasUserSigned||this.historyHasSigner(t);s?(this.grantAccessComment=(this.roleCommentsDraft||"").trim(),this.grantAccessError="",this.showGrantAccessPopup=!0):this.showToast("Please digitally sign the request first","error")},async confirmGrantAccess(){const e=(this.grantAccessComment||"").trim();if(e){this.grantAccessError="";try{this.processing=!0;const t={ict_officer_name:this.form?.implementation?.ictOfficer?.name||this.currentUser?.name||"",ict_officer_date:(new Date).toISOString().slice(0,10),ict_officer_comments:e,ict_officer_status:"implemented"},s=await Ii.ictOfficerApprove(this.getRequestId,t);s.success?(this.showGrantAccessPopup=!1,this.showToast("Access granted successfully","success"),this.requestData&&(this.requestData.ict_officer_status="implemented",this.requestData.ict_officer_implemented_at=(new Date).toISOString(),this.requestData.ict_officer_comments=e,this.requestData.status="implemented"),setTimeout(()=>{this.$router.push("/ict-dashboard/access-requests")},1500)):this.showToast(s.error||"Failed to grant access","error")}catch(t){console.error("Grant access error:",t),this.showToast(t.message||"Failed to grant access","error")}finally{this.processing=!1}}else this.grantAccessError="Comment is required."},cancelGrantAccess(){this.showGrantAccessPopup=!1,this.grantAccessError=""},getSmsPreviewText(){const e=this.form.staff_name||"User",t=this.form.request_id||"MLG-REQ"+String(this.getRequestId||"").padStart(6,"0"),s=[];(this.form.jeeva_access_request||this.form.jeeva_modules_selected&&this.form.jeeva_modules_selected.length>0)&&s.push("Jeeva"),(this.form.wellsoft_access_request||this.form.wellsoft_modules_selected&&this.form.wellsoft_modules_selected.length>0)&&s.push("Wellsoft"),(this.form.internet_access_request||this.form.internet_purposes&&this.form.internet_purposes.length>0)&&s.push("Internet");const a=s.length>0?s.join(" & "):"Access",r=(this.grantAccessComment||"").trim()||"[YOUR COMMENT HERE]",i="access"===String(a).toLowerCase()?"access request":`${a} access`;return`Dear ${e}, your ${i} has been GRANTED and is now ACTIVE. Ref: ${t}. Note: ${r} - EABMS`},rowClass(e,t){const s="grid grid-cols-12 gap-0 p-0 border-b border-amber-300/20 transition-none hover:bg-amber-500/10 items-start",a=t===this.visibleComments.length-1,r=this.isHighlightedComment(e)?"ring-2 ring-green-400/60 bg-green-900/20":"";return[s,r,a?"border-b-0":""]},isHighlightedComment(e){try{if(!this.lastAddedCommentMeta)return!1;if(!e||"object"!==typeof e)return!1;if("ict_officer"!==e.stage)return!1;const t=(e.comments||"").trim(),s=(this.lastAddedCommentMeta.text||"").trim();return t.length>0&&t===s}catch(t){return!1}},async loadModulesWithCaching(){const e="cached_wellsoft_modules",t="cached_jeeva_modules",s=864e5,a=async(e,t,a)=>{try{const a=localStorage.getItem(e);if(a){const{data:e,timestamp:t}=JSON.parse(a);if(Date.now()-t<s)return e.length,e}const r=await t();if(r&&r.success&&Array.isArray(r.data)){const t=r.data.map(e=>e.name).sort();return localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now()})),t.length,t}throw new Error("Invalid API response")}catch(r){return console.warn(`âš ï¸ Failed to load ${e}, using fallback`,r),a}},[r,i]=await Promise.all([a(e,_i.A.getWellsoftModules,[]),a(t,_i.A.getJeevaModules,[])]);this.wellsoftModules=r,this.jeevaModules=i},async loadWellsoftModules(){await this.loadModulesWithCaching()},async loadJeevaModules(){await this.loadModulesWithCaching()},isJeevaItemSelected(e){return this.jeevaItemSelections.includes(e)},toggleJeevaItem(e){let t=[...this.jeevaItemSelections];"Use"===e&&(t=t.filter(e=>"Revoke"!==e)),"Revoke"===e&&(t=t.filter(e=>"Use"!==e)),t.includes(e)?t=t.filter(t=>t!==e):t.push(e),this.jeevaItemSelections=t;const s=this.tabs.find(e=>"jeeva"===e.type);if(s){const e=this.moduleData[s.key]||{};this.moduleData[s.key]={...e,selections:t}}},onJeevaItemsKeydown(e){if(!this.jeevaItemOpen&&("Enter"===e.key||" "===e.key))return e.preventDefault(),void(this.jeevaItemOpen=!0);if(!this.jeevaItemOpen)return;if("Escape"===e.key)return e.preventDefault(),void(this.jeevaItemOpen=!1);const t=this.jeevaItemOptions.length-1;"ArrowDown"===e.key&&(e.preventDefault(),this.jeevaItemFocusIndex=Math.min(t,this.jeevaItemFocusIndex+1)),"ArrowUp"===e.key&&(e.preventDefault(),this.jeevaItemFocusIndex=Math.max(0,this.jeevaItemFocusIndex-1)),"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleJeevaItem(this.jeevaItemOptions[this.jeevaItemFocusIndex]))},syncTabs(e,t){const s={wellsoft:"W",jeeva:"J",internet:"I"}[e],a=[],r={...this.moduleData};t.forEach(t=>{const i=`${s}:${t}`;r[i]||(r[i]={}),a.push({key:i,label:t,type:e,component:this.componentFor(e)})}),this.tabs=a,this.moduleData=r,this.activeTab=this.tabs[0]?.key||""},isSelected(e,t){return"wellsoft"===e?this.selectedWellsoft.includes(t):"jeeva"===e&&this.selectedJeeva.includes(t)},getApprovalNamePlaceholder(e){const t=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),s={hod:["head_of_department","hod","head_department","department_head","hod_user","head_of_dept"],divisional_director:["divisional_director"],ict_director:["ict_director","dict"],head_it:["head_it","head_of_it"],ict_officer:["ict_officer","officer_ict"]};return s[e]&&s[e].includes(t)?this.currentUser?.name||"Loading user...":this.getExistingApprovalName(e)||""},getApprovalNameTitle(e){const t=(this.getUserRole()||"").toLowerCase().replace(/[\s-]+/g,"_"),s={hod:["head_of_department","hod","head_department","department_head","hod_user","head_of_dept"],divisional_director:["divisional_director"],ict_director:["ict_director","dict"],head_it:["head_it","head_of_it"],ict_officer:["ict_officer","officer_ict"]};return s[e]&&s[e].includes(t)?"Auto-filled with: "+(this.currentUser?.name||"Loading..."):"This field will be filled by the appropriate approver"},getExistingApprovalName(e){switch(e){case"hod":return this.form.approvals.hod.name||this.requestData?.approvals?.hod?.name;case"divisional_director":return this.form.approvals.divisionalDirector.name||this.requestData?.approvals?.divisionalDirector?.name;case"ict_director":return this.form.approvals.directorICT.name||this.requestData?.approvals?.directorICT?.name;case"head_it":return this.form.implementation.headIT.name||this.requestData?.implementation?.headIT?.name;case"ict_officer":return this.form.implementation.ictOfficer.name||this.requestData?.implementation?.ictOfficer?.name;default:return""}},getUserRole(){if(!this.currentUser){if(console.warn("No current user found for role detection"),this.authStore&&(this.authStore.user||this.authStore.currentUser)){const e=this.authStore.user||this.authStore.currentUser,t=e.role||e.user_role||e.primary_role;if(t)return t}return null}const e=this.currentUser.role||this.currentUser.user_role||this.currentUser.primary_role||this.currentUser.userRole;if(Array.isArray(this.currentUser.roles)&&this.currentUser.roles.length>0){const e=["head_of_it","head_it","ict_director","divisional_director","head_of_department","hod","department_head","head_department","hod_user","head_of_dept","ict_officer"],t=this.currentUser.roles.map(e=>"string"===typeof e?e:e.name);for(const a of e)if(t.includes(a))return a;const s=t[0];return s}return this.currentUser,this.currentUser,this.currentUser,this.currentUser,this.currentUser,this.currentUser,this.currentUser,this.currentUser,JSON.stringify(this.currentUser,null,2),e||""},toggleWellsoft(e){this.selectedWellsoft=this.isSelected("wellsoft",e)?this.selectedWellsoft.filter(t=>t!==e):[...this.selectedWellsoft,e]},toggleJeeva(e){this.selectedJeeva=this.isSelected("jeeva",e)?this.selectedJeeva.filter(t=>t!==e):[...this.selectedJeeva,e]},selectAll(e){"wellsoft"===e&&(this.selectedWellsoft=[...this.wellsoftModules]),"jeeva"===e&&(this.selectedJeeva=[...this.jeevaModules])},clearAll(e){"wellsoft"===e&&(this.selectedWellsoft=[]),"jeeva"===e&&(this.selectedJeeva=[])},componentFor(e){return"wellsoft"===e?"WellsoftPanel":"jeeva"===e?"JeevaPanel":"InternetPanel"},toggleAccordion(e){this.openAccordions.has(e)?this.openAccordions.delete(e):this.openAccordions.add(e)},tryCloseTab(e){const t=this.tabs.find(t=>t.key===e);t&&(this.confirm={key:e,label:t.label})},closeTab(e){this.tabs=this.tabs.filter(t=>t.key!==e);const t={...this.moduleData};delete t[e],this.moduleData=t;const[s,a]=e.split(":");"W"===s&&(this.selectedWellsoft=this.selectedWellsoft.filter(e=>e!==a)),"J"===s&&(this.selectedJeeva=this.selectedJeeva.filter(e=>e!==a)),this.confirm={key:"",label:""},this.activeTab=this.tabs[0]?.key||""},onAccessTypeChange(e){this.hodAccessType=e,"permanent"===e&&(this.hodTemporaryUntil="",this.hodTemporaryUntilError=""),this.$forceUpdate()},async onSubmit(){if(this.errors={pfNumber:"",staffName:""},!this.form.shared.pfNumber)return void(this.errors.pfNumber="PF Number is required.");if(!this.form.shared.staffName)return void(this.errors.staffName="Staff Name is required.");const e=this.selectedWellsoft.length>0,t=this.selectedJeeva.length>0,s=this.internetPurposes.some(e=>e.trim());if(this.isReviewMode&&this.requestData){const e=this.requestData.request_types||this.requestData.request_type||[];if(e.includes("wellsoft")&&0===this.selectedWellsoft.length)return this.toast={show:!0,message:"This request requires Wellsoft access. Please select at least 1 Wellsoft module."},void setTimeout(()=>this.toast.show=!1,5e3);if((e.includes("jeeva_access")||e.includes("jeeva"))&&0===this.selectedJeeva.length)return this.toast={show:!0,message:"This request requires Jeeva access. Please select at least 1 Jeeva module."},void setTimeout(()=>this.toast.show=!1,5e3);if((e.includes("internet_access_request")||e.includes("internet"))&&!s)return this.toast={show:!0,message:"This request requires Internet access. Please provide at least 1 internet purpose."},void setTimeout(()=>this.toast.show=!1,5e3)}else if(!e&&!t&&!s)return this.toast={show:!0,message:"Please select at least one service (Wellsoft modules, Jeeva modules, or Internet access)"},void setTimeout(()=>this.toast.show=!1,5e3);if(!this.signaturePreview&&!this.hasUserSigned)return this.toast={show:!0,message:"Please sign the document before submitting"},void setTimeout(()=>this.toast.show=!1,5e3);try{this.loading=!0,this.form.shared,this.selectedWellsoft,this.selectedJeeva,this.wellsoftRequestType,this.jeevaRequestType,this.internetPurposes,this.hodAccessType,this.hodTemporaryUntil,this.form.approvals,this.form.implementation,this.form.comments,this.form.shared.signature;const e={shared:{pfNumber:this.form.shared.pfNumber,staffName:this.form.shared.staffName,department:this.form.shared.department,phone:this.form.shared.phone},selectedWellsoft:this.selectedWellsoft,selectedJeeva:this.selectedJeeva,wellsoftRequestType:this.wellsoftRequestType,jeevaRequestType:this.jeevaRequestType,internetPurposes:this.internetPurposes.filter(e=>e.trim()),hodAccessType:this.hodAccessType,hodTemporaryUntil:"temporary"===this.hodAccessType?this.hodTemporaryUntil:null,signature:this.form.shared.signature,approvals:{hod:{name:this.form.approvals.hod.name,signature:this.form.approvals.hod.signature,date:this.form.approvals.hod.date},divisionalDirector:{name:this.form.approvals.divisionalDirector.name,signature:this.form.approvals.divisionalDirector.signature,date:this.form.approvals.divisionalDirector.date},directorICT:{name:this.form.approvals.directorICT.name,signature:this.form.approvals.directorICT.signature,date:this.form.approvals.directorICT.date}},implementation:{headIT:{name:this.form.implementation.headIT.name,signature:this.form.implementation.headIT.signature,date:this.form.implementation.headIT.date},ictOfficer:{name:this.form.implementation.ictOfficer.name,signature:this.form.implementation.ictOfficer.signature,date:this.form.implementation.ictOfficer.date}},comments:this.form.comments};e.signature;const t=Ii.validateFormData(e);if(!t.isValid)return this.toast={show:!0,message:t.errors.join(", ")},void setTimeout(()=>this.toast.show=!1,5e3);const s=await Ii.submitCombinedRequest(e);if(s.success)s.data,this.toast={show:!0,message:`Combined access request submitted successfully! Request ID: ${s.data.id||"N/A"}`},setTimeout(()=>{this.toast.show=!1},8e3);else{if(console.error("âŒ Form submission failed:",s.error),s.errors){let e="Please fix the following errors: ";Object.keys(s.errors).forEach(t=>{Array.isArray(s.errors[t])&&(e+=s.errors[t].join(", ")+" ")}),this.toast={show:!0,message:e}}else this.toast={show:!0,message:s.message||"Failed to submit request. Please try again."};setTimeout(()=>this.toast.show=!1,8e3)}}catch(a){console.error("âŒ Unexpected error during form submission:",a),this.toast={show:!0,message:"An unexpected error occurred. Please try again."},setTimeout(()=>this.toast.show=!1,5e3)}finally{this.loading=!1}},onReset(){this.form={shared:{pfNumber:"",staffName:"",department:"",phone:""},approvals:{hod:{name:"",signature:"",date:""},divisionalDirector:{name:"",signature:"",date:""},directorICT:{name:"",signature:"",date:""}},comments:"",implementation:{headIT:{name:"",signature:"",date:""},ictOfficer:{name:"",signature:"",date:""}}},this.selectedWellsoft=[],this.selectedJeeva=[],this.wellsoftQuery="",this.jeevaQuery="",this.internetPurposes=["","","",""],this.wellsoftRequestType="use",this.tabs=[],this.moduleData={},this.activeTab="",this.openAccordions.clear(),this.errors={pfNumber:"",staffName:""},this.signaturePreview="",this.signatureFileName="",this.hodSignaturePreview="",this.hodSignatureFileName="",this.divDirectorSignaturePreview="",this.divDirectorSignatureFileName="",this.directorICTSignaturePreview="",this.directorICTSignatureFileName="",this.headITSignaturePreview="",this.headITSignatureFileName="",this.ictOfficerSignaturePreview="",this.ictOfficerSignatureFileName=""},async loadRequestData(){if(!this.loadingRequestData)try{this.loading=!0,this.loadingRequestData=!0,this.error=null,this.getRequestId;const s=this.getRequestId;if(!s)throw new Error("No request ID provided");const a=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timeout - API call took too long")),15e3)),r=(this.getUserRole()||"").toLowerCase();let i;try{i=await Promise.race([_i.A.getRequestById(s),a])}catch(e){if(console.warn("ðŸ’¾ Combined API failed, trying role-specific API:",e.message),!["ict_officer","officer_ict"].includes(r))throw console.error("ðŸ’¾ No fallback API available"),e;i=await Promise.race([Di["default"].getAccessRequestById(s),a])}if(!(i&&i.success&&i.data))throw console.error("âŒ Request data loading failed:"),console.error("âŒ Response:",i),console.error("âŒ Response success:",i?.success),console.error("âŒ Response data:",i?.data),console.error("âŒ Response error:",i?.error),new Error(i?.error||i?.message||"Failed to load request data");if(this.requestData=i.data,this.loadRoleCommentDraft(),this.isDevelopment&&(this.requestData,this.requestData.approvals,this.requestData.approvals,this.requestData.approvals,this.requestData.approvals,this.requestData.approvals,this.requestData.approvals,this.requestData.approvals),this.requestData.access_type&&(this.hodAccessType=this.requestData.access_type),this.requestData.temporary_until){const e=new Date(this.requestData.temporary_until);if(!isNaN(e.getTime())){const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");this.hodTemporaryUntil=`${t}-${s}-${a}`}}this.requestData.hod_comments&&(this.hodComments=this.requestData.hod_comments),this.isDevelopment&&(this.requestData.signature_path,this.requestData.signature_path),this.isDevelopment&&(this.requestData,this.requestData.shared);try{const e=this.requestData.approvals||{},t=this.requestData.implementation||{},s=this.requestData;this.isDevelopment&&(s.hod_name,s.hod_signature_path,s.hod_approved_at,s.divisional_director_name,s.divisional_approved_at,s.dict_name,s.dict_approved_at),this.form.approvals.hod.name=e.hod?.name||s.hod_name||this.form.approvals.hod.name||"",this.form.approvals.hod.date=this.formatDateForInput(e.hod?.date||e.hod?.approved_at||s.hod_approved_at||this.form.approvals.hod.date),this.form.approvals.divisionalDirector.name=e.divisionalDirector?.name||s.divisional_director_name||this.form.approvals.divisionalDirector.name||"",this.form.approvals.divisionalDirector.date=this.formatDateForInput(e.divisionalDirector?.date||e.divisionalDirector?.approved_at||s.divisional_approved_at||this.form.approvals.divisionalDirector.date),this.form.approvals.directorICT.name=e.directorICT?.name||s.dict_name||this.form.approvals.directorICT.name||"",this.form.approvals.directorICT.date=this.formatDateForInput(e.directorICT?.date||e.directorICT?.approved_at||s.dict_approved_at||this.form.approvals.directorICT.date),this.form.implementation.headIT.name=t.headIT?.name||s.head_it_name||this.form.implementation.headIT.name||"",this.form.implementation.headIT.date=this.formatDateForInput(t.headIT?.date||t.headIT?.approved_at||s.head_it_approved_at||this.form.implementation.headIT.date),this.form.implementation.ictOfficer.name=t.ictOfficer?.name||s.ict_officer_name||this.form.implementation.ictOfficer.name||"",this.form.implementation.ictOfficer.date=this.formatDateForInput(t.ictOfficer?.date||t.ictOfficer?.approved_at||s.ict_officer_approved_at||this.form.implementation.ictOfficer.date),this.isDevelopment&&(this.form.approvals.hod.name,this.form.approvals.hod.date,this.form.approvals.divisionalDirector.name,this.form.approvals.divisionalDirector.date,this.form.approvals.directorICT.name,this.form.approvals.directorICT.date),this.$nextTick(()=>{this.isDevelopment&&(this.shouldShowHodSignedIndicator,this.shouldShowHodNoSignatureIndicator,this.currentUser,this.getUserRole(),this.isReviewMode,this.requestData)})}catch(t){console.warn("Mapping approvals to form failed:",t)}await this.fetchSignatureHistory();try{this.ensureIctDirectorDateAutoFill()}catch(t){}if(this.requestData.shared?(this.isDevelopment,this.form.shared={pfNumber:this.requestData.shared.pfNumber||"",staffName:this.requestData.shared.staffName||"",department:this.requestData.shared.department||"",phone:this.normalizePhoneNumber(this.requestData.shared.phone||"")}):(this.isDevelopment,this.form.shared={pfNumber:this.requestData.pf_number||"",staffName:this.requestData.staff_name||this.requestData.full_name||"",department:this.requestData.department||this.requestData.department_name||"",phone:this.normalizePhoneNumber(this.requestData.phone||this.requestData.phone_number||"")}),this.isDevelopment&&this.form.shared,this.populateDivisionalDirectorDateFromHod(),this.triggerHeadItNamePopulationIfNeeded(),this.$nextTick(()=>{this.currentUser,this.requestData,this.getUserRole(),this.currentApprovalStage,this.requestData,this.isIctOfficerApprovalEditable,this.$forceUpdate()}),this.$forceUpdate(),this.requestData.signature_path&&(this.isDevelopment&&this.requestData.signature_path,this.signatureFileName=this.getSignatureFileName(this.requestData.signature_path)),this.requestData.request_types||this.requestData.request_type){const e=this.requestData.request_types||this.requestData.request_type||[];if(this.isDevelopment&&["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"].includes(this.getUserRole()?.toLowerCase())&&(this.getUserRole(),this.isHodApprovalEditable,this.isReviewMode),e.includes("wellsoft")){const e=this.requestData.wellsoft_modules_selected||this.requestData.selected_wellsoft||this.requestData.wellsoft_modules||[];let s=[];if("string"===typeof e)try{s=JSON.parse(e)}catch(t){console.warn("Failed to parse Wellsoft modules:",e),s=[]}else Array.isArray(e)&&(s=e);this.selectedWellsoft=Array.isArray(s)?s:[];const a=this.requestData.wellsoft_request_type||this.requestData.wellsoft_type||"use";this.wellsoftRequestType=["use","revoke"].includes(a)?a:"use",this.isDevelopment&&(this.selectedWellsoft,this.wellsoftRequestType)}else this.selectedWellsoft=[];if(e.includes("jeeva_access")||e.includes("jeeva")){const e=this.requestData.jeeva_modules_selected||this.requestData.selected_jeeva||this.requestData.jeeva_modules||[];let s=[];if("string"===typeof e)try{s=JSON.parse(e)}catch(t){console.warn("Failed to parse Jeeva modules:",e),s=[]}else Array.isArray(e)&&(s=e);this.selectedJeeva=Array.isArray(s)?s:[];const a=this.requestData.jeeva_request_type||this.requestData.jeeva_type||"use";this.jeevaRequestType=["use","revoke"].includes(a)?a:"use",this.isDevelopment&&(this.selectedJeeva,this.jeevaRequestType)}else this.selectedJeeva=[];if(e.includes("internet_access_request")||e.includes("internet")){const e=this.requestData.internet_purposes||this.requestData.purpose||[],t=Array.isArray(e)?e:[e];this.internetPurposes=[...t,"","","",""].slice(0,4),this.isDevelopment&&this.internetPurposes}else this.internetPurposes=["","","",""]}else this.selectedWellsoft=[],this.selectedJeeva=[],this.internetPurposes=["","","",""];if(this.isHodApprovalEditable,this.isReviewMode,this.requestData,this.requestData,this.requestData,this.getUserRole(),this.getRequestId,this.tabs.length,this.tabs.map(e=>({key:e.key,label:e.label,type:e.type})),this.isHodApprovalEditable){this.isDevelopment&&(this.isHodApprovalEditable,this.selectedWellsoft,this.selectedJeeva,this.requestData.request_types||this.requestData.request_type,this.tabs.length);const e=this.requestData.request_types||this.requestData.request_type||[],t=e.includes("wellsoft"),s=e.includes("jeeva_access")||e.includes("jeeva"),a=e.includes("internet_access_request")||e.includes("internet");t&&this.syncTabs("wellsoft",this.selectedWellsoft),s&&this.syncTabs("jeeva",this.selectedJeeva),a&&this.internetPurposes.some(e=>e.trim())&&this.syncTabs("internet",[]),this.isDevelopment&&(this.selectedWellsoft,this.selectedJeeva,this.internetPurposes.filter(e=>e.trim()),this.tabs.map(e=>({key:e.key,label:e.label,type:e.type}))),!(this.tabs.length>0)||this.activeTab&&this.tabs.find(e=>e.key===this.activeTab)||(this.activeTab=this.tabs[0].key,this.isDevelopment&&this.activeTab)}this.isDevelopment}catch(e){console.error("Error loading request data:",e),this.error=`Failed to load request data: ${e.message}`;const s=(this.getUserRole()||"").toLowerCase();if(["ict_officer","officer_ict"].includes(s)){const e=!(!this.requestData||!this.requestData.id);if(e)try{console.warn("BothServiceForm: Partial load for ICT Officer (non-critical data missing); suppressing toast")}catch(t){}else this.toast={show:!0,message:"Some data could not be loaded, but you can still view the form."}}else this.toast={show:!0,message:"Error loading request data"};setTimeout(()=>this.toast.show=!1,3e3)}finally{this.loading=!1,this.loadingRequestData=!1}},getApprovalStatus(e){if(!this.requestData)return"pending";switch(e){case"hod":return this.requestData.hod_approval_status||"pending";case"divisional":return this.requestData.divisional_approval_status||"pending";case"dict":return this.requestData.dict_approval_status||"pending";case"headOfIt":return this.requestData.head_it_approval_status||"pending";case"ict":return this.requestData.ict_approval_status||"pending";default:return"pending"}},getSignatureFileName(e){return e?e.split("/").pop()||e:""},canApproveAtStage(){if(!this.isReviewMode||!this.requestData)return!1;const e=this.currentApprovalStage,t=(this.getUserRole()||"").toLowerCase(),s=["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"],a=["divisional_director"],r=["ict_director","dict"];if("hod"===e&&s.includes(t)){const e=this.requestData.hod_approval_status||"pending";return"pending"===e}if("divisional"===e&&a.includes(t)){const e=this.requestData.status||"pending";return"hod_approved"===e||"pending_divisional"===e}if("ict_director"===e){const e=r.includes(t)||"ict_director"===this.viewerStage();if(!e)return!1;if(this.isIctDirectorApprovalActive||this.isIctDirectorApprovalEditable)return!0;const s=(this.requestData.status||this.requestData.dict_status||"").toLowerCase(),a="pending"===(this.requestData.ict_director_status||this.requestData.dict_status||"").toLowerCase(),i=["divisional_approved","pending_ict_director","pending_dict"].includes(s)||a;if(this.isDevelopment)try{this.isIctDirectorApprovalActive,this.isIctDirectorApprovalEditable}catch(o){}return i}const i=["head_it","head_of_it"];if("head_it"===e&&i.includes(t)){const e=this.requestData.status||"pending";return"ict_director_approved"===e||"pending_head_it"===e}return!1},async approveRequest(){if(this.processing||this.loading)return;if(this.isSignatureRequiredForApproval)return this.toast={show:!0,message:"Please digitally sign this request before approving."},void setTimeout(()=>this.toast.show=!1,4e3);const e=this.validationErrors;if(e&&e.length)return this.toast={show:!0,message:e[0]},void setTimeout(()=>this.toast.show=!1,4e3);try{this.processing=!0,this.loading=!0;const e=this.currentApprovalStage,t=(this.getUserRole()||"").toLowerCase();if("hod"===e&&["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"].includes(t))await this.approveAsHod();else if("divisional"===e&&["divisional_director"].includes(t))await this.approveAsDivisionalDirector();else if("ict_director"===e&&["ict_director","dict"].includes(t))await this.approveAsIctDirector();else{if("head_it"!==e||!["head_it","head_of_it"].includes(t))throw new Error("You do not have permission to approve at this stage");await this.approveAsHeadIt()}}catch(t){console.error("Error approving request:",t),this.toast={show:!0,message:`Error approving request: ${t.message}`},setTimeout(()=>this.toast.show=!1,3e3)}finally{this.processing=!1,this.loading=!1}},async approveAsHod(){const e=this.form.approvals.hod.name||this.currentUser?.name||"",t=this.form.approvals.hod.date||(new Date).toISOString().slice(0,10);if(this.hodTemporaryUntilError="","temporary"===this.hodAccessType){if(!this.hodTemporaryUntil)return this.hodTemporaryUntilError="Please select an end date for temporary access",this.toast={show:!0,message:this.hodTemporaryUntilError},void setTimeout(()=>this.toast.show=!1,3e3);const e=new Date;e.setHours(0,0,0,0);const t=new Date(this.hodTemporaryUntil);if(isNaN(t.getTime())||t<=e)return this.hodTemporaryUntilError="Temporary access end date must be in the future",this.toast={show:!0,message:this.hodTemporaryUntilError},void setTimeout(()=>this.toast.show=!1,3e3)}const s={hodName:e,approvedDate:t,comments:this.hodComments||this.form.comments||"Approved by HOD",selectedWellsoft:this.selectedWellsoft,selectedJeeva:this.selectedJeeva,moduleRequestedFor:this.wellsoftRequestType||"use",accessType:this.hodAccessType,temporaryUntil:"temporary"===this.hodAccessType?this.hodTemporaryUntil:void 0,hodComments:this.hodComments},a=Ii.hodApproveModuleRequest(this.getRequestId,s),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timed out. Please try again.")),3e4)),i=await Promise.race([a,r]);if(!i.success){let e="Failed to approve request";throw i.errors&&Object.keys(i.errors).length>0?e="Validation errors: "+Object.values(i.errors).flat().join(", "):i.error&&(e=i.error),new Error(e)}this.updateRoleCommentsLocally("hod",this.hodComments||this.form.comments||"Approved by HOD");try{const e=String(this.getRequestId);localStorage.setItem("lastApprovedRequestId",e);const t=localStorage.getItem("keepVisibleRequests"),s=Array.isArray(JSON.parse(t||"[]"))?JSON.parse(t||"[]"):[];s.includes(e)||(s.push(e),localStorage.setItem("keepVisibleRequests",JSON.stringify(s)))}catch(o){console.warn("Persist keepVisibleRequests failed",o)}this.toast={show:!0,message:"Request approved successfully"},setTimeout(()=>{this.toast.show=!1,this.goBackToRequests()},1200)},async approveAsDivisionalDirector(){const e=this.form.approvals.divisionalDirector.name||this.currentUser?.name||"",t=this.form.approvals.divisionalDirector.date||(new Date).toISOString().slice(0,10),s=(this.roleCommentsDraft||"").trim();if(!s)return this.toast={show:!0,message:"Please provide your comments/recommendations before approving"},void setTimeout(()=>this.toast.show=!1,4e3);const a={divisionalDirectorName:e,approvedDate:t,comments:s},r=Ii.divisionalDirectorApprove(this.getRequestId,a),i=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timed out. Please try again.")),3e4)),o=await Promise.race([r,i]);if(!o.success){let e="Failed to approve request";throw o.errors&&Object.keys(o.errors).length>0?e="Validation errors: "+Object.values(o.errors).flat().join(", "):o.error&&(e=o.error),new Error(e)}this.updateRoleCommentsLocally("divisional",s),this.toast={show:!0,message:"Request approved successfully by Divisional Director"},setTimeout(()=>{this.toast.show=!1,this.goBackToDivisionalRequests()},1500)},async approveDictRequest(){if(!this.processing&&!this.loading){if(this.isSignatureRequiredForApproval)return this.toast={show:!0,message:"Please digitally sign this request before approving."},void setTimeout(()=>this.toast.show=!1,4e3);try{this.processing=!0,this.loading=!0,await this.approveAsIctDirector()}catch(e){console.error("Error approving request as ICT Director:",e),this.toast={show:!0,message:`Error approving request: ${e.message}`},setTimeout(()=>this.toast.show=!1,3e3)}finally{this.processing=!1,this.loading=!1}}},async rejectDictRequest(){if(this.isSignatureRequiredForApproval)return this.toast={show:!0,message:"Please upload your ICT Director signature before rejecting this request."},void setTimeout(()=>this.toast.show=!1,4e3);this.showRejectionModal=!0},async approveAsIctDirector(){try{const e=(this.currentUser?.roles||[]).map(e=>"string"===typeof e?e:e?.name).filter(Boolean),t=e.map(e=>String(e).toLowerCase().replace(/[-\s]+/g,"_")),s=t.includes("ict_director")||t.includes("dict");if(!s)return this.toast={show:!0,type:"error",message:"You do not have ICT Director privileges for this action."},void setTimeout(()=>this.toast.show=!1,4e3)}catch(i){}const e=this.form.approvals.directorICT.name||this.currentUser?.name||"",t=(this.roleCommentsDraft||"").trim();if(!t)return this.toast={show:!0,message:"Please provide your technical comments/evaluation before approving"},void setTimeout(()=>this.toast.show=!1,4e3);const s=this.form.approvals.directorICT.date||(new Date).toISOString().slice(0,10),a={ictDirectorName:e,approvedDate:s,comments:t},r=await Ii.ictDirectorApprove(this.getRequestId,a);if(!r.success){let e="Failed to approve request";throw r.errors&&Object.keys(r.errors).length>0?e="Validation errors: "+Object.values(r.errors).flat().join(", "):r.error&&(e=r.error),new Error(e)}this.updateRoleCommentsLocally("ict_director",t),this.toast={show:!0,message:"Request approved successfully by ICT Director"},setTimeout(()=>{this.toast.show=!1,this.goBackToDictRequests()},2e3)},goBackToDictRequests(){try{this.$router.push("/dict-dashboard/combined-requests")}catch(e){console.error("Error navigating back to ICT Director requests:",e),this.$router.push("/dict-dashboard")}},goBackToDivisionalRequests(){try{this.$router.push("/divisional-dashboard/combined-requests")}catch(e){console.error("Error navigating back to Divisional requests:",e),this.$router.push("/divisional-dashboard/combined-requests")}},async approveHeadItRequest(){if(!this.processing&&!this.loading)try{this.processing=!0,this.loading=!0,await this.approveAsHeadIt()}catch(e){console.error("Error approving request as Head IT:",e),this.toast={show:!0,message:`Error approving request: ${e.message}`},setTimeout(()=>this.toast.show=!1,3e3)}finally{this.processing=!1,this.loading=!1}},async rejectHeadItRequest(){if(!this.form.implementation.headIT.signature)return this.toast={show:!0,message:"Please upload your Head of IT signature before rejecting this request."},void setTimeout(()=>this.toast.show=!1,4e3);this.showRejectionModal=!0},async approveAsHeadIt(){const e=this.form.implementation.headIT.name||this.currentUser?.name||"",t=this.form.implementation.headIT.date||(new Date).toISOString().slice(0,10);this.form.implementation.headIT.date=t;const s={headItName:e,approvedDate:t,comments:this.roleCommentsDraft||this.form.comments||"Approved by Head of IT"},a=await Ii.headItApprove(this.getRequestId,s);if(!a.success){let e="Failed to approve request";throw a.errors&&Object.keys(a.errors).length>0?e="Validation errors: "+Object.values(a.errors).flat().join(", "):a.error&&(e=a.error),new Error(e)}this.updateRoleCommentsLocally("head_it",this.roleCommentsDraft||this.form.comments||"Approved by Head of IT"),this.onHeadItApproveSuccess()},goBackToHeadItRequests(){try{this.$router.push("/head_of_it-dashboard/combined-requests")}catch(e){console.error("Error navigating back to Head IT requests:",e),this.$router.push("/head_of_it-dashboard")}},getRequesterName(){return this.requestData&&this.requestData.staff_name?this.requestData.staff_name:this.form.shared.staffName?this.form.shared.staffName:"the requester"},navigateToSelectIctOfficer(){try{this.getRequestId,this.$router.push(`/head_of_it-dashboard/select-ict-officer/${this.getRequestId}`)}catch(e){console.error("Error navigating to ICT Officer selection:",e),this.toast={show:!0,message:"Error navigating to ICT Officer selection. Please try again."},setTimeout(()=>{this.toast.show=!1,this.goBackToHeadItRequests()},3e3)}},closeSuccessModal(){this.showApprovalSuccessCard=!1,this.goBackToHeadItRequests()},async rejectRequest(){if(this.isSignatureRequiredForApproval)return this.toast={show:!0,message:"Please digitally sign this request before rejecting."},void setTimeout(()=>this.toast.show=!1,4e3);this.showRejectionModal=!0},async confirmRejectRequest(){if(!this.rejectionReason?.trim())return this.toast={show:!0,message:"Please provide a reason for rejection"},void setTimeout(()=>this.toast.show=!1,3e3);try{this.loading=!0,this.showRejectionModal=!1;const e=this.currentApprovalStage,t=(this.getUserRole()||"").toLowerCase();let s;if(this.getRequestId,this.rejectionReason,"hod"===e&&["head_of_department","hod","department_head","head_department","hod_user","head_of_dept"].includes(t))s=await _i.A.updateHodApproval(this.getRequestId,{status:"rejected",comments:this.rejectionReason});else if("divisional"===e&&["divisional_director"].includes(t)){const e=this.currentUser?.name||"";s=await Ii.divisionalDirectorReject(this.getRequestId,{divisionalDirectorName:e,rejectionReason:this.rejectionReason,rejectionDate:(new Date).toISOString().slice(0,10)})}else if("ict_director"===e&&["ict_director","dict"].includes(t))s=await Ii.ictDirectorReject(this.getRequestId,{ictDirectorName:this.currentUser?.name||"",rejectionReason:this.rejectionReason,rejectionDate:(new Date).toISOString().slice(0,10)});else{if("head_it"!==e||!["head_it","head_of_it"].includes(t))throw new Error("You do not have permission to reject at this stage");s=await Ii.headItReject(this.getRequestId,{headItName:this.currentUser?.name||"",rejectionReason:this.rejectionReason,rejectionDate:(new Date).toISOString().slice(0,10)})}if(!s.success)throw new Error(s.error||"Failed to reject request");this.toast={show:!0,message:"Request rejected successfully"},setTimeout(()=>{this.toast.show=!1,["ict_director","dict"].includes(t)?this.goBackToDictRequests():["head_it","head_of_it"].includes(t)?this.goBackToHeadItRequests():["divisional_director"].includes(t)?this.goBackToDivisionalRequests():this.goBackToRequests()},2e3)}catch(e){console.error("Error rejecting request:",e),this.toast={show:!0,message:`Error rejecting request: ${e.message}`},setTimeout(()=>this.toast.show=!1,3e3)}finally{this.loading=!1,this.rejectionReason=""}},updateRoleCommentsLocally(e,t){try{if(!this.requestData||!t)return;const s=String(t).trim();if(!s)return;const a=(new Date).toISOString();switch(e){case"hod":this.requestData.hod_comments=s,this.requestData.approvals=this.requestData.approvals||{},this.requestData.approvals.hod=this.requestData.approvals.hod||{},this.requestData.approvals.hod.comments=s,this.requestData.hod_approved_at=this.requestData.hod_approved_at||a;break;case"divisional":this.requestData.divisional_comments=s,this.requestData.approvals=this.requestData.approvals||{},this.requestData.approvals.divisionalDirector=this.requestData.approvals.divisionalDirector||{},this.requestData.approvals.divisionalDirector.comments=s,this.requestData.divisional_approved_at=this.requestData.divisional_approved_at||a;break;case"ict_director":this.requestData.ict_director_comments=s,this.requestData.dict_comments=s,this.requestData.approvals=this.requestData.approvals||{},this.requestData.approvals.directorICT=this.requestData.approvals.directorICT||{},this.requestData.approvals.directorICT.comments=s,this.requestData.ict_director_approved_at=this.requestData.ict_director_approved_at||a;break;case"head_it":this.requestData.head_it_comments=s,this.requestData.implementation=this.requestData.implementation||{},this.requestData.implementation.headIT=this.requestData.implementation.headIT||{},this.requestData.implementation.headIT.comments=s,this.requestData.head_it_approved_at=this.requestData.head_it_approved_at||a;break;default:break}this.requestData.updated_at=a,this.$forceUpdate()}catch(s){}},async approveIctOfficerImplementation(){if(!this.ictOfficerSignaturePreview&&!this.form.implementation.ictOfficer.signature)return this.toast={show:!0,message:"Please upload your signature before approving the implementation."},void setTimeout(()=>this.toast.show=!1,4e3);this.processing=!0;try{const e={ict_officer_name:this.currentUser?.name||"ICT Officer",approved_date:this.form.implementation.ictOfficer.date||(new Date).toISOString().slice(0,10),comments:this.form.comments||"",status:"implemented"},t=await Ii.ictOfficerApprove(this.getRequestId,e);if(!t||!t.success)throw new Error(t?.error||"Failed to approve implementation");this.toast={show:!0,message:"Implementation approved successfully."},setTimeout(()=>{this.toast.show=!1,this.$router.push("/ict-dashboard/access-requests")},1500)}catch(e){console.error("Error approving ICT Officer implementation:",e),this.toast={show:!0,message:`Error approving implementation: ${e.message}`},setTimeout(()=>this.toast.show=!1,4e3)}finally{this.processing=!1}},proceedToUserSecurityAccess(){this.showIctOfficerConfirmation=!1,this.$router.push({name:"UserSecurityAccess",params:{id:this.getRequestId},query:{role:"ict_officer"}})},cancelRejectRequest(){this.showRejectionModal=!1,this.rejectionReason=""},goBackToRequests(){try{this.$router.push({name:"HODCombinedRequestList",path:"/hod-dashboard/combined-requests",query:{from:"approval_done"}})}catch(e){console.error("Error navigating back to requests:",e),this.$router.push("/hod-dashboard/combined-requests?from=approval_done")}},goToRequestDetails(){try{this.getRequestId,this.$router.push({path:"/request-details",query:{id:this.getRequestId,type:"combined_access"}})}catch(e){console.error("Error navigating to request details:",e),this.$router.push(`/request-details?id=${this.getRequestId}&type=combined_access`)}},triggerFileUpload(){this.$refs.signatureInput.click()},onSignatureChange(e){const t=e.target.files[0];if(this.form.shared.signature=t||null,!t)return this.signaturePreview="",void(this.signatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearSignature();if(this.signatureFileName=t.name,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.signaturePreview=e.result},e.readAsDataURL(t)}else this.signaturePreview="pdf"},isImage(e){return"string"===typeof e&&"pdf"!==e},clearSignature(){this.form.shared.signature=null,this.signaturePreview="",this.signatureFileName="",this.$refs.signatureInput&&(this.$refs.signatureInput.value="")},showNotification(e){alert(e)},showSignatureUploadSuccess(e){this.toast={show:!0,message:`${e} signature uploaded successfully! You can now approve or reject this request.`},setTimeout(()=>this.toast.show=!1,4e3)},showToast(e,t="success"){this.toast={show:!0,message:e,type:t},setTimeout(()=>{this.toast.show=!1},4e3)},getApprovalDateFormatted(e){if(!this.requestData)return"Date unavailable";const t={hod:this.requestData.approvals?.hod?.date||this.requestData.approvals?.hod?.approved_at||this.requestData.hod_approved_at,divisional:this.requestData.approvals?.divisionalDirector?.date||this.requestData.approvals?.divisionalDirector?.approved_at||this.requestData.divisional_approved_at,ict_director:this.requestData.approvals?.directorICT?.date||this.requestData.approvals?.directorICT?.approved_at||this.requestData.dict_approved_at,head_it:this.requestData.implementation?.headIT?.date||this.requestData.implementation?.headIT?.approved_at||this.requestData.head_it_approved_at,ict_officer:this.requestData.implementation?.ictOfficer?.date||this.requestData.implementation?.ictOfficer?.approved_at||this.requestData.ict_officer_approved_at};let s=t[e];if(!s)try{const t={hod:this.requestData.approvals?.hod?.name||this.requestData.hod_name,divisional:this.requestData.approvals?.divisionalDirector?.name||this.requestData.divisional_director_name,ict_director:this.requestData.approvals?.directorICT?.name||this.requestData.dict_name,head_it:this.requestData.implementation?.headIT?.name||this.requestData.head_it_name,ict_officer:this.requestData.implementation?.ictOfficer?.name||this.requestData.ict_officer_name},a=String(t[e]||"").trim().toLowerCase(),r=e=>e?.signed_at||e?.created_at||e?.timestamp;let i=(this.signatureHistory||[]).find(e=>String(e.user_name||e.name||"").trim().toLowerCase()===a);if(!i){const t=this.viewerStage()===e,a=(this.currentUser?.name||"").trim().toLowerCase();t&&a&&(i=(this.signatureHistory||[]).find(e=>String(e.user_name||e.name||"").trim().toLowerCase()===a),!i&&this.hasUserSigned&&this.lastSignedAt&&(s=this.lastSignedAt))}!s&&i&&(s=r(i))}catch(a){}if(!s)return"Date unavailable";try{const e=new Date(s);return isNaN(e.getTime())?"Date unavailable":e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(r){return console.warn("Error formatting approval date for",e,r),"Date unavailable"}},populateDivisionalDirectorDateFromHod(){if(!this.requestData)return;const e=(this.getUserRole()||"").toLowerCase(),t=["divisional_director"].includes(e);if(!t||!this.isReviewMode)return;const s=this.requestData.approvals?.hod?.date||this.requestData.approvals?.hod?.approved_at||this.requestData.hod_approved_at||null;if(s)try{const e=new Date(s);if(isNaN(e.getTime()))return;const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=`${t}-${a}-${r}`;this.form.approvals.hod.date||(this.form.approvals.hod.date=i)}catch(a){console.warn("Error auto-populating HOD date for Divisional Director view:",a)}},triggerHodSignatureUpload(){this.$refs.hodSignatureInput.click()},onHodSignatureChange(e){const t=e.target.files[0];if(this.form.approvals.hod.signature=t||null,!t)return this.hodSignaturePreview="",void(this.hodSignatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearHodSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearHodSignature();this.hodSignatureFileName=t.name;const a=new Date,r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0");if(this.form.approvals.hod.date=`${r}-${i}-${o}`,t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.hodSignaturePreview=e.result,this.showSignatureUploadSuccess("HOD")},e.readAsDataURL(t)}else this.hodSignaturePreview="pdf",this.showSignatureUploadSuccess("HOD")},clearHodSignature(){this.form.approvals.hod.signature=null,this.hodSignaturePreview="",this.hodSignatureFileName="",this.$refs.hodSignatureInput&&(this.$refs.hodSignatureInput.value="")},triggerDivDirectorSignatureUpload(){this.$refs.divDirectorSignatureInput.click()},onDivDirectorSignatureChange(e){const t=e.target.files[0];if(this.form.approvals.divisionalDirector.signature=t||null,!t)return this.divDirectorSignaturePreview="",void(this.divDirectorSignatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearDivDirectorSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearDivDirectorSignature();if(this.divDirectorSignatureFileName=t.name,this.form.approvals.divisionalDirector.date=(new Date).toISOString().slice(0,10),t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.divDirectorSignaturePreview=e.result,this.showSignatureUploadSuccess("Divisional Director")},e.readAsDataURL(t)}else this.divDirectorSignaturePreview="pdf",this.showSignatureUploadSuccess("Divisional Director")},clearDivDirectorSignature(){this.form.approvals.divisionalDirector.signature=null,this.divDirectorSignaturePreview="",this.divDirectorSignatureFileName="",this.$refs.divDirectorSignatureInput&&(this.$refs.divDirectorSignatureInput.value="")},triggerDirectorICTSignatureUpload(){this.$refs.directorICTSignatureInput.click()},onDirectorICTSignatureChange(e){const t=e.target.files[0];if(this.form.approvals.directorICT.signature=t||null,!t)return this.directorICTSignaturePreview="",void(this.directorICTSignatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearDirectorICTSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearDirectorICTSignature();if(this.directorICTSignatureFileName=t.name,this.form.approvals.directorICT.date=(new Date).toISOString().slice(0,10),t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.directorICTSignaturePreview=e.result},e.readAsDataURL(t)}else this.directorICTSignaturePreview="pdf"},clearDirectorICTSignature(){this.form.approvals.directorICT.signature=null,this.directorICTSignaturePreview="",this.directorICTSignatureFileName="",this.$refs.directorICTSignatureInput&&(this.$refs.directorICTSignatureInput.value="")},triggerHeadITSignatureUpload(){this.$refs.headITSignatureInput.click()},onHeadITSignatureChange(e){const t=e.target.files[0];if(this.form.implementation.headIT.signature=t||null,!t)return this.headITSignaturePreview="",void(this.headITSignatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearHeadITSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearHeadITSignature();if(this.headITSignatureFileName=t.name,this.form.implementation.headIT.date=(new Date).toISOString().slice(0,10),t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.headITSignaturePreview=e.result,this.showSignatureUploadSuccess("Head of IT")},e.readAsDataURL(t)}else this.headITSignaturePreview="pdf",this.showSignatureUploadSuccess("Head of IT")},clearHeadITSignature(){this.form.implementation.headIT.signature=null,this.headITSignaturePreview="",this.headITSignatureFileName="",this.$refs.headITSignatureInput&&(this.$refs.headITSignatureInput.value="")},triggerIctOfficerSignatureUpload(){this.$refs.ictOfficerSignatureInput.click()},onIctOfficerSignatureChange(e){const t=e.target.files[0];if(this.form.implementation.ictOfficer.signature=t||null,!t)return this.ictOfficerSignaturePreview="",void(this.ictOfficerSignatureFileName="");const s=["image/png","image/jpeg","image/jpg","application/pdf"];if(!s.includes(t.type))return this.showNotification("Please select a valid file (PNG, JPG, or PDF)"),void this.clearIctOfficerSignature();if(t.size>5242880)return this.showNotification("File size must be less than 5MB"),void this.clearIctOfficerSignature();if(this.ictOfficerSignatureFileName=t.name,this.form.implementation.ictOfficer.date=(new Date).toISOString().slice(0,10),t.type.startsWith("image/")){const e=new FileReader;e.onload=()=>{this.ictOfficerSignaturePreview=e.result},e.readAsDataURL(t)}else this.ictOfficerSignaturePreview="pdf"},clearIctOfficerSignature(){this.form.implementation.ictOfficer.signature=null,this.ictOfficerSignaturePreview="",this.ictOfficerSignatureFileName="",this.$refs.ictOfficerSignatureInput&&(this.$refs.ictOfficerSignatureInput.value="")},debugAutoPopulation(){this.currentUser,this.isReviewMode,this.currentApprovalStage,this.isHodApprovalEditable,this.form.approvals.hod.name,this.requestData,this.currentUser?.name?(this.currentUser.role||this.currentUser.user_role,this.populateBasedOnUserRole(this.currentUser)):console.error("No current user data available!")},formatDateForInput(e){if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"";const s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${s}-${a}-${r}`}catch(t){return console.warn("Error formatting date for input:",e,t),""}},formatCommentDate(e){if(!e)return"Date not available";try{const t=new Date(e);if(isNaN(t.getTime())){const t=Date.parse(e);return isNaN(t)?"Invalid date format":new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.warn("Error formatting comment date:",e,t),"Date format error"}},triggerHeadItNamePopulationIfNeeded(){if(!this.currentUser||!this.currentUser.name||!this.isReviewMode)return;const e=(this.getUserRole()||"").toLowerCase(),t=["head_it","head_of_it","ict_head","it_head"].includes(e),s="head_it"===this.currentApprovalStage,a=this.isHeadItApprovalEditable;this.currentApprovalStage,this.form.implementation.headIT.name,this.currentUser.name,t&&s&&a&&(this.form.implementation.headIT.name?this.form.implementation.headIT.name:(this.currentUser.name,this.populateApproverName("head_it")))},debugHeadItStatus(){this.currentUser,this.currentUser,this.getUserRole(),this.currentUser,this.getRequestId,this.requestData,this.currentApprovalStage,this.form.implementation.headIT.name,this.form.implementation.headIT.date,this.form.implementation.headIT.signature,this.headITSignaturePreview,this.isReviewMode,this.isHeadItApprovalEditable,this.currentApprovalStage,this.isReviewMode,this.isHeadItApprovalEditable,this.form.implementation.headIT.signature,this.isReviewMode&&this.isHeadItApprovalEditable&&this.form.implementation.headIT.signature},viewerStage(){const e=(this.getUserRole()||"").toLowerCase(),t={head_of_department:"hod",hod:"hod",head_department:"hod",divisional_director:"divisional",director_divisional:"divisional",ict_director:"ict_director",director_ict:"ict_director",head_it:"head_it",head_of_it:"head_it",ict_head:"head_it",it_head:"head_it",ict_officer:"ict_officer",officer_ict:"ict_officer"},s=t[e]||"";return Object.keys(t),s},viewerRank(){return this.rankForStage(this.viewerStage())},rankForStage(e){const t={hod:1,divisional:2,ict_director:3,head_it:4,ict_officer:5};return t[e]||0},viewerAfter(e){const t=this.rankForStage(e),s=this.viewerRank(),a=t>0&&s>t;return this.viewerStage(),a},async getCurrentUser(){try{const e=await yi["default"].getCurrentUser();if(e&&e.success){e.data;let t=null;e.data&&e.data.data&&e.data.data.name?t=e.data.data:e.data&&e.data.user&&e.data.user.name?t=e.data.user:e.data&&e.data.name?t=e.data:(console.error("âŒ User data structure not recognized. Full response:",JSON.stringify(e,null,2)),console.error("âŒ response.data content:",e.data)),t&&t.name?(this.currentUser=t,t.name,t.id,t.email,t.role||t.user_role):console.error("âŒ No valid user data found:",t)}else console.warn("âŒ Failed to get current user:",e?.message||"Unknown error")}catch(e){console.error("ðŸ’¥ Error fetching current user:",e),console.error("ðŸ’¥ Error details:",{message:e.message,response:e.response,status:e.response?.status,data:e.response?.data})}},tryGetUserFromLocalStorage(){try{const e=localStorage.getItem("user_data");if(e){const t=JSON.parse(e);t&&t.name?(this.currentUser=t,this.currentUser.name):t&&t.user&&t.user.name&&(this.currentUser=t.user,this.currentUser.name)}}catch(e){console.error("âŒ Error parsing localStorage user_data:",e)}},tryGetUserFromStore(){try{const e=this.authStore.user||this.authStore.currentUser;this.authStore,this.authStore&&Object.keys(this.authStore),e&&e.name&&(this.currentUser=e,this.currentUser.name,e.role||e.user_role)}catch(e){console.error("âŒ Error accessing Pinia store:",e)}},populateBasedOnUserRole(e){if(!e||!e.name)return;const t=e.role||e.user_role||"";e.name;this.form.approvals.hod.name="",this.form.approvals.divisionalDirector.name="",this.form.approvals.directorICT.name="",this.form.implementation.headIT.name="",this.form.implementation.ictOfficer.name="";const s={head_of_department:"hod",hod:"hod",head_department:"hod",divisional_director:"divisional",director_divisional:"divisional",ict_director:"ict_director",director_ict:"ict_director",head_it:"head_it",head_of_it:"head_it",ict_officer:"ict_officer",officer_ict:"ict_officer"},a=t.toLowerCase().replace(/[\s_-]+/g,"_"),r=s[a];if(r){const e=this.isApprovalStageEditable(r);e&&this.populateApproverName(r),this.form.approvals.hod.name,this.form.approvals.divisionalDirector.name,this.form.approvals.directorICT.name,this.form.implementation.headIT.name,this.form.implementation.ictOfficer.name}else Object.keys(s),this.isReviewMode&&(this.isHodApprovalEditable?this.populateApproverName("hod"):this.isDivisionalApprovalEditable?this.populateApproverName("divisional"):this.isIctDirectorApprovalEditable?this.populateApproverName("ict_director"):this.isHeadItApprovalEditable?this.populateApproverName("head_it"):this.isIctOfficerApprovalEditable&&this.populateApproverName("ict_officer"))},isApprovalStageEditable(e){const t={hod:this.isHodApprovalEditable,divisional:this.isDivisionalApprovalEditable,ict_director:this.isIctDirectorApprovalEditable,head_it:this.isHeadItApprovalEditable,ict_officer:this.isIctOfficerApprovalEditable};return t[e]||!1},populateApproverName(e){if(!this.currentUser||!this.currentUser.name)return this.currentUser,this.currentUser,void this.currentUser;const t=this.currentUser.name;switch(this.currentUser.id,this.currentUser.email,this.currentUser.pf_number,e){case"hod":this.form.approvals.hod.name=t;break;case"divisional":this.form.approvals.divisionalDirector.name=t;break;case"ict_director":this.form.approvals.directorICT.name=t,this.form.approvals.directorICT.date||(this.form.approvals.directorICT.date=(new Date).toISOString().slice(0,10)),this.form.approvals.directorICT.date;break;case"head_it":this.form.implementation.headIT.name=t,this.form.implementation.headIT.date||(this.form.implementation.headIT.date=(new Date).toISOString().slice(0,10)),this.form.implementation.headIT.date;break;case"ict_officer":this.form.implementation.ictOfficer.name=t;break;default:console.warn(`Unknown approval stage: ${e}`)}},onHeadItApproveSuccess(){this.showHeadItApproveSuccessModal=!0},redirectToAssignIctOfficer(){this.showHeadItApproveSuccessModal=!1;const e=this.getRequestId||this.requestData?.id||this.$route.params.id;e&&this.$router.push(`/head_of_it-dashboard/select-ict-officer/${e}`)},getLoadingTitle(){return this.isReviewMode?"Loading Request Details":"Loading Access Request"},getLoadingSubtitle(){return this.isReviewMode?"Retrieving request data for review...":"Please wait..."}}};const Ti=(0,gi.A)(Ri,[["render",ci],["__scopeId","data-v-5bf52c48"]]);var Ai=Ti},9101:function(e,t,s){s.d(t,{A:function(){return p}});var a=s(5796);const r={class:"bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 text-white py-4 px-6 border-t border-blue-600/40 shadow-lg backdrop-blur-sm relative",style:{position:"relative","z-index":"1","margin-top":"auto"}},i={class:"flex flex-col md:flex-row justify-between items-center"},o={class:"text-base text-blue-100 flex items-center space-x-2"},n={class:"font-medium"};function l(e,t,s,l,d,c){return(0,a.uX)(),(0,a.CE)("footer",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[t[0]||(t[0]=(0,a.Lk)("div",{class:"w-6 h-6 bg-blue-600/30 rounded-full flex items-center justify-center border border-blue-500/40"},[(0,a.Lk)("i",{class:"fas fa-hospital text-blue-300 text-sm"})],-1)),(0,a.Lk)("p",n," Â© "+(0,a.v_)(c.currentYear)+" Muhimbili National Hospital. All rights reserved. ",1)])])])}var d={name:"AppFooter",computed:{currentYear(){return(new Date).getFullYear()}}},c=s(1241);const u=(0,c.A)(d,[["render",l],["__scopeId","data-v-2f68623d"]]);var p=u}}]);
//# sourceMappingURL=3679.4aef459a.js.map