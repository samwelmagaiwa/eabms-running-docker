"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[1256],{416:function(e,t,a){a.r(t),a.d(t,{default:function(){return ye}});var l=a(5796);const s={class:"flex flex-col h-screen"},i={class:"flex flex-1 overflow-hidden"},o={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},r={class:"absolute inset-0 overflow-hidden"},d={class:"absolute inset-0 opacity-5"},n={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"absolute inset-0"},u={class:"max-w-full mx-auto relative z-10"},v={class:"medical-glass-card rounded-b-3xl overflow-hidden"},f={class:"p-6 space-y-6"},b={class:"flex justify-between items-center"},x={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},m={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm"},p={class:"flex items-center"},g={class:"text-3xl md:text-4xl font-extrabold text-white"},k={class:"medical-card bg-gradient-to-r from-green-600/25 to-emerald-600/25 border-2 border-green-400/40 p-4 rounded-xl backdrop-blur-sm"},y={class:"flex items-center"},h={class:"text-3xl md:text-4xl font-extrabold text-white"},w={class:"medical-card bg-gradient-to-r from-yellow-600/25 to-orange-600/25 border-2 border-yellow-400/40 p-4 rounded-xl backdrop-blur-sm"},L={class:"flex items-center"},_={class:"text-3xl md:text-4xl font-extrabold text-white"},D={class:"medical-card bg-gradient-to-r from-red-600/25 to-pink-600/25 border-2 border-red-400/40 p-4 rounded-xl backdrop-blur-sm"},C={class:"flex items-center"},E={class:"text-3xl md:text-3xl font-extrabold text-white"},A={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-4 rounded-xl backdrop-blur-sm"},S={class:"flex flex-col md:flex-row gap-4 items-center"},M={class:"flex-1"},F={class:"relative"},I={class:"flex gap-2"},R=["disabled"],T={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 rounded-xl backdrop-blur-sm overflow-hidden"},q={class:"overflow-x-auto"},N={class:"w-full"},Q={class:"divide-y divide-blue-300/20"},K={class:"px-4 py-3"},j={class:"text-base md:text-lg font-bold text-white"},U={key:0,class:"text-base text-blue-200"},V={class:"px-4 py-3"},B={class:"text-sm text-blue-200 font-mono"},O={class:"px-4 py-3"},X={class:"text-sm font-bold text-white"},$={class:"px-4 py-3"},W={class:"text-sm font-bold text-green-300"},z={class:"px-4 py-3"},H={class:"text-sm font-bold text-yellow-300"},J={class:"px-4 py-3"},G={class:"px-4 py-3"},P={class:"px-4 py-3"},Y={class:"flex space-x-2"},Z=["onClick"],ee=["onClick"],te={key:0,class:"text-center py-8"},ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},le={class:"bg-white rounded-xl shadow-2xl max-w-md w-full"},se={class:"p-6"},ie={class:"flex justify-between items-center mb-4"},oe={class:"text-xl font-bold text-gray-800"},re={key:0,class:"flex items-center"},de={class:"flex justify-end space-x-3 pt-4"},ne=["disabled"];function ce(e,t,a,ce,ue,ve){const fe=(0,l.g2)("Header"),be=(0,l.g2)("ModernSidebar"),xe=(0,l.g2)("UnifiedLoadingBanner"),me=(0,l.g2)("AppFooter");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(fe),(0,l.Lk)("div",i,[(0,l.bF)(be),(0,l.Lk)("main",o,[(0,l.bF)(xe,{show:ce.isLoading,loadingTitle:"Loading Device Inventory",loadingSubtitle:"Synchronizing device list and inventory statistics...",departmentTitle:"DEVICE INVENTORY MANAGEMENT",forceSpin:!0},null,8,["show"]),(0,l.Lk)("div",r,[(0,l.Lk)("div",d,[(0,l.Lk)("div",n,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(48,e=>(0,l.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,l.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,l.Lk)("div",c,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(15,e=>(0,l.Lk)("div",{key:e,class:"absolute text-white opacity-10 animate-float",style:(0,l.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:20*Math.random()+10+"px"})},[(0,l.Lk)("i",{class:(0,l.C4)(["fas",["fa-laptop","fa-tv","fa-desktop","fa-keyboard","fa-mouse"][Math.floor(5*Math.random())]])},null,2)],4)),64))])]),(0,l.Lk)("div",u,[t[28]||(t[28]=(0,l.Fv)('<div class="medical-glass-card rounded-t-3xl p-4 mb-0 border-b border-blue-300/30" data-v-ff017a44><div class="flex justify-between items-center" data-v-ff017a44><div class="w-20 h-20 mr-6 transform hover:scale-110 transition-transform duration-300" data-v-ff017a44><div class="w-full h-full bg-gradient-to-br from-blue-500/20 to-teal-500/20 rounded-2xl backdrop-blur-sm border-2 border-blue-300/40 flex items-center justify-center shadow-2xl hover:shadow-blue-500/25" data-v-ff017a44><img src="/assets/images/ngao2.png" alt="National Shield" class="max-w-16 max-h-16 object-contain" data-v-ff017a44></div></div><div class="text-center flex-1" data-v-ff017a44><h1 class="text-3xl font-bold text-white mb-4 tracking-wide drop-shadow-lg animate-fade-in" data-v-ff017a44> MUHIMBILI NATIONAL HOSPITAL </h1><div class="relative inline-block mb-4" data-v-ff017a44><div class="bg-gradient-to-r from-orange-600 to-red-700 text-white px-8 py-3 rounded-full text-lg font-bold shadow-2xl transform hover:scale-105 transition-all duration-300 border-2 border-orange-400/60" data-v-ff017a44><span class="relative z-10 flex items-center gap-2" data-v-ff017a44><i class="fas fa-laptop" data-v-ff017a44></i> BORROWED DEVICE MONITORING </span></div></div><h2 class="text-xl font-bold text-blue-100 tracking-wide drop-shadow-md animate-fade-in-delay" data-v-ff017a44> ICT EQUIPMENT INVENTORY MANAGEMENT </h2></div><div class="w-20 h-20 ml-6 transform hover:scale-110 transition-transform duration-300" data-v-ff017a44><div class="w-full h-full bg-gradient-to-br from-teal-500/20 to-blue-500/20 rounded-2xl backdrop-blur-sm border-2 border-teal-300/40 flex items-center justify-center shadow-2xl hover:shadow-teal-500/25" data-v-ff017a44><img src="/assets/images/logo2.png" alt="Muhimbili Logo" class="max-w-16 max-h-16 object-contain" data-v-ff017a44></div></div></div></div>',1)),(0,l.Lk)("div",v,[(0,l.Lk)("div",f,[(0,l.Lk)("div",b,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ce.goBack&&ce.goBack(...e)),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[13]||(t[13]=[(0,l.Lk)("i",{class:"fas fa-arrow-left mr-2"},null,-1),(0,l.eW)(" Back to Dashboard ",-1)])]),(0,l.Lk)("button",{onClick:t[1]||(t[1]=e=>ce.showAddDeviceModal=!0),class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-600 to-red-700 text-white rounded-lg hover:from-orange-700 hover:to-red-800 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[14]||(t[14]=[(0,l.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,l.eW)(" Add New Device ",-1)])])]),(0,l.Lk)("div",x,[(0,l.Lk)("div",m,[(0,l.Lk)("div",p,[t[15]||(t[15]=(0,l.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-lg flex items-center justify-center shadow-lg mr-4"},[(0,l.Lk)("i",{class:"fas fa-laptop text-white text-xl"})],-1)),(0,l.Lk)("div",null,[(0,l.Lk)("p",g,(0,l.v_)(ce.statistics.total_devices||0),1)])])]),(0,l.Lk)("div",k,[(0,l.Lk)("div",y,[t[16]||(t[16]=(0,l.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center shadow-lg mr-4"},[(0,l.Lk)("i",{class:"fas fa-check-circle text-white text-xl"})],-1)),(0,l.Lk)("div",null,[(0,l.Lk)("p",h,(0,l.v_)(ce.statistics.available_inventory||0),1)])])]),(0,l.Lk)("div",w,[(0,l.Lk)("div",L,[t[17]||(t[17]=(0,l.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-lg flex items-center justify-center shadow-lg mr-4"},[(0,l.Lk)("i",{class:"fas fa-hand-holding text-white text-xl"})],-1)),(0,l.Lk)("div",null,[(0,l.Lk)("p",_,(0,l.v_)(ce.statistics.borrowed_inventory||0),1)])])]),(0,l.Lk)("div",D,[(0,l.Lk)("div",C,[t[19]||(t[19]=(0,l.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-600 rounded-lg flex items-center justify-center shadow-lg mr-4"},[(0,l.Lk)("i",{class:"fas fa-exclamation-triangle text-white text-xl"})],-1)),(0,l.Lk)("div",null,[t[18]||(t[18]=(0,l.Lk)("p",{class:"text-sm md:text-sm font-bold text-red-100"},"Out of Stock",-1)),(0,l.Lk)("p",E,(0,l.v_)(ce.statistics.out_of_stock_devices||0),1)])])])]),(0,l.Lk)("div",A,[(0,l.Lk)("div",S,[(0,l.Lk)("div",M,[(0,l.Lk)("div",F,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>ce.searchQuery=e),type:"text",placeholder:"Search devices...",class:"w-full px-4 py-2 pl-10 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm text-base md:text-lg"},null,512),[[l.Jo,ce.searchQuery]]),t[20]||(t[20]=(0,l.Lk)("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-300/50"},null,-1))])]),(0,l.Lk)("div",I,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>ce.statusFilter=e),class:"px-4 py-2 bg-white/15 border border-blue-300/30 rounded-lg focus:border-blue-400 focus:outline-none text-white backdrop-blur-sm text-base md:text-lg"},[...t[21]||(t[21]=[(0,l.Fv)('<option value="" data-v-ff017a44>All Status</option><option value="available" data-v-ff017a44>Available</option><option value="low_stock" data-v-ff017a44>Low Stock</option><option value="out_of_stock" data-v-ff017a44>Out of Stock</option><option value="inactive" data-v-ff017a44>Inactive</option>',5)])],512),[[l.u1,ce.statusFilter]]),(0,l.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>ce.fixQuantities&&ce.fixQuantities(...e)),disabled:ce.isFixingQuantities,class:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg hover:from-yellow-700 hover:to-orange-700 transition-all duration-300 disabled:opacity-50",title:"Fix quantity inconsistencies"},[(0,l.Lk)("i",{class:(0,l.C4)(ce.isFixingQuantities?"fas fa-spinner fa-spin":"fas fa-wrench")},null,2)],8,R),(0,l.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>ce.loadDevices&&ce.loadDevices(...e)),class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300"},[...t[22]||(t[22]=[(0,l.Lk)("i",{class:"fas fa-sync-alt"},null,-1)])])])])]),(0,l.Lk)("div",T,[t[27]||(t[27]=(0,l.Lk)("div",{class:"p-4 border-b border-blue-300/30"},[(0,l.Lk)("h3",{class:"text-2xl md:text-3xl font-extrabold text-white flex items-center"},[(0,l.Lk)("i",{class:"fas fa-list mr-2 text-blue-300"}),(0,l.eW)(" Device Inventory ")])],-1)),(0,l.Lk)("div",q,[(0,l.Lk)("table",N,[t[25]||(t[25]=(0,l.Lk)("thead",{class:"bg-blue-600/30"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Device Name "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Code "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Total "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Available "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Borrowed "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Status "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Return Status "),(0,l.Lk)("th",{class:"px-4 py-3 text-left text-sm md:text-base font-semibold text-blue-100 uppercase tracking-wider"}," Actions ")])],-1)),(0,l.Lk)("tbody",Q,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(ce.filteredDevices,e=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id,class:"hover:bg-white/5 transition-colors duration-200"},[(0,l.Lk)("td",K,[(0,l.Lk)("div",null,[(0,l.Lk)("div",j,(0,l.v_)(e.device_name),1),e.description?((0,l.uX)(),(0,l.CE)("div",U,(0,l.v_)(e.description),1)):(0,l.Q3)("",!0)])]),(0,l.Lk)("td",V,[(0,l.Lk)("span",B,(0,l.v_)(e.device_code),1)]),(0,l.Lk)("td",O,[(0,l.Lk)("span",X,(0,l.v_)(e.total_quantity),1)]),(0,l.Lk)("td",$,[(0,l.Lk)("span",W,(0,l.v_)(e.available_quantity),1)]),(0,l.Lk)("td",z,[(0,l.Lk)("span",H,(0,l.v_)(e.borrowed_quantity),1)]),(0,l.Lk)("td",J,[(0,l.Lk)("span",{class:(0,l.C4)([ce.getStatusClass(e.availability_status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium"])},[(0,l.Lk)("i",{class:(0,l.C4)([ce.getStatusIcon(e.availability_status),"mr-1"])},null,2),(0,l.eW)(" "+(0,l.v_)(ce.getStatusText(e.availability_status)),1)],2)]),(0,l.Lk)("td",G,[(0,l.Lk)("span",{class:(0,l.C4)([ce.getReturnStatusClass(e.return_status_summary),"inline-flex items-center px-2.5 py-0.5 rounded-full text-sm font-medium"])},[(0,l.Lk)("i",{class:(0,l.C4)([ce.getReturnStatusIcon(e.return_status_summary),"mr-1"])},null,2),(0,l.eW)(" "+(0,l.v_)(ce.getReturnStatusText(e.return_status_summary,e.unreturned_count,e.compromised_count)),1)],2)]),(0,l.Lk)("td",P,[(0,l.Lk)("div",Y,[(0,l.Lk)("button",{onClick:t=>ce.editDevice(e),class:"text-blue-300 hover:text-blue-100 transition-colors duration-200",title:"Edit Device"},[...t[23]||(t[23]=[(0,l.Lk)("i",{class:"fas fa-edit"},null,-1)])],8,Z),(0,l.Lk)("button",{onClick:t=>ce.deleteDevice(e),class:"text-red-300 hover:text-red-100 transition-colors duration-200",title:"Delete Device"},[...t[24]||(t[24]=[(0,l.Lk)("i",{class:"fas fa-trash"},null,-1)])],8,ee)])])]))),128))])]),0===ce.filteredDevices.length?((0,l.uX)(),(0,l.CE)("div",te,[...t[26]||(t[26]=[(0,l.Lk)("i",{class:"fas fa-laptop text-blue-300/50 text-4xl mb-4"},null,-1),(0,l.Lk)("p",{class:"text-blue-200"},"No devices found",-1)])])):(0,l.Q3)("",!0)])])])])]),(0,l.bF)(me)])]),ce.showAddDeviceModal||ce.showEditDeviceModal?((0,l.uX)(),(0,l.CE)("div",ae,[(0,l.Lk)("div",le,[(0,l.Lk)("div",se,[(0,l.Lk)("div",ie,[(0,l.Lk)("h3",oe,(0,l.v_)(ce.showEditDeviceModal?"Edit Device":"Add New Device"),1),(0,l.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>ce.closeModal&&ce.closeModal(...e)),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...t[29]||(t[29]=[(0,l.Lk)("i",{class:"fas fa-times text-xl"},null,-1)])])]),(0,l.Lk)("form",{onSubmit:t[12]||(t[12]=(0,l.D$)((...e)=>ce.saveDevice&&ce.saveDevice(...e),["prevent"])),class:"space-y-4"},[(0,l.Lk)("div",null,[t[30]||(t[30]=(0,l.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"},"Device Name *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>ce.deviceForm.device_name=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter device name"},null,512),[[l.Jo,ce.deviceForm.device_name]])]),(0,l.Lk)("div",null,[t[31]||(t[31]=(0,l.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"},"Description",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>ce.deviceForm.description=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter device description"},null,512),[[l.Jo,ce.deviceForm.description]])]),(0,l.Lk)("div",null,[t[32]||(t[32]=(0,l.Lk)("label",{class:"block text-base font-medium text-gray-700 mb-2"},"Total Quantity *",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>ce.deviceForm.total_quantity=e),type:"number",min:"0",max:"10000",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter total quantity"},null,512),[[l.Jo,ce.deviceForm.total_quantity,void 0,{number:!0}]])]),ce.showEditDeviceModal?((0,l.uX)(),(0,l.CE)("div",re,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>ce.deviceForm.is_active=e),type:"checkbox",id:"is_active",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[l.lH,ce.deviceForm.is_active]]),t[33]||(t[33]=(0,l.Lk)("label",{for:"is_active",class:"ml-2 block text-sm text-gray-700"}," Active ",-1))])):(0,l.Q3)("",!0),(0,l.Lk)("div",de,[(0,l.Lk)("button",{type:"button",onClick:t[11]||(t[11]=(...e)=>ce.closeModal&&ce.closeModal(...e)),class:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors duration-200"}," Cancel "),(0,l.Lk)("button",{type:"submit",disabled:ce.isSubmitting,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50"},(0,l.v_)(ce.isSubmitting?"Saving...":ce.showEditDeviceModal?"Update":"Create"),9,ne)])],32)])])])):(0,l.Q3)("",!0)])}a(4114),a(8111),a(2489),a(7588);var ue=a(1387),ve=a(5498),fe=a(8966),be=a(9101),xe=a(1445),me=a(1035),pe={name:"DeviceInventoryManagement",components:{Header:ve.A,ModernSidebar:fe.A,AppFooter:be.A,UnifiedLoadingBanner:xe.A},setup(){const e=(0,ue.rd)(),t=(0,l.KR)([]),a=(0,l.KR)({}),s=(0,l.KR)(!1),i=(0,l.KR)(!1),o=(0,l.KR)(!1),r=(0,l.KR)(""),d=(0,l.KR)(""),n=(0,l.KR)(!1),c=(0,l.KR)(!1),u=(0,l.KR)(null),v=(0,l.KR)({device_name:"",description:"",total_quantity:0,is_active:!0}),f=(0,l.EW)(()=>{let e=t.value;if(r.value){const t=r.value.toLowerCase();e=e.filter(e=>e.device_name.toLowerCase().includes(t)||e.device_code.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return d.value&&(e=e.filter(e=>e.availability_status===d.value)),e}),b=async()=>{s.value=!0;try{const e=await me.A.getDevices();e.success?t.value=e.data.data.data||[]:(console.error("Failed to load devices:",e.message),alert("Failed to load devices: "+e.message))}catch(e){console.error("Error loading devices:",e),alert("Error loading devices")}finally{s.value=!1}},x=async()=>{try{const e=await me.A.getStatistics();e.success&&(a.value=e.data.data||{})}catch(e){console.error("Error loading statistics:",e)}},m=async()=>{i.value=!0;try{let e;e=c.value?await me.A.updateDevice(u.value.id,v.value):await me.A.createDevice(v.value),e.success?(k(),await b(),await x(),alert(c.value?"Device updated successfully!":"Device created successfully!")):alert("Error: "+e.message)}catch(e){console.error("Error saving device:",e),alert("Error saving device")}finally{i.value=!1}},p=e=>{u.value=e,v.value={device_name:e.device_name,description:e.description||"",total_quantity:e.total_quantity,is_active:e.is_active},c.value=!0},g=async e=>{if(confirm(`Are you sure you want to delete "${e.device_name}"?`))try{const t=await me.A.deleteDevice(e.id);t.success?(await b(),await x(),alert("Device deleted successfully!")):alert("Error: "+t.message)}catch(t){console.error("Error deleting device:",t),alert("Error deleting device")}},k=()=>{n.value=!1,c.value=!1,u.value=null,v.value={device_name:"",description:"",total_quantity:0,is_active:!0}},y=e=>me.A.getStatusColorClass(e),h=e=>me.A.getStatusDisplayText(e),w=e=>me.A.getStatusIcon(e),L=e=>me.A.getReturnStatusColorClass(e),_=e=>me.A.getReturnStatusIcon(e),D=(e,t=0,a=0)=>me.A.getReturnStatusDisplayText(e,t,a),C=async()=>{if(confirm("This will fix any quantity inconsistencies in the device inventory. Continue?")){o.value=!0;try{const e=await me.A.fixQuantities();if(e.success){const{fixed_count:t,fixed_devices:a}=e.data;if(t>0){let e=`Fixed ${t} device(s) with quantity inconsistencies:\n\n`;a.forEach(t=>{e+=`${t.device_name}:\n`,e+=`  Total: ${t.total_quantity}, Borrowed: ${t.borrowed_quantity}\n`,e+=`  Available: ${t.old_available_quantity} â†’ ${t.new_available_quantity}\n\n`}),alert(e)}else alert("All device quantities are already consistent!");await b(),await x()}else alert("Error: "+e.message)}catch(e){console.error("Error fixing quantities:",e),alert("Error fixing quantities")}finally{o.value=!1}}},E=()=>{e.push("/admin-dashboard")};return(0,l.sV)(async()=>{await b(),await x()}),{devices:t,statistics:a,isLoading:s,isSubmitting:i,isFixingQuantities:o,searchQuery:r,statusFilter:d,showAddDeviceModal:n,showEditDeviceModal:c,deviceForm:v,filteredDevices:f,loadDevices:b,saveDevice:m,editDevice:p,deleteDevice:g,closeModal:k,getStatusClass:y,getStatusText:h,getStatusIcon:w,getReturnStatusClass:L,getReturnStatusIcon:_,getReturnStatusText:D,fixQuantities:C,goBack:E}}},ge=a(1241);const ke=(0,ge.A)(pe,[["render",ce],["__scopeId","data-v-ff017a44"]]);var ye=ke}}]);
//# sourceMappingURL=1256.493b79c2.js.map