"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[4710,8958],{1445:function(e,t,s){s.d(t,{A:function(){return h}});var a=s(5796);const r={key:0,class:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none animate-fade-in"},i={class:"pointer-events-auto w-full max-w-lg mx-auto"},n={class:"relative bg-gradient-to-br from-white/20 via-blue-50/30 to-white/10 border-2 border-blue-300/50 backdrop-blur-xl rounded-3xl p-8 shadow-2xl overflow-hidden"},l={class:"relative z-10"},o={class:"flex items-center justify-center gap-6 mb-6"},d={class:"relative flex flex-col items-center"},c={class:"relative mb-3"},u={class:"text-center"},p={class:"text-white text-2xl font-bold tracking-wide mb-1 drop-shadow-md"},b={class:"text-blue-100 text-lg animate-pulse"},m={class:"text-center border-t border-blue-300/30 pt-4"},f={class:"text-teal-200 text-base font-semibold tracking-wider"};function g(e,t,s,g,v,x){return s.show?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[t[5]||(t[5]=(0,a.Fv)('<div class="absolute inset-0 opacity-10" data-v-94539b4a><div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-slide-across" data-v-94539b4a></div><div class="absolute top-4 left-4 w-16 h-16 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.2);" data-v-94539b4a></div><div class="absolute bottom-4 right-4 w-20 h-20 bg-blue-400/20 rounded-full animate-float" style="animation-delay:1s;" data-v-94539b4a></div><div class="absolute top-1/2 left-8 w-12 h-12 rounded-full animate-float" style="background:rgba(255, 0, 0, 0.15);animation-delay:2s;" data-v-94539b4a></div></div>',1)),(0,a.Lk)("div",l,[(0,a.Lk)("div",o,[t[1]||(t[1]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500/30 to-teal-500/30 rounded-2xl backdrop-blur-sm border-2 border-blue-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/ngao2.png",alt:"National Shield",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-blue-400 to-teal-400 rounded-2xl opacity-20 blur-sm animate-pulse"})],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[t[0]||(t[0]=(0,a.Lk)("div",{class:"rounded-full h-12 w-12 border-2 border-gray-300/20"},null,-1)),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-top-color":"#ff0000","animation-duration":"2s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-bottom-color":"#0000d1","animation-direction":"reverse","animation-duration":"1.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-right-color":"rgba(255, 0, 0, 0.7)","animation-duration":"2.5s"}},null,2),(0,a.Lk)("div",{class:(0,a.C4)(["absolute inset-0 rounded-full h-12 w-12 border-4 border-transparent shadow-lg",s.forceSpin?"always-spin":"animate-spin"]),style:{"border-left-color":"rgba(0, 0, 209, 0.7)","animation-direction":"reverse","animation-duration":"1.8s"}},null,2)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",p,(0,a.v_)(s.loadingTitle),1),(0,a.Lk)("div",b,(0,a.v_)(s.loadingSubtitle),1)])]),t[2]||(t[2]=(0,a.Lk)("div",{class:"relative"},[(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-teal-500/30 to-blue-500/30 rounded-2xl backdrop-blur-sm border-2 border-teal-300/50 flex items-center justify-center shadow-xl hover:scale-105 transition-transform duration-300"},[(0,a.Lk)("img",{src:"/assets/images/logo2.png",alt:"MNH Logo",class:"max-w-12 max-h-12 object-contain drop-shadow-lg"})]),(0,a.Lk)("div",{class:"absolute -inset-1 bg-gradient-to-r from-teal-400 to-blue-400 rounded-2xl opacity-20 blur-sm animate-pulse",style:{"animation-delay":"0.5s"}})],-1))]),(0,a.Lk)("div",m,[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-lg font-black tracking-widest mb-1 drop-shadow-sm",style:{color:"#ff0000"}}," MUHIMBILI NATIONAL HOSPITAL ",-1)),(0,a.Lk)("div",f,(0,a.v_)(s.departmentTitle),1)]),t[4]||(t[4]=(0,a.Fv)('<div class="flex justify-center gap-2 mt-4" data-v-94539b4a><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.1s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#ff0000;animation-delay:0.2s;" data-v-94539b4a></div><div class="w-2 h-2 rounded-full animate-bounce" style="background:#0000d1;animation-delay:0.3s;" data-v-94539b4a></div></div>',1))])])])])):(0,a.Q3)("",!0)}var v={name:"UnifiedLoadingBanner",props:{show:{type:Boolean,default:!0},loadingTitle:{type:String,default:"Loading Requests"},loadingSubtitle:{type:String,default:"Please wait..."},departmentTitle:{type:String,default:"SYSTEM MANAGEMENT"},forceSpin:{type:Boolean,default:!1}}},x=s(1241);const y=(0,x.A)(v,[["render",g],["__scopeId","data-v-94539b4a"]]);var h=y},2442:function(e,t,s){s.r(t),s.d(t,{default:function(){return vs}});s(8111),s(1701);var a=s(5796);const r={class:"flex flex-col h-screen"},i={class:"flex flex-1 overflow-visible"},n={class:"flex-1 p-2 bg-blue-900 min-h-screen overflow-y-auto relative"},l={class:"absolute inset-0 overflow-hidden"},o={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"max-w-13xl mx-auto relative z-10"},u={class:"bg-white/10 rounded-b-lg overflow-visible"},p={class:"p-4 space-y-4"},b={key:0,class:"medical-card bg-gradient-to-r from-red-600/25 to-pink-700/25 border-2 border-red-400/40 p-4 rounded-2xl mb-4"},m={class:"flex items-center space-x-4"},f={class:"flex-1"},g={class:"text-red-100/90 text-base mb-3"},v={class:"flex items-center space-x-4"},x={key:0,class:"bg-red-500/20 px-3 py-1 rounded-full border border-red-400/30"},y={class:"text-red-300 text-sm font-medium"},h={class:"flex flex-col space-y-2"},k={key:1,class:"medical-card bg-gradient-to-r from-yellow-600/25 to-orange-700/25 border-2 border-yellow-400/40 p-4 rounded-2xl mb-4"},_={class:"flex items-center space-x-4"},w={class:"flex flex-col space-y-2"},L={key:2,class:"medical-card bg-gradient-to-r from-green-600/25 to-green-700/25 border-2 border-green-400/40 p-3 rounded-2xl"},q={class:"flex items-center space-x-3"},C={class:"flex-1"},R={class:"text-green-100/90 text-base mb-2"},E={class:"flex items-center space-x-3"},S={class:"bg-green-500/20 px-3 py-1 rounded-full border border-green-400/30"},T={class:"text-green-300 text-sm font-medium"},A={class:"bg-white/10 border border-blue-300/30 p-4 rounded-lg"},I={class:"flex items-center justify-between mb-3"},j={class:"flex items-center space-x-3"},D=["disabled"],P={key:1,class:"fas fa-sync-alt mr-2"},M={class:"bg-blue-500/20 px-3 py-1.5 rounded-full border border-blue-400/30"},X={class:"text-blue-300 text-sm font-medium"},N={key:0,class:"text-center py-8"},$={class:"inline-flex items-center space-x-3 text-blue-100"},F={key:1,class:"text-center py-12"},U={key:2,class:"overflow-visible"},Q={class:"hidden lg:block bg-white/10 rounded-lg overflow-visible"},O={class:"w-full relative"},B={class:"bg-blue-800/50"},K={class:"border-b border-blue-300/20"},W={class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"},V={class:"flex items-center space-x-2"},H={key:0,class:"fas fa-check-circle text-green-400 text-xs"},z={class:"py-3 px-3"},Y={class:"font-medium text-white text-sm"},G={class:"text-blue-300 text-xs mt-1"},J={class:"py-3 px-3"},Z={class:"flex items-center space-x-2"},ee={class:"text-white text-sm"},te={class:"py-3 px-3"},se={class:"flex flex-wrap gap-1"},ae={class:"py-3 px-3"},re={class:"flex items-center space-x-2"},ie={key:0,class:"fas fa-check-circle text-green-400 text-sm"},ne={class:"py-3 px-3"},le={class:"text-white text-sm"},oe={class:"text-blue-300 text-xs"},de={key:0},ce={key:1},ue={key:2},pe={key:0,class:"flex items-center gap-2 mt-1"},be={key:0,class:"px-2 py-0.5 text-xs rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-200"},me={key:1,class:"px-2 py-0.5 text-xs rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-200"},fe={class:"py-3 px-3"},ge={class:"text-white text-sm"},ve={class:"text-blue-300 text-xs"},xe={class:"py-3 px-3"},ye={key:0},he={key:0,class:"flex items-center space-x-2"},ke={key:1,class:"space-y-1"},_e={key:0,class:"text-xs text-blue-200"},we={key:1,class:"text-xs text-orange-300"},Le={key:2,class:"text-xs text-blue-300"},qe={key:2,class:"flex items-center space-x-2"},Ce={key:1,class:"text-gray-400 text-sm"},Re={class:"py-3 px-3"},Ee={key:0},Se={class:"flex items-center space-x-2"},Te={key:1,class:"text-gray-400 text-sm"},Ae={class:"py-3 px-3"},Ie={class:"flex items-center space-x-2"},je=["onClick","disabled"],De={key:0},Pe={key:1},Me={key:1,class:"text-xs text-blue-200 ml-1"},Xe={class:"py-3 px-3"},Ne=["onClick"],$e=["onClick"],Fe=["onClick"],Ue={class:"font-medium"},Qe=["onClick"],Oe={class:"lg:hidden space-y-4"},Be={class:"flex items-center justify-between mb-3"},Ke={class:"font-medium text-white"},We={class:"text-blue-300 text-sm"},Ve={class:"flex items-center space-x-2"},He={key:0,class:"fas fa-check-circle text-green-400 text-xs"},ze={class:"space-y-2 mb-4"},Ye={class:"flex items-center space-x-2"},Ge={class:"text-white text-sm"},Je={class:"flex flex-wrap gap-1"},Ze={class:"text-white text-sm"},et={class:"text-blue-300 text-xs ml-2"},tt={key:0},st={key:1},at={key:2},rt={key:0,class:"flex items-center gap-1 mt-1"},it={key:0,class:"px-1.5 py-0.5 text-[10px] rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-200"},nt={key:1,class:"px-1.5 py-0.5 text-[10px] rounded-full bg-blue-500/20 border border-blue-400/30 text-blue-200"},lt={class:"text-blue-300 text-xs"},ot={key:0,class:"mt-2"},dt={key:0,class:"flex items-center space-x-2"},ct={key:1,class:"space-y-1"},ut={key:0,class:"text-xs text-blue-200 ml-4"},pt={key:1,class:"text-xs text-orange-300 ml-4"},bt={key:2,class:"flex items-center space-x-2"},mt={key:1,class:"mt-2"},ft={class:"flex items-center space-x-2"},gt={class:"flex flex-col space-y-2"},vt=["onClick"],xt=["onClick"],yt=["onClick"];function ht(e,t,s,ht,kt,_t){const wt=(0,a.g2)("AppHeader"),Lt=(0,a.g2)("ModernSidebar"),qt=(0,a.g2)("UnifiedLoadingBanner"),Ct=(0,a.g2)("OrbitingDots"),Rt=(0,a.g2)("EditRequestModal"),Et=(0,a.g2)("ResubmitConfirmationModal");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(wt),(0,a.Lk)("div",i,[(0,a.bF)(Lt),(0,a.Lk)("main",n,[(0,a.bF)(qt,{show:ht.loading,loadingTitle:"Loading Requests",loadingSubtitle:"Fetching your requests...",departmentTitle:"REQUEST STATUS & TRACKING",forceSpin:!0},null,8,["show"]),(0,a.Lk)("div",l,[(0,a.Lk)("div",o,[(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(48,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])])]),(0,a.Lk)("div",c,[t[51]||(t[51]=(0,a.Fv)('<div class="bg-white/10 rounded-t-lg p-2 mb-0 border-b border-blue-300/30" data-v-4c9dbd6f><div class="flex justify-between items-center" data-v-4c9dbd6f><div class="text-center flex-1" data-v-4c9dbd6f><h1 class="text-xl font-bold text-white mb-1 tracking-wide drop-shadow-lg" data-v-4c9dbd6f><i class="fas fa-clipboard-check mr-2 text-blue-300" data-v-4c9dbd6f></i> REQUEST STATUS &amp; TRACKING </h1><p class="text-blue-100/80 text-sm" data-v-4c9dbd6f> Track your submitted requests and view approval status </p></div></div></div>',1)),(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[ht.showPendingAccessMessage?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("div",m,[t[13]||(t[13]=(0,a.Lk)("div",{class:"w-16 h-16 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-ban text-white text-2xl"})],-1)),(0,a.Lk)("div",f,[t[10]||(t[10]=(0,a.Lk)("h3",{class:"text-base font-bold text-white mb-2"},[(0,a.Lk)("i",{class:"fas fa-layer-group mr-2 text-red-300"}),(0,a.eW)(" Access Request Blocked ")],-1)),(0,a.Lk)("p",g,(0,a.v_)(ht.blockMessage||"You cannot submit a new Combined Access request while you have a pending request that needs to be processed."),1),(0,a.Lk)("div",v,[ht.pendingAccessRequestId?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("span",y," Pending Request: "+(0,a.v_)(ht.pendingAccessRequestId),1)])):(0,a.Q3)("",!0),t[9]||(t[9]=(0,a.Lk)("div",{class:"bg-red-500/20 px-3 py-1 rounded-full border border-red-400/30"},[(0,a.Lk)("span",{class:"text-red-300 text-sm font-medium"}," Policy: One pending access request at a time ")],-1))])]),(0,a.Lk)("div",h,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ht.refreshRequests&&ht.refreshRequests(...e)),class:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 rounded-lg text-red-300 text-sm font-medium transition-colors"},[...t[11]||(t[11]=[(0,a.Lk)("i",{class:"fas fa-sync-alt mr-1"},null,-1),(0,a.eW)(" Refresh Status ",-1)])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>ht.showPendingAccessMessage=!1),class:"w-8 h-8 bg-red-500/20 hover:bg-red-500/30 rounded-lg flex items-center justify-center transition-colors"},[...t[12]||(t[12]=[(0,a.Lk)("i",{class:"fas fa-times text-red-300"},null,-1)])])])])])):(0,a.Q3)("",!0),ht.showPendingBookingMessage?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",_,[t[16]||(t[16]=(0,a.Fv)('<div class="w-16 h-16 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center shadow-lg" data-v-4c9dbd6f><i class="fas fa-exclamation-triangle text-white text-2xl" data-v-4c9dbd6f></i></div><div class="flex-1" data-v-4c9dbd6f><h3 class="text-base font-bold text-white mb-2" data-v-4c9dbd6f> Pending Booking Request Restriction </h3><p class="text-yellow-100/90 text-base mb-3" data-v-4c9dbd6f> You cannot submit a new booking request because you already have a pending booking request that needs to be processed. </p><div class="flex items-center space-x-4" data-v-4c9dbd6f><div class="bg-yellow-500/20 px-3 py-1 rounded-full border border-yellow-400/30" data-v-4c9dbd6f><span class="text-yellow-300 text-sm font-medium" data-v-4c9dbd6f> Policy: One pending booking at a time </span></div></div></div>',2)),(0,a.Lk)("div",w,[ht.pendingBookingId?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>ht.viewPendingBookingDetails&&ht.viewPendingBookingDetails(...e)),class:"px-3 py-1.5 bg-yellow-500/20 hover:bg-yellow-500/30 border border-yellow-400/30 rounded-lg text-yellow-300 text-sm font-medium transition-colors"},[...t[14]||(t[14]=[(0,a.Lk)("i",{class:"fas fa-eye mr-1"},null,-1),(0,a.eW)(" View Pending Request ",-1)])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>ht.showPendingBookingMessage=!1),class:"w-8 h-8 bg-yellow-500/20 hover:bg-yellow-500/30 rounded-lg flex items-center justify-center transition-colors"},[...t[15]||(t[15]=[(0,a.Lk)("i",{class:"fas fa-times text-yellow-300"},null,-1)])])])])])):(0,a.Q3)("",!0),ht.showSuccessMessage?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",q,[t[20]||(t[20]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-check-circle text-white text-xl"})],-1)),(0,a.Lk)("div",C,[t[18]||(t[18]=(0,a.Lk)("h3",{class:"text-lg font-bold text-white mb-1"}," Request Submitted Successfully! ",-1)),(0,a.Lk)("p",R," Your "+(0,a.v_)(ht.requestType)+" has been submitted and is now in the approval process. ",1),(0,a.Lk)("div",E,[(0,a.Lk)("div",S,[(0,a.Lk)("span",T," Request ID: #"+(0,a.v_)(ht.latestRequestId),1)]),t[17]||(t[17]=(0,a.Lk)("div",{class:"bg-green-500/20 px-3 py-1 rounded-full border border-green-400/30"},[(0,a.Lk)("span",{class:"text-green-300 text-sm font-medium"}," Status: Pending Review ")],-1))])]),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>ht.showSuccessMessage=!1),class:"w-8 h-8 bg-green-500/20 hover:bg-green-500/30 rounded-lg flex items-center justify-center transition-colors"},[...t[19]||(t[19]=[(0,a.Lk)("i",{class:"fas fa-times text-green-300"},null,-1)])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",A,[(0,a.Lk)("div",I,[t[22]||(t[22]=(0,a.Fv)('<div class="flex items-center space-x-3" data-v-4c9dbd6f><div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg" data-v-4c9dbd6f><i class="fas fa-list-alt text-white text-base" data-v-4c9dbd6f></i></div><div data-v-4c9dbd6f><h3 class="text-lg font-bold text-white" data-v-4c9dbd6f>My Requests</h3><p class="text-blue-100/80 text-xs" data-v-4c9dbd6f>View all your submitted requests</p></div></div>',1)),(0,a.Lk)("div",j,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>ht.refreshRequests&&ht.refreshRequests(...e)),disabled:ht.loading,class:"px-3 py-1.5 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-sm font-medium transition-colors"},[ht.loading?((0,a.uX)(),(0,a.Wv)(Ct,{key:0,size:"xs",class:"mr-2"})):((0,a.uX)(),(0,a.CE)("i",P)),t[21]||(t[21]=(0,a.eW)(" Refresh ",-1))],8,D),(0,a.Lk)("div",M,[(0,a.Lk)("span",X," Total: "+(0,a.v_)(ht.totalRequests),1)])])]),ht.loading?((0,a.uX)(),(0,a.CE)("div",N,[(0,a.Lk)("div",$,[(0,a.bF)(Ct,{size:"md"}),t[23]||(t[23]=(0,a.Lk)("span",null,"Loading your requests...",-1))])])):0===ht.requests.length?((0,a.uX)(),(0,a.CE)("div",F,[t[25]||(t[25]=(0,a.Lk)("div",{class:"w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4"},[(0,a.Lk)("i",{class:"fas fa-inbox text-blue-400 text-2xl"})],-1)),t[26]||(t[26]=(0,a.Lk)("h4",{class:"text-xl font-semibold text-white mb-2"},"No Requests Found",-1)),t[27]||(t[27]=(0,a.Lk)("p",{class:"text-blue-200/80 text-base mb-6"}," You haven't submitted any requests yet. ",-1)),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>ht.goToSubmitRequest&&ht.goToSubmitRequest(...e)),class:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-blue-700 transition-all duration-300"},[...t[24]||(t[24]=[(0,a.Lk)("i",{class:"fas fa-plus mr-2"},null,-1),(0,a.eW)(" Submit New Request ",-1)])])])):((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",Q,[(0,a.Lk)("table",O,[(0,a.Lk)("thead",B,[(0,a.Lk)("tr",K,[t[28]||(t[28]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Request ID ",-1)),t[29]||(t[29]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"},"Type",-1)),t[30]||(t[30]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Services ",-1)),(0,a.Lk)("th",W,[(0,a.Lk)("div",V,[(0,a.Lk)("span",{class:(0,a.C4)(ht.hasImplementedOrApproved?"text-green-400":"text-blue-200")}," Status ",2),ht.hasImplementedOrApproved?((0,a.uX)(),(0,a.CE)("i",H)):(0,a.Q3)("",!0)])]),t[31]||(t[31]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Current Step ",-1)),t[32]||(t[32]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Submitted ",-1)),t[33]||(t[33]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Device Status ",-1)),t[34]||(t[34]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Return Status ",-1)),t[35]||(t[35]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," SMS Status ",-1)),t[36]||(t[36]=(0,a.Lk)("th",{class:"text-left py-3 px-3 text-blue-100 font-bold text-xs"}," Actions ",-1))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ht.requests,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-t border-blue-300/20 hover:bg-blue-700/30 transition-colors"},[(0,a.Lk)("td",z,[(0,a.Lk)("div",Y,(0,a.v_)(ht.formatRequestId(e.id)),1),(0,a.Lk)("div",G,(0,a.v_)(ht.getRequestTypeLabel(e)),1)]),(0,a.Lk)("td",J,[(0,a.Lk)("div",Z,[(0,a.Lk)("i",{class:(0,a.C4)([ht.getRequestTypeIcon(e.type),"text-blue-400 text-sm"])},null,2),(0,a.Lk)("span",ee,(0,a.v_)(ht.getRequestTypeName(e.type)),1)])]),(0,a.Lk)("td",te,[(0,a.Lk)("div",se,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.services,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-2 py-0.5 bg-blue-500/20 text-blue-300 text-xs rounded-full border border-blue-400/30"},(0,a.v_)(e),1))),128))])]),(0,a.Lk)("td",ae,[(0,a.Lk)("div",re,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2.5 h-2.5 rounded-full",ht.getStatusColor(e.status)])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold flex items-center space-x-2",ht.getStatusTextColor(e.status)])},[(0,a.Lk)("span",null,(0,a.v_)(ht.getStatusText(e.status)),1),"implemented"===e.status||"approved"===e.status?((0,a.uX)(),(0,a.CE)("i",ie)):(0,a.Q3)("",!0)],2)])]),(0,a.Lk)("td",ne,[(0,a.Lk)("div",le,(0,a.v_)(ht.getCurrentStepText(e.current_step,e.type)),1),(0,a.Lk)("div",oe,[0===e.current_step?((0,a.uX)(),(0,a.CE)("span",de,"Waiting from another user")):"booking_service"===e.type?((0,a.uX)(),(0,a.CE)("span",ce,"Step "+(0,a.v_)(e.current_step)+" of 3",1)):((0,a.uX)(),(0,a.CE)("span",ue,"Step "+(0,a.v_)(e.current_step)+" of 6",1))]),"combined_access"!==e.type||"skipped"!==e.hod_status&&"skipped"!==e.divisional_status?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",pe,["skipped"===e.hod_status?((0,a.uX)(),(0,a.CE)("span",be," HOD skipped ")):(0,a.Q3)("",!0),"skipped"===e.divisional_status?((0,a.uX)(),(0,a.CE)("span",me," Divisional skipped ")):(0,a.Q3)("",!0)]))]),(0,a.Lk)("td",fe,[(0,a.Lk)("div",ge,(0,a.v_)(ht.formatDate(e.created_at)),1),(0,a.Lk)("div",ve,(0,a.v_)(ht.formatTime(e.created_at)),1)]),(0,a.Lk)("td",xe,["booking_service"===e.type&&e.device_availability?((0,a.uX)(),(0,a.CE)("div",ye,[e.device_availability.is_available?((0,a.uX)(),(0,a.CE)("div",he,[...t[37]||(t[37]=[(0,a.Lk)("div",{class:"w-3 h-3 rounded-full bg-green-500"},null,-1),(0,a.Lk)("span",{class:"text-green-300 text-xs font-semibold"},"Available",-1)])])):"out_of_stock"===e.device_availability.status?((0,a.uX)(),(0,a.CE)("div",ke,[t[38]||(t[38]=(0,a.Lk)("div",{class:"flex items-center space-x-2"},[(0,a.Lk)("div",{class:"w-3 h-3 rounded-full bg-yellow-500"}),(0,a.Lk)("span",{class:"text-yellow-300 text-xs font-semibold"},"In Use")],-1)),e.device_availability.current_users&&e.device_availability.current_users.length>0?((0,a.uX)(),(0,a.CE)("div",_e," By: "+(0,a.v_)(e.device_availability.current_users.map(e=>e.user_name).join(", ")),1)):(0,a.Q3)("",!0),e.device_availability.nearest_return?((0,a.uX)(),(0,a.CE)("div",we," Available: "+(0,a.v_)(e.device_availability.nearest_return.relative_time),1)):(0,a.Q3)("",!0),e.device_availability.nearest_return?((0,a.uX)(),(0,a.CE)("div",Le,(0,a.v_)(e.device_availability.nearest_return.date_time),1)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",qe,[...t[39]||(t[39]=[(0,a.Lk)("div",{class:"w-3 h-3 rounded-full bg-red-500"},null,-1),(0,a.Lk)("span",{class:"text-red-300 text-xs font-semibold"},"Unavailable",-1)])]))])):((0,a.uX)(),(0,a.CE)("div",Ce,"N/A"))]),(0,a.Lk)("td",Re,["booking_service"===e.type?((0,a.uX)(),(0,a.CE)("div",Ee,[(0,a.Lk)("div",Se,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2.5 h-2.5 rounded-full",ht.getReturnStatusColor(e.return_status)])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold",ht.getReturnStatusTextColor(e.return_status)])},(0,a.v_)(ht.getReturnStatusText(e.return_status)),3)])])):((0,a.uX)(),(0,a.CE)("div",Te,"N/A"))]),(0,a.Lk)("td",Ae,[(0,a.Lk)("div",Ie,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2.5 h-2.5 rounded-full",ht.getSmsStatusColor(e.sms_status||e.sms_to_hod_status)])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-semibold",ht.getSmsStatusTextColor(e.sms_status||e.sms_to_hod_status)])},(0,a.v_)(ht.getSmsStatusText(e.sms_status||e.sms_to_hod_status)),3),"combined_access"===e.type&&["failed","pending"].includes(e.sms_to_hod_status)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:(0,a.D$)(t=>ht.retrySendSms(e),["stop"]),disabled:ht.isRetrying(e.id),class:"ml-2 px-2 py-1 text-xs rounded border border-blue-300/50 text-blue-100 hover:bg-blue-700/40 disabled:opacity-50",title:"Retry sending SMS to HOD"},[ht.isRetrying(e.id)?((0,a.uX)(),(0,a.CE)("span",Pe,[...t[40]||(t[40]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin mr-1"},null,-1),(0,a.eW)("Retrying",-1)])])):((0,a.uX)(),(0,a.CE)("span",De,"Retry"))],8,je)):(0,a.Q3)("",!0),ht.getRetryAttempts(e.id)>0?((0,a.uX)(),(0,a.CE)("span",Me," ("+(0,a.v_)(ht.getRetryAttempts(e.id))+") ",1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("td",Xe,[(0,a.Lk)("div",{class:"relative",onClick:t[8]||(t[8]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("button",{onClick:(0,a.D$)(t=>ht.toggleActionsMenu(e.id),["stop"]),class:"px-2 py-1 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 transition-colors"},[...t[41]||(t[41]=[(0,a.Lk)("i",{class:"fas fa-ellipsis-v text-sm"},null,-1)])],8,Ne),ht.activeMenuId===e.id?((0,a.uX)(),(0,a.CE)("div",{key:0,onClick:t[7]||(t[7]=(0,a.D$)(()=>{},["stop"])),class:"absolute right-0 bottom-full mb-2 w-48 bg-slate-800 border-2 border-blue-400/40 rounded-xl shadow-2xl z-[9999] overflow-hidden"},[(0,a.Lk)("button",{onClick:t=>ht.handleViewMenuAction(e),class:"w-full px-4 py-3 text-left text-blue-300 hover:bg-blue-500/20 transition-colors flex items-center space-x-3 border-b border-blue-400/20"},[...t[42]||(t[42]=[(0,a.Lk)("i",{class:"fas fa-eye text-blue-400 w-5"},null,-1),(0,a.Lk)("span",{class:"font-medium"},"View Details",-1)])],8,$e),ht.canEditRequest(e)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>ht.handleEditMenuAction(e),class:"w-full px-4 py-3 text-left text-green-300 hover:bg-green-500/20 transition-colors flex items-center space-x-3 border-b border-blue-400/20"},[t[43]||(t[43]=(0,a.Lk)("i",{class:"fas fa-edit text-green-400 w-5"},null,-1)),(0,a.Lk)("span",Ue,(0,a.v_)("cancelled"===e.status?"Edit & Resubmit":"Edit"),1)],8,Fe)):(0,a.Q3)("",!0),ht.canCancelRequest(e)?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>ht.handleCancelMenuAction(e),class:"w-full px-4 py-3 text-left text-red-300 hover:bg-red-500/20 transition-colors flex items-center space-x-3"},[...t[44]||(t[44]=[(0,a.Lk)("i",{class:"fas fa-times text-red-400 w-5"},null,-1),(0,a.Lk)("span",{class:"font-medium"},"Cancel Request",-1)])],8,Qe)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])]))),128))])])]),(0,a.Lk)("div",Oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(ht.requests,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"bg-blue-500/10 border border-blue-400/30 rounded-xl p-4 hover:bg-blue-500/15 transition-colors"},[(0,a.Lk)("div",Be,[(0,a.Lk)("div",Ke,(0,a.v_)(ht.formatRequestId(e.id)),1),(0,a.Lk)("div",We,(0,a.v_)(ht.getRequestTypeLabel(e)),1),(0,a.Lk)("div",Ve,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2 h-2 rounded-full",ht.getStatusColor(e.status)])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-sm font-medium flex items-center space-x-1",ht.getStatusTextColor(e.status)])},[(0,a.Lk)("span",null,(0,a.v_)(ht.getStatusText(e.status)),1),"implemented"===e.status||"approved"===e.status?((0,a.uX)(),(0,a.CE)("i",He)):(0,a.Q3)("",!0)],2)])]),(0,a.Lk)("div",ze,[(0,a.Lk)("div",Ye,[(0,a.Lk)("i",{class:(0,a.C4)([ht.getRequestTypeIcon(e.type),"text-blue-400"])},null,2),(0,a.Lk)("span",Ge,(0,a.v_)(ht.getRequestTypeName(e.type)),1)]),(0,a.Lk)("div",Je,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.services,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"px-2 py-1 bg-blue-500/20 text-blue-300 text-xs rounded-full border border-blue-400/30"},(0,a.v_)(e),1))),128))]),(0,a.Lk)("div",Ze,[(0,a.eW)((0,a.v_)(ht.getCurrentStepText(e.current_step,e.type))+" ",1),(0,a.Lk)("span",et,[0===e.current_step?((0,a.uX)(),(0,a.CE)("span",tt,"(Waiting from another user)")):"booking_service"===e.type?((0,a.uX)(),(0,a.CE)("span",st,"(Step "+(0,a.v_)(e.current_step)+" of 3)",1)):((0,a.uX)(),(0,a.CE)("span",at,"(Step "+(0,a.v_)(e.current_step)+" of 6)",1))]),"combined_access"!==e.type||"skipped"!==e.hod_status&&"skipped"!==e.divisional_status?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",rt,["skipped"===e.hod_status?((0,a.uX)(),(0,a.CE)("span",it," HOD skipped ")):(0,a.Q3)("",!0),"skipped"===e.divisional_status?((0,a.uX)(),(0,a.CE)("span",nt," Divisional skipped ")):(0,a.Q3)("",!0)]))]),(0,a.Lk)("div",lt,(0,a.v_)(ht.formatDate(e.created_at))+" at "+(0,a.v_)(ht.formatTime(e.created_at)),1),"booking_service"===e.type&&e.device_availability?((0,a.uX)(),(0,a.CE)("div",ot,[e.device_availability.is_available?((0,a.uX)(),(0,a.CE)("div",dt,[...t[45]||(t[45]=[(0,a.Lk)("div",{class:"w-2 h-2 rounded-full bg-green-500"},null,-1),(0,a.Lk)("span",{class:"text-green-300 text-xs font-medium"},"Device Available",-1)])])):"out_of_stock"===e.device_availability.status?((0,a.uX)(),(0,a.CE)("div",ct,[t[46]||(t[46]=(0,a.Lk)("div",{class:"flex items-center space-x-2"},[(0,a.Lk)("div",{class:"w-2 h-2 rounded-full bg-yellow-500"}),(0,a.Lk)("span",{class:"text-yellow-300 text-xs font-medium"},"Device In Use")],-1)),e.device_availability.current_users&&e.device_availability.current_users.length>0?((0,a.uX)(),(0,a.CE)("div",ut," By: "+(0,a.v_)(e.device_availability.current_users.map(e=>e.user_name).join(", ")),1)):(0,a.Q3)("",!0),e.device_availability.nearest_return?((0,a.uX)(),(0,a.CE)("div",pt," Check back: "+(0,a.v_)(e.device_availability.nearest_return.relative_time),1)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",bt,[...t[47]||(t[47]=[(0,a.Lk)("div",{class:"w-2 h-2 rounded-full bg-red-500"},null,-1),(0,a.Lk)("span",{class:"text-red-300 text-xs font-medium"},"Device Unavailable",-1)])]))])):(0,a.Q3)("",!0),"booking_service"===e.type?((0,a.uX)(),(0,a.CE)("div",mt,[(0,a.Lk)("div",ft,[(0,a.Lk)("div",{class:(0,a.C4)(["w-2 h-2 rounded-full",ht.getReturnStatusColor(e.return_status)])},null,2),(0,a.Lk)("span",{class:(0,a.C4)(["text-xs font-medium",ht.getReturnStatusTextColor(e.return_status)])}," Return: "+(0,a.v_)(ht.getReturnStatusText(e.return_status)),3)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",gt,[(0,a.Lk)("button",{onClick:t=>ht.viewRequestDetails(e),class:"w-full px-3 py-2 bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 rounded-lg text-blue-300 text-sm font-medium transition-colors flex items-center justify-center"},[...t[48]||(t[48]=[(0,a.Lk)("i",{class:"fas fa-eye mr-2"},null,-1),(0,a.eW)(" View Details ",-1)])],8,vt),ht.canEditRequest(e)?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>ht.editRequest(e),class:"w-full px-3 py-2 bg-green-500/20 hover:bg-green-500/30 border border-green-400/30 rounded-lg text-green-300 text-sm font-medium transition-colors flex items-center justify-center"},[...t[49]||(t[49]=[(0,a.Lk)("i",{class:"fas fa-edit mr-2"},null,-1),(0,a.eW)(" Edit & Resubmit ",-1)])],8,xt)):(0,a.Q3)("",!0),ht.canCancelRequest(e)?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>ht.cancelRequest(e),class:"w-full px-3 py-2 bg-red-500/20 hover:bg-red-500/30 border border-red-400/30 rounded-lg text-red-300 text-sm font-medium transition-colors flex items-center justify-center"},[...t[50]||(t[50]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" Cancel Request ",-1)])],8,yt)):(0,a.Q3)("",!0)])]))),128))])]))])])])])])]),(0,a.bF)(Rt,{isVisible:ht.showEditModal,requestId:ht.selectedRequest?.id||"",requestType:ht.selectedRequest?.type||"",requestStatus:ht.selectedRequest?.status||"",onConfirm:ht.handleEditConfirm,onClose:ht.closeEditModal},null,8,["isVisible","requestId","requestType","requestStatus","onConfirm","onClose"]),(0,a.bF)(Et,{isVisible:ht.showResubmitModal,requestData:{id:ht.selectedRequest?.id||"",type:ht.getRequestTypeName(ht.selectedRequest?.type||""),status:ht.selectedRequest?.status||""},onConfirm:ht.handleResubmitConfirm,onCancel:ht.closeResubmitModal},null,8,["isVisible","requestData","onConfirm","onCancel"])])}s(4114),s(116),s(7588),s(3579);var kt=s(8728),_t=s(8966),wt=s(6933);const Lt={class:"p-6 space-y-4"},qt={class:"flex justify-center"},Ct={class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-teal-600/30 to-blue-600/30 border border-teal-400/40 rounded-full"},Rt={class:"text-white font-semibold text-sm"},Et={class:"bg-blue-800/30 border border-blue-400/30 rounded-lg p-4 space-y-3"},St={class:"flex items-center justify-between"},Tt={class:"text-white font-mono font-bold"},At={class:"flex items-center justify-between"},It={class:"flex items-center space-x-2"},jt={class:"text-red-400 font-semibold"},Dt={class:"p-6 border-t border-blue-400/20 flex space-x-3"};function Pt(e,t,s,r,i,n){return s.isVisible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t[2]||(t[2]=(0,a.D$)((...e)=>r.closeModal&&r.closeModal(...e),["self"]))},[(0,a.Lk)("div",{class:(0,a.C4)(["bg-gradient-to-br from-blue-900 to-blue-800 rounded-2xl shadow-2xl border border-blue-400/30 max-w-md w-full transform transition-all duration-300 scale-100 opacity-100",{"scale-95 opacity-0":!s.isVisible}])},[t[10]||(t[10]=(0,a.Fv)('<div class="p-6 border-b border-blue-400/20" data-v-7bc66d6c><div class="flex items-center space-x-3" data-v-7bc66d6c><div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg" data-v-7bc66d6c><i class="fas fa-edit text-white text-lg" data-v-7bc66d6c></i></div><div data-v-7bc66d6c><h3 class="text-xl font-bold text-white" data-v-7bc66d6c>Edit &amp; Resubmit Request</h3><p class="text-blue-200 text-sm" data-v-7bc66d6c>Modify and resubmit for approval</p></div></div></div>',1)),(0,a.Lk)("div",Lt,[(0,a.Lk)("div",qt,[(0,a.Lk)("div",Ct,[t[3]||(t[3]=(0,a.Lk)("i",{class:"fas fa-clipboard-list text-teal-300 mr-2"},null,-1)),(0,a.Lk)("span",Rt,(0,a.v_)(r.requestTypeName),1)])]),(0,a.Lk)("div",Et,[(0,a.Lk)("div",St,[t[4]||(t[4]=(0,a.Lk)("span",{class:"text-blue-200 text-sm"},"Request ID:",-1)),(0,a.Lk)("span",Tt,(0,a.v_)(r.formattedRequestId),1)]),(0,a.Lk)("div",At,[t[6]||(t[6]=(0,a.Lk)("span",{class:"text-blue-200 text-sm"},"Current Status:",-1)),(0,a.Lk)("div",It,[t[5]||(t[5]=(0,a.Lk)("div",{class:"w-2 h-2 bg-red-500 rounded-full animate-pulse"},null,-1)),(0,a.Lk)("span",jt,(0,a.v_)(r.statusText),1)])])]),t[7]||(t[7]=(0,a.Fv)('<div class="text-center" data-v-7bc66d6c><p class="text-blue-100 leading-relaxed" data-v-7bc66d6c> This will allow you to <span class="font-semibold text-white" data-v-7bc66d6c>modify the request details</span> and <span class="font-semibold text-white" data-v-7bc66d6c>resubmit it for approval</span>. </p></div><div class="bg-green-900/20 border border-green-400/30 rounded-lg p-4" data-v-7bc66d6c><h4 class="text-green-300 font-semibold text-sm mb-3 flex items-center" data-v-7bc66d6c><i class="fas fa-check-circle mr-2" data-v-7bc66d6c></i> What you can do: </h4><ul class="space-y-2 text-sm text-green-100" data-v-7bc66d6c><li class="flex items-start" data-v-7bc66d6c><i class="fas fa-arrow-right text-green-400 mt-0.5 mr-2 text-xs" data-v-7bc66d6c></i> Update request information </li><li class="flex items-start" data-v-7bc66d6c><i class="fas fa-arrow-right text-green-400 mt-0.5 mr-2 text-xs" data-v-7bc66d6c></i> Modify service selections </li><li class="flex items-start" data-v-7bc66d6c><i class="fas fa-arrow-right text-green-400 mt-0.5 mr-2 text-xs" data-v-7bc66d6c></i> Upload new digital signature </li><li class="flex items-start" data-v-7bc66d6c><i class="fas fa-arrow-right text-green-400 mt-0.5 mr-2 text-xs" data-v-7bc66d6c></i> Address rejection feedback </li></ul></div>',2))]),(0,a.Lk)("div",Dt,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"flex-1 px-4 py-3 bg-gray-600/50 hover:bg-gray-600/70 text-gray-200 font-medium rounded-lg transition-all duration-200 border border-gray-500/30"},[...t[8]||(t[8]=[(0,a.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,a.eW)(" Cancel ",-1)])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.confirmEdit&&r.confirmEdit(...e)),class:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-medium rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},[...t[9]||(t[9]=[(0,a.Lk)("i",{class:"fas fa-edit mr-2"},null,-1),(0,a.eW)(" Edit Request ",-1)])])])],2)])):(0,a.Q3)("",!0)}var Mt={name:"EditRequestModal",emits:["confirm","cancel","close"],props:{isVisible:{type:Boolean,default:!1},requestId:{type:String,required:!0},requestType:{type:String,required:!0},requestStatus:{type:String,required:!0}},setup(e,{emit:t}){const s=(0,a.EW)(()=>{const t=e.requestId;return t.startsWith("#")?t:t.startsWith("REQ-")?`#${t}`:`#REQ-${String(t).padStart(6,"0")}`}),r=(0,a.EW)(()=>{const t={combined_access:"Combined Access",booking_service:"Booking Service",jeeva_access:"Jeeva Access",wellsoft:"Wellsoft Access",internet_access_request:"Internet Access"};return t[e.requestType]||"Access Request"}),i=(0,a.EW)(()=>{const t={hod_rejected:"HOD Rejected",divisional_rejected:"Divisional Rejected",rejected:"Rejected",pending:"Pending",approved:"Approved"};return t[e.requestStatus]||e.requestStatus}),n=()=>{t("confirm"),l()},l=()=>{t("close")};return{formattedRequestId:s,requestTypeName:r,statusText:i,confirmEdit:n,closeModal:l}}},Xt=s(1241);const Nt=(0,Xt.A)(Mt,[["render",Pt],["__scopeId","data-v-7bc66d6c"]]);var $t=Nt;const Ft={class:"absolute inset-0 overflow-hidden"},Ut={class:"absolute inset-0 opacity-10"},Qt={class:"grid grid-cols-8 gap-4 h-full transform rotate-12"},Ot={class:"absolute inset-0"},Bt={class:"relative z-10 p-6 space-y-4"},Kt={class:"bg-blue-600/20 border border-blue-400/30 rounded-xl p-4 backdrop-blur-sm"},Wt={class:"space-y-3"},Vt={class:"flex items-center justify-between"},Ht={class:"text-white font-bold text-sm bg-blue-500/20 px-2 py-1 rounded border border-blue-400/30"},zt={class:"flex items-center justify-between"},Yt={class:"text-white font-medium text-sm"},Gt={class:"flex items-center justify-between"},Jt={class:"text-red-300 font-medium text-sm bg-red-500/20 px-2 py-1 rounded border border-red-400/30 flex items-center"},Zt={class:"flex space-x-3 pt-4"},es=["disabled"],ts=["disabled"],ss={key:0,class:"fas fa-spinner fa-spin text-sm"},as={key:1,class:"fas fa-check text-sm"},rs={key:0,class:"absolute inset-0 bg-blue-900/50 backdrop-blur-sm flex items-center justify-center z-20 rounded-2xl"};function is(e,t,s,r,i,n){return s.isVisible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",onClick:t[3]||(t[3]=(0,a.D$)((...e)=>r.handleCancel&&r.handleCancel(...e),["self"]))},[(0,a.Lk)("div",{class:"bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-300 border border-blue-400/30 relative overflow-hidden",onClick:t[2]||(t[2]=(0,a.D$)(()=>{},["stop"]))},[(0,a.Lk)("div",Ft,[(0,a.Lk)("div",Ut,[(0,a.Lk)("div",Qt,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(32,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-1 h-1 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])]),(0,a.Lk)("div",Ot,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(6,e=>(0,a.Lk)("div",{key:e,class:"absolute text-white opacity-5 animate-float",style:(0,a.Tr)({left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3*Math.random()+2+"s",fontSize:16*Math.random()+8+"px"})},[(0,a.Lk)("i",{class:(0,a.C4)(["fas",["fa-edit","fa-redo-alt","fa-file-alt","fa-check-circle","fa-sync-alt","fa-arrow-right"][Math.floor(6*Math.random())]])},null,2)],4)),64))])]),t[12]||(t[12]=(0,a.Fv)('<div class="relative z-10 p-6 pb-4 border-b border-blue-400/20" data-v-6ec6ba20><div class="flex items-center space-x-4" data-v-6ec6ba20><div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg border border-blue-300/50 relative overflow-hidden" data-v-6ec6ba20><div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-xl" data-v-6ec6ba20></div><i class="fas fa-edit text-white text-xl relative z-10 drop-shadow-lg" data-v-6ec6ba20></i><div class="absolute top-1 right-1 w-1 h-1 bg-white/60 rounded-full animate-ping" data-v-6ec6ba20></div></div><div class="flex-1" data-v-6ec6ba20><h3 class="text-xl font-bold text-white mb-1 flex items-center" data-v-6ec6ba20><i class="fas fa-question-circle mr-2 text-blue-300" data-v-6ec6ba20></i> Edit &amp; Resubmit Request? </h3><div class="flex items-center space-x-2" data-v-6ec6ba20><span class="text-xs text-blue-300 font-medium bg-blue-500/20 px-2 py-1 rounded-full border border-blue-400/30" data-v-6ec6ba20><i class="fas fa-sync-alt mr-1 text-xs" data-v-6ec6ba20></i> Confirmation Required </span></div></div></div></div>',1)),(0,a.Lk)("div",Bt,[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-center mb-4"},[(0,a.Lk)("p",{class:"text-white text-lg font-medium mb-4"}," Do you want to edit and resubmit this cancelled request? ")],-1)),(0,a.Lk)("div",Kt,[(0,a.Lk)("div",Wt,[(0,a.Lk)("div",Vt,[t[4]||(t[4]=(0,a.Lk)("span",{class:"text-blue-200 text-sm font-medium flex items-center"},[(0,a.Lk)("i",{class:"fas fa-tag mr-2 text-blue-300"}),(0,a.eW)(" Request ID: ")],-1)),(0,a.Lk)("span",Ht,(0,a.v_)(s.requestData.id),1)]),(0,a.Lk)("div",zt,[t[5]||(t[5]=(0,a.Lk)("span",{class:"text-blue-200 text-sm font-medium flex items-center"},[(0,a.Lk)("i",{class:"fas fa-layer-group mr-2 text-blue-300"}),(0,a.eW)(" Type: ")],-1)),(0,a.Lk)("span",Yt,(0,a.v_)(s.requestData.type),1)]),(0,a.Lk)("div",Gt,[t[7]||(t[7]=(0,a.Lk)("span",{class:"text-blue-200 text-sm font-medium flex items-center"},[(0,a.Lk)("i",{class:"fas fa-info-circle mr-2 text-blue-300"}),(0,a.eW)(" Status: ")],-1)),(0,a.Lk)("span",Jt,[t[6]||(t[6]=(0,a.Lk)("i",{class:"fas fa-ban mr-1 text-xs"},null,-1)),(0,a.eW)(" "+(0,a.v_)(s.requestData.status),1)])])])]),t[10]||(t[10]=(0,a.Fv)('<div class="bg-green-500/10 border border-green-400/30 rounded-xl p-4 backdrop-blur-sm" data-v-6ec6ba20><div class="flex items-start space-x-3" data-v-6ec6ba20><div class="w-5 h-5 bg-green-500/20 rounded-full flex items-center justify-center mt-0.5" data-v-6ec6ba20><i class="fas fa-info text-green-400 text-xs" data-v-6ec6ba20></i></div><p class="text-green-100 text-sm" data-v-6ec6ba20> You will be able to modify the request details before resubmitting. </p></div></div>',1)),(0,a.Lk)("div",Zt,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.handleCancel&&r.handleCancel(...e)),disabled:r.processing,class:"flex-1 px-4 py-3 bg-gray-600/20 hover:bg-gray-600/30 border border-gray-400/30 rounded-xl text-gray-300 font-medium transition-all duration-300 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[...t[8]||(t[8]=[(0,a.Lk)("i",{class:"fas fa-times text-sm"},null,-1),(0,a.Lk)("span",null,"Cancel",-1)])],8,es),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleConfirm&&r.handleConfirm(...e)),disabled:r.processing,class:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-xl font-medium transition-all duration-300 flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[r.processing?((0,a.uX)(),(0,a.CE)("i",ss)):((0,a.uX)(),(0,a.CE)("i",as)),(0,a.Lk)("span",null,(0,a.v_)(r.processing?"Processing...":"OK"),1)],8,ts)])]),r.processing?((0,a.uX)(),(0,a.CE)("div",rs,[...t[11]||(t[11]=[(0,a.Lk)("div",{class:"bg-blue-800/80 rounded-xl p-4 shadow-xl border border-blue-400/30"},[(0,a.Lk)("div",{class:"flex items-center space-x-3 text-white"},[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-lg text-blue-300"}),(0,a.Lk)("span",{class:"font-medium"},"Processing request...")])],-1)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)}var ns={name:"ResubmitConfirmationModal",props:{isVisible:{type:Boolean,default:!1},requestData:{type:Object,default:()=>({id:"REQ-000000",type:"Combined Access",status:"Cancelled"})}},emits:["confirm","cancel"],setup(e,{emit:t}){const s=(0,a.KR)(!1),r=async()=>{s.value=!0,await new Promise(e=>setTimeout(e,500)),t("confirm"),s.value=!1},i=()=>{s.value||t("cancel")};return{processing:s,handleConfirm:r,handleCancel:i}}};const ls=(0,Xt.A)(ns,[["render",is],["__scopeId","data-v-6ec6ba20"]]);var os=ls,ds=s(1445),cs=s(1127),us=s(14),ps=s(9308),bs=s(9423),ms=s(4710),fs={name:"RequestStatusPage",components:{ModernSidebar:_t.A,AppHeader:wt.A,EditRequestModal:$t,ResubmitConfirmationModal:os,UnifiedLoadingBanner:ds.A},setup(){const e=(0,kt.rd)(),t=(0,kt.lq)(),{requireRole:s,ROLES:r}=(0,cs.h)(),i=(0,a.KR)(!1),n=(0,a.KR)(!1),l=(0,a.KR)(!1),o=(0,a.KR)(null),d=(0,a.KR)(!1),c=(0,a.KR)(null),u=(0,a.KR)(""),p=(0,a.KR)(""),b=(0,a.KR)(""),m=(0,a.KR)(null),f=(0,a.KR)(!1),g=(0,a.KR)(!1),v=(0,a.KR)(null),x=(0,a.KR)(null),y=(0,a.KR)([]),h=(0,a.KR)(0),k=(0,a.KR)(1),_=(0,a.KR)(15),w=(0,a.KR)(1),L=(0,a.KR)({}),q=(0,a.KR)({}),C=5,R=[3e3,7e3,15e3,3e4,6e4],E=[{id:1,label:"User Info",description:"Submit your access request"},{id:2,label:"HOD Review",description:"Head of Department review"},{id:3,label:"Divisional Director",description:"Divisional Director approval"},{id:4,label:"DICT Review",description:"DICT verification process"},{id:5,label:"Head IT",description:"Head IT assessment"},{id:6,label:"ICT Officer",description:"ICT Officer processing and final approval"}],S=[{id:1,label:"Request Submitted",description:"User submitted booking request details"},{id:2,label:"ICT Approval",description:"ICT approve the booking request"},{id:3,label:"Device Received",description:"ICT receive the device for clearing in system"}];(0,a.sV)(()=>{s([r.STAFF,r.ICT_OFFICER,r.SECRETARY_ICT]),document.addEventListener("click",oe),"true"===t.query.success&&(n.value=!0,p.value=t.query.type||"request",b.value=t.query.id||"REQ-2025-NEW",e.replace({query:{}})),"true"===t.query.pendingBooking&&(l.value=!0,o.value=t.query.pendingId||null,e.replace({query:{}})),"true"===t.query.blocked&&(d.value=!0,c.value=t.query.pending_request_id||null,u.value=t.query.message||"You cannot submit a new Combined Access request while you have a pending request.",e.replace({query:{}})),T()});const T=async(e=1,t={})=>{i.value=!0;try{const s=await ps.A.getRequestsPaginated(e,_.value,t);s.success?(y.value=s.data.data||[],h.value=s.data.total||0,k.value=s.data.current_page||1,w.value=s.data.last_page||1,ge(),h.value,k.value,y.value.length,y.value[0]):(console.error("❌ Failed to load requests:",s.error),alert("Failed to load requests: "+s.error))}catch(s){console.error("❌ Error loading requests:",s),alert("An error occurred while loading requests. Please try again.")}finally{i.value=!1}},A=()=>{T(k.value)},I=async t=>{t.original_id||t.id,t.type,t.status;let s="",a=!0;switch(t.type){case"booking_service":s="/edit-booking-request";break;case"combined_access":s="/user-combined-form";break;case"jeeva_access":case"jeeva":alert(`Edit functionality for ${W(t.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(t.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),a=!1;break;case"wellsoft":alert(`Edit functionality for ${W(t.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(t.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),a=!1;break;case"internet_access_request":case"internet":alert(`Edit functionality for ${W(t.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(t.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),a=!1;break;default:alert(`Edit functionality not yet implemented for ${W(t.type)} requests.`),a=!1;break}if(a)try{const a={path:s,query:{id:t.original_id||t.id,mode:"edit",status:"cancelled"}};await e.push(a)}catch(r){console.error("❌ EditCancelledRequest: Navigation failed:",r),alert(`Navigation error: Unable to navigate to edit page.\n\nPlease try refreshing the page or contact support.\n\nError: ${r.message}`)}},j=t=>{e.push({path:"/request-details",query:{id:t.original_id||t.id,type:t.type}})},D=async e=>{e.id,e.original_id,e.type,e.status,O(e);const t=(0,us.useAuthStore)();if(t.isAuthenticated,t.userRole,t.user,t.user,O(e)){if("cancelled"===e.status)return v.value=e,void(g.value=!0);v.value=e,f.value=!0}else alert(`This ${W(e.type)} request cannot be edited in its current status: ${z(e.status)}`)},P=async()=>{const s=v.value;if(!s)return;let a="",r=!0;switch(s.type){case"booking_service":a="/edit-booking-request";break;case"combined_access":a="/user-combined-form";break;case"jeeva_access":case"jeeva":alert(`Edit functionality for ${W(s.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(s.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),r=!1;break;case"wellsoft":alert(`Edit functionality for ${W(s.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(s.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),r=!1;break;case"internet_access_request":case"internet":alert(`Edit functionality for ${W(s.type)} requests is currently in development.\n\nFor now, you can:\n1. Submit a new ${W(s.type)} request\n2. Contact support for assistance with modifying this request\n\nCombined access requests already support editing.`),r=!1;break;default:alert(`Edit functionality not yet implemented for ${W(s.type)} requests.`),r=!1;break}if(!r)return;s.id,s.original_id,s.type,s.original_id||s.id,t.fullPath,t.path;try{const t={path:a,query:{id:s.original_id||s.id,mode:"edit",status:"rejected"}};e.currentRoute.value,e.options;await e.push(t)}catch(i){if(console.error("❌ EditRequest: Navigation failed with error:",{error:i,message:i.message,stack:i.stack,type:i.type,to:i.to,from:i.from}),2===i.type||i.message?.includes("navigation guard"))return console.error("❌ EditRequest: Navigation blocked by route guard"),void alert("Navigation blocked by route guard. This might be due to:\n\n1. Missing authentication token\n2. Insufficient user permissions\n3. Route configuration issue\n\nPlease try logging out and back in, or contact support.");try{const t=`${a}?id=${s.original_id||s.id}&mode=edit&status=rejected`;await e.push(t)}catch(n){console.error("❌ EditRequest: Fallback navigation also failed:",n),alert(`Navigation error: Unable to navigate to edit page.\n\nPlease try refreshing the page or contact support.\n\nError: ${i.message}\nFallback Error: ${n.message}`)}}},M=()=>{f.value=!1,v.value=null},X=()=>{g.value=!1,v.value=null},N=async()=>{g.value=!1;const e=v.value;e&&await P()},$=()=>{e.push("/user-dashboard")},F=()=>{e.push("/user-dashboard")},U=()=>{o.value&&e.push({path:"/request-details",query:{id:o.value,type:"booking_service"}})},Q=e=>{const t="pending"===e.status&&!m.value;return e.id,e.status,m.value,t},O=e=>{const t=["rejected","hod_rejected","divisional_rejected","ict_director_rejected","head_it_rejected","ict_officer_rejected","cancelled"],s=t.includes(e.status)&&!m.value;return e.id,e.type,e.status,s},B=async e=>{if(!Q(e))return;const t=confirm(`Are you sure you want to cancel this ${"booking_service"===e.type?"booking":"access"} request?\n\nRequest ID: #${e.id}\nType: ${W(e.type)}\n\nThis action cannot be undone.`);if(t){m.value=e.id;try{"booking_service"===e.type?await bs.A.delete(`/booking-service/bookings/${e.original_id||e.id}`):await bs.A.delete(`/v1/user-access/${e.original_id||e.id}`),alert(`Request #${e.id} has been cancelled successfully.`),await T(k.value)}catch(s){console.error("❌ Error cancelling request:",s),alert(`Failed to cancel request: ${s.message}\n\nPlease try again or contact support if the problem persists.`)}finally{m.value=null}}},K=e=>ps.A.getRequestTypeIcon(e),W=e=>ps.A.getRequestTypeDisplayName(e),V=e=>ps.A.getStatusColorClass(e),H=e=>ps.A.getStatusTextColorClass(e),z=e=>ps.A.getStatusDisplayName(e),Y=(e,t=null)=>{if(0===e)return"Waiting from another user";const s="booking_service"===t?S:E,a=s.find(t=>t.id===e);return a?a.label:`Step ${e}`},G=(e,t,s)=>e<t||"approved"===s&&e<=6?"bg-green-500":e===t&&"pending"===s?"bg-blue-500":"rejected"===s&&e===t?"bg-red-500":"bg-gray-300",J=(e,t,s)=>e<t||"approved"===s&&e<=6?"text-green-700":e===t?"rejected"===s?"text-red-700":"text-blue-700":"text-gray-500",Z=e=>ps.A.formatDate(e),ee=e=>ps.A.formatTime(e),te=e=>{const t={not_yet_returned:"Not Yet Returned",returned:"Returned",returned_but_compromised:"Returned but Compromised"};return t[e]||e||"Not Yet Returned"},se=e=>{const t={not_yet_returned:"bg-yellow-400",returned:"bg-green-400",returned_but_compromised:"bg-orange-400"};return t[e]||"bg-gray-400"},ae=e=>{const t={not_yet_returned:"text-yellow-400",returned:"text-green-400",returned_but_compromised:"text-orange-400"};return t[e]||"text-gray-400"},re=e=>{if(!e)return"N/A";const t=String(e).padStart(6,"0");return`#REQ-${t}`},ie=e=>{if(!e)return"Unknown";const t=W(e.type);if("combined_access"===e.type&&e.services&&e.services.length>0){const s=e.services.join(", ");return`${t} - ${s}`}return t},ne=(0,a.EW)(()=>y.value.some(e=>"implemented"===e.status||"approved"===e.status)),le=e=>{x.value=x.value===e?null:e},oe=()=>{x.value=null},de=e=>{j(e),oe()},ce=e=>{D(e),oe()},ue=e=>{B(e),oe()},pe=e=>L.value[e]||0,be=e=>!!q.value[e],me=(e,t)=>{if(!t||"combined_access"!==t.type)return;if(L.value[e]=(L.value[e]||0)+1,L.value[e]>C)return;const s=R[Math.min(L.value[e]-1,R.length-1)];q.value[e]=setTimeout(async()=>{clearTimeout(q.value[e]),delete q.value[e],await fe(t)},s)},fe=async e=>{if(!e||"combined_access"!==e.type)return;const t=e.id;if(L.value[t]||(L.value[t]=0),!be(t))try{q.value[t]=setTimeout(()=>{},0),await ms["default"].resendSmsGeneric({requestId:t,role:"staff",target:"hod"}),setTimeout(async()=>{await T(k.value),clearTimeout(q.value[t]),delete q.value[t];const s=(y.value||[]).find(e=>e.id===t)||e,a=s.sms_to_hod_status||"pending";["sent"].includes(a)?L.value[t]=0:me(t,s)},1200)}catch(s){clearTimeout(q.value[t]),delete q.value[t],me(t,e)}},ge=()=>{(y.value||[]).forEach(e=>{if(!e||"combined_access"!==e.type)return;const t=e.sms_to_hod_status||"pending";["failed","pending"].includes(t)&&(q.value[e.id]||0!==(L.value[e.id]||0)||me(e.id,e))})},ve=e=>{const t={sent:"Delivered",pending:"Pending",failed:"Failed"};return t[e]||"Pending"},xe=e=>{const t={sent:"bg-green-500",pending:"bg-yellow-500",failed:"bg-red-500"};return t[e]||"bg-gray-400"},ye=e=>{const t={sent:"text-green-400",pending:"text-yellow-400",failed:"text-red-400"};return t[e]||"text-gray-400"};return{loading:i,requests:y,totalRequests:h,currentPage:k,perPage:_,lastPage:w,showSuccessMessage:n,showPendingBookingMessage:l,pendingBookingId:o,showPendingAccessMessage:d,pendingAccessRequestId:c,blockMessage:u,requestType:p,latestRequestId:b,cancelingRequest:m,showEditModal:f,showResubmitModal:g,selectedRequest:v,activeMenuId:x,approvalSteps:E,bookingSteps:S,loadRequests:T,refreshRequests:A,editCancelledRequest:I,viewRequestDetails:j,editRequest:D,handleEditConfirm:P,closeEditModal:M,closeResubmitModal:X,handleResubmitConfirm:N,goToSubmitRequest:$,submitNewRequest:F,viewPendingBookingDetails:U,canCancelRequest:Q,canEditRequest:O,cancelRequest:B,getRequestTypeIcon:K,getRequestTypeName:W,getStatusColor:V,getStatusTextColor:H,getStatusText:z,getCurrentStepText:Y,getStepStatusClass:G,getStepTextClass:J,formatDate:Z,formatTime:ee,getReturnStatusText:te,getReturnStatusColor:se,getReturnStatusTextColor:ae,formatRequestId:re,getRequestTypeLabel:ie,hasImplementedOrApproved:ne,toggleActionsMenu:le,closeActionsMenu:oe,getSmsStatusText:ve,getSmsStatusColor:xe,getSmsStatusTextColor:ye,handleViewMenuAction:de,handleEditMenuAction:ce,handleCancelMenuAction:ue,getRetryAttempts:pe,isRetrying:be,retrySendSms:fe}}};const gs=(0,Xt.A)(fs,[["render",ht],["__scopeId","data-v-4c9dbd6f"]]);var vs=gs},4710:function(e,t,s){s.r(t);s(4603),s(7566),s(8721);var a=s(4373);const r="/api",i=a.A.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),n=a.A.create({baseURL:r,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),l=!1,o=e=>{e.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e))};o(i),o(n);const d=e=>{e.interceptors.request.use(e=>{if(e.method&&"get"===e.method.toLowerCase())try{const t=new URL(e.url,e.baseURL);t.searchParams.set("_cb",String(Date.now())),e.url=t.pathname+t.search}catch(t){const s=(e.url||"").includes("?")?"&":"?";e.url=`${e.url}${s}_cb=${Date.now()}`}return e},e=>Promise.reject(e))};d(i),d(n);const c={data:null,timestamp:null,maxAge:15e3},u="true"===String({NODE_ENV:"production",VUE_APP_API_URL:"/api",VUE_APP_NAME:"Mnh Access Management System",VUE_APP_VERSION:"1.0.0",VUE_APP_DEBUG:"false",VUE_APP_LOG_LEVEL:"debug",VUE_APP_API_TIMEOUT:"30000",BASE_URL:"/"}.VUE_APP_ENABLE_SMS_RESEND||"false").toLowerCase(),p={isResendEnabled(){return u},async resendSmsGeneric({requestId:e,role:t=null,target:s=null,phone:a=null,channel:r="sms"}){if(!u)return{success:!1,message:"SMS resend not supported by backend; skipped"};const i=e=>{if(!e)return null;const t=String(e).trim(),s=t.startsWith("+"),a=t.replace(/[^\d]/g,"");return s?`+${a}`:a},l=a||null,o=i(l),d={request_id:e,role:t,target:s,notification_type:"generic_sms",resend_only:!0,force:!0,force_resend:!0,resend_sms:!0,send_sms:!0,notification_channel:r,phone:l||void 0,phone_number:o||void 0,recipient_phone:o||void 0,destination_phone:o||void 0,msisdn:o||void 0,contact_phone:o||void 0,requester_phone:l||void 0,requester_phone_number:l||void 0,staff_phone:l||void 0,staff_phone_number:l||void 0},c=[];let p,b;for(let u=0;u<c.length;u++)try{return p=await n.post(c[u],d),{success:!!p.data?.success,data:p.data?.data,message:p.data?.message}}catch(m){b=m;continue}return{success:!1,message:b?.response?.data?.message||b?.message||"No resend endpoints configured"}},async getPendingRequestsCount(e=!1){if(!e&&c.data&&c.timestamp){const e=Date.now()-c.timestamp;if(e<c.maxAge)return l&&Math.round(e/1e3),c.data}let t=null;const s=2;for(let r=1;r<=s;r++)try{const e=await n.get("/notifications/pending-count");if(e.data.success)return c.data=e.data.data,c.timestamp=Date.now(),e.data.data;console.error("❌ NotificationService: Failed to load pending count:",e.data.message),t=new Error(e.data.message||"Failed to load pending requests count")}catch(a){if(r===s&&l&&console.error("❌ NotificationService: Error fetching pending count:",a?.message||a),a.response&&(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data),console.error("Response headers:",a.response.headers)),t=a,401===a.response?.status||403===a.response?.status)break;if(500===a.response?.status&&r>=2)break;r<s&&await new Promise(e=>setTimeout(e,1e3*r))}if(t){if(c.data)return console.warn("⚠️ NotificationService: Using stale cached data due to API failure"),c.data;l&&(console.error("🚫 NotificationService: All retry attempts failed"),console.error("Last error details:",{message:t.message,status:t.response?.status,data:t.response?.data})),l&&console.warn("🔄 NotificationService: Providing fallback data to prevent UI breakage");const e={total_pending:0,requires_attention:!1,details:null};return c.data=e,c.timestamp=Date.now(),e}return{total_pending:0,requires_attention:!1,details:null}},async getPendingRequestsBreakdown(){try{const e=await n.get("/notifications/breakdown");if(e.data.success)return e.data.data;throw console.error("❌ NotificationService: Failed to load breakdown:",e.data.message),new Error(e.data.message||"Failed to load breakdown")}catch(e){console.error("❌ NotificationService: Error fetching breakdown:",e);let t="Network error while loading breakdown";throw e.response?t=e.response.data?.message||"Failed to load breakdown":"ECONNABORTED"===e.code?t="Request timed out - server may be slow":e.message.includes("Network Error")&&(t="Network connection error"),new Error(t)}},clearCache(){c.data=null,c.timestamp=null},getRoleNotificationConfig(e){const t={head_of_department:{routePattern:"/hod-dashboard",menuItems:["/hod-dashboard/request-list"],description:"New requests awaiting HOD approval"},divisional_director:{routePattern:"/divisional-dashboard",menuItems:["/divisional-dashboard/combined-requests"],description:"HOD-approved requests awaiting divisional approval"},ict_director:{routePattern:"/dict-dashboard",menuItems:["/dict-dashboard/combined-requests"],description:"Divisional-approved requests awaiting ICT Director approval"},head_of_it:{routePattern:"/head_of_it-dashboard",menuItems:["/head_of_it-dashboard/combined-requests"],description:"ICT Director-approved requests awaiting Head of IT approval"},ict_officer:{routePattern:"/ict-dashboard",menuItems:["/ict-dashboard/access-requests"],description:"Requests requiring implementation (excludes implemented/completed)"},admin:{routePattern:"/admin-dashboard",menuItems:["/admin-dashboard","/service-users"],description:"System-wide pending requests"}};return t[e]||{routePattern:"/user-dashboard",menuItems:[],description:"No pending approval tasks"}},shouldShowNotificationForRoute(e,t){const s=this.getRoleNotificationConfig(t);return s.menuItems.includes(e)}};t["default"]=p},9308:function(e,t,s){s(8111),s(7588);var a=s(4373);const r="/api",i=a.A.create({baseURL:r,timeout:parseInt("30000")||1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});i.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),window.location.href="/login"),Promise.reject(e)));const n={async getRequests(e={}){try{const t=await i.get("/request-status",{params:e});return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error fetching requests:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to fetch requests",data:null}}},async getRequestDetails(e,t){try{const s=await i.get("/request-status/details",{params:{id:e,type:t}});s.data;let a=s.data.data;return a&&"combined_access"===t&&((a.hod_approved_at||a.hod_approval_comment)&&(a.hodApproval={status:a.hod_approval_status||"pending",approved_at:a.hod_approved_at,approved_by:a.hod_approved_by,approved_by_name:a.hod_approved_by_name,comment:a.hod_approval_comment,rejection_reason:a.hod_rejection_reason||a.hod_approval_comment}),["divisional_director","ict_director","head_of_it","ict_officer"].forEach(e=>{const t=`${e}_approval_status`,s=`${e}_approved_at`,r=`${e}_approved_by`,i=`${e}_approval_comment`;(a[t]||a[s]||a[i])&&(a[`${e.replace("_","")}Approval`]={status:a[t]||"pending",approved_at:a[s],approved_by:a[r],comment:a[i],rejection_reason:a[i]})})),{success:!0,data:a,message:s.data.message}}catch(s){return console.error("❌ Error fetching request details:",{error:s.message,response:s.response?.data,status:s.response?.status,statusText:s.response?.statusText,headers:s.response?.headers,config:{url:s.config?.url,method:s.config?.method,params:s.config?.params},params:{id:e,type:t}}),{success:!1,error:s.response?.data?.message||s.message||"Failed to fetch request details",data:null}}},async getStatistics(){try{const e=await i.get("/request-status/statistics");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error fetching statistics:",e),{success:!1,error:e.response?.data?.message||e.message||"Failed to fetch statistics",data:null}}},async searchRequests(e={}){try{const t={search:e.search||"",status:e.status||"",type:e.type||"",sort_by:e.sortBy||"created_at",sort_order:e.sortOrder||"desc",per_page:e.perPage||15,page:e.page||1};Object.keys(t).forEach(e=>{""!==t[e]&&null!==t[e]&&void 0!==t[e]||delete t[e]});const s=await i.get("/request-status",{params:t});return{success:!0,data:s.data.data,message:s.data.message}}catch(t){return console.error("Error searching requests:",t),{success:!1,error:t.response?.data?.message||t.message||"Failed to search requests",data:null}}},async getRequestsPaginated(e=1,t=15,s={}){try{const a={page:e,per_page:t,...s},r=await i.get("/request-status",{params:a});return{success:!0,data:r.data.data,message:r.data.message}}catch(a){return console.error("Error fetching paginated requests:",a),{success:!1,error:a.response?.data?.message||a.message||"Failed to fetch requests",data:null}}},async refreshRequests(e={}){return this.getRequests(e)},getRequestTypeDisplayName(e){const t={combined_access:"Combined Access",booking_service:"Booking Service",jeeva_access:"Jeeva Access",wellsoft_access:"Wellsoft Access",internet_access:"Internet Access"};return t[e]||e},getStatusDisplayName(e){const t={pending:"Pending",pending_hod:"Pending HOD Approval",pending_divisional:"Pending Divisional Approval",pending_ict_director:"Pending ICT Director Approval",pending_head_it:"Pending Head IT Approval",pending_ict_officer:"Pending ICT Officer Approval",approved:"Approved",hod_approved:"HOD Approved",divisional_approved:"Divisional Approved",ict_director_approved:"ICT Director Approved",head_it_approved:"Head IT Approved",ict_officer_approved:"ICT Officer Approved",rejected:"Rejected",hod_rejected:"HOD Rejected",divisional_rejected:"Divisional Rejected",ict_director_rejected:"ICT Director Rejected",head_it_rejected:"Head IT Rejected",ict_officer_rejected:"ICT Officer Rejected",implemented:"Implemented",cancelled:"Cancelled",in_review:"In Review",in_use:"In Use",returned:"Returned",overdue:"Overdue"};return t[e]||e},getStatusColorClass(e){const t={pending:"bg-yellow-400 animate-pulse",pending_hod:"bg-yellow-400 animate-pulse",pending_divisional:"bg-yellow-400 animate-pulse",pending_ict_director:"bg-yellow-400 animate-pulse",pending_head_it:"bg-yellow-400 animate-pulse",pending_ict_officer:"bg-yellow-400 animate-pulse",approved:"bg-green-400",hod_approved:"bg-green-400",divisional_approved:"bg-green-400",ict_director_approved:"bg-green-400",head_it_approved:"bg-green-400",ict_officer_approved:"bg-green-400",rejected:"bg-red-400",hod_rejected:"bg-red-400",divisional_rejected:"bg-red-400",ict_director_rejected:"bg-red-400",head_it_rejected:"bg-red-400",ict_officer_rejected:"bg-red-400",implemented:"bg-green-400",cancelled:"bg-gray-400",in_review:"bg-blue-400 animate-pulse",in_use:"bg-purple-400",returned:"bg-gray-400",overdue:"bg-red-500 animate-pulse"};return t[e]||"bg-gray-400"},getStatusTextColorClass(e){const t={pending:"text-yellow-400",pending_hod:"text-yellow-400",pending_divisional:"text-yellow-400",pending_ict_director:"text-yellow-400",pending_head_it:"text-yellow-400",pending_ict_officer:"text-yellow-400",approved:"text-green-400",hod_approved:"text-green-400",divisional_approved:"text-green-400",ict_director_approved:"text-green-400",head_it_approved:"text-green-400",ict_officer_approved:"text-green-400",rejected:"text-red-400",hod_rejected:"text-red-400",divisional_rejected:"text-red-400",ict_director_rejected:"text-red-400",head_it_rejected:"text-red-400",ict_officer_rejected:"text-red-400",implemented:"text-green-400",cancelled:"text-gray-400",in_review:"text-blue-400",in_use:"text-purple-400",returned:"text-gray-400",overdue:"text-red-500"};return t[e]||"text-gray-400"},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},formatTime(e){if(!e)return"";const t=new Date(e);return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},getRequestTypeIcon(e){const t={combined_access:"fas fa-layer-group",booking_service:"fas fa-calendar-check",jeeva_access:"fas fa-file-medical",wellsoft_access:"fas fa-laptop-medical",internet_access:"fas fa-wifi"};return t[e]||"fas fa-file-alt"},async debug(){try{const e=await i.get("/request-status/debug");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error in debug endpoint:",e),{success:!1,error:e.response?.data?.message||e.message||"Debug failed",data:null}}}};t.A=n},9423:function(e,t,s){var a=s(4373);const r="/api",i=a.A.create({baseURL:r,timeout:parseInt("30000")||1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});i.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("session_data"),window.location.href="/login"),Promise.reject(e))),t.A=i}}]);
//# sourceMappingURL=8958.0cc3f820.js.map