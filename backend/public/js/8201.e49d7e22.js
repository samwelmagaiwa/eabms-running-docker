"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8201],{4854:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var s=r(5796);const a={class:"min-h-screen bg-gray-100"},o={class:"flex"},n={class:"flex-1 p-8"},i={class:"max-w-6xl mx-auto"},c={key:0,class:"text-center py-8"},d={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},l={key:2,class:"bg-white rounded-lg shadow overflow-hidden"},u={class:"px-6 py-4 border-b border-gray-200"},p={class:"text-xl font-semibold text-gray-800"},x={key:0,class:"text-center py-12"},g={key:1,class:"overflow-x-auto"},y={class:"min-w-full divide-y divide-gray-200"},h={class:"bg-white divide-y divide-gray-200"},k={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},m={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},v={class:"px-6 py-4 whitespace-nowrap"},w={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},b={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},q=["onClick"],L=["onClick"];function R(e,t,r,R,C,E){const _=(0,s.g2)("Header"),j=(0,s.g2)("ModernSidebar"),X=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(_),(0,s.Lk)("div",o,[(0,s.bF)(j),(0,s.Lk)("main",n,[(0,s.Lk)("div",i,[t[6]||(t[6]=(0,s.Lk)("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"ICT Device Requests",-1)),C.isLoading?((0,s.uX)(),(0,s.CE)("div",c,[...t[1]||(t[1]=[(0,s.Lk)("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),(0,s.Lk)("p",{class:"mt-2 text-gray-600"},"Loading requests...",-1)])])):C.error?((0,s.uX)(),(0,s.CE)("div",d,[t[2]||(t[2]=(0,s.Lk)("h3",{class:"font-bold"},"Error Loading Requests",-1)),(0,s.Lk)("p",null,(0,s.v_)(C.error),1),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>E.fetchRequests&&E.fetchRequests(...e)),class:"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"}," Retry ")])):((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",u,[(0,s.Lk)("h2",p," Device Borrowing Requests ("+(0,s.v_)(C.requests.length)+") ",1)]),0===C.requests.length?((0,s.uX)(),(0,s.CE)("div",x,[...t[3]||(t[3]=[(0,s.Lk)("p",{class:"text-gray-500"},"No requests found",-1)])])):((0,s.uX)(),(0,s.CE)("div",g,[(0,s.Lk)("table",y,[t[5]||(t[5]=(0,s.Lk)("thead",{class:"bg-gray-50"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Borrower "),(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Device "),(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),(0,s.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),(0,s.Lk)("tbody",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(C.requests,e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,class:"hover:bg-gray-50"},[(0,s.Lk)("td",k,(0,s.v_)(e.id),1),(0,s.Lk)("td",f,(0,s.v_)(e.borrower_name||"Unknown"),1),(0,s.Lk)("td",m,(0,s.v_)(e.device_name||e.device_type||"Unknown"),1),(0,s.Lk)("td",v,[(0,s.Lk)("span",{class:(0,s.C4)([E.getStatusClass(e.ict_approve),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},(0,s.v_)(e.ict_approve||"pending"),3)]),(0,s.Lk)("td",w,(0,s.v_)(E.formatDate(e.booking_date)),1),(0,s.Lk)("td",b,[(0,s.bF)(X,{to:`/ict-approval/request/${e.id}`,class:"text-blue-600 hover:text-blue-900 mr-3"},{default:(0,s.k6)(()=>[...t[4]||(t[4]=[(0,s.eW)(" View ",-1)])]),_:1},8,["to"]),"pending"===e.ict_approve?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>E.approveRequest(e.id),class:"text-green-600 hover:text-green-900 mr-3"}," Approve ",8,q)):(0,s.Q3)("",!0),"pending"===e.ict_approve?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:t=>E.rejectRequest(e.id),class:"text-red-600 hover:text-red-900"}," Reject ",8,L)):(0,s.Q3)("",!0)])]))),128))])])]))]))])])])])}var C=r(5498),E=r(8966),_=r(4466),j={name:"RequestsListSimple",components:{Header:C.A,ModernSidebar:E.A},data(){return{requests:[],isLoading:!1,error:null}},async mounted(){await this.fetchRequests()},methods:{async fetchRequests(){this.isLoading=!0,this.error=null;try{const e=await _.d.getAllRequests({per_page:50});if(!e.success)throw new Error(e.message||"Failed to fetch requests");this.requests=e.data.data||[],this.requests.length}catch(e){console.error("Error fetching requests:",e),this.error=e.message}finally{this.isLoading=!1}},async approveRequest(e){try{const t=prompt("Add approval notes (optional):")||"",r=await _.d.approveRequest(e,t);if(!r.success)throw new Error(r.message||"Failed to approve request");alert("Request approved successfully!"),await this.fetchRequests()}catch(t){console.error("Error approving request:",t),alert("Error approving request: "+t.message)}},async rejectRequest(e){try{const t=prompt("Please provide a rejection reason (required):");if(!t||""===t.trim())return void alert("Rejection reason is required");const r=await _.d.rejectRequest(e,t);if(!r.success)throw new Error(r.message||"Failed to reject request");alert("Request rejected successfully!"),await this.fetchRequests()}catch(t){console.error("Error rejecting request:",t),alert("Error rejecting request: "+t.message)}},getStatusClass(e){const t={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return t[e]||t.pending},formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString()}catch{return e}}}},X=r(1241);const D=(0,X.A)(j,[["render",R]]);var A=D}}]);
//# sourceMappingURL=8201.e49d7e22.js.map