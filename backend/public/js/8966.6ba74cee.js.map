{"version":3,"file":"js/8966.6ba74cee.js","mappings":"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","sources":["webpack://frontend/./src/composables/useAuth.js","webpack://frontend/./src/utils/logoutGuard.js","webpack://frontend/./src/components/ModernSidebar.vue","webpack://frontend/./src/composables/useSidebar.js","webpack://frontend/./src/utils/auth.js","webpack://frontend/./src/components/ModernSidebar.vue?0148"],"sourcesContent":["import { computed } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useAuthStore } from '@/stores/auth'\nimport { ROLES, getDefaultDashboard } from '../utils/permissions'\n\n/**\n * Auth composable that provides authentication functionality\n * using Pinia auth store and Vue Router\n */\nexport function useAuth() {\n  const router = useRouter()\n  const authStore = useAuthStore()\n\n  // Computed properties from Pinia store\n  const user = computed(() => authStore.user)\n  const token = computed(() => authStore.token)\n  const isAuthenticated = computed(() => authStore.isAuthenticated)\n  const userPermissions = computed(() => authStore.userPermissions)\n  const userRole = computed(() => authStore.userRole)\n  const userRoles = computed(() => authStore.userRoles)\n  const isLoading = computed(() => authStore.isLoading)\n  const error = computed(() => authStore.error)\n  const isAdmin = computed(() => authStore.isAdmin)\n  const isStaff = computed(() => authStore.isStaff)\n  const isApprover = computed(() => authStore.isApprover)\n  const userName = computed(() => user.value?.name || 'User')\n\n  /**\n   * Login user with credentials\n   * @param {Object} credentials - { email, password }\n   * @returns {Promise<Object>} - Login result\n   */\n  const login = async (credentials) => {\n    try {\n      const { authService } = await import('@/services/authService')\n      const result = await authService.login(credentials)\n\n      if (result.success) {\n        const { user, token } = result.data\n\n        // Set Pinia auth data\n        authStore.setAuthData({ user, token })\n\n        // Determine redirect path\n        let redirectPath = getDefaultDashboard(authStore.userRole) || '/user-dashboard'\n        if (user?.needs_onboarding && authStore.userRole !== 'admin') {\n          redirectPath = '/onboarding'\n        }\n        const redirectTo = router.currentRoute.value.query.redirect\n        if (redirectTo && typeof redirectTo === 'string') {\n          redirectPath = redirectTo\n        }\n\n        await router.push(redirectPath)\n        return { success: true, user }\n      } else {\n        // Handle failed login - prefer specific field errors (e.g. password min length)\n        // then fall back to backend message like \"Invalid email or password.\"\n        let errorMessage = result.message || 'Login failed'\n\n        if (result.errors && typeof result.errors === 'object') {\n          const fieldOrder = ['email', 'password']\n          for (const field of fieldOrder) {\n            const fieldErrors = result.errors[field]\n            if (Array.isArray(fieldErrors) && fieldErrors.length > 0) {\n              errorMessage = fieldErrors[0]\n              break\n            }\n          }\n        }\n\n        console.error('‚ùå Login failed:', errorMessage)\n        authStore.setError(errorMessage)\n        return {\n          success: false,\n          message: errorMessage\n        }\n      }\n    } catch (error) {\n      console.error('‚ùå Login error in composable:', error)\n      authStore.setError(error.message || 'Login failed')\n      return {\n        success: false,\n        message: error.message || 'Login failed'\n      }\n    }\n  }\n\n  /**\n   * Logout current user\n   * @returns {Promise<Object>} - Logout result\n   */\n  const logout = async () => {\n    try {\n      const { authService } = await import('@/services/authService')\n      await authService.logout()\n      authStore.clearAuth()\n      await router.push('/login')\n      return { success: true }\n    } catch (error) {\n      authStore.clearAuth()\n      await router.push('/login')\n      return { success: true }\n    }\n  }\n\n  /**\n   * Logout from all sessions\n   * @returns {Promise<Object>} - Logout all result\n   */\n  const logoutAll = async () => {\n    try {\n      const { authService } = await import('@/services/authService')\n      const result = await authService.logoutAll()\n      authStore.clearAuth()\n      await router.push('/login')\n      return result.success ? result : { success: true }\n    } catch (error) {\n      authStore.clearAuth()\n      await router.push('/login')\n      return { success: true }\n    }\n  }\n\n  /**\n   * Update user data\n   * @param {Object} userData - Updated user data\n   */\n  const updateUser = (userData) => {\n    authStore.updateUser(userData)\n  }\n\n  /**\n   * Clear authentication error\n   */\n  const clearError = () => {\n    authStore.clearError()\n  }\n\n  /**\n   * Check if user has specific permission\n   * @param {string} permission - Permission to check\n   * @returns {boolean} - Whether user has permission\n   */\n  const hasPermission = (permission) => {\n    return authStore.hasPermission(permission)\n  }\n\n  /**\n   * Check if user has any of the specified roles\n   * @param {string|Array} roles - Role(s) to check\n   * @returns {boolean} - Whether user has any of the roles\n   */\n  const hasRole = (roles) => {\n    return authStore.hasRole(roles)\n  }\n\n  /**\n   * Check if user can access a specific route\n   * @param {Object} route - Route object with meta.roles\n   * @returns {boolean} - Whether user can access route\n   */\n  const canAccessRoute = (route) => {\n    if (!route.meta?.roles) return true\n    return hasRole(route.meta.roles)\n  }\n\n  /**\n   * Require specific role(s) - throws error if user doesn't have required role\n   * @param {string|Array} requiredRoles - Required role(s)\n   * @throws {Error} - If user doesn't have required role\n   */\n  const requireRole = (requiredRoles) => {\n    if (!hasRole(requiredRoles)) {\n      const roleList = Array.isArray(requiredRoles) ? requiredRoles.join(', ') : requiredRoles\n      throw new Error(`Access denied. Required role(s): ${roleList}`)\n    }\n  }\n\n  /**\n   * Get display name for a role\n   * @param {string} role - Role to get display name for\n   * @returns {string} - Display name for the role\n   */\n  const getRoleDisplayName = (role) => {\n    if (!role) return 'User'\n\n    const roleNames = {\n      [ROLES.ADMIN]: 'Administrator',\n      [ROLES.DIVISIONAL_DIRECTOR]: 'Divisional Director',\n      [ROLES.HEAD_OF_DEPARTMENT]: 'Head of Department',\n      [ROLES.ICT_DIRECTOR]: 'ICT Director',\n      [ROLES.HEAD_OF_IT]: 'Head of IT',\n      [ROLES.STAFF]: 'D. IN MEDICINE',\n      [ROLES.ICT_OFFICER]: 'ICT Officer',\n      [ROLES.SECRETARY_ICT]: 'Secretary ICT'\n    }\n    return roleNames[role] || role\n  }\n\n  return {\n    // State\n    user,\n    userName,\n    token,\n    isAuthenticated,\n    userPermissions,\n    userRole,\n    userRoles,\n    isLoading,\n    error,\n    isAdmin,\n    isStaff,\n    isApprover,\n\n    // Actions\n    login,\n    logout,\n    logoutAll,\n    updateUser,\n    clearError,\n\n    // Utilities\n    hasPermission,\n    hasRole,\n    canAccessRoute,\n    requireRole,\n    getRoleDisplayName,\n\n    // Constants\n    ROLES\n  }\n}\n\nexport default useAuth\n","/**\n * Global Logout Guard\n * Prevents duplicate logout API calls across the application\n */\n\nclass LogoutGuard {\n  constructor() {\n    this.isLoggingOut = false\n    this.logoutPromise = null\n    this.lastLogoutTime = 0\n    this.cooldownPeriod = 2000 // 2 seconds cooldown\n  }\n\n  /**\n   * Execute logout with deduplication\n   */\n  async executeLogout(logoutFunction) {\n    const now = Date.now()\n\n    // Check if we're in cooldown period\n    if (now - this.lastLogoutTime < this.cooldownPeriod) {\n      console.log('‚ö†Ô∏è Logout in cooldown period, ignoring duplicate call')\n      return { success: true, message: 'Logout in cooldown period' }\n    }\n\n    // If already logging out, return the existing promise\n    if (this.isLoggingOut && this.logoutPromise) {\n      console.log('‚ö†Ô∏è Logout already in progress, waiting for completion...')\n      return this.logoutPromise\n    }\n\n    console.log('üö™ Starting logout process...')\n    this.isLoggingOut = true\n    this.lastLogoutTime = now\n\n    // Create and store the logout promise\n    this.logoutPromise = this.performLogout(logoutFunction)\n\n    return this.logoutPromise\n  }\n\n  /**\n   * Perform the actual logout\n   */\n  async performLogout(logoutFunction) {\n    try {\n      const result = await logoutFunction()\n      console.log('‚úÖ Logout completed successfully')\n      return result\n    } catch (error) {\n      console.error('‚ùå Logout failed:', error)\n      throw error\n    } finally {\n      // Reset after a delay to prevent rapid re-logout attempts\n      setTimeout(() => {\n        this.isLoggingOut = false\n        this.logoutPromise = null\n      }, 1000)\n    }\n  }\n\n  /**\n   * Reset the guard (useful for testing)\n   */\n  reset() {\n    this.isLoggingOut = false\n    this.logoutPromise = null\n    this.lastLogoutTime = 0\n  }\n\n  /**\n   * Check if logout is in progress\n   */\n  get isInProgress() {\n    return this.isLoggingOut\n  }\n}\n\n// Export singleton instance\nexport const logoutGuard = new LogoutGuard()\n\n// Add to window for debugging\nif (typeof window !== 'undefined' && process.env.VUE_APP_DEBUG === 'true') {\n  window.logoutGuard = logoutGuard\n}\n\nexport default logoutGuard\n","<template>\n  <aside\n    class=\"h-full flex flex-col transition-all duration-300 ease-in-out overflow-hidden relative shadow-2xl sidebar-responsive\"\n    :class=\"[\n      isCollapsed ? 'w-16 sidebar-collapsed' : 'sidebar-expanded',\n      !shouldShowSidebar ? 'invisible pointer-events-none opacity-0' : 'opacity-100'\n    ]\"\n    :style=\"!isCollapsed ? 'width: 16rem;' : ''\"\n    aria-label=\"Sidebar navigation\"\n    style=\"\n      background: linear-gradient(\n        135deg,\n        #1e3a8a 0%,\n        #1e40af 25%,\n        #1d4ed8 50%,\n        #1e40af 75%,\n        #1e3a8a 100%\n      );\n      box-shadow:\n        0 25px 50px -12px rgba(0, 0, 0, 0.25),\n        0 0 0 1px rgba(255, 255, 255, 0.1);\n      border-right: 1px solid rgba(59, 130, 246, 0.4);\n    \"\n    :aria-hidden=\"!shouldShowSidebar\"\n  >\n    <!-- Enhanced Background Layers -->\n    <div class=\"absolute inset-0\">\n      <!-- Primary shadow layer -->\n      <div\n        class=\"absolute inset-0 bg-gradient-to-br from-blue-900/20 via-transparent to-blue-800/30 rounded-2xl m-1\"\n      ></div>\n      <!-- Decorative Border -->\n      <div class=\"absolute inset-0 border-2 border-dashed border-blue-300/20 rounded-2xl m-2\"></div>\n      <!-- Inner glow -->\n      <div\n        class=\"absolute inset-0 bg-gradient-to-t from-transparent via-blue-400/5 to-blue-300/10 rounded-2xl m-3\"\n      ></div>\n    </div>\n\n    <!-- Main Content Container -->\n    <div class=\"relative z-10 flex flex-col h-full\">\n      <!-- Header with Menu Icon and Profile -->\n      <div class=\"mb-6 px-4 pt-4\">\n        <!-- Menu Icon and Brand -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <!-- Menu Toggle Button -->\n          <button\n            @click=\"toggleCollapse\"\n            class=\"menu-toggle-btn p-2 rounded-lg transition-all duration-300 hover:bg-blue-600/60 text-white group relative overflow-hidden\"\n            :aria-label=\"isCollapsed ? 'Expand sidebar' : 'Collapse sidebar'\"\n          >\n            <!-- Animated Menu Icon -->\n            <div class=\"relative w-6 h-6\">\n              <!-- Top line -->\n              <span\n                class=\"absolute left-0 top-1 w-6 h-0.5 bg-white rounded-full transition-all duration-300 transform origin-center\"\n                :class=\"{\n                  'rotate-45 translate-y-2': isCollapsed,\n                  'rotate-0 translate-y-0': !isCollapsed\n                }\"\n              ></span>\n              <!-- Middle line -->\n              <span\n                class=\"absolute left-0 top-3 w-6 h-0.5 bg-white rounded-full transition-all duration-300\"\n                :class=\"{\n                  'opacity-0 scale-0': isCollapsed,\n                  'opacity-100 scale-100': !isCollapsed\n                }\"\n              ></span>\n              <!-- Bottom line -->\n              <span\n                class=\"absolute left-0 top-5 w-6 h-0.5 bg-white rounded-full transition-all duration-300 transform origin-center\"\n                :class=\"{\n                  '-rotate-45 -translate-y-2': isCollapsed,\n                  'rotate-0 translate-y-0': !isCollapsed\n                }\"\n              ></span>\n            </div>\n            <!-- Hover effect -->\n            <div\n              class=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700\"\n            ></div>\n          </button>\n\n          <!-- Brand/Logo (when expanded) -->\n          <div\n            class=\"transition-all duration-300 ease-in-out overflow-hidden\"\n            :class=\"{\n              'w-0 opacity-0': isCollapsed,\n              'w-auto opacity-100': !isCollapsed\n            }\"\n          >\n            <div class=\"flex items-center space-x-2\">\n              <div\n                class=\"w-8 h-8 bg-gradient-to-br from-blue-500/30 to-blue-600/30 rounded-lg backdrop-blur-sm border border-blue-400/50 flex items-center justify-center shadow-lg\"\n              >\n                <i class=\"fas fa-hospital text-white text-sm\"></i>\n              </div>\n              <span class=\"text-white font-bold responsive-brand-text tracking-wide\">MNH</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- User Profile Section -->\n        <div class=\"transition-all duration-500 ease-in-out\">\n          <!-- Expanded Profile -->\n          <div\n            v-if=\"!isCollapsed\"\n            class=\"profile-expanded opacity-100 transform translate-y-0 transition-all duration-500 ease-out\"\n          >\n            <div\n              class=\"flex items-center space-x-3 p-3 rounded-xl bg-blue-600/60 border border-blue-500/40 backdrop-blur-sm hover:bg-blue-600/80 transition-all duration-300 group cursor-pointer\"\n            >\n              <!-- User Avatar -->\n              <div class=\"relative\">\n                <div\n                  class=\"w-14 h-14 rounded-full bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg border-2 border-white/20 group-hover:scale-110 transition-transform duration-300 relative overflow-hidden\"\n                >\n                  <!-- Avatar background layers -->\n                  <div\n                    class=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"\n                  ></div>\n                  <!-- Actual profile photo if available -->\n                  <img\n                    v-if=\"\n                      currentUser?.value?.profile_photo_url ||\n                      piniaAuthStore?.user?.profile_photo_url\n                    \"\n                    :src=\"\n                      currentUser?.value?.profile_photo_url ||\n                      piniaAuthStore?.user?.profile_photo_url\n                    \"\n                    alt=\"Profile photo\"\n                    class=\"w-full h-full object-cover rounded-full relative z-10\"\n                  />\n                  <!-- Fallback to initials -->\n                  <span v-else class=\"text-white font-bold text-lg relative z-10 drop-shadow-lg\">{{\n                    userInitials\n                  }}</span>\n                  <!-- Online indicator -->\n                  <div\n                    class=\"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white shadow-sm animate-pulse\"\n                  ></div>\n                </div>\n                <!-- Avatar glow -->\n                <div\n                  class=\"absolute inset-0 bg-orange-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"\n                ></div>\n              </div>\n\n              <!-- User Info -->\n              <div class=\"flex-1 min-w-0\">\n                <h3\n                  class=\"text-white font-bold responsive-profile-name truncate group-hover:text-orange-100 transition-colors duration-300 text-sm\"\n                >\n                  {{ userName || 'JOHN DOE' }}\n                </h3>\n                <p\n                  class=\"text-blue-100 responsive-profile-role truncate opacity-80 group-hover:opacity-100 transition-opacity duration-300 text-xs\"\n                >\n                  {{ userDepartmentOrRole }}\n                </p>\n              </div>\n\n              <!-- Profile chevron -->\n              <div\n                class=\"w-5 h-5 text-blue-200 group-hover:text-white transition-colors duration-300\"\n              >\n                <svg class=\"w-full h-full\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    stroke-width=\"2\"\n                    d=\"M9 5l7 7-7 7\"\n                  />\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <!-- Collapsed Profile -->\n          <div\n            v-else\n            class=\"profile-collapsed opacity-100 transform translate-y-0 transition-all duration-500 ease-out flex justify-center\"\n          >\n            <div class=\"relative group cursor-pointer\">\n              <div\n                class=\"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center shadow-lg border-2 border-white/20 group-hover:scale-110 transition-transform duration-300 relative overflow-hidden\"\n              >\n                <!-- Avatar background layers -->\n                <div class=\"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent\"></div>\n                <!-- Actual profile photo if available -->\n                <img\n                  v-if=\"\n                    currentUser?.value?.profile_photo_url || piniaAuthStore?.user?.profile_photo_url\n                  \"\n                  :src=\"\n                    currentUser?.value?.profile_photo_url || piniaAuthStore?.user?.profile_photo_url\n                  \"\n                  alt=\"Profile photo\"\n                  class=\"w-full h-full object-cover rounded-full relative z-10\"\n                />\n                <!-- Fallback to initials -->\n                <span\n                  v-else\n                  class=\"text-white font-bold responsive-profile-name relative z-10 drop-shadow-lg\"\n                  >{{ userInitials }}</span\n                >\n                <!-- Online indicator -->\n                <div\n                  class=\"absolute bottom-0 right-0 w-2 h-2 bg-green-400 rounded-full border border-white shadow-sm animate-pulse\"\n                ></div>\n              </div>\n              <!-- Avatar glow -->\n              <div\n                class=\"absolute inset-0 bg-orange-500/20 rounded-full blur-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10\"\n              ></div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Navigation Menu -->\n      <nav class=\"flex-1 min-h-0 space-y-1 overflow-y-auto custom-scrollbar px-4\">\n        <!-- Dashboard Section -->\n        <div v-if=\"filteredDashboardItems.length > 0\" class=\"mb-2\">\n          <div\n            v-if=\"!isCollapsed\"\n            class=\"flex items-center justify-between px-4 py-2 responsive-section-header font-bold text-blue-200 uppercase tracking-wider cursor-pointer hover:text-white transition-colors duration-200 section-header text-xs\"\n            @click=\"toggleSectionLocal('dashboard')\"\n          >\n            <span>Dashboard</span>\n            <svg\n              class=\"w-4 h-4 transition-transform duration-200\"\n              :class=\"{ 'rotate-180': !expandedSections.dashboard }\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M19 9l-7 7-7-7\"\n              />\n            </svg>\n          </div>\n\n          <div\n            class=\"space-y-1 transition-all duration-300 ease-in-out overflow-hidden\"\n            :class=\"{\n              'max-h-0 opacity-0': !isCollapsed && !expandedSections.dashboard && !debugHeadOfIt,\n              'max-h-96 opacity-100': isCollapsed || expandedSections.dashboard || debugHeadOfIt\n            }\"\n            :style=\"{\n              maxHeight: isCollapsed || expandedSections.dashboard || debugHeadOfIt ? '24rem' : '0',\n              opacity: isCollapsed || expandedSections.dashboard || debugHeadOfIt ? '1' : '0'\n            }\"\n          >\n            <router-link\n              v-for=\"item in filteredDashboardItems\"\n              :key=\"item.path\"\n              :to=\"item.path\"\n              class=\"group flex items-center px-4 py-3 responsive-nav-item font-medium rounded-lg transition-all duration-200 relative ml-2 shadow-sm nav-item text-xs\"\n              :class=\"[\n                route.path === item.path\n                  ? 'bg-white text-blue-600 shadow-lg transform scale-105'\n                  : 'text-white hover:bg-blue-600/60 hover:text-white hover:shadow-md hover:transform hover:scale-102',\n                isCollapsed ? 'justify-center ml-0' : ''\n              ]\"\n              v-tooltip=\"isCollapsed ? item.displayName : ''\"\n            >\n              <div\n                class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200 relative\"\n                :class=\"isCollapsed ? '' : 'mr-3'\"\n              >\n                <i :class=\"[item.icon, 'text-current']\"></i>\n                <!-- Notification Badge for collapsed state -->\n                <div\n                  v-if=\"getNotificationCount(item.path) > 0 && isCollapsed\"\n                  class=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1rem] h-4 flex items-center justify-center px-1 shadow-lg border border-white notification-badge animate-pulse\"\n                  style=\"z-index: 999 !important\"\n                  :title=\"`Debug: ${getNotificationCount(item.path)} notifications for ${item.path}`\"\n                >\n                  {{ getNotificationCount(item.path) }}\n                </div>\n              </div>\n              <span v-if=\"!isCollapsed\" class=\"truncate uppercase tracking-wide\">{{\n                item.displayName.toUpperCase()\n              }}</span>\n              <!-- Notification Badge -->\n              <div\n                v-if=\"getNotificationCount(item.path) > 0 && !isCollapsed\"\n                class=\"absolute right-3 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1.25rem] h-5 flex items-center justify-center px-1 shadow-lg border-2 border-white notification-badge animate-pulse\"\n                style=\"z-index: 999 !important\"\n                :title=\"`Debug: ${getNotificationCount(item.path)} notifications for ${item.path}`\"\n              >\n                {{ getNotificationCount(item.path) }}\n              </div>\n              <!-- Active indicator -->\n              <div\n                v-if=\"\n                  route.path === item.path && !isCollapsed && getNotificationCount(item.path) === 0\n                \"\n                class=\"absolute right-2 w-2 h-2 bg-blue-600 rounded-full shadow-sm active-indicator\"\n              ></div>\n            </router-link>\n          </div>\n        </div>\n\n        <!-- User Management Section (Admin only) -->\n        <div v-if=\"filteredUserManagementItems.length > 0\" class=\"mb-2\">\n          <div\n            v-if=\"!isCollapsed\"\n            class=\"flex items-center justify-between px-4 py-2 responsive-section-header font-bold text-blue-200 uppercase tracking-wider cursor-pointer hover:text-white transition-colors duration-200 section-header text-xs\"\n            @click=\"toggleSectionLocal('userManagement')\"\n          >\n            <span>User Management</span>\n            <svg\n              class=\"w-4 h-4 transition-transform duration-200\"\n              :class=\"{ 'rotate-180': !expandedSections.userManagement }\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M19 9l-7 7-7-7\"\n              />\n            </svg>\n          </div>\n\n          <div\n            class=\"space-y-1 transition-all duration-300 ease-in-out overflow-hidden\"\n            :class=\"{\n              'max-h-0 opacity-0': !isCollapsed && !expandedSections.userManagement,\n              'max-h-96 opacity-100': isCollapsed || expandedSections.userManagement\n            }\"\n            :style=\"{\n              maxHeight: isCollapsed || expandedSections.userManagement ? '24rem' : '0',\n              opacity: isCollapsed || expandedSections.userManagement ? '1' : '0'\n            }\"\n          >\n            <router-link\n              v-for=\"item in filteredUserManagementItems\"\n              :key=\"item.path\"\n              :to=\"item.path\"\n              class=\"group flex items-center px-4 py-3 responsive-nav-item font-medium rounded-lg transition-all duration-200 relative ml-2 shadow-sm nav-item text-xs\"\n              :class=\"[\n                route.path === item.path\n                  ? 'bg-white text-blue-600 shadow-lg transform scale-105'\n                  : 'text-white hover:bg-blue-600/60 hover:text-white hover:shadow-md hover:transform hover:scale-102',\n                isCollapsed ? 'justify-center ml-0' : ''\n              ]\"\n              v-tooltip=\"isCollapsed ? item.displayName : ''\"\n            >\n              <div\n                class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200 relative\"\n                :class=\"isCollapsed ? '' : 'mr-3'\"\n              >\n                <i :class=\"[item.icon, 'text-current']\"></i>\n                <!-- Notification Badge for collapsed state -->\n                <div\n                  v-if=\"getNotificationCount(item.path) > 0 && isCollapsed\"\n                  class=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1rem] h-4 flex items-center justify-center px-1 shadow-lg border border-white notification-badge animate-pulse\"\n                >\n                  {{ getNotificationCount(item.path) }}\n                </div>\n              </div>\n              <span v-if=\"!isCollapsed\" class=\"truncate uppercase tracking-wide\">{{\n                item.displayName.toUpperCase()\n              }}</span>\n              <!-- Notification Badge -->\n              <div\n                v-if=\"getNotificationCount(item.path) > 0 && !isCollapsed\"\n                class=\"absolute right-3 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1.25rem] h-5 flex items-center justify-center px-1 shadow-lg border-2 border-white notification-badge animate-pulse\"\n              >\n                {{ getNotificationCount(item.path) }}\n              </div>\n              <!-- Active indicator -->\n              <div\n                v-if=\"\n                  route.path === item.path && !isCollapsed && getNotificationCount(item.path) === 0\n                \"\n                class=\"absolute right-2 w-2 h-2 bg-blue-600 rounded-full shadow-sm active-indicator\"\n              ></div>\n            </router-link>\n          </div>\n        </div>\n\n        <!-- Requests Management Section -->\n        <div v-if=\"filteredRequestsManagementItems.length > 0\" class=\"mb-2\">\n          <div\n            v-if=\"!isCollapsed\"\n            class=\"flex items-center justify-between px-4 py-2 responsive-section-header font-bold text-blue-200 uppercase tracking-wider cursor-pointer hover:text-white transition-colors duration-200 section-header text-xs\"\n            @click=\"toggleSectionLocal('requestsManagement')\"\n          >\n            <span>Requests</span>\n            <svg\n              class=\"w-4 h-4 transition-transform duration-200\"\n              :class=\"{ 'rotate-180': !expandedSections.requestsManagement }\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M19 9l-7 7-7-7\"\n              />\n            </svg>\n          </div>\n\n          <div\n            class=\"space-y-1 transition-all duration-300 ease-in-out overflow-hidden\"\n            :class=\"{\n              'max-h-0 opacity-0':\n                !isCollapsed && !expandedSections.requestsManagement && !debugHeadOfIt,\n              'max-h-96 opacity-100':\n                isCollapsed || expandedSections.requestsManagement || debugHeadOfIt\n            }\"\n            :style=\"{\n              maxHeight:\n                isCollapsed || expandedSections.requestsManagement || debugHeadOfIt ? '24rem' : '0',\n              opacity:\n                isCollapsed || expandedSections.requestsManagement || debugHeadOfIt ? '1' : '0'\n            }\"\n          >\n            <router-link\n              v-for=\"item in filteredRequestsManagementItems\"\n              :key=\"item.path\"\n              :to=\"item.path\"\n              class=\"group flex items-center px-4 py-3 responsive-nav-item font-medium rounded-lg transition-all duration-200 relative ml-2 shadow-sm nav-item text-xs\"\n              :class=\"[\n                route.path === item.path\n                  ? 'bg-white text-blue-600 shadow-lg transform scale-105'\n                  : 'text-white hover:bg-blue-600/60 hover:text-white hover:shadow-md hover:transform hover:scale-102',\n                isCollapsed ? 'justify-center ml-0' : ''\n              ]\"\n              v-tooltip=\"isCollapsed ? item.displayName : ''\"\n            >\n              <div\n                class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200 relative\"\n                :class=\"isCollapsed ? '' : 'mr-3'\"\n              >\n                <i :class=\"[item.icon, 'text-current']\"></i>\n                <!-- Notification Badge for collapsed state -->\n                <div\n                  v-if=\"getNotificationCount(item.path) > 0 && isCollapsed\"\n                  class=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1rem] h-4 flex items-center justify-center px-1 shadow-lg border border-white notification-badge animate-pulse\"\n                >\n                  {{ getNotificationCount(item.path) }}\n                </div>\n              </div>\n              <span v-if=\"!isCollapsed\" class=\"truncate uppercase tracking-wide\">{{\n                item.displayName.toUpperCase()\n              }}</span>\n              <!-- Notification Badge -->\n              <div\n                v-if=\"getNotificationCount(item.path) > 0 && !isCollapsed\"\n                class=\"absolute right-3 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1.25rem] h-5 flex items-center justify-center px-1 shadow-lg border-2 border-white notification-badge animate-pulse\"\n              >\n                {{ getNotificationCount(item.path) }}\n              </div>\n              <!-- Active indicator -->\n              <div\n                v-if=\"\n                  route.path === item.path && !isCollapsed && getNotificationCount(item.path) === 0\n                \"\n                class=\"absolute right-2 w-2 h-2 bg-blue-600 rounded-full shadow-sm active-indicator\"\n              ></div>\n            </router-link>\n          </div>\n        </div>\n\n        <!-- Device Management Section (ICT Officer only) -->\n        <div v-if=\"filteredDeviceManagementItems.length > 0\" class=\"mb-2\">\n          <div\n            v-if=\"!isCollapsed\"\n            class=\"flex items-center justify-between px-4 py-2 responsive-section-header font-bold text-blue-200 uppercase tracking-wider cursor-pointer hover:text-white transition-colors duration-200 section-header text-xs\"\n            @click=\"toggleSectionLocal('deviceManagement')\"\n          >\n            <span>Device Management</span>\n            <svg\n              class=\"w-4 h-4 transition-transform duration-200\"\n              :class=\"{ 'rotate-180': !expandedSections.deviceManagement }\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M19 9l-7 7-7-7\"\n              />\n            </svg>\n          </div>\n\n          <div\n            class=\"space-y-1 transition-all duration-300 ease-in-out overflow-hidden\"\n            :class=\"{\n              'max-h-0 opacity-0': !isCollapsed && !expandedSections.deviceManagement,\n              'max-h-96 opacity-100': isCollapsed || expandedSections.deviceManagement\n            }\"\n            :style=\"{\n              maxHeight: isCollapsed || expandedSections.deviceManagement ? '24rem' : '0',\n              opacity: isCollapsed || expandedSections.deviceManagement ? '1' : '0'\n            }\"\n          >\n            <router-link\n              v-for=\"item in filteredDeviceManagementItems\"\n              :key=\"item.path\"\n              :to=\"item.path\"\n              class=\"group flex items-center px-4 py-3 responsive-nav-item font-medium rounded-lg transition-all duration-200 relative ml-2 shadow-sm nav-item text-xs\"\n              :class=\"[\n                route.path === item.path\n                  ? 'bg-white text-blue-600 shadow-lg transform scale-105'\n                  : 'text-white hover:bg-blue-600/60 hover:text-white hover:shadow-md hover:transform hover:scale-102',\n                isCollapsed ? 'justify-center ml-0' : ''\n              ]\"\n              v-tooltip=\"isCollapsed ? item.displayName : ''\"\n            >\n              <div\n                class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200 relative\"\n                :class=\"isCollapsed ? '' : 'mr-3'\"\n              >\n                <i :class=\"[item.icon, 'text-current']\"></i>\n                <!-- Notification Badge for collapsed state -->\n                <div\n                  v-if=\"getNotificationCount(item.path) > 0 && isCollapsed\"\n                  class=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1rem] h-4 flex items-center justify-center px-1 shadow-lg border border-white notification-badge animate-pulse\"\n                >\n                  {{ getNotificationCount(item.path) }}\n                </div>\n              </div>\n              <span v-if=\"!isCollapsed\" class=\"truncate uppercase tracking-wide\">{{\n                item.displayName.toUpperCase()\n              }}</span>\n              <!-- Notification Badge -->\n              <div\n                v-if=\"getNotificationCount(item.path) > 0 && !isCollapsed\"\n                class=\"absolute right-3 top-1/2 transform -translate-y-1/2 bg-red-500 text-white text-xs font-bold rounded-full min-w-[1.25rem] h-5 flex items-center justify-center px-1 shadow-lg border-2 border-white notification-badge animate-pulse\"\n              >\n                {{ getNotificationCount(item.path) }}\n              </div>\n              <!-- Active indicator -->\n              <div\n                v-if=\"\n                  route.path === item.path && !isCollapsed && getNotificationCount(item.path) === 0\n                \"\n                class=\"absolute right-2 w-2 h-2 bg-blue-600 rounded-full shadow-sm active-indicator\"\n              ></div>\n            </router-link>\n          </div>\n        </div>\n      </nav>\n\n      <!-- Bottom Section -->\n      <div\n        class=\"bottom-section space-y-3 pt-4 pb-4 px-4 border-t border-blue-400/30\"\n        style=\"flex-shrink: 0; margin-top: auto\"\n      >\n        <!-- Help Center -->\n        <button\n          @click=\"showHelp\"\n          class=\"w-full flex items-center px-4 py-3 responsive-bottom-section font-medium rounded-lg transition-all duration-200 text-white hover:bg-blue-600/60\"\n          :class=\"isCollapsed ? 'justify-center' : ''\"\n          v-tooltip=\"isCollapsed ? 'Help Center' : ''\"\n        >\n          <div\n            class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200\"\n            :class=\"isCollapsed ? '' : 'mr-3'\"\n          >\n            <svg\n              class=\"responsive-icon-small text-current\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n              />\n            </svg>\n          </div>\n          <span\n            v-if=\"!isCollapsed\"\n            class=\"truncate uppercase tracking-wide responsive-bottom-section\"\n            >HELP CENTER</span\n          >\n        </button>\n\n        <!-- Logout -->\n        <button\n          @click=\"handleLogout\"\n          class=\"w-full flex items-center px-4 py-3 responsive-bottom-section font-medium rounded-lg transition-all duration-200 text-white hover:bg-blue-600/60\"\n          :class=\"isCollapsed ? 'justify-center' : ''\"\n          v-tooltip=\"isCollapsed ? 'Log Out' : ''\"\n        >\n          <div\n            class=\"flex items-center justify-center responsive-icon-small transition-colors duration-200\"\n            :class=\"isCollapsed ? '' : 'mr-3'\"\n          >\n            <svg\n              class=\"responsive-icon-small text-current\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                stroke-width=\"2\"\n                d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n              />\n            </svg>\n          </div>\n          <span\n            v-if=\"!isCollapsed\"\n            class=\"truncate uppercase tracking-wide responsive-bottom-section\"\n            >LOG OUT</span\n          >\n        </button>\n      </div>\n    </div>\n\n    <!-- Help Modal (teleported to body to prevent backdrop covering sidebar) -->\n    <Teleport to=\"body\">\n      <div\n        v-if=\"showHelpModal\"\n        class=\"fixed inset-0 bg-black/60 flex items-center justify-center z-[10001] backdrop-blur-sm\"\n        @click=\"showHelpModal = false\"\n      >\n        <div\n          class=\"bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-4 transform transition-all duration-300 scale-100 overflow-hidden max-h-[85vh] overflow-y-auto\"\n          @click.stop\n        >\n          <!-- Header -->\n          <div class=\"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-center shadow-lg\">\n            <div\n              class=\"w-16 h-16 bg-blue-500/30 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm border border-blue-300/40 shadow-lg\"\n            >\n              <svg class=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                  stroke-width=\"2\"\n                  d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n                />\n              </svg>\n            </div>\n            <h3 class=\"text-xl font-bold text-white mb-1\">Help & Support</h3>\n            <p class=\"text-blue-100 text-sm\">Quick help based on your role</p>\n          </div>\n\n          <!-- Body -->\n          <div class=\"p-6\">\n            <div class=\"space-y-4\">\n              <div\n                class=\"flex items-center p-4 rounded-lg shadow-sm border bg-blue-50 border-blue-100\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md\"\n                >\n                  <svg\n                    class=\"w-5 h-5 text-white\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"\n                    />\n                  </svg>\n                </div>\n                <div>\n                  <p class=\"font-medium text-gray-800\">ICT Support</p>\n                  <a class=\"text-sm text-gray-600 hover:text-blue-700\" href=\"tel:+255222215701\">\n                    +255222215701\n                  </a>\n                </div>\n              </div>\n\n              <div\n                class=\"flex items-center p-4 rounded-lg shadow-sm border bg-blue-50 border-blue-100\"\n              >\n                <div\n                  class=\"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md\"\n                >\n                  <svg\n                    class=\"w-5 h-5 text-white\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    viewBox=\"0 0 24 24\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      stroke-width=\"2\"\n                      d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"\n                    />\n                  </svg>\n                </div>\n                <div>\n                  <p class=\"font-medium text-gray-800\">Email Support</p>\n                  <a class=\"text-sm text-gray-600 hover:text-blue-700\" href=\"mailto:ict@mnh.or.tz\">\n                    ict@mnh.or.tz\n                  </a>\n                </div>\n              </div>\n\n              <!-- User Guide (Role-based dropdown) -->\n              <div class=\"rounded-lg shadow-sm border bg-blue-50 border-blue-100\">\n                <button\n                  type=\"button\"\n                  @click=\"showUserGuide = !showUserGuide\"\n                  class=\"w-full flex items-center p-4 text-left\"\n                >\n                  <div\n                    class=\"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mr-3 shadow-md flex-shrink-0\"\n                  >\n                    <svg\n                      class=\"w-5 h-5 text-white\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"\n                      />\n                    </svg>\n                  </div>\n                  <div class=\"flex-1 min-w-0\">\n                    <p class=\"font-medium text-gray-800\">User Guide</p>\n                    <p class=\"text-sm text-gray-600\">Access system documentation</p>\n                  </div>\n                  <div\n                    class=\"w-8 h-8 rounded-lg bg-white/80 border border-blue-100 flex items-center justify-center\"\n                  >\n                    <svg\n                      class=\"w-4 h-4 text-blue-700 transition-transform duration-200\"\n                      :class=\"showUserGuide ? 'rotate-180' : ''\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      viewBox=\"0 0 24 24\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        stroke-width=\"2\"\n                        d=\"M19 9l-7 7-7-7\"\n                      />\n                    </svg>\n                  </div>\n                </button>\n\n                <transition\n                  enter-active-class=\"transition duration-200 ease-out\"\n                  enter-from-class=\"transform opacity-0 -translate-y-1\"\n                  enter-to-class=\"transform opacity-100 translate-y-0\"\n                  leave-active-class=\"transition duration-150 ease-in\"\n                  leave-from-class=\"transform opacity-100 translate-y-0\"\n                  leave-to-class=\"transform opacity-0 -translate-y-1\"\n                >\n                  <div v-if=\"showUserGuide\" class=\"px-4 pb-4\">\n                    <div class=\"bg-white rounded-xl border border-blue-100 p-4\">\n                      <p class=\"text-xs text-gray-500 mb-2\">\n                        Showing guidance for:\n                        <span class=\"font-medium\">{{ userGuideRoleLabel }}</span>\n                      </p>\n                      <div class=\"space-y-3\">\n                        <div v-for=\"(section, idx) in userGuideSections\" :key=\"idx\">\n                          <p class=\"text-sm font-semibold text-gray-800 mb-1\">\n                            {{ section.title }}\n                          </p>\n                          <ul class=\"list-disc pl-5 text-sm text-gray-700 space-y-1\">\n                            <li v-for=\"(item, i) in section.items\" :key=\"i\">{{ item }}</li>\n                          </ul>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </transition>\n              </div>\n            </div>\n\n            <!-- Close Button -->\n            <div class=\"mt-6\">\n              <button\n                @click=\"showHelpModal = false\"\n                class=\"w-full bg-blue-600 text-white py-3 px-4 rounded-xl font-medium hover:bg-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Teleport>\n  </aside>\n</template>\n\n<script>\n  import { computed, ref, watch, onMounted, onUnmounted, nextTick } from 'vue'\n  import { useRouter, useRoute } from 'vue-router'\n  import { ROLES, getAllowedRoutes } from '../utils/permissions'\n  import { useAuth } from '../composables/useAuth'\n  import { useSidebar } from '../composables/useSidebar'\n  import { useAuthStore } from '../stores/auth'\n  import auth from '../utils/auth'\n  import { logoutGuard } from '@/utils/logoutGuard'\n\n  export default {\n    name: 'ModernSidebar',\n    // Remove props and emits since we're using Vuex now\n    // props: {\n    //   collapsed: {\n    //     type: Boolean,\n    //     default: false\n    //   }\n    // },\n    // emits: ['update:collapsed'],\n    setup() {\n      const router = useRouter()\n      const route = useRoute()\n      const { user: currentUser, userRole, logout, isAuthenticated, isLoading } = useAuth()\n      const {\n        isCollapsed,\n        expandedSections,\n        toggleSidebar,\n        toggleSection,\n        setSectionExpanded: _setSectionExpanded,\n        setCollapsed\n      } = useSidebar()\n\n      // Use Pinia auth store for additional reliability\n      const piniaAuthStore = useAuthStore()\n      const DEBUG = process.env.NODE_ENV === 'development'\n\n      // Ensure Pinia auth is initialized\n      if (!piniaAuthStore.isInitialized) {\n        piniaAuthStore.initializeAuth()\n      }\n\n      // Local state\n      const stableUserRole = ref(null)\n      const searchQuery = ref('')\n      const showHelpModal = ref(false)\n      const showUserGuide = ref(false)\n      // expandedSections now comes from useSidebar composable\n\n      // Debug logging for Head of IT\n      const debugHeadOfIt = computed(() => {\n        const role = piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value\n        const isHeadOfIt = role === ROLES.HEAD_OF_IT\n        if (isHeadOfIt) {\n          if (DEBUG)\n            console.log('üîß HEAD OF IT Debug:', {\n              role,\n              menuItems: menuItems.value.length,\n              dashboardItems: dashboardItems.value.length,\n              requestsItems: requestsManagementItems.value.length,\n              expandedSections: expandedSections.value\n            })\n        }\n        return isHeadOfIt\n      })\n\n      // Responsive behavior\n      const isSmallScreen = ref(window.innerWidth < 768)\n\n      // Watch for screen size changes\n      const handleResize = () => {\n        isSmallScreen.value = window.innerWidth < 768\n        if (isSmallScreen.value && !isCollapsed.value) {\n          setCollapsed(true)\n        }\n      }\n\n      // Watch for authentication state changes\n      watch(\n        [isAuthenticated, userRole],\n        ([authenticated, role]) => {\n          try {\n            if (DEBUG) console.log('üîÑ Sidebar: Auth state changed:', { authenticated, role })\n            if (authenticated && role) {\n              stableUserRole.value = role\n              if (DEBUG) console.log('‚úÖ Sidebar: Stable user role set to:', role)\n            }\n          } catch (error) {\n            console.warn('Error in auth state watcher:', error)\n          }\n        },\n        { immediate: true }\n      )\n\n      // Initialize auth state and setup event listeners on mount\n      onMounted(async () => {\n        // Setup resize listener\n        window.addEventListener('resize', handleResize)\n        handleResize() // Initial check\n\n        // Initialize auth state\n        const token = localStorage.getItem('auth_token')\n        const userData = localStorage.getItem('user_data')\n\n        if (token && userData) {\n          try {\n            const user = JSON.parse(userData)\n            if (user.role) {\n              stableUserRole.value = user.role\n            }\n          } catch (error) {\n            console.error('Failed to parse stored user data:', error)\n          }\n\n          if (!isAuthenticated?.value && !isLoading?.value) {\n            await nextTick()\n            auth.initializeAuth()\n          }\n        }\n\n        if (isAuthenticated?.value && userRole?.value) {\n          stableUserRole.value = userRole.value\n\n          // Auto-expand sections for Head of IT\n          if (userRole.value === ROLES.HEAD_OF_IT) {\n            if (DEBUG) console.log('üì¶ Expanding sections for Head of IT')\n            _setSectionExpanded('dashboard', true)\n            _setSectionExpanded('requestsManagement', true)\n          }\n        }\n\n        // Check if we're on divisional dashboard route and expand sidebar immediately\n        await nextTick()\n        if (route.path.startsWith('/divisional-dashboard')) {\n          if (isCollapsed.value) {\n            console.log(\n              'üìÇ [onMounted] Auto-expanding sidebar for divisional dashboard route:',\n              route.path\n            )\n            setCollapsed(false)\n          } else {\n            console.log('‚úÖ [onMounted] Sidebar already expanded for:', route.path)\n          }\n        }\n      })\n\n      // Cleanup event listeners on unmount\n      onUnmounted(() => {\n        window.removeEventListener('resize', handleResize)\n      })\n\n      // Computed properties\n      // isCollapsed now comes from useSidebar composable\n\n      const userName = computed(() => {\n        try {\n          return currentUser?.value?.name || piniaAuthStore?.user?.name || 'JOHN DOE'\n        } catch (error) {\n          console.warn('Error getting userName:', error)\n          return 'JOHN DOE'\n        }\n      })\n\n      const userInitials = computed(() => {\n        try {\n          const name = userName.value || 'JOHN DOE'\n          return (\n            name\n              .split(' ')\n              .map((n) => n?.[0] || '')\n              .join('')\n              .toUpperCase()\n              .slice(0, 2) || 'JD'\n          )\n        } catch (error) {\n          console.warn('Error getting userInitials:', error)\n          return 'JD'\n        }\n      })\n\n      const userDepartmentOrRole = computed(() => {\n        try {\n          // Try to get department name from user data\n          const user = currentUser?.value || piniaAuthStore?.user\n          if (user?.department?.name) {\n            return user.department.name\n          }\n          if (user?.department_name) {\n            return user.department_name\n          }\n          // Fallback to role display name\n          const role = piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value\n          return getRoleDisplayName(role)\n        } catch (error) {\n          console.warn('Error getting userDepartmentOrRole:', error)\n          return 'Staff Member'\n        }\n      })\n\n      // Enhanced sidebar visibility logic with dual auth store support\n      const shouldShowSidebar = computed(() => {\n        try {\n          // Check both Vuex and Pinia auth states for maximum reliability\n          const vuexAuth = isAuthenticated?.value || false\n          const vuexRole = userRole?.value || null\n          const vuexLoading = isLoading?.value || false\n\n          const piniaAuth = piniaAuthStore?.isAuthenticated || false\n          const piniaRole = piniaAuthStore?.userRole || null\n          const piniaLoading = piniaAuthStore?.isLoading || false\n\n          // Use the most reliable source (prefer Pinia if both are available)\n          const hasAuth = piniaAuth || vuexAuth\n          const hasRole = piniaRole || vuexRole || stableUserRole?.value\n          const notLoading = !piniaLoading && !vuexLoading\n\n          console.log('üîç Sidebar visibility check (dual auth):', {\n            vuex: { auth: vuexAuth, role: vuexRole, loading: vuexLoading },\n            pinia: { auth: piniaAuth, role: piniaRole, loading: piniaLoading },\n            stable: { role: stableUserRole?.value },\n            final: { hasAuth, hasRole, notLoading },\n            shouldShow: hasAuth && hasRole && notLoading\n          })\n\n          return hasAuth && hasRole && notLoading\n        } catch (error) {\n          console.warn('Error in shouldShowSidebar computed:', error)\n          return false\n        }\n      })\n\n      // Route metadata function (moved before computed properties)\n      function getRouteMetadata(route) {\n        const metadata = {\n          // Dashboards\n          '/admin-dashboard': {\n            name: 'AdminDashboard',\n            displayName: 'Admin Dashboard',\n            icon: 'fas fa-user-shield',\n            category: 'dashboard',\n            description: 'Administrative control panel'\n          },\n          '/user-dashboard': {\n            name: 'UserDashboard',\n            displayName: 'User Dashboard',\n            icon: 'fas fa-home',\n            category: 'dashboard',\n            description: 'User portal and services'\n          },\n          '/dict-dashboard': {\n            name: 'DictDashboard',\n            displayName: 'ICT Director Dashboard',\n            icon: 'fas fa-user-cog',\n            category: 'dashboard',\n            description: 'ICT Director control panel'\n          },\n          '/hod-dashboard': {\n            name: 'HodDashboard',\n            displayName: 'HOD Dashboard',\n            icon: 'fas fa-user-tie',\n            category: 'dashboard',\n            description: 'Head of Department panel'\n          },\n          '/divisional-dashboard': {\n            name: 'DivisionalDashboard',\n            displayName: 'Divisional Dashboard',\n            icon: 'fas fa-building',\n            category: 'dashboard',\n            description: 'Divisional Director panel'\n          },\n          '/ict-dashboard/access-requests': {\n            name: 'IctAccessRequests',\n            displayName: 'Access Requests',\n            icon: 'fas fa-clipboard-check',\n            category: 'requests-management',\n            description: 'Access requests approved by Head of IT'\n          },\n          '/ict-dashboard/access-service': {\n            name: 'IctAccessService',\n            displayName: 'Access Service',\n            icon: 'fas fa-tags',\n            category: 'requests-management',\n            description: 'Create new access or booking request'\n          },\n          '/head_of_it-dashboard': {\n            name: 'HeadOfItDashboard',\n            displayName: 'Dashboard',\n            icon: 'fas fa-user-cog',\n            category: 'dashboard',\n            description: 'Head of IT control panel'\n          },\n\n          // User Management (Admin only)\n          '/service-users': {\n            name: 'ServiceUsers',\n            displayName: 'Service Granted',\n            icon: 'fas fa-check-circle',\n            category: 'user-management',\n            description: 'Manage granted services'\n          },\n\n          // Device Management\n          '/ict-approval/requests': {\n            name: 'RequestsList',\n            displayName: 'Device Requests',\n            icon: 'fas fa-clipboard-list',\n            category: 'device-management',\n            description: 'Manage device borrowing requests (ICT Officer)'\n          },\n          '/secretary-approval/requests': {\n            name: 'SecretaryRequestsList',\n            displayName: 'Device Requests',\n            icon: 'fas fa-clipboard-list',\n            category: 'device-management',\n            description: 'Manage device borrowing requests (Secretary ICT)'\n          },\n\n          // Requests Management (for approvers)\n          '/hod-dashboard/request-list': {\n            name: 'HODDashboardRequestList',\n            displayName: 'Access Requests',\n            icon: 'fas fa-clipboard-check',\n            category: 'requests-management',\n            description: 'Review access requests'\n          },\n          '/divisional-dashboard/combined-requests': {\n            name: 'DivisionalCombinedRequestList',\n            displayName: 'Combined Requests',\n            icon: 'fas fa-clipboard-list',\n            category: 'requests-management',\n            description: 'Review HOD-approved requests'\n          },\n          '/dict-dashboard/combined-requests': {\n            name: 'DictCombinedRequestList',\n            displayName: 'Access Requests',\n            icon: 'fas fa-clipboard-check',\n            category: 'requests-management',\n            description: 'Review Divisional Director-approved requests'\n          },\n          '/head_of_it-dashboard/combined-requests': {\n            name: 'HeadOfItCombinedRequestList',\n            displayName: 'Access Requests',\n            icon: 'fas fa-clipboard-check',\n            category: 'requests-management',\n            description: 'Review ICT Director-approved requests'\n          }\n        }\n\n        return metadata[route] || {}\n      }\n\n      // Get menu items based on enhanced role detection\n      const menuItems = computed(() => {\n        try {\n          // Use the most reliable role source\n          const role = piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value\n          if (!role) {\n            console.log('üîç Menu items: No role found')\n            return []\n          }\n\n          console.log('üîç Menu items: Using role:', role)\n\n          // Use unified permission helper so dynamic roles (from /admin/user-roles)\n          // get their menus without hardcoding entries here.\n          const routes = getAllowedRoutes(role) || []\n          if (!routes.length) {\n            console.log('üîç Menu items: No allowed routes found for role:', role)\n            return []\n          }\n\n          const items = routes\n            .map((route) => {\n              try {\n                const metadata = getRouteMetadata(route)\n                return {\n                  path: route,\n                  ...metadata\n                }\n              } catch (error) {\n                console.warn('Error getting metadata for route:', route, error)\n                return null\n              }\n            })\n            // Only keep routes that have metadata configured\n            .filter((item) => item && item.name)\n\n          console.log('üîç Menu items computed:', items.length, 'items for role:', role)\n          return items\n        } catch (error) {\n          console.error('Error computing menu items:', error)\n          return []\n        }\n      })\n\n      // Categorize menu items\n      const dashboardItems = computed(() => {\n        try {\n          return menuItems?.value?.filter((item) => item?.category === 'dashboard') || []\n        } catch (error) {\n          console.warn('Error filtering dashboard items:', error)\n          return []\n        }\n      })\n\n      const userManagementItems = computed(() => {\n        try {\n          return menuItems?.value?.filter((item) => item?.category === 'user-management') || []\n        } catch (error) {\n          console.warn('Error filtering user management items:', error)\n          return []\n        }\n      })\n\n      const deviceManagementItems = computed(() => {\n        try {\n          return menuItems?.value?.filter((item) => item?.category === 'device-management') || []\n        } catch (error) {\n          console.warn('Error filtering device management items:', error)\n          return []\n        }\n      })\n\n      const requestsManagementItems = computed(() => {\n        try {\n          return menuItems?.value?.filter((item) => item?.category === 'requests-management') || []\n        } catch (error) {\n          console.warn('Error filtering requests management items:', error)\n          return []\n        }\n      })\n\n      // Decide if Access Requests should be hidden dynamically based on role/permissions\n      const shouldHideAccessRequests = computed(() => {\n        try {\n          const role = piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value\n\n          // Business rule: ICT Secretary should never see the ICT Access Requests dashboard\n          // in the sidebar. Their focus is device bookings only.\n          if (role === ROLES.SECRETARY_ICT) {\n            return true\n          }\n\n          return false\n        } catch (error) {\n          console.warn('Error computing shouldHideAccessRequests:', error)\n          return false\n        }\n      })\n\n      // Filtered items based on search\n      const filteredDashboardItems = computed(() => {\n        try {\n          if (!searchQuery?.value) return dashboardItems?.value || []\n          return (\n            dashboardItems?.value?.filter((item) =>\n              item?.displayName?.toLowerCase().includes(searchQuery.value.toLowerCase())\n            ) || []\n          )\n        } catch (error) {\n          console.error('Error filtering dashboard items:', error)\n          return dashboardItems?.value || []\n        }\n      })\n\n      const filteredUserManagementItems = computed(() => {\n        try {\n          if (!searchQuery?.value) return userManagementItems?.value || []\n          return (\n            userManagementItems?.value?.filter((item) =>\n              item?.displayName?.toLowerCase().includes(searchQuery.value.toLowerCase())\n            ) || []\n          )\n        } catch (error) {\n          console.error('Error filtering user management items:', error)\n          return userManagementItems?.value || []\n        }\n      })\n\n      const filteredDeviceManagementItems = computed(() => {\n        try {\n          if (!searchQuery?.value) return deviceManagementItems?.value || []\n          return (\n            deviceManagementItems?.value?.filter((item) =>\n              item?.displayName?.toLowerCase().includes(searchQuery.value.toLowerCase())\n            ) || []\n          )\n        } catch (error) {\n          console.error('Error filtering device management items:', error)\n          return deviceManagementItems?.value || []\n        }\n      })\n\n      const filteredRequestsManagementItems = computed(() => {\n        try {\n          let items = requestsManagementItems?.value || []\n\n          // Dynamically hide Access Requests for booking-only roles (e.g., Secretary ICT)\n          if (shouldHideAccessRequests.value) {\n            items = items.filter((item) => item.path !== '/ict-dashboard/access-requests')\n          }\n\n          if (!searchQuery?.value) return items\n\n          return (\n            items?.filter((item) =>\n              item?.displayName?.toLowerCase().includes(searchQuery.value.toLowerCase())\n            ) || []\n          )\n        } catch (error) {\n          console.error('Error filtering requests management items:', error)\n          return requestsManagementItems?.value || []\n        }\n      })\n\n      // Methods\n      function toggleCollapse() {\n        toggleSidebar()\n        if (DEBUG) console.log('üîÑ Sidebar toggled via Pinia')\n      }\n\n      function toggleSectionLocal(section) {\n        toggleSection(section)\n      }\n\n      const roleForGuide = computed(() => {\n        return piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value || ROLES.STAFF\n      })\n\n      const userGuideRoleLabel = computed(() => {\n        return getRoleDisplayName(roleForGuide.value)\n      })\n\n      const userGuideSections = computed(() => {\n        const role = roleForGuide.value\n\n        switch (role) {\n          case ROLES.ADMIN:\n            return [\n              {\n                title: 'Admin: setup & maintenance',\n                items: [\n                  'Open Admin Dashboard to manage users, roles, and departments.',\n                  'Correct role + department assignment controls which menus/forms a user can access.'\n                ]\n              },\n              {\n                title: 'Admin: user support',\n                items: [\n                  'If a user cannot see expected pages, verify their role assignment first.',\n                  'Use onboarding reset when a user must re-accept terms/ICT policy or restart onboarding.'\n                ]\n              }\n            ]\n          case ROLES.STAFF:\n            return [\n              {\n                title: 'Staff: submit a request',\n                items: [\n                  'Open User Dashboard and select the required form (Jeeva / Wellsoft / Internet / Combined).',\n                  'Complete all fields accurately (request type, justification, user details) then submit.'\n                ]\n              },\n              {\n                title: 'Staff: follow up',\n                items: [\n                  'Track your request status from your dashboard.',\n                  'If clarification is requested by approvers, update/re-submit promptly.'\n                ]\n              }\n            ]\n          case ROLES.HEAD_OF_DEPARTMENT:\n            return [\n              {\n                title: 'HOD: review & recommend',\n                items: [\n                  'Use HOD Dashboard ‚Üí Access Requests to review submissions from your department.',\n                  'Approve/Reject (recommend) with clear comments and forward to the next approval stage.'\n                ]\n              },\n              {\n                title: 'HOD: data quality',\n                items: [\n                  'Ensure staff details and department information are correct for routing.',\n                  'If details are missing, reject with reasons so the user can correct and re-submit.'\n                ]\n              }\n            ]\n          case ROLES.DIVISIONAL_DIRECTOR:\n            return [\n              {\n                title: 'Divisional Director: approval stage',\n                items: [\n                  'Use Divisional Dashboard ‚Üí Combined Requests to review escalated requests.',\n                  'Approve/Reject with clear audit comments (who/what/why) to keep workflow moving.'\n                ]\n              }\n            ]\n          case ROLES.HEAD_OF_IT:\n            return [\n              {\n                title: 'Head of IT: routing & oversight',\n                items: [\n                  'Use Head of IT Dashboard ‚Üí Combined Requests to review and route requests.',\n                  'Forward tasks to the ICT team for implementation and track bottlenecks.'\n                ]\n              },\n              {\n                title: 'Head of IT: escalation',\n                items: [\n                  'Escalate high-impact or policy-sensitive requests to ICT Director.',\n                  'Coordinate with departments when submitted information is incomplete.'\n                ]\n              }\n            ]\n          case ROLES.ICT_OFFICER:\n            return [\n              {\n                title: 'ICT Officer: implement requests',\n                items: [\n                  'Open ICT Dashboard ‚Üí Access Requests to view items forwarded for implementation.',\n                  'Validate request details and implement the required service or reject with reasons.'\n                ]\n              },\n              {\n                title: 'ICT Officer: update status',\n                items: [\n                  'Update the request status after action is taken so users/approvers can track progress.',\n                  'Escalate exceptions to Head of IT / ICT Director.'\n                ]\n              }\n            ]\n          case ROLES.SECRETARY_ICT:\n            return [\n              {\n                title: 'ICT Secretary: device bookings',\n                items: [\n                  'Use Device Requests to review device borrowing/booking requests.',\n                  'Confirm availability and booking dates before approving/declining.'\n                ]\n              },\n              {\n                title: 'ICT Secretary: coordination',\n                items: [\n                  'Escalate technical implementation tasks to ICT Officer.',\n                  'Use ICT Support contacts for communication and issue logging.'\n                ]\n              }\n            ]\n          case ROLES.ICT_DIRECTOR:\n            return [\n              {\n                title: 'ICT Director: final oversight',\n                items: [\n                  'Use ICT Director Dashboard to review escalated / high-impact requests.',\n                  'Approve/Reject based on ICT policy and ensure the ICT team follows through.'\n                ]\n              }\n            ]\n          default:\n            return [\n              {\n                title: 'General guidance',\n                items: [\n                  'Your menus and forms are displayed based on your role and permissions.',\n                  'If you cannot find a page you need, contact ICT Support or request role verification from Admin.'\n                ]\n              }\n            ]\n        }\n      })\n\n      function showHelp() {\n        showHelpModal.value = true\n      }\n\n      function getRoleDisplayName(role) {\n        if (!role) return 'User'\n\n        const roleNames = {\n          [ROLES.ADMIN]: 'Administrator',\n          [ROLES.DIVISIONAL_DIRECTOR]: 'Divisional Director',\n          [ROLES.HEAD_OF_DEPARTMENT]: 'Head of Department',\n          [ROLES.ICT_DIRECTOR]: 'ICT Director',\n          [ROLES.HEAD_OF_IT]: 'Head of IT',\n          [ROLES.STAFF]: 'Staff Member',\n          [ROLES.ICT_OFFICER]: 'ICT Officer',\n          [ROLES.SECRETARY_ICT]: 'ICT Secretary'\n        }\n        return roleNames[role] || role\n      }\n\n      async function handleLogout() {\n        try {\n          await logoutGuard.executeLogout(async () => {\n            await logout()\n          })\n          router.push('/')\n        } catch (error) {\n          console.error('Logout failed:', error)\n          router.push('/')\n        }\n      }\n\n      // Notification badge functionality\n      const notificationCounts = ref({})\n\n      function getNotificationCount(routePath) {\n        const count = notificationCounts.value[routePath] || 0\n        if (count > 0) {\n          if (DEBUG) console.log(`üîç getNotificationCount('${routePath}') returning:`, count)\n        }\n        return count\n      }\n\n      // Notification retry state\n      const notificationRetries = ref(0)\n      const maxNotificationRetries = 3\n      const isNotificationDisabled = ref(false)\n\n      async function fetchNotificationCounts(forceRefresh = false) {\n        // Skip if temporarily disabled due to repeated failures\n        if (isNotificationDisabled.value) {\n          if (DEBUG) console.log('üö´ Notification fetching temporarily disabled')\n          return\n        }\n\n        try {\n          const role = piniaAuthStore?.userRole || userRole?.value || stableUserRole?.value\n          if (process.env.NODE_ENV === 'development') {\n            console.log('üîÑ fetchNotificationCounts called with role:', role)\n          }\n\n          if (!role) {\n            console.warn('No role found, skipping notification fetch')\n            return\n          }\n\n          // Import the universal notification service dynamically to avoid circular dependencies\n          const notificationService = (await import('@/services/notificationService')).default\n          if (process.env.NODE_ENV === 'development') {\n            console.log('üì° Calling notification service API...')\n          }\n\n          const result = await notificationService.getPendingRequestsCount(forceRefresh)\n\n          if (process.env.NODE_ENV === 'development') {\n            console.log('üìä API response:', result)\n\n            // DEBUG: Log the API response details\n            console.log('üîç NOTIFICATION DEBUG - API Response:', {\n              total_pending: result.total_pending,\n              requires_attention: result.requires_attention,\n              full_result: result,\n              timestamp: new Date().toISOString()\n            })\n          }\n\n          // Reset retry counter on successful fetch\n          notificationRetries.value = 0\n\n          // ICT Officer specific: cross-check with role-specific API and in-page override\n          let finalPendingCount = result.total_pending || 0\n          let ictSpecificCount = null\n          let pageOverrideCount = null\n\n          if (role === 'ict_officer') {\n            try {\n              const ictOfficerService = (await import('@/services/ictOfficerService')).default\n              const ictResp = await ictOfficerService.getPendingRequestsCount()\n              ictSpecificCount =\n                typeof ictResp === 'object' ? (ictResp.total_pending ?? null) : ictResp\n            } catch (e) {\n              console.warn('‚ö†Ô∏è Failed to fetch ICT-specific pending count:', e?.message || e)\n            }\n          } else if (role === 'ict_director') {\n            // Fallback for ICT Director: prefer DICT statistics first\n            try {\n              const dictService = (await import('@/services/dictAccessService')).default\n              const statsResp = await dictService.getDictStatistics()\n              const s = statsResp?.data || {}\n              const dictPending = Number(\n                s.pendingDict ?? s.pending ?? s.total_pending ?? s.pending_count ?? 0\n              )\n              if (finalPendingCount === 0 && dictPending > 0) {\n                finalPendingCount = dictPending\n              }\n              // Deep fallback: compute from current request list when stats/universal return 0\n              if (finalPendingCount === 0) {\n                const listResp = await dictService.getDictRequests()\n                // Robustly extract an array of records from various API shapes\n                const pickArray = (root) => {\n                  if (!root) return []\n                  const candidates = [\n                    root?.data?.data, // Laravel pagination: { data: { data: [] } }\n                    root?.data?.records, // alternative key\n                    root?.data?.items, // alternative key\n                    root?.data?.rows, // alternative key\n                    root?.data, // sometimes data is already the array\n                    root?.items, // flattened\n                    root?.records,\n                    root?.rows\n                  ]\n                  for (const c of candidates) {\n                    if (Array.isArray(c)) return c\n                  }\n                  // Deep scan: find first array value in one level of nesting\n                  try {\n                    const values = Object.values(root?.data || {})\n                    const firstArray = values.find((v) => Array.isArray(v))\n                    if (Array.isArray(firstArray)) return firstArray\n                  } catch (e) {\n                    /* no-op: safe fallback below */\n                  }\n                  return []\n                }\n                const arr = pickArray(listResp)\n                const count = arr.filter((r) => {\n                  const st = String(r.status || r.dict_status || '').toLowerCase()\n                  const dictSt = String(r.ict_director_status || r.dict_status || '').toLowerCase()\n                  const hodSt = String(r.hod_status || '').toLowerCase()\n                  const divSt = String(r.divisional_status || '').toLowerCase()\n                  const headItSt = String(r.head_it_status || '').toLowerCase()\n                  const implSt = String(r.ict_officer_status || '').toLowerCase()\n\n                  // Legacy overall-status based detection\n                  const legacyPending =\n                    st === 'pending' ||\n                    st === 'divisional_approved' ||\n                    st === 'pending_ict_director' ||\n                    st === 'pending_dict' ||\n                    dictSt === 'pending'\n\n                  // Per-stage inference (covers ICT Officer-origin requests: HOD/DIV skipped)\n                  const preDictDone =\n                    ['approved', 'skipped'].includes(hodSt) &&\n                    ['approved', 'skipped'].includes(divSt)\n                  const notCompleted = !['approved', 'implemented', 'completed'].includes(implSt)\n                  const headItNotTaken = !['approved', 'rejected'].includes(headItSt)\n                  const dictPending = !['approved', 'rejected'].includes(dictSt) // treat empty/null as pending\n\n                  const stageBasedPending =\n                    preDictDone && dictPending && headItNotTaken && notCompleted\n\n                  return legacyPending || stageBasedPending\n                }).length\n                if (count > 0) finalPendingCount = count\n              }\n            } catch (e) {\n              console.warn('‚ö†Ô∏è Failed to fetch DICT pending count:', e?.message || e)\n            }\n\n            try {\n              // AccessRequests page can set this for real-time accuracy\n              if (\n                typeof window !== 'undefined' &&\n                typeof window.accessRequestsPendingCount === 'number'\n              ) {\n                pageOverrideCount = window.accessRequestsPendingCount\n              }\n            } catch (e) {\n              console.warn('‚ö†Ô∏è Failed to read page override count:', e?.message || e)\n            }\n\n            // Decide final count with precedence: pageOverride -> ictSpecific -> universal\n            finalPendingCount =\n              (typeof pageOverrideCount === 'number' ? pageOverrideCount : null) ??\n              (typeof ictSpecificCount === 'number' ? ictSpecificCount : null) ??\n              finalPendingCount\n\n            if (process.env.NODE_ENV === 'development') {\n              console.log('üßÆ ICT Badge Count Reconciliation:', {\n                universal: result.total_pending,\n                ictSpecific: ictSpecificCount,\n                pageOverride: pageOverrideCount,\n                chosen: finalPendingCount\n              })\n            }\n          }\n\n          // EXTENDED DEBUG: Log breakdown if available to see what's being counted\n          if (\n            (result.details?.breakdown || result.details) &&\n            process.env.NODE_ENV === 'development'\n          ) {\n            console.log('üìä NOTIFICATION BREAKDOWN DEBUG:', {\n              breakdown: result.details?.breakdown,\n              details: result.details,\n              role,\n              endpoint_called: '/notifications/pending-count'\n            })\n          }\n\n          // ULTRA DEBUG: Only warn if, after reconciliation, we still have >0 pending\n          const warnAfter =\n            role === 'ict_officer' ? finalPendingCount > 0 : result.total_pending > 0\n          if (warnAfter) {\n            console.warn('‚ö†Ô∏è NOTIFICATION ISSUE DETECTED:', {\n              message: 'Badge showing pending count but requests may be completed',\n              pending_count: role === 'ict_officer' ? finalPendingCount : result.total_pending,\n              user_role: role,\n              timestamp: new Date().toISOString(),\n              suggestion:\n                'Check backend /notifications/pending-count API - may be counting completed/implemented requests'\n            })\n          }\n\n          if (finalPendingCount > 0) {\n            // Get role-specific configuration to know which routes should show badges\n            const config = notificationService.getRoleNotificationConfig(role)\n            if (DEBUG) console.log('‚öôÔ∏è Role config for', role, ':', config)\n\n            // Clear old counts\n            const oldCounts = { ...notificationCounts.value }\n            notificationCounts.value = {}\n\n            // Set badge count for relevant menu items\n            config.menuItems.forEach((menuPath) => {\n              // If we have a page override for this specific route, prefer it\n              let routeCount = finalPendingCount\n              if (\n                role === 'ict_officer' &&\n                menuPath === '/ict-dashboard/access-requests' &&\n                typeof window !== 'undefined' &&\n                typeof window.accessRequestsPendingCount === 'number'\n              ) {\n                routeCount = window.accessRequestsPendingCount\n              }\n              notificationCounts.value[menuPath] = routeCount\n              if (DEBUG)\n                console.log(\n                  `üéØ Setting badge count ${routeCount} for route: ${menuPath} (was: ${oldCounts[menuPath] || 0})`\n                )\n            })\n\n            if (DEBUG)\n              console.log('üîî Notification badges updated:', {\n                role,\n                oldCounts,\n                newCount: finalPendingCount,\n                routes: config.menuItems,\n                finalCounts: notificationCounts.value,\n                countChanged: JSON.stringify(oldCounts) !== JSON.stringify(notificationCounts.value)\n              })\n          } else {\n            // Clear all notification counts\n            const oldCounts = { ...notificationCounts.value }\n            notificationCounts.value = {}\n            if (process.env.NODE_ENV === 'development' && Object.keys(oldCounts).length > 0) {\n              console.log(\n                'üîï Cleared notification badges (had:',\n                Object.keys(oldCounts).length,\n                'routes)'\n              )\n            }\n          }\n        } catch (error) {\n          console.error('‚ùå Failed to fetch notification counts:', error)\n\n          // Increment retry counter\n          notificationRetries.value++\n\n          // If we've exceeded max retries, disable notifications temporarily\n          if (notificationRetries.value >= maxNotificationRetries) {\n            console.warn(`‚ö†Ô∏è Disabling notifications after ${maxNotificationRetries} failures`)\n            isNotificationDisabled.value = true\n\n            // Re-enable after 5 minutes\n            setTimeout(\n              () => {\n                if (DEBUG) console.log('‚ôæÔ∏è Re-enabling notification fetching')\n                isNotificationDisabled.value = false\n                notificationRetries.value = 0\n              },\n              5 * 60 * 1000\n            ) // 5 minutes\n          }\n\n          // Log detailed error info for debugging\n          console.error('Error details:', {\n            message: error.message,\n            code: error.code,\n            status: error.response?.status,\n            retries: notificationRetries.value,\n            disabled: isNotificationDisabled.value\n          })\n        }\n      }\n\n      // Fetch notification counts on mount and periodically\n      let notificationInterval = null\n\n      onMounted(() => {\n        if (DEBUG) console.log('üöÄ Sidebar mounted, triggering initial notification fetch')\n\n        // Initial fetch with delay to ensure auth is ready\n        setTimeout(() => {\n          if (DEBUG) console.log('‚è∞ Delayed notification fetch triggered')\n          fetchNotificationCounts()\n        }, 2000)\n\n        // Update counts every 30 seconds\n        notificationInterval = setInterval(fetchNotificationCounts, 30000)\n\n        // Expose fetchNotificationCounts globally for other components to use\n        window.sidebarInstance = {\n          fetchNotificationCounts: (force = false) => {\n            if (DEBUG)\n              console.log('üåç üîî GLOBAL SIDEBAR: Global sidebar notification refresh triggered:', {\n                force,\n                currentCounts: { ...notificationCounts.value },\n                timestamp: new Date().toISOString()\n              })\n            fetchNotificationCounts(force)\n          },\n          setNotificationCount: (routePath, count) => {\n            try {\n              if (typeof count === 'number' && routePath) {\n                if (DEBUG)\n                  console.log('üåç üîî GLOBAL SIDEBAR: Forcing notification count set:', {\n                    routePath,\n                    count,\n                    prev: notificationCounts.value[routePath] || 0\n                  })\n                notificationCounts.value[routePath] = count\n              }\n            } catch (e) {\n              console.warn('Failed to set notification count globally:', e?.message || e)\n            }\n          }\n        }\n\n        // Listen for global refresh events\n        const handleRefreshNotifications = (event) => {\n          if (DEBUG)\n            console.log('üìª üîî NOTIFICATION EVENT: Received global refresh-notifications event:', {\n              detail: event?.detail,\n              timestamp: new Date().toISOString(),\n              currentCounts: { ...notificationCounts.value }\n            })\n          fetchNotificationCounts(true) // force refresh\n        }\n\n        // Listen for ICT AccessRequests page pending-count override\n        const handleIctPendingCount = (event) => {\n          const count = event?.detail?.count\n          if (typeof count === 'number') {\n            if (DEBUG) console.log('üõ∞Ô∏è ICT AccessRequests pending count override received:', count)\n            notificationCounts.value['/ict-dashboard/access-requests'] = count\n          }\n        }\n\n        const handleForceRefreshNotifications = (event) => {\n          if (DEBUG)\n            console.log('üî• üîî NOTIFICATION EVENT: Received force-refresh-notifications event:', {\n              detail: event?.detail,\n              timestamp: new Date().toISOString(),\n              currentCounts: { ...notificationCounts.value }\n            })\n          // Clear any existing counts and force immediate refresh\n          const oldCounts = { ...notificationCounts.value }\n          notificationCounts.value = {}\n          if (DEBUG) console.log('üóëÔ∏è Cleared notification counts. Old counts:', oldCounts)\n          fetchNotificationCounts(true)\n        }\n\n        if (window.addEventListener) {\n          window.addEventListener('refresh-notifications', handleRefreshNotifications)\n          window.addEventListener('force-refresh-notifications', handleForceRefreshNotifications)\n          window.addEventListener('ict-access-requests-pending-count', handleIctPendingCount)\n        }\n      })\n\n      // Clean up interval and global references on unmount\n      onUnmounted(() => {\n        if (notificationInterval) {\n          clearInterval(notificationInterval)\n        }\n\n        // Clean up global references\n        if (window.sidebarInstance) {\n          delete window.sidebarInstance\n        }\n\n        // Remove event listener\n        if (window.removeEventListener) {\n          window.removeEventListener('refresh-notifications', () => {\n            fetchNotificationCounts(true)\n          })\n        }\n      })\n\n      // Watch for route changes and refresh notifications when entering dashboard pages\n      watch(\n        route,\n        (newRoute, _oldRoute) => {\n          const dashboardRoutes = [\n            '/ict-dashboard/access-requests',\n            '/hod-dashboard/request-list',\n            '/divisional-dashboard/combined-requests',\n            '/dict-dashboard/combined-requests',\n            '/head_of_it-dashboard/combined-requests'\n          ]\n\n          // Auto-expand sidebar when navigating to divisional dashboard routes\n          if (newRoute.path.startsWith('/divisional-dashboard')) {\n            if (isCollapsed.value) {\n              console.log(\n                'üìÇ Auto-expanding sidebar for divisional dashboard route:',\n                newRoute.path\n              )\n              setCollapsed(false)\n            }\n          }\n\n          // If navigating to a dashboard route that shows notifications\n          if (dashboardRoutes.some((routePath) => newRoute.path.startsWith(routePath))) {\n            console.log(\n              'üó∫Ô∏è Route changed to dashboard page, refreshing notifications:',\n              newRoute.path\n            )\n            setTimeout(() => {\n              fetchNotificationCounts(true) // force refresh after navigation\n            }, 1000)\n          }\n        },\n        { immediate: true }\n      )\n\n      // Theme is automatically initialized by useTheme composable\n\n      return {\n        // State\n        isCollapsed,\n        searchQuery,\n        showHelpModal,\n        showUserGuide,\n        userGuideRoleLabel,\n        userGuideSections,\n        stableUserRole,\n        expandedSections,\n\n        // Router\n        route,\n\n        // Computed\n        currentUser,\n        userRole,\n        isAuthenticated,\n        isLoading,\n        userName,\n        userInitials,\n        userDepartmentOrRole,\n        shouldShowSidebar,\n        dashboardItems,\n        userManagementItems,\n        deviceManagementItems,\n        requestsManagementItems,\n        filteredDashboardItems,\n        filteredUserManagementItems,\n        filteredDeviceManagementItems,\n        filteredRequestsManagementItems,\n        debugHeadOfIt,\n\n        // Methods\n        toggleCollapse,\n        toggleSectionLocal,\n        showHelp,\n        getRoleDisplayName,\n        handleLogout,\n        getNotificationCount,\n        fetchNotificationCounts,\n        piniaAuthStore\n      }\n    },\n    directives: {\n      tooltip: {\n        mounted(el, binding) {\n          if (binding.value && typeof binding.value === 'string') {\n            el.title = binding.value\n          }\n        },\n        updated(el, binding) {\n          if (binding.value && typeof binding.value === 'string') {\n            el.title = binding.value\n          } else {\n            el.removeAttribute('title')\n          }\n        },\n        unmounted(el) {\n          el.removeAttribute('title')\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  /* Responsive Font Size Variables */\n  .sidebar-responsive {\n    --brand-font-size: 1.125rem; /* 18px */\n    --profile-name-size: 1.125rem; /* 18px */\n    --profile-role-size: 1rem; /* 16px */\n    --section-header-size: 1rem; /* 16px */\n    --nav-item-size: 1.125rem; /* 18px */\n    --bottom-section-size: 1.125rem; /* 18px */\n\n    /* Icon sizes */\n    --icon-size-small: 1.25rem; /* 20px */\n    --icon-size-medium: 1.5rem; /* 24px */\n\n    /* Transition for font sizes */\n    transition: all 0.3s ease-in-out;\n  }\n\n  .sidebar-expanded {\n    --brand-font-size: 1.25rem; /* 20px */\n    --profile-name-size: 1.125rem; /* 18px */\n    --profile-role-size: 1rem; /* 16px */\n    --section-header-size: 1rem; /* 16px */\n    --nav-item-size: 1.125rem; /* 18px */\n    --bottom-section-size: 1.125rem; /* 18px */\n\n    --icon-size-small: 1.5rem; /* 24px */\n    --icon-size-medium: 1.75rem; /* 28px */\n  }\n\n  .sidebar-collapsed {\n    --brand-font-size: 0.625rem; /* 10px - hidden anyway */\n    --profile-name-size: 0.625rem; /* 10px - hidden anyway */\n    --profile-role-size: 0.5rem; /* 8px - hidden anyway */\n    --section-header-size: 0.5rem; /* 8px - hidden anyway */\n    --nav-item-size: 0.625rem; /* 10px - hidden anyway */\n    --bottom-section-size: 0.625rem; /* 10px - hidden anyway */\n\n    --icon-size-small: 0.875rem; /* 14px */\n    --icon-size-medium: 1rem; /* 16px */\n  }\n\n  /* Responsive text classes */\n  .responsive-brand-text {\n    font-size: var(--brand-font-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-profile-name {\n    font-size: var(--profile-name-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-profile-role {\n    font-size: var(--profile-role-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-section-header {\n    font-size: var(--section-header-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-nav-item {\n    font-size: var(--nav-item-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-bottom-section {\n    font-size: var(--bottom-section-size);\n    transition: font-size 0.3s ease-in-out;\n  }\n\n  .responsive-icon-small {\n    width: var(--icon-size-small);\n    height: var(--icon-size-small);\n    transition:\n      width 0.3s ease-in-out,\n      height 0.3s ease-in-out;\n  }\n\n  .responsive-icon-medium {\n    width: var(--icon-size-medium);\n    height: var(--icon-size-medium);\n    transition:\n      width 0.3s ease-in-out,\n      height 0.3s ease-in-out;\n  }\n\n  /* Custom scrollbar */\n  .custom-scrollbar::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-thumb {\n    background-color: rgba(255, 255, 255, 0.3);\n    border-radius: 2px;\n    box-shadow: inset 0 0 2px rgba(255, 255, 255, 0.2);\n  }\n\n  .custom-scrollbar::-webkit-scrollbar-track {\n    background-color: transparent;\n  }\n\n  /* Enhanced shadow effects */\n  .shadow-sm {\n    box-shadow:\n      0 1px 2px 0 rgba(0, 0, 0, 0.05),\n      0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  }\n\n  .shadow-md {\n    box-shadow:\n      0 4px 6px -1px rgba(0, 0, 0, 0.1),\n      0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  }\n\n  .shadow-lg {\n    box-shadow:\n      0 10px 15px -3px rgba(0, 0, 0, 0.1),\n      0 4px 6px -2px rgba(0, 0, 0, 0.05),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n\n  .shadow-2xl {\n    box-shadow:\n      0 25px 50px -12px rgba(0, 0, 0, 0.25),\n      0 0 0 1px rgba(255, 255, 255, 0.1),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n\n  /* Multi-layer background effects */\n  .bg-gradient-to-br {\n    --tw-gradient-from: transparent;\n    --tw-gradient-to: transparent;\n    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n    background-image: linear-gradient(to bottom right, var(--tw-gradient-stops));\n  }\n\n  .bg-gradient-to-t {\n    --tw-gradient-from: transparent;\n    --tw-gradient-to: transparent;\n    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n    background-image: linear-gradient(to top, var(--tw-gradient-stops));\n  }\n\n  /* Gradient color utilities */\n  .from-black\\/10 {\n    --tw-gradient-from: rgba(0, 0, 0, 0.1);\n    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(0, 0, 0, 0));\n  }\n\n  .via-transparent {\n    --tw-gradient-stops: var(--tw-gradient-from), transparent, var(--tw-gradient-to, transparent);\n  }\n\n  .to-black\\/20 {\n    --tw-gradient-to: rgba(0, 0, 0, 0.2);\n  }\n\n  .from-transparent {\n    --tw-gradient-from: transparent;\n    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, transparent);\n  }\n\n  .via-white\\/5 {\n    --tw-gradient-stops:\n      var(--tw-gradient-from), rgba(255, 255, 255, 0.05),\n      var(--tw-gradient-to, rgba(255, 255, 255, 0));\n  }\n\n  .to-white\\/10 {\n    --tw-gradient-to: rgba(255, 255, 255, 0.1);\n  }\n\n  /* Enhanced hover effects */\n  .hover\\:scale-102:hover {\n    transform: scale(1.02);\n  }\n\n  .scale-105 {\n    transform: scale(1.05);\n  }\n\n  /* Fallback for transform utilities */\n  .transform {\n    --tw-translate-x: 0;\n    --tw-translate-y: 0;\n    --tw-rotate: 0;\n    --tw-skew-x: 0;\n    --tw-skew-y: 0;\n    --tw-scale-x: 1;\n    --tw-scale-y: 1;\n    --tw-transform: translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y))\n      rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y))\n      scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n    transform: var(--tw-transform);\n  }\n\n  .hover\\:transform:hover {\n    transform: var(--tw-transform);\n  }\n\n  /* Smooth transitions */\n  .transition-all {\n    transition-property: all;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  .transition-transform {\n    transition-property: transform;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    transition-duration: 200ms;\n  }\n\n  .transition-colors {\n    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    transition-duration: 200ms;\n  }\n\n  /* Backdrop blur support */\n  .backdrop-blur-sm {\n    backdrop-filter: blur(4px);\n    -webkit-backdrop-filter: blur(4px);\n  }\n\n  /* Focus styles */\n  .focus\\:ring-2:focus {\n    outline: 2px solid transparent;\n    outline-offset: 2px;\n    box-shadow: 0 0 0 2px var(--tw-ring-color);\n  }\n\n  /* Section header styles */\n  .section-header {\n    position: relative;\n    overflow: hidden;\n  }\n\n  .section-header::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transform: translateX(-100%);\n    transition: transform 0.6s ease;\n  }\n\n  .section-header:hover::before {\n    transform: translateX(100%);\n  }\n\n  /* Navigation item enhanced styles */\n  .nav-item {\n    position: relative;\n    overflow: hidden;\n  }\n\n  .nav-item::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);\n    transition: left 0.5s ease;\n  }\n\n  .nav-item:hover::before {\n    left: 100%;\n  }\n\n  /* Active indicator pulse animation */\n  @keyframes pulse {\n    0%,\n    100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.7;\n    }\n  }\n\n  .active-indicator {\n    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n\n  /* Layered shadow for depth */\n  .layered-shadow {\n    box-shadow:\n      0 1px 3px rgba(0, 0, 0, 0.12),\n      0 1px 2px rgba(0, 0, 0, 0.24),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1),\n      inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n  }\n\n  /* Glassmorphism effect */\n  .glass-effect {\n    background: rgba(255, 255, 255, 0.1);\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n  }\n\n  /* Enhanced Menu Toggle Button */\n  .menu-toggle-btn {\n    position: relative;\n    z-index: 10;\n  }\n\n  .menu-toggle-btn:hover {\n    transform: scale(1.05);\n    box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);\n  }\n\n  .menu-toggle-btn:active {\n    transform: scale(0.95);\n  }\n\n  /* Profile Section Animations */\n  .profile-expanded {\n    animation: slideInFromLeft 0.5s ease-out;\n  }\n\n  .profile-collapsed {\n    animation: slideInFromLeft 0.5s ease-out;\n  }\n\n  .search-expanded {\n    animation: slideInFromLeft 0.6s ease-out;\n    animation-delay: 0.1s;\n    animation-fill-mode: both;\n  }\n\n  .search-collapsed {\n    animation: slideInFromLeft 0.6s ease-out;\n    animation-delay: 0.1s;\n    animation-fill-mode: both;\n  }\n\n  @keyframes slideInFromLeft {\n    0% {\n      opacity: 0;\n      transform: translateX(-20px);\n    }\n    100% {\n      opacity: 1;\n      transform: translateX(0);\n    }\n  }\n\n  /* Enhanced Sidebar Transitions */\n  .h-full {\n    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  /* Global transitions for all responsive elements */\n  .sidebar-responsive * {\n    transition:\n      font-size 0.3s ease-in-out,\n      width 0.3s ease-in-out,\n      height 0.3s ease-in-out;\n  }\n\n  /* Ensure text doesn't wrap during transitions */\n  .responsive-brand-text,\n  .responsive-profile-name,\n  .responsive-profile-role,\n  .responsive-section-header,\n  .responsive-nav-item,\n  .responsive-bottom-section {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  /* Profile hover effects */\n  .profile-expanded .group:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  }\n\n  .profile-collapsed .group:hover {\n    transform: translateY(-1px) scale(1.05);\n  }\n\n  /* Search input enhancements */\n  .search-expanded input:focus {\n    transform: scale(1.02);\n    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);\n  }\n\n  /* Brand logo animation */\n  .brand-logo {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  /* Navigation items enhanced transitions */\n  .nav-item {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  .nav-item:hover {\n    transform: translateX(4px) scale(1.02);\n  }\n\n  /* Section headers enhanced */\n  .section-header {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  .section-header:hover {\n    transform: translateX(2px);\n    background: rgba(37, 99, 235, 0.3);\n    border-radius: 8px;\n    padding-left: 16px;\n    padding-right: 16px;\n  }\n\n  /* Bottom section buttons */\n  .bottom-section button {\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n\n  .bottom-section button:hover {\n    transform: translateX(4px) scale(1.02);\n    background: rgba(37, 99, 235, 0.6);\n  }\n\n  /* Staggered animation for navigation items */\n  .nav-item:nth-child(1) {\n    animation-delay: 0.1s;\n  }\n  .nav-item:nth-child(2) {\n    animation-delay: 0.2s;\n  }\n  .nav-item:nth-child(3) {\n    animation-delay: 0.3s;\n  }\n  .nav-item:nth-child(4) {\n    animation-delay: 0.4s;\n  }\n  .nav-item:nth-child(5) {\n    animation-delay: 0.5s;\n  }\n\n  /* Notification Badge Styles */\n  .notification-badge {\n    z-index: 10;\n    font-size: 0.6rem;\n    line-height: 1;\n    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    box-shadow:\n      0 2px 4px rgba(239, 68, 68, 0.4),\n      0 0 0 1px rgba(255, 255, 255, 0.8);\n    transition: transform 0.2s ease-in-out;\n  }\n\n  .notification-badge:hover {\n    transform: scale(1.1);\n    animation-play-state: paused;\n  }\n\n  /* Responsive design helpers */\n  @media (max-width: 768px) {\n    .sidebar-mobile {\n      position: fixed;\n      z-index: 50;\n      left: 0;\n      top: 0;\n    }\n\n    /* Faster transitions on mobile */\n    .h-full {\n      transition: width 0.3s ease-in-out;\n    }\n\n    .menu-toggle-btn {\n      padding: 12px;\n    }\n\n    /* Reduce animations on mobile for performance */\n    .profile-expanded,\n    .profile-collapsed,\n    .search-expanded,\n    .search-collapsed {\n      animation: none;\n    }\n  }\n</style>\n","/**\n * Sidebar Composable\n * Provides a convenient interface to the sidebar store\n */\n\nimport { useSidebarStore } from '@/stores/sidebar'\nimport { storeToRefs } from 'pinia'\n\nexport function useSidebar() {\n  const sidebarStore = useSidebarStore()\n\n  // Convert store state to refs for reactivity\n  const {\n    isCollapsed,\n    isExpanded,\n    isInitialized,\n    isMobile,\n    expandedSections,\n    sidebarWidth,\n    sidebarClasses,\n    mainContentClasses\n  } = storeToRefs(sidebarStore)\n\n  // Actions (these don't need storeToRefs)\n  const {\n    initializeSidebar,\n    detectMobile,\n    setCollapsed,\n    toggle,\n    expand,\n    collapse,\n    toggleSection,\n    setSectionExpanded,\n    resetToDefaults,\n    clearStorage,\n    getDebugInfo\n  } = sidebarStore\n\n  // Convenience methods\n  const openSidebar = () => expand()\n  const closeSidebar = () => collapse()\n  const toggleSidebar = () => toggle()\n\n  const isSectionExpanded = (sectionName) => {\n    return expandedSections.value[sectionName] || false\n  }\n\n  const expandSection = (sectionName) => {\n    setSectionExpanded(sectionName, true)\n  }\n\n  const collapseSection = (sectionName) => {\n    setSectionExpanded(sectionName, false)\n  }\n\n  const expandAllSections = () => {\n    Object.keys(expandedSections.value).forEach((section) => {\n      setSectionExpanded(section, true)\n    })\n  }\n\n  const collapseAllSections = () => {\n    Object.keys(expandedSections.value).forEach((section) => {\n      setSectionExpanded(section, false)\n    })\n  }\n\n  // Initialize sidebar on first use\n  if (!isInitialized.value) {\n    initializeSidebar()\n  }\n\n  return {\n    // State\n    isCollapsed,\n    isExpanded,\n    isInitialized,\n    isMobile,\n    expandedSections,\n    sidebarWidth,\n    sidebarClasses,\n    mainContentClasses,\n\n    // Actions\n    initializeSidebar,\n    detectMobile,\n    setCollapsed,\n    toggle,\n    expand,\n    collapse,\n    toggleSection,\n    setSectionExpanded,\n    resetToDefaults,\n    clearStorage,\n    getDebugInfo,\n\n    // Convenience methods\n    openSidebar,\n    closeSidebar,\n    toggleSidebar,\n    isSectionExpanded,\n    expandSection,\n    collapseSection,\n    expandAllSections,\n    collapseAllSections\n  }\n}\n","/**\n * Authentication System integrated with Laravel Backend\n * Uses Laravel Sanctum for API authentication\n */\n\nimport { reactive, computed } from 'vue'\nimport { ROLES, isValidRole, getDefaultDashboard } from './permissions'\nimport { authAPI } from './apiClient'\n\nconst DEBUG = process.env.NODE_ENV === 'development'\n\n// Global reactive state\nconst authState = reactive({\n  isAuthenticated: false,\n  user: null,\n  token: null,\n  tokenName: null,\n  sessionInfo: null,\n  activeSessions: [],\n  loading: false,\n  error: null\n})\n\n// Role mapping from backend to frontend constants\nconst roleMapping = {\n  admin: ROLES.ADMIN,\n  divisional_director: ROLES.DIVISIONAL_DIRECTOR,\n  head_of_department: ROLES.HEAD_OF_DEPARTMENT,\n  'Head of Department': ROLES.HEAD_OF_DEPARTMENT, // Handle title case\n  HOD: ROLES.HEAD_OF_DEPARTMENT, // Handle abbreviation\n  hod: ROLES.HEAD_OF_DEPARTMENT, // Handle lowercase\n\n  ict_director: ROLES.ICT_DIRECTOR,\n  head_of_it: ROLES.HEAD_OF_IT,\n  staff: ROLES.STAFF,\n  ict_officer: ROLES.ICT_OFFICER\n}\n\n// Map backend role name to frontend role constant\nconst mapBackendRole = (backendRoleName) => {\n  if (DEBUG) console.log('üîç Backend role received:', backendRoleName)\n\n  // Handle undefined or null roles\n  if (!backendRoleName || backendRoleName === 'undefined' || backendRoleName === 'null') {\n    console.error('‚ùå Backend returned invalid role:', backendRoleName)\n    console.error('‚ùå This indicates a database issue - user has no role assigned!')\n    console.log('üîÑ Defaulting to \"staff\" role as fallback')\n    return ROLES.STAFF // Default to staff role\n  }\n\n  const mappedRole = roleMapping[backendRoleName]\n\n  if (mappedRole) {\n    if (DEBUG) console.log('üéØ Successfully mapped to frontend role:', mappedRole)\n    return mappedRole\n  } else {\n    console.warn('‚ö†Ô∏è Role mapping not found for:', backendRoleName)\n    console.log('Available role mappings:', Object.keys(roleMapping))\n    console.log('üîÑ Using original role name as fallback')\n    return backendRoleName\n  }\n}\n\n// Onboarding utility functions\nconst onboardingUtils = {\n  // Check if user needs onboarding\n  needsOnboarding(user) {\n    if (!user) {\n      return false\n    }\n\n    if (user.role === ROLES.ADMIN) {\n      return false\n    }\n\n    // Use backend data if available\n    if (user.needs_onboarding !== undefined) {\n      return user.needs_onboarding\n    }\n\n    // Fallback to localStorage\n    const completedUsers = JSON.parse(localStorage.getItem('onboarding_completed') || '[]')\n    return !completedUsers.includes(user.id)\n  },\n\n  // Mark user as having completed onboarding\n  async markOnboardingComplete(userId) {\n    try {\n      const result = await authAPI.completeOnboarding()\n      if (result.success) {\n        // Update the current user's onboarding status in auth state\n        if (authState.user && authState.user.id === userId) {\n          authState.user = {\n            ...authState.user,\n            needs_onboarding: false\n          }\n          localStorage.setItem('user_data', JSON.stringify(authState.user))\n        }\n\n        // Update localStorage for compatibility\n        const completedUsers = JSON.parse(localStorage.getItem('onboarding_completed') || '[]')\n        if (!completedUsers.includes(userId)) {\n          completedUsers.push(userId)\n          localStorage.setItem('onboarding_completed', JSON.stringify(completedUsers))\n        }\n        return true\n      }\n      return false\n    } catch (error) {\n      console.error('Failed to mark onboarding complete:', error)\n      return false\n    }\n  },\n\n  // Check if user has completed onboarding\n  hasCompletedOnboarding(user) {\n    if (!user) return false\n\n    // Use backend data if available\n    if (user.needs_onboarding !== undefined) {\n      return !user.needs_onboarding\n    }\n\n    // Fallback to localStorage\n    const completedUsers = JSON.parse(localStorage.getItem('onboarding_completed') || '[]')\n    return completedUsers.includes(user.id)\n  }\n}\n\n// Authentication functions\nexport const auth = {\n  // State getters\n  get isAuthenticated() {\n    return authState.isAuthenticated\n  },\n\n  get currentUser() {\n    return authState.user\n  },\n\n  get userRole() {\n    return authState.user?.role || null\n  },\n\n  get userName() {\n    return authState.user?.name || ''\n  },\n\n  get userEmail() {\n    return authState.user?.email || ''\n  },\n\n  get isLoading() {\n    return authState.loading\n  },\n\n  get error() {\n    return authState.error\n  },\n\n  // Actions\n  async login(credentials) {\n    try {\n      authState.loading = true\n      authState.error = null\n\n      // Call backend API\n      const result = await authAPI.login(credentials)\n\n      if (result.success) {\n        const { user, token } = result.data\n\n        // Debug: Log the raw user data from backend\n        if (DEBUG) {\n          console.log('üìä Raw backend user data:', user)\n          console.log('üîç user.role:', user.role)\n          console.log('üîç user.role_name:', user.role_name)\n          console.log('üîç user.roles:', user.roles)\n          console.log('üîç user.permissions:', user.permissions)\n        }\n\n        // Map backend role to frontend role constant\n        // Use primary role (role_name) for routing, but store all roles\n        const mappedUser = {\n          ...user,\n          role: mapBackendRole(user.role_name || user.role),\n          roles: user.roles || [],\n          permissions: user.permissions || []\n        }\n\n        // Validate user role\n        if (!isValidRole(mappedUser.role)) {\n          throw new Error('Invalid user role received from server')\n        }\n\n        // Store in localStorage with session info\n        const sessionData = {\n          token,\n          tokenName: result.data.token_name,\n          sessionInfo: result.data.session_info,\n          user: mappedUser\n        }\n\n        localStorage.setItem('auth_token', token)\n        localStorage.setItem('user_data', JSON.stringify(mappedUser))\n        localStorage.setItem('session_data', JSON.stringify(sessionData))\n\n        if (DEBUG) {\n          console.log('‚úÖ Token stored in localStorage:', token.substring(0, 20) + '...')\n          console.log('‚úÖ User data stored:', mappedUser.name, mappedUser.role)\n          console.log('‚úÖ Session info stored:', result.data.token_name)\n        }\n\n        // Update state\n        authState.isAuthenticated = true\n        authState.user = mappedUser\n        authState.token = token\n        authState.tokenName = result.data.token_name\n        authState.sessionInfo = result.data.session_info\n\n        if (DEBUG)\n          console.log('‚úÖ Auth state updated - isAuthenticated:', authState.isAuthenticated)\n\n        return { success: true, user: mappedUser }\n      } else {\n        throw new Error(result.error)\n      }\n    } catch (error) {\n      const errorMessage = error.message || 'Login failed'\n      authState.error = errorMessage\n      return { success: false, error: errorMessage }\n    } finally {\n      authState.loading = false\n    }\n  },\n\n  async logout() {\n    try {\n      authState.loading = true\n\n      // Call backend API to invalidate token\n      await authAPI.logout()\n\n      // Clear localStorage\n      localStorage.removeItem('auth_token')\n      localStorage.removeItem('user_data')\n      localStorage.removeItem('session_data')\n\n      // Clear state\n      authState.isAuthenticated = false\n      authState.user = null\n      authState.token = null\n      authState.tokenName = null\n      authState.sessionInfo = null\n      authState.activeSessions = []\n      authState.error = null\n\n      return { success: true }\n    } catch (error) {\n      // Even if logout fails, clear local state\n      localStorage.removeItem('auth_token')\n      localStorage.removeItem('user_data')\n      localStorage.removeItem('session_data')\n      authState.isAuthenticated = false\n      authState.user = null\n      authState.token = null\n      authState.tokenName = null\n      authState.sessionInfo = null\n      authState.activeSessions = []\n\n      console.warn('Logout API call failed, but local state cleared:', error.message)\n      return { success: true }\n    } finally {\n      authState.loading = false\n    }\n  },\n\n  // Initialize authentication from localStorage\n  async initializeAuth(force = false) {\n    try {\n      if (DEBUG) console.log('üîÑ Auth: Initializing authentication...', { force })\n\n      // If already authenticated and not forced, don't reinitialize\n      if (!force && authState.isAuthenticated && authState.user && authState.token) {\n        if (DEBUG) console.log('‚úÖ Auth: Already authenticated, skipping initialization')\n        return true\n      }\n\n      // Set loading state\n      authState.loading = true\n\n      const token = localStorage.getItem('auth_token')\n      const userData = localStorage.getItem('user_data')\n      const sessionData = localStorage.getItem('session_data')\n\n      if (DEBUG)\n        console.log('üîç Auth: Checking stored data...', {\n          hasToken: !!token,\n          hasUserData: !!userData,\n          hasSessionData: !!sessionData\n        })\n\n      if (token && userData) {\n        try {\n          const user = JSON.parse(userData)\n          let session = null\n\n          if (DEBUG)\n            console.log('üìä Auth: Parsed user data:', {\n              name: user.name,\n              role: user.role,\n              id: user.id\n            })\n\n          // Try to parse session data if available\n          if (sessionData) {\n            try {\n              session = JSON.parse(sessionData)\n            } catch (sessionParseError) {\n              console.warn('Failed to parse session data:', sessionParseError)\n            }\n          }\n\n          // Validate stored data\n          if (isValidRole(user.role)) {\n            if (DEBUG) console.log('‚úÖ Auth: Valid role found, setting auth state...', user.role)\n\n            // Set auth state immediately with stored data\n            authState.isAuthenticated = true\n            authState.user = user\n            authState.token = token\n            authState.tokenName = session?.tokenName || null\n            authState.sessionInfo = session?.sessionInfo || null\n\n            if (DEBUG) {\n              console.log('‚úÖ Auth: Auth state updated successfully')\n              console.log('  - isAuthenticated:', authState.isAuthenticated)\n              console.log('  - user.role:', authState.user.role)\n              console.log('  - user.name:', authState.user.name)\n            }\n\n            // Try to verify token in background (don't await to avoid blocking)\n            setTimeout(() => {\n              this.verifyTokenInBackground(token, user)\n            }, 100)\n\n            return true\n          } else {\n            console.error('‚ùå Auth: Invalid role in stored data:', user.role)\n            // Clear invalid data\n            this.clearAuthData()\n          }\n        } catch (parseError) {\n          console.error('Failed to parse stored user data:', parseError)\n          // Clear corrupted data\n          this.clearAuthData()\n        }\n      } else {\n        if (DEBUG) console.log('üö® Auth: No stored auth data found')\n        // Ensure auth state is cleared\n        authState.isAuthenticated = false\n        authState.user = null\n        authState.token = null\n        authState.tokenName = null\n        authState.sessionInfo = null\n        authState.activeSessions = []\n      }\n    } catch (error) {\n      console.error('Failed to initialize auth:', error)\n      // Clear auth state on error\n      this.clearAuthData()\n    } finally {\n      // Always clear loading state\n      authState.loading = false\n    }\n\n    if (DEBUG) console.log('‚ùå Auth: Initialization failed')\n    return false\n  },\n\n  // Verify token in background without blocking initialization\n  async verifyTokenInBackground(_token, _user) {\n    try {\n      const userResult = await authAPI.getCurrentUser()\n\n      if (userResult.success) {\n        // Update user data from backend\n        const backendUser = userResult.data\n        if (DEBUG) {\n          console.log('üîÑ Background verification - Raw backend user:', backendUser)\n          console.log('üîç Background - user.role:', backendUser.role)\n          console.log('üîç Background - user.role_name:', backendUser.role_name)\n          console.log('üîç Background - user.roles:', backendUser.roles)\n          console.log('üîç Background - user.permissions:', backendUser.permissions)\n        }\n\n        const mappedUser = {\n          ...backendUser,\n          role: mapBackendRole(backendUser.role_name || backendUser.role),\n          roles: backendUser.roles || [],\n          permissions: backendUser.permissions || []\n        }\n\n        // Update state with fresh data\n        authState.user = mappedUser\n        localStorage.setItem('user_data', JSON.stringify(mappedUser))\n      } else {\n        // If token is invalid/expired, clear auth data\n        if (\n          userResult.error &&\n          (userResult.error.includes('401') ||\n            userResult.error.includes('Unauthorized') ||\n            userResult.error.includes('expired'))\n        ) {\n          this.clearAuthData()\n          // Redirect to login\n          if (window.location.pathname !== '/' && window.location.pathname !== '/login') {\n            window.location.href = '/login'\n          }\n        }\n      }\n    } catch (error) {\n      // Check if it's an authentication error\n      if (\n        error.message &&\n        (error.message.includes('401') || error.message.includes('Unauthorized'))\n      ) {\n        this.clearAuthData()\n        if (window.location.pathname !== '/' && window.location.pathname !== '/login') {\n          window.location.href = '/login'\n        }\n      }\n      // Don't clear auth data on network errors\n    }\n  },\n\n  // Clear authentication data\n  clearAuthData() {\n    localStorage.removeItem('auth_token')\n    localStorage.removeItem('user_data')\n    localStorage.removeItem('session_data')\n    authState.isAuthenticated = false\n    authState.user = null\n    authState.token = null\n    authState.tokenName = null\n    authState.sessionInfo = null\n    authState.activeSessions = []\n    authState.error = null\n  },\n\n  // Clear error\n  clearError() {\n    authState.error = null\n  },\n\n  // Get default dashboard for current user\n  getDefaultDashboard() {\n    const dashboard = getDefaultDashboard(this.userRole)\n    if (DEBUG) console.log('üè† Getting default dashboard for role:', this.userRole, '‚Üí', dashboard)\n    return dashboard\n  },\n\n  // Check if user needs onboarding\n  needsOnboarding() {\n    return onboardingUtils.needsOnboarding(this.currentUser)\n  },\n\n  // Mark onboarding as complete\n  async markOnboardingComplete(userId) {\n    return await onboardingUtils.markOnboardingComplete(userId)\n  },\n\n  // Session management methods\n  async logoutAll() {\n    try {\n      authState.loading = true\n\n      // Call backend API to revoke all tokens\n      const result = await authAPI.logoutAll()\n\n      if (result.success) {\n        // Clear localStorage\n        this.clearAuthData()\n\n        return { success: true, data: result.data }\n      } else {\n        throw new Error(result.error)\n      }\n    } catch (error) {\n      // Even if logout fails, clear local state\n      this.clearAuthData()\n      console.warn('LogoutAll API call failed, but local state cleared:', error.message)\n      return { success: true }\n    } finally {\n      authState.loading = false\n    }\n  },\n\n  async getActiveSessions() {\n    try {\n      const result = await authAPI.getActiveSessions()\n\n      if (result.success) {\n        authState.activeSessions = result.data.sessions || []\n        return { success: true, data: result.data }\n      } else {\n        throw new Error(result.error)\n      }\n    } catch (error) {\n      const errorMessage = error.message || 'Failed to fetch active sessions'\n      authState.error = errorMessage\n      return { success: false, error: errorMessage }\n    }\n  },\n\n  async revokeSession(tokenId) {\n    try {\n      const result = await authAPI.revokeSession(tokenId)\n\n      if (result.success) {\n        // Refresh active sessions list\n        await this.getActiveSessions()\n        return { success: true, data: result.data }\n      } else {\n        throw new Error(result.error)\n      }\n    } catch (error) {\n      const errorMessage = error.message || 'Failed to revoke session'\n      authState.error = errorMessage\n      return { success: false, error: errorMessage }\n    }\n  },\n\n  // Get current session info\n  get currentSession() {\n    return {\n      tokenName: authState.tokenName,\n      sessionInfo: authState.sessionInfo,\n      isAuthenticated: authState.isAuthenticated\n    }\n  },\n\n  get activeSessions() {\n    return authState.activeSessions\n  }\n}\n\n// Initialize auth immediately on module load\nauth.initializeAuth()\n\n// Export reactive computed properties for use in components\nexport const useAuth = () => {\n  return {\n    // Reactive state\n    isAuthenticated: computed(() => authState.isAuthenticated),\n    currentUser: computed(() => authState.user),\n    userRole: computed(() => authState.user?.role || null),\n    userName: computed(() => authState.user?.name || ''),\n    userEmail: computed(() => authState.user?.email || ''),\n    isLoading: computed(() => authState.loading),\n    error: computed(() => authState.error),\n\n    // Computed permissions\n    isAdmin: computed(() => authState.user?.role === ROLES.ADMIN),\n    isStaff: computed(() => authState.user?.role === ROLES.STAFF),\n    isApprover: computed(() => {\n      const role = authState.user?.role\n      return [\n        ROLES.DIVISIONAL_DIRECTOR,\n        ROLES.HEAD_OF_DEPARTMENT,\n\n        ROLES.ICT_DIRECTOR,\n        ROLES.ICT_OFFICER\n      ].includes(role)\n    }),\n\n    // Onboarding state\n    needsOnboarding: computed(() => onboardingUtils.needsOnboarding(authState.user)),\n    hasCompletedOnboarding: computed(() =>\n      authState.user ? onboardingUtils.hasCompletedOnboarding(authState.user.id) : false\n    ),\n\n    defaultDashboard: computed(() => getDefaultDashboard(authState.user?.role)),\n\n    // Methods\n    login: auth.login.bind(auth),\n    logout: auth.logout.bind(auth),\n    logoutAll: auth.logoutAll.bind(auth),\n    getActiveSessions: auth.getActiveSessions.bind(auth),\n    revokeSession: auth.revokeSession.bind(auth),\n    clearError: auth.clearError.bind(auth),\n    markOnboardingComplete: (userId) => onboardingUtils.markOnboardingComplete(userId),\n\n    // Session info\n    currentSession: computed(() => auth.currentSession),\n    activeSessions: computed(() => authState.activeSessions),\n    tokenName: computed(() => authState.tokenName),\n    sessionInfo: computed(() => authState.sessionInfo),\n\n    // Constants\n    ROLES\n  }\n}\n\n// Export for direct access\nexport default auth\n","import { render } from \"./ModernSidebar.vue?vue&type=template&id=5f26fa50&scoped=true\"\nimport script from \"./ModernSidebar.vue?vue&type=script&lang=js\"\nexport * from \"./ModernSidebar.vue?vue&type=script&lang=js\"\n\nimport \"./ModernSidebar.vue?vue&type=style&index=0&id=5f26fa50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5f26fa50\"]])\n\nexport default __exports__"],"names":["useAuth","router","useRouter","authStore","useAuthStore","user","computed","token","isAuthenticated","userPermissions","userRole","userRoles","isLoading","error","isAdmin","isStaff","isApprover","userName","value","name","login","async","authService","result","credentials","success","data","setAuthData","redirectPath","getDefaultDashboard","needs_onboarding","redirectTo","currentRoute","query","redirect","push","errorMessage","message","errors","fieldOrder","field","fieldErrors","Array","isArray","length","console","setError","logout","clearAuth","logoutAll","updateUser","userData","clearError","hasPermission","permission","hasRole","roles","canAccessRoute","route","meta","requireRole","requiredRoles","roleList","join","Error","getRoleDisplayName","role","roleNames","ROLES","ADMIN","DIVISIONAL_DIRECTOR","HEAD_OF_DEPARTMENT","ICT_DIRECTOR","HEAD_OF_IT","STAFF","ICT_OFFICER","SECRETARY_ICT","LogoutGuard","constructor","this","isLoggingOut","logoutPromise","lastLogoutTime","cooldownPeriod","executeLogout","logoutFunction","now","Date","performLogout","setTimeout","reset","isInProgress","logoutGuard","class","style","_createElementBlock","_normalizeClass","$setup","isCollapsed","shouldShowSidebar","_normalizeStyle","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","toggleCollapse","_hoisted_6","_hoisted_7","_hoisted_17","_hoisted_18","_hoisted_19","currentUser","profile_photo_url","piniaAuthStore","src","alt","_hoisted_21","_toDisplayString","userInitials","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","userDepartmentOrRole","fill","stroke","viewBox","d","_hoisted_22","filteredDashboardItems","_hoisted_23","$event","toggleSectionLocal","expandedSections","dashboard","debugHeadOfIt","_Fragment","_renderList","item","_createBlock","_component_router_link","key","path","to","icon","getNotificationCount","title","_hoisted_24","_hoisted_25","displayName","toUpperCase","_hoisted_26","_hoisted_27","filteredUserManagementItems","_hoisted_28","userManagement","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","filteredRequestsManagementItems","_hoisted_33","requestsManagement","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","filteredDeviceManagementItems","_hoisted_38","deviceManagement","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","showHelp","_hoisted_44","handleLogout","_hoisted_45","_Teleport","showHelpModal","_withModifiers","_hoisted_46","_hoisted_47","href","_hoisted_48","type","showUserGuide","_hoisted_49","_createVNode","_Transition","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","userGuideRoleLabel","_hoisted_54","userGuideSections","section","idx","_hoisted_55","_hoisted_56","items","i","_hoisted_57","useSidebar","sidebarStore","useSidebarStore","isExpanded","isInitialized","isMobile","sidebarWidth","sidebarClasses","mainContentClasses","storeToRefs","initializeSidebar","detectMobile","setCollapsed","toggle","expand","collapse","toggleSection","setSectionExpanded","resetToDefaults","clearStorage","getDebugInfo","openSidebar","closeSidebar","toggleSidebar","isSectionExpanded","sectionName","expandSection","collapseSection","expandAllSections","Object","keys","forEach","collapseAllSections","DEBUG","process","authState","reactive","tokenName","sessionInfo","activeSessions","loading","roleMapping","admin","divisional_director","head_of_department","HOD","hod","ict_director","head_of_it","staff","ict_officer","mapBackendRole","backendRoleName","mappedRole","warn","onboardingUtils","needsOnboarding","undefined","completedUsers","JSON","parse","localStorage","getItem","includes","id","markOnboardingComplete","userId","authAPI","completeOnboarding","setItem","stringify","hasCompletedOnboarding","auth","userEmail","email","role_name","permissions","mappedUser","isValidRole","sessionData","token_name","session_info","substring","removeItem","initializeAuth","force","session","sessionParseError","verifyTokenInBackground","clearAuthData","parseError","_token","_user","userResult","getCurrentUser","backendUser","window","location","pathname","getActiveSessions","sessions","revokeSession","tokenId","currentSession","setup","useRoute","_setSectionExpanded","stableUserRole","ref","searchQuery","isHeadOfIt","menuItems","dashboardItems","requestsManagementItems","isSmallScreen","innerWidth","handleResize","watch","authenticated","immediate","onMounted","addEventListener","nextTick","startsWith","onUnmounted","removeEventListener","split","map","n","slice","department","department_name","vuexAuth","vuexRole","vuexLoading","piniaAuth","piniaRole","piniaLoading","hasAuth","notLoading","getRouteMetadata","metadata","category","description","routes","getAllowedRoutes","filter","userManagementItems","deviceManagementItems","shouldHideAccessRequests","toLowerCase","roleForGuide","notificationCounts","routePath","count","notificationRetries","maxNotificationRetries","isNotificationDisabled","fetchNotificationCounts","forceRefresh","notificationService","default","getPendingRequestsCount","finalPendingCount","total_pending","ictSpecificCount","pageOverrideCount","ictOfficerService","ictResp","e","dictService","statsResp","getDictStatistics","s","dictPending","Number","pendingDict","pending","pending_count","listResp","getDictRequests","pickArray","root","candidates","records","rows","c","values","firstArray","find","v","arr","r","st","String","status","dict_status","dictSt","ict_director_status","hodSt","hod_status","divSt","divisional_status","headItSt","head_it_status","implSt","ict_officer_status","legacyPending","preDictDone","notCompleted","headItNotTaken","stageBasedPending","accessRequestsPendingCount","details","breakdown","warnAfter","user_role","timestamp","toISOString","suggestion","config","getRoleNotificationConfig","oldCounts","menuPath","routeCount","code","response","retries","disabled","notificationInterval","setInterval","sidebarInstance","setNotificationCount","handleRefreshNotifications","event","handleIctPendingCount","detail","handleForceRefreshNotifications","clearInterval","newRoute","_oldRoute","dashboardRoutes","some","directives","tooltip","mounted","el","binding","updated","removeAttribute","unmounted","__exports__","render"],"sourceRoot":""}