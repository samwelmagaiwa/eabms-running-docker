"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[6684],{3246:function(e,t,s){s.r(t),s.d(t,{default:function(){return wt}});var a=s(5796);const r={class:"flex flex-col h-screen"},o={class:"flex flex-1 overflow-hidden"},l={class:"flex-1 p-6 bg-gradient-to-br from-blue-900 via-blue-800 to-teal-900 overflow-y-auto relative"},i={class:"absolute inset-0 overflow-hidden"},n={class:"absolute inset-0 opacity-5"},d={class:"grid grid-cols-12 gap-8 h-full transform rotate-45"},c={class:"max-w-13xl mx-auto relative z-10"},u={class:"medical-glass-card rounded-b-3xl overflow-hidden"},b={class:"p-6 space-y-8"},m={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},g={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},f={class:"flex items-center space-x-3 mb-4"},p={class:"text-4xl font-bold text-white"},h={class:"medical-card bg-gradient-to-r from-blue-600/25 to-cyan-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},x={class:"flex items-center space-x-3 mb-4"},v={class:"text-4xl font-bold text-white"},k={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},w={class:"flex items-center space-x-3 mb-4"},y={class:"text-4xl font-bold text-white"},L={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},_={class:"flex items-center space-x-3 mb-4"},D={class:"text-4xl font-bold text-white"},E={class:"medical-card bg-gradient-to-r from-blue-600/25 to-blue-600/25 border-2 border-blue-400/40 p-6 rounded-2xl backdrop-blur-sm"},C={class:"flex items-center justify-between mb-6"},F={class:"flex items-center space-x-4"},S={class:"text-3xl font-bold text-white flex items-center"},X={class:"flex space-x-3"},j=["disabled"],R={key:1,class:"fas fa-refresh"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},A={class:"relative"},K={class:"relative"},W={class:"relative"},I={class:"relative"},T={class:"flex flex-col items-center"},z={class:"flex items-center justify-center space-x-3 h-full w-full"},U={key:0,class:"text-center py-8"},Q={class:"inline-flex items-center space-x-2 text-blue-100"},$={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},N={class:"flex items-start justify-between mb-4"},O={class:"flex items-center space-x-3 flex-1"},V={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"},M={class:"text-white font-bold text-lg"},q={class:"flex-1"},B={class:"font-bold text-white text-2xl"},P={class:"text-blue-100 text-lg"},J={key:0,class:"text-blue-200 text-base mt-1"},G={class:"flex items-center space-x-2"},Y={key:0,class:"px-2 py-1 rounded text-base font-medium bg-red-900/30 text-red-200 border border-red-500/40"},Z={class:"mb-4"},ee={key:0,class:"flex items-center space-x-2"},te={class:"text-xl text-white font-medium"},se={class:"text-base text-blue-100"},ae={key:0,class:"text-sm text-blue-200"},re={key:1,class:"px-2 py-1 bg-gray-500/30 text-gray-100 rounded text-base border border-gray-400/50"},oe={key:0,class:"mb-4"},le={key:0,class:"flex items-center space-x-2"},ie={class:"text-lg text-white font-medium"},ne={class:"text-sm text-blue-100"},de={key:0,class:"text-base text-blue-200"},ce={key:1,class:"px-2 py-1 bg-gray-500/30 text-gray-100 rounded text-sm border border-gray-400/50"},ue={class:"flex space-x-2"},be=["onClick"],me=["onClick"],ge=["onClick"],fe={key:2,class:"text-center py-8"},pe={class:"text-blue-100"},he={class:"text-lg opacity-75"},xe={key:0,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},ve={class:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100 animate-slideUp"},ke={class:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-center"},we={class:"text-2xl font-bold text-white mb-2"},ye={class:"p-6"},Le={class:"medical-card bg-gradient-to-r from-blue-600/15 to-cyan-600/15 border-2 border-blue-400/30 p-6 rounded-2xl backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 mb-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"space-y-2"},Ee={key:0,class:"text-red-500 text-base mt-1 flex items-center space-x-1"},Ce={class:"space-y-2"},Fe={key:0,class:"text-red-500 text-sm mt-1 flex items-center space-x-1"},Se={class:"space-y-2 md:col-span-2"},Xe={key:0,class:"text-red-500 text-base mt-1 flex items-center space-x-1"},je={class:"space-y-2"},Re={class:"relative"},He={class:"medical-card bg-gradient-to-r from-blue-600/15 to-blue-600/15 border-2 border-blue-400/30 p-6 rounded-2xl backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 mb-6"},Ae={class:"space-y-4"},Ke={class:"space-y-2"},We={class:"relative"},Ie=["value"],Te={key:0,class:"text-red-500 text-base mt-1 flex items-center space-x-1"},ze={class:"medical-card bg-gradient-to-r from-blue-600/15 to-blue-600/15 border-2 border-blue-400/30 p-6 rounded-2xl backdrop-blur-sm hover:shadow-lg hover:shadow-blue-500/20 transition-all duration-300 mb-6"},Ue={class:"space-y-4"},Qe={class:"flex items-center space-x-3"},$e={key:0,class:"space-y-2"},Ne={class:"relative"},Oe=["required"],Ve=["value"],Me={key:0,class:"text-red-500 text-base mt-1 flex items-center space-x-1"},qe={class:"flex justify-end space-x-3 p-6 border-t border-gray-200"},Be=["disabled"],Pe=["disabled"],Je={key:1,class:"fas fa-save"},Ge={key:1,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 backdrop-blur-sm"},Ye={class:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 scale-100"},Ze={class:"p-6"},et={class:"text-gray-700 mb-6"},tt={class:"flex justify-end space-x-3"},st=["disabled"],at={key:1,class:"fas fa-trash"},rt={class:"flex items-center"},ot={class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center mr-3"},lt={class:"font-medium flex-1"};function it(e,t,s,it,nt,dt){const ct=(0,a.g2)("AppHeader"),ut=(0,a.g2)("ModernSidebar"),bt=(0,a.g2)("UnifiedLoadingBanner"),mt=(0,a.g2)("OrbitingDots");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(ct),(0,a.Lk)("div",o,[(0,a.bF)(ut),(0,a.Lk)("main",l,[(0,a.bF)(bt,{show:it.loading,loadingTitle:"Loading Departments",loadingSubtitle:"Fetching department list and approver assignments...",departmentTitle:"DEPARTMENT MANAGEMENT",forceSpin:!0},null,8,["show"]),(0,a.Lk)("div",i,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(48,e=>(0,a.Lk)("div",{key:e,class:"bg-white rounded-full w-2 h-2 animate-pulse",style:(0,a.Tr)({animationDelay:.1*e+"s"})},null,4)),64))])])]),(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",b,[(0,a.Lk)("div",m,[(0,a.Lk)("div",g,[(0,a.Lk)("div",f,[t[26]||(t[26]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-building text-white text-xl"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",p,(0,a.v_)(it.statistics.total_departments||0),1),t[25]||(t[25]=(0,a.Lk)("div",{class:"text-lg text-blue-100"},"Total Departments",-1))])])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",x,[t[28]||(t[28]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-user-tie text-white text-xl"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",v,(0,a.v_)(it.statistics.departments_with_hod||0),1),t[27]||(t[27]=(0,a.Lk)("div",{class:"text-lg text-blue-100"},"With HOD",-1))])])]),(0,a.Lk)("div",k,[(0,a.Lk)("div",w,[t[30]||(t[30]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-xl"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",y,(0,a.v_)(it.statistics.departments_with_divisional_director||0),1),t[29]||(t[29]=(0,a.Lk)("div",{class:"text-lg text-blue-100"},"With Div. Director",-1))])])]),(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[t[32]||(t[32]=(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-toggle-on text-white text-xl"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",D,(0,a.v_)(it.statistics.active_departments||0),1),t[31]||(t[31]=(0,a.Lk)("div",{class:"text-lg text-blue-100"},"Active Departments",-1))])])])]),(0,a.Lk)("div",E,[(0,a.Lk)("div",C,[(0,a.Lk)("div",F,[t[34]||(t[34]=(0,a.Lk)("div",{class:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-building text-white text-xl"})],-1)),(0,a.Lk)("h3",S,[t[33]||(t[33]=(0,a.Lk)("i",{class:"fas fa-list mr-2 text-blue-300"},null,-1)),(0,a.eW)(" Departments ("+(0,a.v_)(it.departments.length||0)+" total) ",1)])]),(0,a.Lk)("div",X,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>it.openCreateDialog&&it.openCreateDialog(...e)),class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-2"},[...t[35]||(t[35]=[(0,a.Lk)("i",{class:"fas fa-plus"},null,-1),(0,a.Lk)("span",null,"Create Department",-1)])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>it.refreshData&&it.refreshData(...e)),disabled:it.loading,class:"bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-lg flex items-center space-x-2"},[it.loading?((0,a.uX)(),(0,a.Wv)(mt,{key:0,size:"xs"})):((0,a.uX)(),(0,a.CE)("i",R)),(0,a.Lk)("span",null,(0,a.v_)(it.loading?"Loading...":"Refresh"),1)],8,j)])]),(0,a.Lk)("div",H,[(0,a.Lk)("div",null,[t[37]||(t[37]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-2"},"Search Departments",-1)),(0,a.Lk)("div",A,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>it.searchQuery=e),type:"text",class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white placeholder-blue-200/60 backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 text-xl",placeholder:"Search by name or code...",onInput:t[3]||(t[3]=(...e)=>it.debouncedSearch&&it.debouncedSearch(...e))},null,544),[[a.Jo,it.searchQuery]]),t[36]||(t[36]=(0,a.Lk)("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3"},[(0,a.Lk)("i",{class:"fas fa-search text-blue-300"})],-1))])]),(0,a.Lk)("div",null,[t[40]||(t[40]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-2"},"Filter by Status",-1)),(0,a.Lk)("div",K,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>it.filterStatus=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer",onChange:t[5]||(t[5]=(...e)=>it.applyFilters&&it.applyFilters(...e))},[...t[38]||(t[38]=[(0,a.Lk)("option",{value:"",class:"bg-gray-800 text-white"},"All Status",-1),(0,a.Lk)("option",{value:"active",class:"bg-gray-800 text-white"},"Active",-1),(0,a.Lk)("option",{value:"inactive",class:"bg-gray-800 text-white"},"Inactive",-1)])],544),[[a.u1,it.filterStatus]]),t[39]||(t[39]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))])]),(0,a.Lk)("div",null,[t[43]||(t[43]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-2"},"Filter by HOD",-1)),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>it.filterHod=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer",onChange:t[7]||(t[7]=(...e)=>it.applyFilters&&it.applyFilters(...e))},[...t[41]||(t[41]=[(0,a.Lk)("option",{value:"",class:"bg-gray-800 text-white"},"All HOD Status",-1),(0,a.Lk)("option",{value:"with_hod",class:"bg-gray-800 text-white"},"With HOD",-1),(0,a.Lk)("option",{value:"without_hod",class:"bg-gray-800 text-white"}," Without HOD ",-1)])],544),[[a.u1,it.filterHod]]),t[42]||(t[42]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))])]),(0,a.Lk)("div",null,[t[46]||(t[46]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-2"},"Sort By",-1)),(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>it.sortBy=e),class:"medical-input w-full px-4 py-3 bg-white/15 border-2 border-blue-300/30 rounded-xl focus:border-blue-400 focus:outline-none text-white text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/20 focus:bg-white/20 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer",onChange:t[9]||(t[9]=(...e)=>it.applyFilters&&it.applyFilters(...e))},[...t[44]||(t[44]=[(0,a.Lk)("option",{value:"name",class:"bg-gray-800 text-white"},"Name",-1),(0,a.Lk)("option",{value:"code",class:"bg-gray-800 text-white"},"Code",-1),(0,a.Lk)("option",{value:"created_at",class:"bg-gray-800 text-white"}," Created Date ",-1)])],544),[[a.u1,it.sortBy]]),t[45]||(t[45]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-300"})],-1))])]),(0,a.Lk)("div",T,[t[48]||(t[48]=(0,a.Lk)("label",{class:"block text-xl font-bold text-blue-100 mb-2 text-center"},"Reports",-1)),(0,a.Lk)("div",z,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>it.onlyWithoutDivisionalDirector=e),type:"checkbox",onChange:t[11]||(t[11]=(...e)=>it.applyFiltersAndRefetch&&it.applyFiltersAndRefetch(...e)),class:"w-5 h-5 text-red-600 border-red-300 rounded focus:ring-red-500 focus:ring-2"},null,544),[[a.lH,it.onlyWithoutDivisionalDirector]]),t[47]||(t[47]=(0,a.Lk)("span",{class:"text-red-200 text-base text-center"},"Show departments without Divisional Director",-1))])])]),it.loading?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.Lk)("div",Q,[(0,a.bF)(mt,{size:"sm"}),t[49]||(t[49]=(0,a.Lk)("span",null,"Loading departments...",-1))])])):it.filteredDepartments.length>0?((0,a.uX)(),(0,a.CE)("div",$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(it.filteredDepartments,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"bg-white/15 p-6 rounded-xl backdrop-blur-sm border border-blue-300/30 hover:bg-white/20 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20 group"},[(0,a.Lk)("div",N,[(0,a.Lk)("div",O,[(0,a.Lk)("div",V,[(0,a.Lk)("span",M,(0,a.v_)(it.getInitials(e.name)),1)]),(0,a.Lk)("div",q,[(0,a.Lk)("h4",B,(0,a.v_)(e.name),1),(0,a.Lk)("p",P,(0,a.v_)(e.code),1),e.description?((0,a.uX)(),(0,a.CE)("p",J,(0,a.v_)(e.description),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",G,[(0,a.Lk)("span",{class:(0,a.C4)(["px-2 py-1 rounded text-base font-medium",e.is_active?"bg-green-500/30 text-green-100 border border-green-400/50":"bg-red-500/30 text-red-100 border border-red-400/50"])},(0,a.v_)(e.is_active?"Active":"Inactive"),3),e.has_divisional_director?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Y," Needs Divisional Director "))])]),(0,a.Lk)("div",Z,[t[51]||(t[51]=(0,a.Lk)("div",{class:"text-base text-blue-100 mb-2"},"HOD Status:",-1)),e.hod?((0,a.uX)(),(0,a.CE)("div",ee,[t[50]||(t[50]=(0,a.Lk)("div",{class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-user-tie text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",te,(0,a.v_)(e.hod_status||`Head of Department: ${e.hod.name}`),1),(0,a.Lk)("div",se,(0,a.v_)(e.hod.email),1),e.hod.pf_number?((0,a.uX)(),(0,a.CE)("div",ae," PF: "+(0,a.v_)(e.hod.pf_number),1)):(0,a.Q3)("",!0)])])):((0,a.uX)(),(0,a.CE)("div",re,(0,a.v_)(e.hod_status||"Head of Department: No HOD assigned"),1))]),e.has_divisional_director?((0,a.uX)(),(0,a.CE)("div",oe,[t[53]||(t[53]=(0,a.Lk)("div",{class:"text-base text-blue-100 mb-2"},"Divisional Director:",-1)),e.divisional_director?((0,a.uX)(),(0,a.CE)("div",le,[t[52]||(t[52]=(0,a.Lk)("div",{class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-lg"})],-1)),(0,a.Lk)("div",null,[(0,a.Lk)("div",ie,(0,a.v_)(e.divisional_director.name),1),(0,a.Lk)("div",ne,(0,a.v_)(e.divisional_director.email),1),e.divisional_director.pf_number?((0,a.uX)(),(0,a.CE)("div",de," PF: "+(0,a.v_)(e.divisional_director.pf_number),1)):(0,a.Q3)("",!0)])])):((0,a.uX)(),(0,a.CE)("div",ce," No Divisional Director assigned "))])):(0,a.Q3)("",!0),(0,a.Lk)("div",ue,[(0,a.Lk)("button",{onClick:t=>it.openEditDialog(e),class:"flex-1 bg-gradient-to-r from-blue-500 to-blue-600 text-white py-2 px-3 rounded-lg text-base font-semibold hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-1"},[...t[54]||(t[54]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1),(0,a.Lk)("span",null,"Edit",-1)])],8,be),(0,a.Lk)("button",{onClick:t=>it.toggleDepartmentStatus(e),class:"flex-1 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white py-2 px-3 rounded-lg text-base font-semibold hover:from-yellow-600 hover:to-yellow-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-1"},[(0,a.Lk)("i",{class:(0,a.C4)(e.is_active?"fas fa-toggle-off":"fas fa-toggle-on")},null,2),(0,a.Lk)("span",null,(0,a.v_)(e.is_active?"Deactivate":"Activate"),1)],8,me),(0,a.Lk)("button",{onClick:t=>it.confirmDelete(e),class:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white py-2 px-3 rounded-lg text-base font-semibold hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center justify-center space-x-1"},[...t[55]||(t[55]=[(0,a.Lk)("i",{class:"fas fa-trash"},null,-1),(0,a.Lk)("span",null,"Delete",-1)])],8,ge)])]))),128))])):((0,a.uX)(),(0,a.CE)("div",fe,[(0,a.Lk)("div",pe,[t[56]||(t[56]=(0,a.Lk)("i",{class:"fas fa-building text-4xl mb-4 opacity-50"},null,-1)),t[57]||(t[57]=(0,a.Lk)("p",{class:"text-2xl"},"No departments found",-1)),(0,a.Lk)("p",he,(0,a.v_)(it.searchQuery?"Try adjusting your search criteria":"No departments available"),1)])]))])])])])])]),it.showDialog?((0,a.uX)(),(0,a.CE)("div",xe,[(0,a.Lk)("div",ve,[(0,a.Lk)("div",ke,[t[58]||(t[58]=(0,a.Lk)("div",{class:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm border border-white/30"},[(0,a.Lk)("i",{class:"fas fa-building text-white text-2xl"})],-1)),(0,a.Lk)("h3",we,(0,a.v_)(it.isEditing?"Edit Department":"Create New Department"),1),t[59]||(t[59]=(0,a.Lk)("div",{class:"w-12 h-1 bg-white/50 mx-auto rounded-full"},null,-1))]),(0,a.Lk)("div",ye,[(0,a.Lk)("form",{onSubmit:t[19]||(t[19]=(0,a.D$)((...e)=>it.submitForm&&it.submitForm(...e),["prevent"]))},[(0,a.Lk)("div",Le,[t[69]||(t[69]=(0,a.Lk)("div",{class:"flex items-center space-x-3 mb-6"},[(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-info-circle text-white text-xl"})]),(0,a.Lk)("h4",{class:"text-2xl font-bold text-gray-800"},"Basic Information")],-1)),(0,a.Lk)("div",_e,[(0,a.Lk)("div",De,[t[61]||(t[61]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-building text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Department Name * ")],-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>it.form.name=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg placeholder-gray-500 backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20",placeholder:"Enter department name"},null,512),[[a.Jo,it.form.name]]),it.formErrors.name?((0,a.uX)(),(0,a.CE)("div",Ee,[t[60]||(t[60]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle text-xs"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(it.formErrors.name[0]),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ce,[t[63]||(t[63]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-code text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Department Code * ")],-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>it.form.code=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg placeholder-gray-500 backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20",placeholder:"Enter department code (e.g., ICT, HR)"},null,512),[[a.Jo,it.form.code]]),it.formErrors.code?((0,a.uX)(),(0,a.CE)("div",Fe,[t[62]||(t[62]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle text-xs"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(it.formErrors.code[0]),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Se,[t[65]||(t[65]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-align-left text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Description ")],-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[14]||(t[14]=e=>it.form.description=e),rows:"3",class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg placeholder-gray-500 backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20",placeholder:"Enter department description (optional)"},null,512),[[a.Jo,it.form.description]]),it.formErrors.description?((0,a.uX)(),(0,a.CE)("div",Xe,[t[64]||(t[64]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle text-xs"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(it.formErrors.description[0]),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",je,[t[68]||(t[68]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-toggle-on text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Status ")],-1)),(0,a.Lk)("div",Re,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>it.form.is_active=e),class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer"},[...t[66]||(t[66]=[(0,a.Lk)("option",{value:!0,class:"bg-gray-800 text-white"},"Active",-1),(0,a.Lk)("option",{value:!1,class:"bg-gray-800 text-white"},"Inactive",-1)])],512),[[a.u1,it.form.is_active]]),t[67]||(t[67]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-500"})],-1))])])])]),(0,a.Lk)("div",He,[t[74]||(t[74]=(0,a.Lk)("div",{class:"flex items-center space-x-3 mb-6"},[(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-user-tie text-white text-xl"})]),(0,a.Lk)("h4",{class:"text-2xl font-bold text-gray-800"},"Head of Department (HOD)")],-1)),(0,a.Lk)("div",Ae,[(0,a.Lk)("div",Ke,[t[73]||(t[73]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-user-tie text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Select HOD ")],-1)),(0,a.Lk)("div",We,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>it.form.hod_user_id=e),class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer"},[t[70]||(t[70]=(0,a.Lk)("option",{value:"",class:"bg-gray-800 text-white"},"No HOD assigned",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(it.eligibleHods,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-gray-800 text-white"},(0,a.v_)(e.display_name),9,Ie))),128))],512),[[a.u1,it.form.hod_user_id]]),t[71]||(t[71]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-500"})],-1))]),it.formErrors.hod_user_id?((0,a.uX)(),(0,a.CE)("div",Te,[t[72]||(t[72]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle text-xs"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(it.formErrors.hod_user_id[0]),1)])):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",ze,[t[80]||(t[80]=(0,a.Lk)("div",{class:"flex items-center space-x-3 mb-6"},[(0,a.Lk)("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-xl"})]),(0,a.Lk)("h4",{class:"text-2xl font-bold text-gray-800"},"Divisional Director")],-1)),(0,a.Lk)("div",Ue,[(0,a.Lk)("div",Qe,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>it.form.has_divisional_director=e),type:"checkbox",class:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[a.lH,it.form.has_divisional_director]]),t[75]||(t[75]=(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," This department has a divisional director ",-1))]),it.form.has_divisional_director?((0,a.uX)(),(0,a.CE)("div",$e,[t[79]||(t[79]=(0,a.Lk)("div",{class:"flex items-center space-x-2 mb-3"},[(0,a.Lk)("div",{class:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center shadow-md"},[(0,a.Lk)("i",{class:"fas fa-crown text-white text-base"})]),(0,a.Lk)("label",{class:"text-base font-bold text-gray-700"}," Select Divisional Director * ")],-1)),(0,a.Lk)("div",Ne,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[18]||(t[18]=e=>it.form.divisional_director_id=e),required:it.form.has_divisional_director,class:"w-full px-4 py-3 bg-white/70 border-2 border-blue-300/30 rounded-xl focus:border-blue-500 focus:outline-none text-gray-800 text-lg backdrop-blur-sm transition-all duration-300 hover:bg-white/80 focus:bg-white/90 focus:shadow-lg focus:shadow-blue-500/20 appearance-none cursor-pointer"},[t[76]||(t[76]=(0,a.Lk)("option",{value:"",class:"bg-gray-800 text-white"}," Select divisional director ",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(it.eligibleDivisionalDirectors,e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id,class:"bg-gray-800 text-white"},(0,a.v_)(e.display_name),9,Ve))),128))],8,Oe),[[a.u1,it.form.divisional_director_id]]),t[77]||(t[77]=(0,a.Lk)("div",{class:"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none"},[(0,a.Lk)("i",{class:"fas fa-chevron-down text-blue-500"})],-1))]),it.formErrors.divisional_director_id?((0,a.uX)(),(0,a.CE)("div",Me,[t[78]||(t[78]=(0,a.Lk)("i",{class:"fas fa-exclamation-circle text-xs"},null,-1)),(0,a.Lk)("span",null,(0,a.v_)(it.formErrors.divisional_director_id[0]),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])],32)]),(0,a.Lk)("div",qe,[(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>it.closeDialog&&it.closeDialog(...e)),disabled:it.submitting,class:"px-6 py-3 bg-gray-100 text-gray-700 text-lg rounded-xl font-medium hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,Be),(0,a.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>it.submitForm&&it.submitForm(...e)),disabled:it.submitting||!it.form.name||!it.form.code||it.form.has_divisional_director&&!it.form.divisional_director_id,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-lg rounded-xl font-medium hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[it.submitting?((0,a.uX)(),(0,a.Wv)(mt,{key:0,size:"xs"})):((0,a.uX)(),(0,a.CE)("i",Je)),(0,a.Lk)("span",null,(0,a.v_)(it.submitting?"Saving...":it.isEditing?"Update Department":"Create Department"),1)],8,Pe)])])])):(0,a.Q3)("",!0),it.showDeleteDialog?((0,a.uX)(),(0,a.CE)("div",Ge,[(0,a.Lk)("div",Ye,[(0,a.Lk)("div",Ze,[t[83]||(t[83]=(0,a.Fv)('<div class="flex items-center space-x-3 mb-4" data-v-09bb8d32><div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center" data-v-09bb8d32><i class="fas fa-exclamation-triangle text-red-600 text-2xl" data-v-09bb8d32></i></div><div data-v-09bb8d32><h3 class="text-xl font-bold text-gray-900" data-v-09bb8d32>Delete Department</h3><p class="text-base text-gray-600" data-v-09bb8d32>This action cannot be undone</p></div></div>',1)),(0,a.Lk)("p",et,[t[81]||(t[81]=(0,a.eW)(' Are you sure you want to delete the department "',-1)),(0,a.Lk)("strong",null,(0,a.v_)(it.departmentToDelete?.name),1),t[82]||(t[82]=(0,a.eW)('"? ',-1))]),(0,a.Lk)("div",tt,[(0,a.Lk)("button",{onClick:t[22]||(t[22]=e=>it.showDeleteDialog=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 text-lg rounded-lg font-medium hover:bg-gray-200 transition-colors"}," Cancel "),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>it.deleteDepartment&&it.deleteDepartment(...e)),disabled:it.deleting,class:"px-4 py-2 bg-red-600 text-white text-lg rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center space-x-2"},[it.deleting?((0,a.uX)(),(0,a.Wv)(mt,{key:0,size:"xs"})):((0,a.uX)(),(0,a.CE)("i",at)),(0,a.Lk)("span",null,(0,a.v_)(it.deleting?"Deleting...":"Delete"),1)],8,st)])])])])):(0,a.Q3)("",!0),it.showSnackbar?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,a.C4)(["fixed top-4 right-4 px-6 py-4 rounded-xl shadow-2xl z-50 max-w-md border border-white/20 transform transition-all duration-300","success"===it.snackbarColor?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":"error"===it.snackbarColor?"bg-gradient-to-r from-red-500 to-rose-500 text-white":"bg-gradient-to-r from-blue-500 to-cyan-500 text-white"])},[(0,a.Lk)("div",rt,[(0,a.Lk)("div",ot,[(0,a.Lk)("i",{class:(0,a.C4)(["text-sm","success"===it.snackbarColor?"fas fa-check":"error"===it.snackbarColor?"fas fa-times":"fas fa-info"])},null,2)]),(0,a.Lk)("p",lt,(0,a.v_)(it.snackbarMessage),1),(0,a.Lk)("button",{onClick:t[24]||(t[24]=e=>it.showSnackbar=!1),class:"ml-3 text-white/80 hover:text-white transition-colors duration-200"},[...t[84]||(t[84]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)])])])],2)):(0,a.Q3)("",!0)])}s(8111),s(2489),s(1701);var nt=s(896),dt=s.n(nt),ct=s(6933),ut=s(8966),bt=s(4247),mt=s(1445),gt=s(4373);const ft="http://127.0.0.1:8000/api";class pt{constructor(){this.api=gt.A.create({baseURL:ft,timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.api.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),this.api.interceptors.response.use(e=>e,e=>(401===e.response?.status&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.href="/login"),Promise.reject(e)))}async getDepartments(e={}){try{this.api.defaults.baseURL,this.api.defaults.headers;const t=await this.api.get("/admin/departments",{params:e});return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error fetching departments:",t),console.error("Error response:",t.response),console.error("Error status:",t.response?.status),console.error("Error data:",t.response?.data),{success:!1,message:t.response?.data?.message||"Failed to fetch departments",error:t.response?.data?.error||t.message,status:t.response?.status}}}async getDepartment(e){try{const t=await this.api.get(`/admin/departments/${e}`);return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error fetching department:",t),{success:!1,message:t.response?.data?.message||"Failed to fetch department",error:t.response?.data?.error||t.message}}}async createDepartment(e){try{const t=await this.api.post("/admin/departments",e);return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error creating department:",t),{success:!1,message:t.response?.data?.message||"Failed to create department",error:t.response?.data?.error||t.message,errors:t.response?.data?.errors||{}}}}async updateDepartment(e,t){try{const s=await this.api.put(`/admin/departments/${e}`,t);return{success:!0,data:s.data.data,message:s.data.message}}catch(s){return console.error("Error updating department:",s),{success:!1,message:s.response?.data?.message||"Failed to update department",error:s.response?.data?.error||s.message,errors:s.response?.data?.errors||{}}}}async deleteDepartment(e){try{const t=await this.api.delete(`/admin/departments/${e}`);return{success:!0,message:t.data.message}}catch(t){return console.error("Error deleting department:",t),{success:!1,message:t.response?.data?.message||"Failed to delete department",error:t.response?.data?.error||t.message}}}async toggleDepartmentStatus(e){try{const t=await this.api.patch(`/admin/departments/${e}/toggle-status`);return{success:!0,data:t.data.data,message:t.data.message}}catch(t){return console.error("Error toggling department status:",t),{success:!1,message:t.response?.data?.message||"Failed to toggle department status",error:t.response?.data?.error||t.message}}}async getFormData(e=null){try{const t=e?{department_id:e}:{};this.api.defaults.baseURL;const s=await this.api.get("/admin/departments/create-form-data",{params:t});return{success:!0,data:s.data.data,message:s.data.message}}catch(t){return console.error("Error fetching form data:",t),console.error("Form data error response:",t.response),console.error("Form data error status:",t.response?.status),console.error("Form data error data:",t.response?.data),{success:!1,message:t.response?.data?.message||"Failed to fetch form data",error:t.response?.data?.error||t.message,status:t.response?.status}}}async getEligibleHods(){try{const e=await this.api.get("/admin/departments/eligible-hods");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error fetching eligible HODs:",e),{success:!1,message:e.response?.data?.message||"Failed to fetch eligible HODs",error:e.response?.data?.error||e.message}}}async getEligibleDivisionalDirectors(){try{const e=await this.api.get("/admin/departments/eligible-divisional-directors");return{success:!0,data:e.data.data,message:e.data.message}}catch(e){return console.error("Error fetching eligible divisional directors:",e),{success:!1,message:e.response?.data?.message||"Failed to fetch eligible divisional directors",error:e.response?.data?.error||e.message}}}}var ht=new pt,xt={name:"DepartmentManagement",components:{AppHeader:ct.A,ModernSidebar:ut.A,OrbitingDots:bt.A,UnifiedLoadingBanner:mt.A},setup(){const e=(0,a.KR)(!1),t=(0,a.KR)([]),s=(0,a.KR)([]),r=(0,a.KR)([]),o=(0,a.KR)({total_departments:0,departments_with_hod:0,departments_with_divisional_director:0,active_departments:0}),l=(0,a.KR)(!1),i=(0,a.KR)(""),n=(0,a.KR)(""),d=(0,a.KR)(""),c=(0,a.KR)("name"),u=(0,a.KR)(!1),b=(0,a.KR)(!1),m=(0,a.KR)(!1),g=(0,a.KR)(!1),f=(0,a.KR)(!1),p=(0,a.KR)({name:"",code:"",description:"",is_active:!0,hod_user_id:"",has_divisional_director:!1,divisional_director_id:""}),h=(0,a.KR)({}),x=(0,a.KR)(null),v=(0,a.KR)(!1),k=(0,a.KR)(""),w=(0,a.KR)("success"),y=(0,a.EW)(()=>{let e=[...t.value];if(i.value){const t=i.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.code.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}if(n.value){const t="active"===n.value;e=e.filter(e=>e.is_active===t)}return d.value&&("with_hod"===d.value?e=e.filter(e=>e.hod):"without_hod"===d.value&&(e=e.filter(e=>!e.hod))),e.sort((e,t)=>{const s=e[c.value]||"",a=t[c.value]||"";return s.localeCompare(a)}),e}),L=async()=>{e.value=!0;try{await Promise.all([_(),D()]),E()}catch(t){console.error("Error initializing data:",t),console.error("Error details:",{message:t.message,response:t.response?.data,status:t.response?.status,statusText:t.response?.statusText}),Q(`Failed to load data: ${t.response?.data?.message||t.message}`)}finally{e.value=!1}},_=async()=>{try{const e={};l.value&&(e.has_divisional_director=!1);const s=await ht.getDepartments(e);if(!s.success)throw console.error("Departments fetch failed:",s),new Error(s.message);t.value=s.data.data||[],t.value.length}catch(e){throw console.error("Error fetching departments:",e),e}},D=async(e=null)=>{try{const t=await ht.getFormData(e);if(!t.success)throw console.error("Form data fetch failed:",t),new Error(t.message);s.value=t.data.eligible_hods||[],r.value=t.data.eligible_divisional_directors||[],s.value.length,r.value.length,t.data.total_users_checked}catch(t){throw console.error("Error fetching form data:",t),t}},E=()=>{o.value={total_departments:t.value.length,departments_with_hod:t.value.filter(e=>e.hod).length,departments_with_divisional_director:t.value.filter(e=>e.has_divisional_director||e.divisional_director).length,active_departments:t.value.filter(e=>e.is_active).length}},C=async()=>{await L()},F=dt()(()=>{},500),S=()=>{},X=async()=>{await _(),E()},j=()=>{A(),m.value=!1,u.value=!0},R=async e=>{A(),m.value=!0,p.value={name:e.name,code:e.code,description:e.description||"",is_active:e.is_active,hod_user_id:e.hod?.id||"",has_divisional_director:e.has_divisional_director,divisional_director_id:e.divisional_director?.id||""},p.value.id=e.id;try{await D(e.id)}catch(t){console.error("Error refreshing form data for edit:",t),Q("Failed to load available users for editing")}u.value=!0},H=()=>{u.value=!1,A()},A=()=>{p.value={name:"",code:"",description:"",is_active:!0,hod_user_id:"",has_divisional_director:!1,divisional_director_id:""},h.value={}},K=async()=>{g.value=!0,h.value={};try{const e={...p.value};let t;e.has_divisional_director||(e.divisional_director_id=""),t=m.value?await ht.updateDepartment(p.value.id,e):await ht.createDepartment(e),t.success?(U(t.message),H(),await C()):t.errors?h.value=t.errors:Q(t.message)}catch(e){console.error("Error submitting form:",e),Q("Failed to save department")}finally{g.value=!1}},W=e=>{x.value=e,b.value=!0},I=async()=>{if(x.value){f.value=!0;try{const e=await ht.deleteDepartment(x.value.id);e.success?(U(e.message),b.value=!1,x.value=null,await C()):Q(e.message)}catch(e){console.error("Error deleting department:",e),Q("Failed to delete department")}finally{f.value=!1}}},T=async e=>{try{const t=await ht.toggleDepartmentStatus(e.id);t.success?(U(t.message),await C()):Q(t.message)}catch(t){console.error("Error toggling department status:",t),Q("Failed to toggle department status")}},z=e=>e.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2),U=e=>{k.value=e,w.value="success",v.value=!0,setTimeout(()=>{v.value=!1},5e3)},Q=e=>{k.value=e,w.value="error",v.value=!0,setTimeout(()=>{v.value=!1},5e3)};return(0,a.sV)(()=>{L()}),{loading:e,departments:t,eligibleHods:s,eligibleDivisionalDirectors:r,statistics:o,searchQuery:i,filterStatus:n,filterHod:d,sortBy:c,showDialog:u,showDeleteDialog:b,isEditing:m,submitting:g,deleting:f,form:p,formErrors:h,departmentToDelete:x,showSnackbar:v,snackbarMessage:k,snackbarColor:w,filteredDepartments:y,refreshData:C,debouncedSearch:F,applyFilters:S,applyFiltersAndRefetch:X,openCreateDialog:j,openEditDialog:R,closeDialog:H,submitForm:K,confirmDelete:W,deleteDepartment:I,toggleDepartmentStatus:T,getInitials:z,onlyWithoutDivisionalDirector:l}}},vt=s(1241);const kt=(0,vt.A)(xt,[["render",it],["__scopeId","data-v-09bb8d32"]]);var wt=kt},4247:function(e,t,s){s.d(t,{A:function(){return d}});var a=s(5796);const r={class:"center-logo"};function o(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",{class:(0,a.C4)(["orbiting-dots",i.sizeClass]),style:(0,a.Tr)(i.customSize)},[(0,a.Lk)("div",r,[(0,a.Lk)("img",{src:"/assets/images/logo2.png",alt:"Loading",class:"logo-img",onError:t[0]||(t[0]=(...e)=>i.handleImageError&&i.handleImageError(...e))},null,32)]),(0,a.Lk)("div",{class:"orbit",style:(0,a.Tr)(i.orbitStyle)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.dots,(e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:`dot-${t}`,class:(0,a.C4)(`dot ${e.color}`),style:(0,a.Tr)(i.getDotStyle(t))},null,6))),128))],4)],6)}var l={name:"OrbitingDots",props:{size:{type:String,default:"sm"},customWidth:{type:Number,default:null},customHeight:{type:Number,default:null},speed:{type:Number,default:3}},data(){return{updateFrequency:50,dots:[{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"},{color:"logo-red"},{color:"logo-gold"},{color:"logo-white"}]}},computed:{sizeClass(){return this.customWidth||this.customHeight?"":`size-${this.size}`},customSize(){return this.customWidth||this.customHeight?{width:this.customWidth?`${this.customWidth}px`:"auto",height:this.customHeight?`${this.customHeight}px`:"auto"}:{}},dotSpacing(){return 360/this.dots.length},orbitRadius(){if(this.customWidth)return Math.max(8,this.customWidth/4);switch(this.size){case"xs":return 6;case"sm":return 8;case"md":return 12;case"lg":return 16;case"xl":return 24;case"2xl":return 45;default:return 8}},currentContainerSize(){if(this.customWidth)return this.customWidth;switch(this.size){case"xs":return 16;case"sm":return 20;case"md":return 28;case"lg":return 36;case"xl":return 64;case"2xl":return 120;default:return 20}},durationSeconds(){const e=this.speed*(1e3/this.updateFrequency),t=e>0?360/e:1.5;return Math.max(.8,Math.min(t,4))},orbitStyle(){return{"--orbit-duration":`${this.durationSeconds}s`}}},methods:{getDotStyle(e){const t=e*this.dotSpacing,s=this.orbitRadius;return{top:"50%",left:"50%",transform:`translate(-50%, -50%) rotate(${t}deg) translateX(${s}px)`}},handleImageError(){const e=this.$el?.querySelector(".center-logo");e&&(e.style.display="none")}}},i=s(1241);const n=(0,i.A)(l,[["render",o],["__scopeId","data-v-088d0f9c"]]);var d=n}}]);
//# sourceMappingURL=6684.26bcad1d.js.map